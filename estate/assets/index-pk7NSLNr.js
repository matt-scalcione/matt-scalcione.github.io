var Qu=Object.defineProperty;var Ql=e=>{throw TypeError(e)};var Ju=(e,s,i)=>s in e?Qu(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i;var xr=(e,s,i)=>Ju(e,typeof s!="symbol"?s+"":s,i),bo=(e,s,i)=>s.has(e)||Ql("Cannot "+i);var tt=(e,s,i)=>(bo(e,s,"read from private field"),i?i.call(e):s.get(e)),cn=(e,s,i)=>s.has(e)?Ql("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,i),dn=(e,s,i,a)=>(bo(e,s,"write to private field"),a?a.call(e,i):s.set(e,i),i),Yt=(e,s,i)=>(bo(e,s,"access private method"),i);var ps=(e,s,i,a)=>({set _(o){dn(e,s,o,i)},get _(){return tt(e,s,a)}});(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var s=e.default;if(typeof s=="function"){var i=function a(){return this instanceof a?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,s,i){var a,o={},c=null,h=null;if(s!=null)for(a in s.ref!==void 0&&(h=s.ref),s.key!==void 0&&(c=""+s.key),s)J.call(s,a)&&!L$1.hasOwnProperty(a)&&(o[a]=s[a]);var j=arguments.length-2;if(j===1)o.children=i;else if(1<j){for(var b=Array(j),_=0;_<j;_++)b[_]=arguments[_+2];o.children=b}if(e&&e.defaultProps)for(a in j=e.defaultProps,j)o[a]===void 0&&(o[a]=j[a]);return{$$typeof:l$1,type:e,key:c,ref:h,props:o,_owner:K$1.current}}function N$1(e,s){return{$$typeof:l$1,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape$1(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return s[i]})}var P$1=/\/+/g;function Q$1(e,s){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):s.toString(36)}function R$1(e,s,i,a,o){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(c){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:h=!0}}if(h)return h=e,o=o(h),e=a===""?"."+Q$1(h,0):a,I$1(o)?(i="",e!=null&&(i=e.replace(P$1,"$&/")+"/"),R$1(o,s,i,"",function(_){return _})):o!=null&&(O$1(o)&&(o=N$1(o,i+(!o.key||h&&h.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+e)),s.push(o)),1;if(h=0,a=a===""?".":a+":",I$1(e))for(var j=0;j<e.length;j++){c=e[j];var b=a+Q$1(c,j);h+=R$1(c,s,i,b,o)}else if(b=A$1(e),typeof b=="function")for(e=b.call(e),j=0;!(c=e.next()).done;)c=c.value,b=a+Q$1(c,j++),h+=R$1(c,s,i,b,o);else if(c==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return h}function S$1(e,s,i){if(e==null)return e;var a=[],o=0;return R$1(e,a,"","",function(c){return s.call(i,c,o++)}),a}function T$1(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,s,i){S$1(e,function(){s.apply(this,arguments)},i)},count:function(e){var s=0;return S$1(e,function(){s++}),s},toArray:function(e){return S$1(e,function(s){return s})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(e,s,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$1({},e.props),o=e.key,c=e.ref,h=e._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,h=K$1.current),s.key!==void 0&&(o=""+s.key),e.type&&e.type.defaultProps)var j=e.type.defaultProps;for(b in s)J.call(s,b)&&!L$1.hasOwnProperty(b)&&(a[b]=s[b]===void 0&&j!==void 0?j[b]:s[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){j=Array(b);for(var _=0;_<b;_++)j[_]=arguments[_+2];a.children=j}return{$$typeof:l$1,type:e.type,key:o,ref:c,props:a,_owner:h}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var s=M$1.bind(null,e);return s.type=e,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,s){return{$$typeof:x,type:e,compare:s===void 0?null:s}};react_production_min.startTransition=function(e){var s=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=s}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(e,s){return U$1.current.useCallback(e,s)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,s){return U$1.current.useEffect(e,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,s,i){return U$1.current.useImperativeHandle(e,s,i)};react_production_min.useInsertionEffect=function(e,s){return U$1.current.useInsertionEffect(e,s)};react_production_min.useLayoutEffect=function(e,s){return U$1.current.useLayoutEffect(e,s)};react_production_min.useMemo=function(e,s){return U$1.current.useMemo(e,s)};react_production_min.useReducer=function(e,s,i){return U$1.current.useReducer(e,s,i)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,s,i){return U$1.current.useSyncExternalStore(e,s,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,i){var a,o={},c=null,h=null;i!==void 0&&(c=""+i),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(h=s.ref);for(a in s)m$1.call(s,a)&&!p$1.hasOwnProperty(a)&&(o[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps,s)o[a]===void 0&&(o[a]=s[a]);return{$$typeof:k,type:e,key:c,ref:h,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s($t,kt){var Ft=$t.length;$t.push(kt);e:for(;0<Ft;){var Gt=Ft-1>>>1,At=$t[Gt];if(0<o(At,kt))$t[Gt]=kt,$t[Ft]=At,Ft=Gt;else break e}}function i($t){return $t.length===0?null:$t[0]}function a($t){if($t.length===0)return null;var kt=$t[0],Ft=$t.pop();if(Ft!==kt){$t[0]=Ft;e:for(var Gt=0,At=$t.length,it=At>>>1;Gt<it;){var dt=2*(Gt+1)-1,_t=$t[dt],Tt=dt+1,Dt=$t[Tt];if(0>o(_t,Ft))Tt<At&&0>o(Dt,_t)?($t[Gt]=Dt,$t[Tt]=Ft,Gt=Tt):($t[Gt]=_t,$t[dt]=Ft,Gt=dt);else if(Tt<At&&0>o(Dt,Ft))$t[Gt]=Dt,$t[Tt]=Ft,Gt=Tt;else break e}}return kt}function o($t,kt){var Ft=$t.sortIndex-kt.sortIndex;return Ft!==0?Ft:$t.id-kt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var h=Date,j=h.now();e.unstable_now=function(){return h.now()-j}}var b=[],_=[],$=1,at=null,rt=3,ut=!1,ot=!1,vt=!1,bt=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function st($t){for(var kt=i(_);kt!==null;){if(kt.callback===null)a(_);else if(kt.startTime<=$t)a(_),kt.sortIndex=kt.expirationTime,s(b,kt);else break;kt=i(_)}}function gt($t){if(vt=!1,st($t),!ot)if(i(b)!==null)ot=!0,Wt(lt);else{var kt=i(_);kt!==null&&Ut(gt,kt.startTime-$t)}}function lt($t,kt){ot=!1,vt&&(vt=!1,et(mt),mt=-1),ut=!0;var Ft=rt;try{for(st(kt),at=i(b);at!==null&&(!(at.expirationTime>kt)||$t&&!ht());){var Gt=at.callback;if(typeof Gt=="function"){at.callback=null,rt=at.priorityLevel;var At=Gt(at.expirationTime<=kt);kt=e.unstable_now(),typeof At=="function"?at.callback=At:at===i(b)&&a(b),st(kt)}else a(b);at=i(b)}if(at!==null)var it=!0;else{var dt=i(_);dt!==null&&Ut(gt,dt.startTime-kt),it=!1}return it}finally{at=null,rt=Ft,ut=!1}}var yt=!1,ct=null,mt=-1,xt=5,Ct=-1;function ht(){return!(e.unstable_now()-Ct<xt)}function wt(){if(ct!==null){var $t=e.unstable_now();Ct=$t;var kt=!0;try{kt=ct(!0,$t)}finally{kt?jt():(yt=!1,ct=null)}}else yt=!1}var jt;if(typeof nt=="function")jt=function(){nt(wt)};else if(typeof MessageChannel<"u"){var Xt=new MessageChannel,Bt=Xt.port2;Xt.port1.onmessage=wt,jt=function(){Bt.postMessage(null)}}else jt=function(){bt(wt,0)};function Wt($t){ct=$t,yt||(yt=!0,jt())}function Ut($t,kt){mt=bt(function(){$t(e.unstable_now())},kt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($t){$t.callback=null},e.unstable_continueExecution=function(){ot||ut||(ot=!0,Wt(lt))},e.unstable_forceFrameRate=function($t){0>$t||125<$t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xt=0<$t?Math.floor(1e3/$t):5},e.unstable_getCurrentPriorityLevel=function(){return rt},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function($t){switch(rt){case 1:case 2:case 3:var kt=3;break;default:kt=rt}var Ft=rt;rt=kt;try{return $t()}finally{rt=Ft}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($t,kt){switch($t){case 1:case 2:case 3:case 4:case 5:break;default:$t=3}var Ft=rt;rt=$t;try{return kt()}finally{rt=Ft}},e.unstable_scheduleCallback=function($t,kt,Ft){var Gt=e.unstable_now();switch(typeof Ft=="object"&&Ft!==null?(Ft=Ft.delay,Ft=typeof Ft=="number"&&0<Ft?Gt+Ft:Gt):Ft=Gt,$t){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=Ft+At,$t={id:$++,callback:kt,priorityLevel:$t,startTime:Ft,expirationTime:At,sortIndex:-1},Ft>Gt?($t.sortIndex=Ft,s(_,$t),i(b)===null&&$t===i(_)&&(vt?(et(mt),mt=-1):vt=!0,Ut(gt,Ft-Gt))):($t.sortIndex=At,s(b,$t),ot||ut||(ot=!0,Wt(lt))),$t},e.unstable_shouldYield=ht,e.unstable_wrapCallback=function($t){var kt=rt;return function(){var Ft=rt;rt=kt;try{return $t.apply(this,arguments)}finally{rt=Ft}}}})(scheduler_production_min);scheduler$1.exports=scheduler_production_min;var schedulerExports=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,s){ha(e,s),ha(e+"Capture",s)}function ha(e,s){for(ea[e]=s,e=0;e<s.length;e++)da.add(s[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,s,i,a){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,s,i,a){if(s===null||typeof s>"u"||pa(e,s,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(e,s,i,a,o,c,h){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=s,this.sanitizeURL=c,this.removeEmptyString=h}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];z[s]=new v(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,s,i,a){var o=z.hasOwnProperty(s)?z[s]:null;(o!==null?o.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,i,o,a)&&(i=null),a||o===null?oa(s)&&(i===null?e.removeAttribute(s):e.setAttribute(s,""+i)):o.mustUseProperty?e[o.propertyName]=i===null?o.type===3?!1:"":i:(s=o.attributeName,a=o.attributeNamespace,i===null?e.removeAttribute(s):(o=o.type,i=o===3||o===4&&i===!0?"":""+i,a?e.setAttributeNS(a,s,i):e.setAttribute(s,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+e}var Na=!1;function Oa(e,s){if(!e||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(_){var a=_}Reflect.construct(e,[],s)}else{try{s.call()}catch(_){a=_}e.call(s.prototype)}else{try{throw Error()}catch(_){a=_}e()}}catch(_){if(_&&a&&typeof _.stack=="string"){for(var o=_.stack.split(`
`),c=a.stack.split(`
`),h=o.length-1,j=c.length-1;1<=h&&0<=j&&o[h]!==c[j];)j--;for(;1<=h&&0<=j;h--,j--)if(o[h]!==c[j]){if(h!==1||j!==1)do if(h--,j--,0>j||o[h]!==c[j]){var b=`
`+o[h].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=h&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return s=e.displayName||null,s!==null?s:Qa(e.type)||"Memo";case Ha:s=e._payload,e=e._init;try{return Qa(e(s))}catch{}}return null}function Ra(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(e){var s=Ta(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),a=""+e[s];if(!e.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,c=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return o.call(this)},set:function(h){a=""+h,c.call(this,h)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),a="";return e&&(a=Ta(e)?e.checked?"true":"false":e.value),e=a,e!==i?(s.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,s){var i=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Za(e,s){var i=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;i=Sa(s.value!=null?s.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(e,s){s=s.checked,s!=null&&ta(e,"checked",s,!1)}function bb(e,s){ab(e,s);var i=Sa(s.value),a=s.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?cb(e,s.type,i):s.hasOwnProperty("defaultValue")&&cb(e,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function db$1(e,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,i||s===e.value||(e.value=s),e.defaultValue=s}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function cb(e,s,i){(s!=="number"||Xa(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var eb=Array.isArray;function fb(e,s,i,a){if(e=e.options,s){s={};for(var o=0;o<i.length;o++)s["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=s.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Sa(i),s=null,o=0;o<e.length;o++){if(e[o].value===i){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}s!==null||e[o].disabled||(s=e[o])}s!==null&&(s.selected=!0)}}function gb(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}s=i}s==null&&(s=""),i=s}e._wrapperState={initialValue:Sa(i)}}function ib(e,s){var i=Sa(s.value),a=Sa(s.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),s.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function jb(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,a,o){MSApp.execUnsafeLocalFunction(function(){return e(s,i,a,o)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ob(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),pb[s]=pb[e]})});function rb(e,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||pb.hasOwnProperty(e)&&pb[e]?(""+s).trim():s+"px"}function sb(e,s){e=e.style;for(var i in s)if(s.hasOwnProperty(i)){var a=i.indexOf("--")===0,o=rb(i,s[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,o):e[i]=o}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,s){if(s){if(tb[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function vb(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var s=e.stateNode;s&&(s=Db(s),yb(e.stateNode,e.type,s))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,s=Ab;if(Ab=zb=null,Bb(e),s)for(e=0;e<s.length;e++)Bb(s[e])}}function Gb(e,s){return e(s)}function Hb(){}var Ib=!1;function Jb(e,s,i){if(Ib)return e(s,i);Ib=!0;try{return Gb(e,s,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,s){var i=e.stateNode;if(i===null)return null;var a=Db(i);if(a===null)return null;i=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p(231,s,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,s,i,a,o,c,h,j,b){var _=Array.prototype.slice.call(arguments,3);try{s.apply(i,_)}catch($){this.onError($)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,s,i,a,o,c,h,j,b){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,s,i,a,o,c,h,j,b){if(Tb.apply(this,arguments),Ob){if(Ob){var _=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=_)}}function Vb(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function Wb(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var s=e.alternate;if(!s){if(s=Vb(e),s===null)throw Error(p(188));return s!==e?null:e}for(var i=e,a=s;;){var o=i.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){i=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===i)return Xb(o),e;if(c===a)return Xb(o),s;c=c.sibling}throw Error(p(188))}if(i.return!==a.return)i=o,a=c;else{for(var h=!1,j=o.child;j;){if(j===i){h=!0,i=o,a=c;break}if(j===a){h=!0,a=o,i=c;break}j=j.sibling}if(!h){for(j=c.child;j;){if(j===i){h=!0,i=c,a=o;break}if(j===a){h=!0,a=c,i=o;break}j=j.sibling}if(!h)throw Error(p(189))}}if(i.alternate!==a)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?e:s}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=$b(e);if(s!==null)return s;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,s){var i=e.pendingLanes;if(i===0)return 0;var a=0,o=e.suspendedLanes,c=e.pingedLanes,h=i&268435455;if(h!==0){var j=h&~o;j!==0?a=tc(j):(c&=h,c!==0&&(a=tc(c)))}else h=i&~o,h!==0?a=tc(h):c!==0&&(a=tc(c));if(a===0)return 0;if(s!==0&&s!==a&&!(s&o)&&(o=a&-a,c=s&-s,o>=c||o===16&&(c&4194240)!==0))return s;if(a&4&&(a|=i&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=a;0<s;)i=31-oc(s),o=1<<i,a|=e[i],s&=~o;return a}function vc(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,s){for(var i=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes;0<c;){var h=31-oc(c),j=1<<h,b=o[h];b===-1?(!(j&i)||j&a)&&(o[h]=vc(j,s)):b<=s&&(e.expiredLanes|=j),c&=~j}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function Ac(e,s,i){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-oc(s),e[s]=i}function Bc(e,s){var i=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var o=31-oc(i),c=1<<o;s[o]=0,a[o]=-1,e[o]=-1,i&=~c}}function Cc(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var a=31-oc(i),o=1<<a;o&s|e[a]&s&&(e[a]|=s),i&=~o}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,s){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(e,s,i,a,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:s,domEventName:i,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),e):(e.eventSystemFlags|=a,s=e.targetContainers,o!==null&&s.indexOf(o)===-1&&s.push(o),e)}function Uc(e,s,i,a,o){switch(s){case"focusin":return Lc=Tc(Lc,e,s,i,a,o),!0;case"dragenter":return Mc=Tc(Mc,e,s,i,a,o),!0;case"mouseover":return Nc=Tc(Nc,e,s,i,a,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,s,i,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,s,i,a,o)),!0}return!1}function Vc(e){var s=Wc(e.target);if(s!==null){var i=Vb(s);if(i!==null){if(s=i.tag,s===13){if(s=Wb(i),s!==null){e.blockedOn=s,Ic(e.priority,function(){Gc(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Yc(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);wb=a,i.target.dispatchEvent(a),wb=null}else return s=Cb(i),s!==null&&Fc(s),e.blockedOn=i,!1;s.shift()}return!0}function Zc(e,s,i){Xc(e)&&i.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,s){e.blockedOn===s&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function s(o){return ad(o,e)}if(0<Kc.length){ad(Kc[0],e);for(var i=1;i<Kc.length;i++){var a=Kc[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(s),Pc.forEach(s),i=0;i<Qc.length;i++)a=Qc[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,s,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,s,i,a)}finally{C=o,cd.transition=c}}function gd(e,s,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,s,i,a)}finally{C=o,cd.transition=c}}function fd(e,s,i,a){if(dd){var o=Yc(e,s,i,a);if(o===null)hd(e,s,a,id,i),Sc(e,a);else if(Uc(o,e,s,i,a))a.stopPropagation();else if(Sc(e,a),s&4&&-1<Rc.indexOf(e)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(e,s,i,a),c===null&&hd(e,s,a,id,i),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd(e,s,a,null,i)}}var id=null;function Yc(e,s,i,a){if(id=null,e=xb(a),e=Wc(e),e!==null)if(s=Vb(e),s===null)e=null;else if(i=s.tag,i===13){if(e=Wb(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,s=ld,i=s.length,a,o="value"in kd?kd.value:kd.textContent,c=o.length;for(e=0;e<i&&s[e]===o[e];e++);var h=i-e;for(a=1;a<=h&&s[i-a]===o[c-a];a++);return md=o.slice(e,1<a?1-a:void 0)}function od(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function s(i,a,o,c,h){this._reactName=i,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(i=e[j],this[j]=i?i(c):c[j]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Od[e])?!!s[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var s=Md[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,s){switch(e){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,s){switch(e){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return e=s.data,e===ee&&fe?null:e;default:return null}}function ke(e,s){if(ie)return e==="compositionend"||!ae&&ge(e,s)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!le[e.type]:s==="textarea"}function ne(e,s,i,a){Eb(a),s=oe(s,"onChange"),0<s.length&&(i=new td("onChange","change",null,i,a),e.push({event:i,listeners:s}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var s=ue(e);if(Wa(s))return e}function ve(e,s){if(e==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,e,xb(e)),Jb(re,s)}}function Ce(e,s,i){e==="focusin"?(Ae(),pe=s,qe=i,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,s){if(e==="click")return te(s)}function Fe(e,s){if(e==="input"||e==="change")return te(s)}function Ge(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,s){if(He(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),a=Object.keys(s);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var o=i[a];if(!ja.call(s,o)||!He(e[o],s[o]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,s){var i=Je(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=s&&a>=s)return{node:i,offset:s-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Le(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var e=window,s=Xa();s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)e=s.contentWindow;else break;s=Xa(e.document)}return s}function Ne(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Oe(e){var s=Me(),i=e.focusedElem,a=e.selectionRange;if(s!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(a!==null&&Ne(i)){if(s=a.start,e=a.end,e===void 0&&(e=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(e,i.value.length);else if(e=(s=i.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var o=i.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!e.extend&&c>a&&(o=a,a=c,c=o),o=Ke(i,c);var h=Ke(i,a);o&&h&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(s=s.createRange(),s.setStart(o.node,o.offset),e.removeAllRanges(),c>a?(e.addRange(s),e.extend(h.node,h.offset)):(s.setEnd(h.node,h.offset),e.addRange(s)))}}for(s=[],e=i;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)e=s[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,s,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(s=new td("onSelect","select",null,s,i),e.push({event:s,listeners:a}),s.target=Qe)))}function Ve(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var s=We[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in Ye)return Xe[e]=s[i];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,s){df.set(e,s),fa(s,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,s,i){var a=e.type||"unknown-event";e.currentTarget=i,Ub(a,s,void 0,e),e.currentTarget=null}function se(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],o=a.event;a=a.listeners;e:{var c=void 0;if(s)for(var h=a.length-1;0<=h;h--){var j=a[h],b=j.instance,_=j.currentTarget;if(j=j.listener,b!==c&&o.isPropagationStopped())break e;nf(o,j,_),c=b}else for(h=0;h<a.length;h++){if(j=a[h],b=j.instance,_=j.currentTarget,j=j.listener,b!==c&&o.isPropagationStopped())break e;nf(o,j,_),c=b}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,s){var i=s[of];i===void 0&&(i=s[of]=new Set);var a=e+"__bubble";i.has(a)||(pf(s,e,2,!1),i.add(a))}function qf(e,s,i){var a=0;s&&(a|=4),pf(i,e,a,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,e),qf(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(e,s,i,a){switch(jd(s)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}i=o.bind(null,s,i,e),o=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(s,i,{capture:!0,passive:o}):e.addEventListener(s,i,!0):o!==void 0?e.addEventListener(s,i,{passive:o}):e.addEventListener(s,i,!1)}function hd(e,s,i,a,o){var c=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var j=a.stateNode.containerInfo;if(j===o||j.nodeType===8&&j.parentNode===o)break;if(h===4)for(h=a.return;h!==null;){var b=h.tag;if((b===3||b===4)&&(b=h.stateNode.containerInfo,b===o||b.nodeType===8&&b.parentNode===o))return;h=h.return}for(;j!==null;){if(h=Wc(j),h===null)return;if(b=h.tag,b===5||b===6){a=c=h;continue e}j=j.parentNode}}a=a.return}Jb(function(){var _=c,$=xb(i),at=[];e:{var rt=df.get(e);if(rt!==void 0){var ut=td,ot=e;switch(e){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":ut=Rd;break;case"focusin":ot="focus",ut=Fd;break;case"focusout":ot="blur",ut=Fd;break;case"beforeblur":case"afterblur":ut=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Vd;break;case $e:case af:case bf:ut=Hd;break;case cf:ut=Xd;break;case"scroll":ut=vd;break;case"wheel":ut=Zd;break;case"copy":case"cut":case"paste":ut=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Td}var vt=(s&4)!==0,bt=!vt&&e==="scroll",et=vt?rt!==null?rt+"Capture":null:rt;vt=[];for(var nt=_,st;nt!==null;){st=nt;var gt=st.stateNode;if(st.tag===5&&gt!==null&&(st=gt,et!==null&&(gt=Kb(nt,et),gt!=null&&vt.push(tf(nt,gt,st)))),bt)break;nt=nt.return}0<vt.length&&(rt=new ut(rt,ot,null,i,$),at.push({event:rt,listeners:vt}))}}if(!(s&7)){e:{if(rt=e==="mouseover"||e==="pointerover",ut=e==="mouseout"||e==="pointerout",rt&&i!==wb&&(ot=i.relatedTarget||i.fromElement)&&(Wc(ot)||ot[uf]))break e;if((ut||rt)&&(rt=$.window===$?$:(rt=$.ownerDocument)?rt.defaultView||rt.parentWindow:window,ut?(ot=i.relatedTarget||i.toElement,ut=_,ot=ot?Wc(ot):null,ot!==null&&(bt=Vb(ot),ot!==bt||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(ut=null,ot=_),ut!==ot)){if(vt=Bd,gt="onMouseLeave",et="onMouseEnter",nt="mouse",(e==="pointerout"||e==="pointerover")&&(vt=Td,gt="onPointerLeave",et="onPointerEnter",nt="pointer"),bt=ut==null?rt:ue(ut),st=ot==null?rt:ue(ot),rt=new vt(gt,nt+"leave",ut,i,$),rt.target=bt,rt.relatedTarget=st,gt=null,Wc($)===_&&(vt=new vt(et,nt+"enter",ot,i,$),vt.target=st,vt.relatedTarget=bt,gt=vt),bt=gt,ut&&ot)t:{for(vt=ut,et=ot,nt=0,st=vt;st;st=vf(st))nt++;for(st=0,gt=et;gt;gt=vf(gt))st++;for(;0<nt-st;)vt=vf(vt),nt--;for(;0<st-nt;)et=vf(et),st--;for(;nt--;){if(vt===et||et!==null&&vt===et.alternate)break t;vt=vf(vt),et=vf(et)}vt=null}else vt=null;ut!==null&&wf(at,rt,ut,vt,!1),ot!==null&&bt!==null&&wf(at,bt,ot,vt,!0)}}e:{if(rt=_?ue(_):window,ut=rt.nodeName&&rt.nodeName.toLowerCase(),ut==="select"||ut==="input"&&rt.type==="file")var lt=ve;else if(me(rt))if(we)lt=Fe;else{lt=De;var yt=Ce}else(ut=rt.nodeName)&&ut.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(lt=Ee);if(lt&&(lt=lt(e,_))){ne(at,lt,i,$);break e}yt&&yt(e,rt,_),e==="focusout"&&(yt=rt._wrapperState)&&yt.controlled&&rt.type==="number"&&cb(rt,"number",rt.value)}switch(yt=_?ue(_):window,e){case"focusin":(me(yt)||yt.contentEditable==="true")&&(Qe=yt,Re=_,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(at,i,$);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(at,i,$)}var ct;if(ae)e:{switch(e){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else ie?ge(e,i)&&(mt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(mt="onCompositionStart");mt&&(de&&i.locale!=="ko"&&(ie||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&ie&&(ct=nd()):(kd=$,ld="value"in kd?kd.value:kd.textContent,ie=!0)),yt=oe(_,mt),0<yt.length&&(mt=new Ld(mt,e,null,i,$),at.push({event:mt,listeners:yt}),ct?mt.data=ct:(ct=he(i),ct!==null&&(mt.data=ct)))),(ct=ce?je(e,i):ke(e,i))&&(_=oe(_,"onBeforeInput"),0<_.length&&($=new Ld("onBeforeInput","beforeinput",null,i,$),at.push({event:$,listeners:_}),$.data=ct))}se(at,s)})}function tf(e,s,i){return{instance:e,listener:s,currentTarget:i}}function oe(e,s){for(var i=s+"Capture",a=[];e!==null;){var o=e,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(e,i),c!=null&&a.unshift(tf(e,c,o)),c=Kb(e,s),c!=null&&a.push(tf(e,c,o))),e=e.return}return a}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,s,i,a,o){for(var c=s._reactName,h=[];i!==null&&i!==a;){var j=i,b=j.alternate,_=j.stateNode;if(b!==null&&b===a)break;j.tag===5&&_!==null&&(j=_,o?(b=Kb(i,c),b!=null&&h.unshift(tf(i,b,j))):o||(b=Kb(i,c),b!=null&&h.push(tf(i,b,j)))),i=i.return}h.length!==0&&e.push({event:s,listeners:h})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,s,i){if(s=zf(s),zf(e)!==s&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,s){var i=s,a=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(a===0){e.removeChild(o),bd(s);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=o}while(i);bd(s)}function Lf(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var s=e[Of];if(s)return s;for(var i=e.parentNode;i;){if(s=i[uf]||i[Of]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=Mf(e);e!==null;){if(i=e[Of])return i;e=Mf(e)}return s}e=i,i=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,s){Tf++,Sf[Tf]=e.current,e.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,s){var i=e.type.contextTypes;if(!i)return Vf;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in i)o[c]=s[c];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,s,i){if(H.current!==Vf)throw Error(p(168));G(H,s),G(Wf,i)}function bg(e,s,i){var a=e.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var o in a)if(!(o in s))throw Error(p(108,Ra(e)||"Unknown",o));return A({},i,a)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,s,i){var a=e.stateNode;if(!a)throw Error(p(169));i?(e=bg(e,s,Xf),a.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,s=C;try{var i=eg;for(C=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),o}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,s){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=s}function ug(e,s,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var a=rg;e=sg;var o=32-oc(a)-1;a&=~(1<<o),i+=1;var c=32-oc(s)+o;if(30<c){var h=o-o%5;c=(a&(1<<h)-1).toString(32),a>>=h,o-=h,rg=1<<32-oc(s)+o|i<<o|a,sg=c+e}else rg=1<<c|i<<o|a,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,s){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=e,s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)}function Cg(e,s){switch(e.tag){case 5:var i=e.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xg=e,yg=Lf(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xg=e,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=s,i.return=e,e.child=i,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var s=yg;if(s){var i=s;if(!Cg(e,s)){if(Dg(e))throw Error(p(418));s=Lf(i.nextSibling);var a=xg;s&&Cg(e,s)?Ag(a,i):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ef(e.type,e.memoizedProps)),s&&(s=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;s;)Ag(e,s),s=Lf(s.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(s===0){yg=Lf(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,s,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var a=i.stateNode}if(!a)throw Error(p(147,e));var o=a,c=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(h){var j=o.refs;h===null?delete j[c]:j[c]=h},s._stringRef=c,s)}if(typeof e!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,e))}return e}function Mg(e,s){throw e=Object.prototype.toString.call(s),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ng(e){var s=e._init;return s(e._payload)}function Og(e){function s(et,nt){if(e){var st=et.deletions;st===null?(et.deletions=[nt],et.flags|=16):st.push(nt)}}function i(et,nt){if(!e)return null;for(;nt!==null;)s(et,nt),nt=nt.sibling;return null}function a(et,nt){for(et=new Map;nt!==null;)nt.key!==null?et.set(nt.key,nt):et.set(nt.index,nt),nt=nt.sibling;return et}function o(et,nt){return et=Pg(et,nt),et.index=0,et.sibling=null,et}function c(et,nt,st){return et.index=st,e?(st=et.alternate,st!==null?(st=st.index,st<nt?(et.flags|=2,nt):st):(et.flags|=2,nt)):(et.flags|=1048576,nt)}function h(et){return e&&et.alternate===null&&(et.flags|=2),et}function j(et,nt,st,gt){return nt===null||nt.tag!==6?(nt=Qg(st,et.mode,gt),nt.return=et,nt):(nt=o(nt,st),nt.return=et,nt)}function b(et,nt,st,gt){var lt=st.type;return lt===ya?$(et,nt,st.props.children,gt,st.key):nt!==null&&(nt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&Ng(lt)===nt.type)?(gt=o(nt,st.props),gt.ref=Lg(et,nt,st),gt.return=et,gt):(gt=Rg(st.type,st.key,st.props,null,et.mode,gt),gt.ref=Lg(et,nt,st),gt.return=et,gt)}function _(et,nt,st,gt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==st.containerInfo||nt.stateNode.implementation!==st.implementation?(nt=Sg(st,et.mode,gt),nt.return=et,nt):(nt=o(nt,st.children||[]),nt.return=et,nt)}function $(et,nt,st,gt,lt){return nt===null||nt.tag!==7?(nt=Tg(st,et.mode,gt,lt),nt.return=et,nt):(nt=o(nt,st),nt.return=et,nt)}function at(et,nt,st){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=Qg(""+nt,et.mode,st),nt.return=et,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case va:return st=Rg(nt.type,nt.key,nt.props,null,et.mode,st),st.ref=Lg(et,null,nt),st.return=et,st;case wa:return nt=Sg(nt,et.mode,st),nt.return=et,nt;case Ha:var gt=nt._init;return at(et,gt(nt._payload),st)}if(eb(nt)||Ka(nt))return nt=Tg(nt,et.mode,st,null),nt.return=et,nt;Mg(et,nt)}return null}function rt(et,nt,st,gt){var lt=nt!==null?nt.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return lt!==null?null:j(et,nt,""+st,gt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return st.key===lt?b(et,nt,st,gt):null;case wa:return st.key===lt?_(et,nt,st,gt):null;case Ha:return lt=st._init,rt(et,nt,lt(st._payload),gt)}if(eb(st)||Ka(st))return lt!==null?null:$(et,nt,st,gt,null);Mg(et,st)}return null}function ut(et,nt,st,gt,lt){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return et=et.get(st)||null,j(nt,et,""+gt,lt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case va:return et=et.get(gt.key===null?st:gt.key)||null,b(nt,et,gt,lt);case wa:return et=et.get(gt.key===null?st:gt.key)||null,_(nt,et,gt,lt);case Ha:var yt=gt._init;return ut(et,nt,st,yt(gt._payload),lt)}if(eb(gt)||Ka(gt))return et=et.get(st)||null,$(nt,et,gt,lt,null);Mg(nt,gt)}return null}function ot(et,nt,st,gt){for(var lt=null,yt=null,ct=nt,mt=nt=0,xt=null;ct!==null&&mt<st.length;mt++){ct.index>mt?(xt=ct,ct=null):xt=ct.sibling;var Ct=rt(et,ct,st[mt],gt);if(Ct===null){ct===null&&(ct=xt);break}e&&ct&&Ct.alternate===null&&s(et,ct),nt=c(Ct,nt,mt),yt===null?lt=Ct:yt.sibling=Ct,yt=Ct,ct=xt}if(mt===st.length)return i(et,ct),I&&tg(et,mt),lt;if(ct===null){for(;mt<st.length;mt++)ct=at(et,st[mt],gt),ct!==null&&(nt=c(ct,nt,mt),yt===null?lt=ct:yt.sibling=ct,yt=ct);return I&&tg(et,mt),lt}for(ct=a(et,ct);mt<st.length;mt++)xt=ut(ct,et,mt,st[mt],gt),xt!==null&&(e&&xt.alternate!==null&&ct.delete(xt.key===null?mt:xt.key),nt=c(xt,nt,mt),yt===null?lt=xt:yt.sibling=xt,yt=xt);return e&&ct.forEach(function(ht){return s(et,ht)}),I&&tg(et,mt),lt}function vt(et,nt,st,gt){var lt=Ka(st);if(typeof lt!="function")throw Error(p(150));if(st=lt.call(st),st==null)throw Error(p(151));for(var yt=lt=null,ct=nt,mt=nt=0,xt=null,Ct=st.next();ct!==null&&!Ct.done;mt++,Ct=st.next()){ct.index>mt?(xt=ct,ct=null):xt=ct.sibling;var ht=rt(et,ct,Ct.value,gt);if(ht===null){ct===null&&(ct=xt);break}e&&ct&&ht.alternate===null&&s(et,ct),nt=c(ht,nt,mt),yt===null?lt=ht:yt.sibling=ht,yt=ht,ct=xt}if(Ct.done)return i(et,ct),I&&tg(et,mt),lt;if(ct===null){for(;!Ct.done;mt++,Ct=st.next())Ct=at(et,Ct.value,gt),Ct!==null&&(nt=c(Ct,nt,mt),yt===null?lt=Ct:yt.sibling=Ct,yt=Ct);return I&&tg(et,mt),lt}for(ct=a(et,ct);!Ct.done;mt++,Ct=st.next())Ct=ut(ct,et,mt,Ct.value,gt),Ct!==null&&(e&&Ct.alternate!==null&&ct.delete(Ct.key===null?mt:Ct.key),nt=c(Ct,nt,mt),yt===null?lt=Ct:yt.sibling=Ct,yt=Ct);return e&&ct.forEach(function(wt){return s(et,wt)}),I&&tg(et,mt),lt}function bt(et,nt,st,gt){if(typeof st=="object"&&st!==null&&st.type===ya&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case va:e:{for(var lt=st.key,yt=nt;yt!==null;){if(yt.key===lt){if(lt=st.type,lt===ya){if(yt.tag===7){i(et,yt.sibling),nt=o(yt,st.props.children),nt.return=et,et=nt;break e}}else if(yt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&Ng(lt)===yt.type){i(et,yt.sibling),nt=o(yt,st.props),nt.ref=Lg(et,yt,st),nt.return=et,et=nt;break e}i(et,yt);break}else s(et,yt);yt=yt.sibling}st.type===ya?(nt=Tg(st.props.children,et.mode,gt,st.key),nt.return=et,et=nt):(gt=Rg(st.type,st.key,st.props,null,et.mode,gt),gt.ref=Lg(et,nt,st),gt.return=et,et=gt)}return h(et);case wa:e:{for(yt=st.key;nt!==null;){if(nt.key===yt)if(nt.tag===4&&nt.stateNode.containerInfo===st.containerInfo&&nt.stateNode.implementation===st.implementation){i(et,nt.sibling),nt=o(nt,st.children||[]),nt.return=et,et=nt;break e}else{i(et,nt);break}else s(et,nt);nt=nt.sibling}nt=Sg(st,et.mode,gt),nt.return=et,et=nt}return h(et);case Ha:return yt=st._init,bt(et,nt,yt(st._payload),gt)}if(eb(st))return ot(et,nt,st,gt);if(Ka(st))return vt(et,nt,st,gt);Mg(et,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,nt!==null&&nt.tag===6?(i(et,nt.sibling),nt=o(nt,st),nt.return=et,et=nt):(i(et,nt),nt=Qg(st,et.mode,gt),nt.return=et,et=nt),h(et)):i(et,nt)}return bt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var s=Wg.current;E(Wg),e._currentValue=s}function bh(e,s,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),e===i)break;e=e.return}}function ch(e,s){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(dh=!0),e.firstContext=null)}function eh(e){var s=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return s}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,s,i,a){var o=s.interleaved;return o===null?(i.next=i,gh(s)):(i.next=o.next,o.next=i),s.interleaved=i,ih(e,a)}function ih(e,s){e.lanes|=s;var i=e.alternate;for(i!==null&&(i.lanes|=s),i=e,e=e.return;e!==null;)e.childLanes|=s,i=e.alternate,i!==null&&(i.childLanes|=s),i=e,e=e.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(e,s,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var o=a.pending;return o===null?s.next=s:(s.next=o.next,o.next=s),a.pending=s,ih(e,i)}return o=a.interleaved,o===null?(s.next=s,gh(a)):(s.next=o.next,o.next=s),a.interleaved=s,ih(e,i)}function oh(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var a=s.lanes;a&=e.pendingLanes,i|=a,s.lanes=i,Cc(e,i)}}function ph(e,s){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var o=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var h={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?o=c=h:c=c.next=h,i=i.next}while(i!==null);c===null?o=c=s:c=c.next=s}else o=c=s;i={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}function qh(e,s,i,a){var o=e.updateQueue;jh=!1;var c=o.firstBaseUpdate,h=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var b=j,_=b.next;b.next=null,h===null?c=_:h.next=_,h=b;var $=e.alternate;$!==null&&($=$.updateQueue,j=$.lastBaseUpdate,j!==h&&(j===null?$.firstBaseUpdate=_:j.next=_,$.lastBaseUpdate=b))}if(c!==null){var at=o.baseState;h=0,$=_=b=null,j=c;do{var rt=j.lane,ut=j.eventTime;if((a&rt)===rt){$!==null&&($=$.next={eventTime:ut,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ot=e,vt=j;switch(rt=s,ut=i,vt.tag){case 1:if(ot=vt.payload,typeof ot=="function"){at=ot.call(ut,at,rt);break e}at=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=vt.payload,rt=typeof ot=="function"?ot.call(ut,at,rt):ot,rt==null)break e;at=A({},at,rt);break e;case 2:jh=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,rt=o.effects,rt===null?o.effects=[j]:rt.push(j))}else ut={eventTime:ut,lane:rt,tag:j.tag,payload:j.payload,callback:j.callback,next:null},$===null?(_=$=ut,b=at):$=$.next=ut,h|=rt;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;rt=j,j=rt.next,rt.next=null,o.lastBaseUpdate=rt,o.shared.pending=null}}while(!0);if($===null&&(b=at),o.baseState=b,o.firstBaseUpdate=_,o.lastBaseUpdate=$,s=o.shared.interleaved,s!==null){o=s;do h|=o.lane,o=o.next;while(o!==s)}else c===null&&(o.shared.lanes=0);rh|=h,e.lanes=h,e.memoizedState=at}}function sh(e,s,i){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var a=e[s],o=a.callback;if(o!==null){if(a.callback=null,a=i,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,s){switch(G(wh,s),G(vh,e),G(uh,th),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lb(s,e)}E(uh),G(uh,s)}function zh(){E(uh),E(vh),E(wh)}function Ah(e){xh(wh.current);var s=xh(uh.current),i=lb(s,e.type);s!==i&&(G(vh,e),G(uh,i))}function Bh(e){vh.current===e&&(E(uh),E(vh))}var L=Uf(0);function Ch(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!He(e[i],s[i]))return!1;return!0}function Nh(e,s,i,a,o,c){if(Hh=c,M=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=i(a,o),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,s.updateQueue=null,Fh.current=Qh,e=i(a,o)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,s)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var s=O===null?M.memoizedState:O.next;if(s!==null)O=s,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,s){return typeof s=="function"?s(e):s}function Wh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var a=N,o=a.baseQueue,c=i.pending;if(c!==null){if(o!==null){var h=o.next;o.next=c.next,c.next=h}a.baseQueue=o=c,i.pending=null}if(o!==null){c=o.next,a=a.baseState;var j=h=null,b=null,_=c;do{var $=_.lane;if((Hh&$)===$)b!==null&&(b=b.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),a=_.hasEagerState?_.eagerState:e(a,_.action);else{var at={lane:$,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};b===null?(j=b=at,h=a):b=b.next=at,M.lanes|=$,rh|=$}_=_.next}while(_!==null&&_!==c);b===null?h=a:b.next=j,He(a,s.memoizedState)||(dh=!0),s.memoizedState=a,s.baseState=h,s.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){o=e;do c=o.lane,M.lanes|=c,rh|=c,o=o.next;while(o!==e)}else o===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function Xh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var a=i.dispatch,o=i.pending,c=s.memoizedState;if(o!==null){i.pending=null;var h=o=o.next;do c=e(c,h.action),h=h.next;while(h!==o);He(c,s.memoizedState)||(dh=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),i.lastRenderedState=c}return[c,a]}function Yh(){}function Zh(e,s){var i=M,a=Uh(),o=s(),c=!He(a.memoizedState,o);if(c&&(a.memoizedState=o,dh=!0),a=a.queue,$h(ai.bind(null,i,a,e),[e]),a.getSnapshot!==s||c||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,a,o,s),void 0,null),Q===null)throw Error(p(349));Hh&30||di(i,s,o)}return o}function di(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function ci(e,s,i,a){s.value=i,s.getSnapshot=a,ei(s)&&fi(e)}function ai(e,s,i){return i(function(){ei(s)&&fi(e)})}function ei(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!He(e,i)}catch{return!0}}function fi(e){var s=ih(e,1);s!==null&&gi(s,e,1,-1)}function hi(e){var s=Th();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},s.queue=e,e=e.dispatch=ii.bind(null,M,e),[s.memoizedState,e]}function bi(e,s,i,a){return e={tag:e,create:s,destroy:i,deps:a,next:null},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.lastEffect=e.next=e):(i=s.lastEffect,i===null?s.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,s.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,s,i,a){var o=Th();M.flags|=e,o.memoizedState=bi(1|s,i,void 0,a===void 0?null:a)}function li(e,s,i,a){var o=Uh();a=a===void 0?null:a;var c=void 0;if(N!==null){var h=N.memoizedState;if(c=h.destroy,a!==null&&Mh(a,h.deps)){o.memoizedState=bi(s,i,c,a);return}}M.flags|=e,o.memoizedState=bi(1|s,i,c,a)}function mi(e,s){return ki(8390656,8,e,s)}function $h(e,s){return li(2048,8,e,s)}function ni(e,s){return li(4,2,e,s)}function oi(e,s){return li(4,4,e,s)}function pi(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function qi(e,s,i){return i=i!=null?i.concat([e]):null,li(4,4,pi.bind(null,s,e),i)}function ri(){}function si(e,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(i.memoizedState=[e,s],e)}function ti(e,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(e=e(),i.memoizedState=[e,s],e)}function ui(e,s,i){return Hh&21?(He(i,s)||(i=yc(),M.lanes|=i,rh|=i,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=i)}function vi(e,s){var i=C;C=i!==0&&4>i?i:4,e(!0);var a=Gh.transition;Gh.transition={};try{e(!1),s()}finally{C=i,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(e,s,i){var a=yi(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(s,i);else if(i=hh(e,s,i,a),i!==null){var o=R();gi(i,e,a,o),Bi(i,s,a)}}function ii(e,s,i){var a=yi(e),o={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(s,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var h=s.lastRenderedState,j=c(h,i);if(o.hasEagerState=!0,o.eagerState=j,He(j,h)){var b=s.interleaved;b===null?(o.next=o,gh(s)):(o.next=b.next,b.next=o),s.interleaved=o;return}}catch{}finally{}i=hh(e,s,o,a),i!==null&&(o=R(),gi(i,e,a,o),Bi(i,s,a))}}function zi(e){var s=e.alternate;return e===M||s!==null&&s===M}function Ai(e,s){Jh=Ih=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Bi(e,s,i){if(i&4194240){var a=s.lanes;a&=e.pendingLanes,i|=a,s.lanes=i,Cc(e,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,s){return Th().memoizedState=[e,s===void 0?null:s],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,s,i){return i=i!=null?i.concat([e]):null,ki(4194308,4,pi.bind(null,s,e),i)},useLayoutEffect:function(e,s){return ki(4194308,4,e,s)},useInsertionEffect:function(e,s){return ki(4,2,e,s)},useMemo:function(e,s){var i=Th();return s=s===void 0?null:s,e=e(),i.memoizedState=[e,s],e},useReducer:function(e,s,i){var a=Th();return s=i!==void 0?i(s):s,a.memoizedState=a.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=xi.bind(null,M,e),[a.memoizedState,e]},useRef:function(e){var s=Th();return e={current:e},s.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),s=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,i){var a=M,o=Th();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=s(),Q===null)throw Error(p(349));Hh&30||di(a,s,i)}o.memoizedState=i;var c={value:i,getSnapshot:s};return o.queue=c,mi(ai.bind(null,a,c,e),[e]),a.flags|=2048,bi(9,ci.bind(null,a,c,i,s),void 0,null),i},useId:function(){var e=Th(),s=Q.identifierPrefix;if(I){var i=sg,a=rg;i=(a&~(1<<32-oc(a)-1)).toString(32)+i,s=":"+s+"R"+i,i=Kh++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=Lh++,s=":"+s+"r"+i.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return ui(s,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return N===null?s.memoizedState=e:ui(s,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,s){if(e&&e.defaultProps){s=A({},s),e=e.defaultProps;for(var i in e)s[i]===void 0&&(s[i]=e[i]);return s}return s}function Di(e,s,i,a){s=e.memoizedState,i=i(a,s),i=i==null?s:A({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,s,i){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,o),s!==null&&(gi(s,e,o,a),oh(s,e,o))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.tag=1,c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,o),s!==null&&(gi(s,e,o,a),oh(s,e,o))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=R(),a=yi(e),o=mh(i,a);o.tag=2,s!=null&&(o.callback=s),s=nh(e,o,a),s!==null&&(gi(s,e,a,i),oh(s,e,a))}};function Fi(e,s,i,a,o,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,h):s.prototype&&s.prototype.isPureReactComponent?!Ie(i,a)||!Ie(o,c):!0}function Gi(e,s,i){var a=!1,o=Vf,c=s.contextType;return typeof c=="object"&&c!==null?c=eh(c):(o=Zf(s)?Xf:H.current,a=s.contextTypes,c=(a=a!=null)?Yf(e,o):Vf),s=new s(i,c),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,e.stateNode=s,s._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=c),s}function Hi(e,s,i,a){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,a),s.state!==e&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(e,s,i,a){var o=e.stateNode;o.props=i,o.state=e.memoizedState,o.refs={},kh(e);var c=s.contextType;typeof c=="object"&&c!==null?o.context=eh(c):(c=Zf(s)?Xf:H.current,o.context=Yf(e,c)),o.state=e.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Di(e,s,c,i),o.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(s=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),s!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(e,i,o,a),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,s){try{var i="",a=s;do i+=Pa(a),a=a.return;while(a);var o=i}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:s,stack:o,digest:null}}function Ki(e,s,i){return{value:e,source:null,stack:i??null,digest:s??null}}function Li(e,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,s,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var a=s.value;return i.callback=function(){Oi||(Oi=!0,Pi=a),Li(e,s)},i}function Qi(e,s,i){i=mh(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var o=s.value;i.payload=function(){return a(o)},i.callback=function(){Li(e,s)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Li(e,s),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var h=s.stack;this.componentDidCatch(s.value,{componentStack:h!==null?h:""})}),i}function Si(e,s,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Mi;var o=new Set;a.set(s,o)}else o=a.get(s),o===void 0&&(o=new Set,a.set(s,o));o.has(i)||(o.add(i),e=Ti.bind(null,e,s,i),s.then(e,e))}function Ui(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Vi(e,s,i,a,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===s?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=mh(-1,1),s.tag=2,nh(i,s,1))),i.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,s,i,a){s.child=e===null?Vg(s,null,i,a):Ug(s,e.child,i,a)}function Yi(e,s,i,a,o){i=i.render;var c=s.ref;return ch(s,o),a=Nh(e,s,i,a,c,o),i=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~o,Zi(e,s,o)):(I&&i&&vg(s),s.flags|=1,Xi(e,s,a,o),s.child)}function $i(e,s,i,a,o){if(e===null){var c=i.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=c,bj(e,s,c,a,o)):(e=Rg(i.type,null,a,s,s.mode,o),e.ref=s.ref,e.return=s,s.child=e)}if(c=e.child,!(e.lanes&o)){var h=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(h,a)&&e.ref===s.ref)return Zi(e,s,o)}return s.flags|=1,e=Pg(c,a),e.ref=s.ref,e.return=s,s.child=e}function bj(e,s,i,a,o){if(e!==null){var c=e.memoizedProps;if(Ie(c,a)&&e.ref===s.ref)if(dh=!1,s.pendingProps=a=c,(e.lanes&o)!==0)e.flags&131072&&(dh=!0);else return s.lanes=e.lanes,Zi(e,s,o)}return cj(e,s,i,a,o)}function dj(e,s,i){var a=s.pendingProps,o=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return e=c!==null?c.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:i,G(ej,fj),fj|=a}else c!==null?(a=c.baseLanes|i,s.memoizedState=null):a=i,G(ej,fj),fj|=a;return Xi(e,s,o,i),s.child}function gj(e,s){var i=s.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function cj(e,s,i,a,o){var c=Zf(i)?Xf:H.current;return c=Yf(s,c),ch(s,o),i=Nh(e,s,i,a,c,o),a=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~o,Zi(e,s,o)):(I&&a&&vg(s),s.flags|=1,Xi(e,s,i,o),s.child)}function hj(e,s,i,a,o){if(Zf(i)){var c=!0;cg(s)}else c=!1;if(ch(s,o),s.stateNode===null)ij(e,s),Gi(s,i,a),Ii(s,i,a,o),a=!0;else if(e===null){var h=s.stateNode,j=s.memoizedProps;h.props=j;var b=h.context,_=i.contextType;typeof _=="object"&&_!==null?_=eh(_):(_=Zf(i)?Xf:H.current,_=Yf(s,_));var $=i.getDerivedStateFromProps,at=typeof $=="function"||typeof h.getSnapshotBeforeUpdate=="function";at||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(j!==a||b!==_)&&Hi(s,h,a,_),jh=!1;var rt=s.memoizedState;h.state=rt,qh(s,a,h,o),b=s.memoizedState,j!==a||rt!==b||Wf.current||jh?(typeof $=="function"&&(Di(s,i,$,a),b=s.memoizedState),(j=jh||Fi(s,i,j,a,rt,b,_))?(at||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=b),h.props=a,h.state=b,h.context=_,a=j):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{h=s.stateNode,lh(e,s),j=s.memoizedProps,_=s.type===s.elementType?j:Ci(s.type,j),h.props=_,at=s.pendingProps,rt=h.context,b=i.contextType,typeof b=="object"&&b!==null?b=eh(b):(b=Zf(i)?Xf:H.current,b=Yf(s,b));var ut=i.getDerivedStateFromProps;($=typeof ut=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(j!==at||rt!==b)&&Hi(s,h,a,b),jh=!1,rt=s.memoizedState,h.state=rt,qh(s,a,h,o);var ot=s.memoizedState;j!==at||rt!==ot||Wf.current||jh?(typeof ut=="function"&&(Di(s,i,ut,a),ot=s.memoizedState),(_=jh||Fi(s,i,_,a,rt,ot,b)||!1)?($||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,ot,b),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,ot,b)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||j===e.memoizedProps&&rt===e.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&rt===e.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=ot),h.props=a,h.state=ot,h.context=b,a=_):(typeof h.componentDidUpdate!="function"||j===e.memoizedProps&&rt===e.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&rt===e.memoizedState||(s.flags|=1024),a=!1)}return jj(e,s,i,a,c,o)}function jj(e,s,i,a,o,c){gj(e,s);var h=(s.flags&128)!==0;if(!a&&!h)return o&&dg(s,i,!1),Zi(e,s,c);a=s.stateNode,Wi.current=s;var j=h&&typeof i.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,e!==null&&h?(s.child=Ug(s,e.child,null,c),s.child=Ug(s,null,j,c)):Xi(e,s,j,c),s.memoizedState=a.state,o&&dg(s,i,!0),s.child}function kj(e){var s=e.stateNode;s.pendingContext?ag(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(e,s.context,!1),yh(e,s.containerInfo)}function lj(e,s,i,a,o){return Ig(),Jg(o),s.flags|=256,Xi(e,s,i,a),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,s,i){var a=s.pendingProps,o=L.current,c=!1,h=(s.flags&128)!==0,j;if((j=h)||(j=e!==null&&e.memoizedState===null?!1:(o&2)!==0),j?(c=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),G(L,o&1),e===null)return Eg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(h=a.children,e=a.fallback,c?(a=s.mode,c=s.child,h={mode:"hidden",children:h},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=h):c=pj(h,a,0,null),e=Tg(e,a,i,null),c.return=s,e.return=s,c.sibling=e,s.child=c,s.child.memoizedState=nj(i),s.memoizedState=mj,e):qj(s,h));if(o=e.memoizedState,o!==null&&(j=o.dehydrated,j!==null))return rj(e,s,h,a,j,o,i);if(c){c=a.fallback,h=s.mode,o=e.child,j=o.sibling;var b={mode:"hidden",children:a.children};return!(h&1)&&s.child!==o?(a=s.child,a.childLanes=0,a.pendingProps=b,s.deletions=null):(a=Pg(o,b),a.subtreeFlags=o.subtreeFlags&14680064),j!==null?c=Pg(j,c):(c=Tg(c,h,i,null),c.flags|=2),c.return=s,a.return=s,a.sibling=c,s.child=a,a=c,c=s.child,h=e.child.memoizedState,h=h===null?nj(i):{baseLanes:h.baseLanes|i,cachePool:null,transitions:h.transitions},c.memoizedState=h,c.childLanes=e.childLanes&~i,s.memoizedState=mj,a}return c=e.child,e=c.sibling,a=Pg(c,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=i),a.return=s,a.sibling=null,e!==null&&(i=s.deletions,i===null?(s.deletions=[e],s.flags|=16):i.push(e)),s.child=a,s.memoizedState=null,a}function qj(e,s){return s=pj({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function sj(e,s,i,a){return a!==null&&Jg(a),Ug(s,e.child,null,i),e=qj(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rj(e,s,i,a,o,c,h){if(i)return s.flags&256?(s.flags&=-257,a=Ki(Error(p(422))),sj(e,s,h,a)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(c=a.fallback,o=s.mode,a=pj({mode:"visible",children:a.children},o,0,null),c=Tg(c,o,h,null),c.flags|=2,a.return=s,c.return=s,a.sibling=c,s.child=a,s.mode&1&&Ug(s,e.child,null,h),s.child.memoizedState=nj(h),s.memoizedState=mj,c);if(!(s.mode&1))return sj(e,s,h,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var j=a.dgst;return a=j,c=Error(p(419)),a=Ki(c,a,void 0),sj(e,s,h,a)}if(j=(h&e.childLanes)!==0,dh||j){if(a=Q,a!==null){switch(h&-h){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|h)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,ih(e,o),gi(a,e,o,-1))}return tj(),a=Ki(Error(p(421))),sj(e,s,h,a)}return o.data==="$?"?(s.flags|=128,s.child=e.child,s=uj.bind(null,e),o._reactRetry=s,null):(e=c.treeContext,yg=Lf(o.nextSibling),xg=s,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=s),s=qj(s,a.children),s.flags|=4096,s)}function vj(e,s,i){e.lanes|=s;var a=e.alternate;a!==null&&(a.lanes|=s),bh(e.return,s,i)}function wj(e,s,i,a,o){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:o}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=i,c.tailMode=o)}function xj(e,s,i){var a=s.pendingProps,o=a.revealOrder,c=a.tail;if(Xi(e,s,a.children,i),a=L.current,a&2)a=a&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,i,s);else if(e.tag===19)vj(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G(L,a),!(s.mode&1))s.memoizedState=null;else switch(o){case"forwards":for(i=s.child,o=null;i!==null;)e=i.alternate,e!==null&&Ch(e)===null&&(o=i),i=i.sibling;i=o,i===null?(o=s.child,s.child=null):(o=i.sibling,i.sibling=null),wj(s,!1,o,i,c);break;case"backwards":for(i=null,o=s.child,s.child=null;o!==null;){if(e=o.alternate,e!==null&&Ch(e)===null){s.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}wj(s,!0,i,null,c);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Zi(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),rh|=s.lanes,!(i&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(p(153));if(s.child!==null){for(e=s.child,i=Pg(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=Pg(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function yj(e,s,i){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,o=s.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=o;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):i&s.child.childLanes?oj(e,s,i):(G(L,L.current&1),e=Zi(e,s,i),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(a=(i&s.childLanes)!==0,e.flags&128){if(a)return xj(e,s,i);s.flags|=128}if(o=s.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return s.lanes=0,dj(e,s,i)}return Zi(e,s,i)}var zj,Aj,Bj,Cj;zj=function(e,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(e,s,i,a){var o=e.memoizedProps;if(o!==a){e=s.stateNode,xh(uh.current);var c=null;switch(i){case"input":o=Ya(e,o),a=Ya(e,a),c=[];break;case"select":o=A({},o,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":o=gb(e,o),a=gb(e,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf)}ub(i,a);var h;i=null;for(_ in o)if(!a.hasOwnProperty(_)&&o.hasOwnProperty(_)&&o[_]!=null)if(_==="style"){var j=o[_];for(h in j)j.hasOwnProperty(h)&&(i||(i={}),i[h]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?c||(c=[]):(c=c||[]).push(_,null));for(_ in a){var b=a[_];if(j=o!=null?o[_]:void 0,a.hasOwnProperty(_)&&b!==j&&(b!=null||j!=null))if(_==="style")if(j){for(h in j)!j.hasOwnProperty(h)||b&&b.hasOwnProperty(h)||(i||(i={}),i[h]="");for(h in b)b.hasOwnProperty(h)&&j[h]!==b[h]&&(i||(i={}),i[h]=b[h])}else i||(c||(c=[]),c.push(_,i)),i=b;else _==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,j=j?j.__html:void 0,b!=null&&j!==b&&(c=c||[]).push(_,b)):_==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(_,""+b):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(ea.hasOwnProperty(_)?(b!=null&&_==="onScroll"&&D("scroll",e),c||j===b||(c=[])):(c=c||[]).push(_,b))}i&&(c=c||[]).push("style",i);var _=c;(s.updateQueue=_)&&(s.flags|=4)}};Cj=function(e,s,i,a){i!==a&&(s.flags|=4)};function Dj(e,s){if(!I)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(s)for(var o=e.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=i,s}function Ej(e,s,i){var a=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return a=s.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,s),S(s),null;case 5:Bh(s);var o=xh(wh.current);if(i=s.type,e!==null&&s.stateNode!=null)Bj(e,s,i,a,o),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(p(166));return S(s),null}if(e=xh(uh.current),Gg(s)){a=s.stateNode,i=s.type;var c=s.memoizedProps;switch(a[Of]=s,a[Pf]=c,e=(s.mode&1)!==0,i){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb(a,c),D("invalid",a)}ub(i,c),o=null;for(var h in c)if(c.hasOwnProperty(h)){var j=c[h];h==="children"?typeof j=="string"?a.textContent!==j&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,j,e),o=["children",j]):typeof j=="number"&&a.textContent!==""+j&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,j,e),o=["children",""+j]):ea.hasOwnProperty(h)&&j!=null&&h==="onScroll"&&D("scroll",a)}switch(i){case"input":Va(a),db$1(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=o,s.updateQueue=a,a!==null&&(s.flags|=4)}else{h=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=h.createElement(i,{is:a.is}):(e=h.createElement(i),i==="select"&&(h=e,a.multiple?h.multiple=!0:a.size&&(h.size=a.size))):e=h.createElementNS(e,i),e[Of]=s,e[Pf]=a,zj(e,s,!1,!1),s.stateNode=e;e:{switch(h=vb(i,a),i){case"dialog":D("cancel",e),D("close",e),o=a;break;case"iframe":case"object":case"embed":D("load",e),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],e);o=a;break;case"source":D("error",e),o=a;break;case"img":case"image":case"link":D("error",e),D("load",e),o=a;break;case"details":D("toggle",e),o=a;break;case"input":Za(e,a),o=Ya(e,a),D("invalid",e);break;case"option":o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=A({},a,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,a),o=gb(e,a),D("invalid",e);break;default:o=a}ub(i,o),j=o;for(c in j)if(j.hasOwnProperty(c)){var b=j[c];c==="style"?sb(e,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&nb(e,b)):c==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&ob(e,b):typeof b=="number"&&ob(e,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?b!=null&&c==="onScroll"&&D("scroll",e):b!=null&&ta(e,c,b,h))}switch(i){case"input":Va(e),db$1(e,a,!1);break;case"textarea":Va(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa(a.value));break;case"select":e.multiple=!!a.multiple,c=a.value,c!=null?fb(e,!!a.multiple,c,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(e&&s.stateNode!=null)Cj(e,s,e.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(p(166));if(i=xh(wh.current),xh(uh.current),Gg(s)){if(a=s.stateNode,i=s.memoizedProps,a[Of]=s,(c=a.nodeValue!==i)&&(e=xg,e!==null))switch(e.tag){case 3:Af(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,i,(e.mode&1)!==0)}c&&(s.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Of]=s,s.stateNode=a}return S(s),null;case 13:if(E(L),a=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,c=!1;else if(c=Gg(s),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=i,s):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh(),Aj(e,s),e===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(L),c=s.memoizedState,c===null)return S(s),null;if(a=(s.flags&128)!==0,h=c.rendering,h===null)if(a)Dj(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(h=Ch(e),h!==null){for(s.flags|=128,Dj(c,!1),a=h.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=i,i=s.child;i!==null;)c=i,e=a,c.flags&=14680066,h=c.alternate,h===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=h.childLanes,c.lanes=h.lanes,c.child=h.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=h.memoizedProps,c.memoizedState=h.memoizedState,c.updateQueue=h.updateQueue,c.type=h.type,e=h.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return G(L,L.current&1|2),s.child}e=e.sibling}c.tail!==null&&B()>Gj&&(s.flags|=128,a=!0,Dj(c,!1),s.lanes=4194304)}else{if(!a)if(e=Ch(h),e!==null){if(s.flags|=128,a=!0,i=e.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!I)return S(s),null}else 2*B()-c.renderingStartTime>Gj&&i!==1073741824&&(s.flags|=128,a=!0,Dj(c,!1),s.lanes=4194304);c.isBackwards?(h.sibling=s.child,s.child=h):(i=c.last,i!==null?i.sibling=h:s.child=h,c.last=h)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=B(),s.sibling=null,i=L.current,G(L,a?i&1|2:i&1),s):(S(s),null);case 22:case 23:return Hj(),a=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Ij(e,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return zh(),E(Wf),E(H),Eh(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ig()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,s){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){W(e,s,a)}else i.current=null}function Mj(e,s,i){try{i()}catch(a){W(e,s,a)}}var Nj=!1;function Oj(e,s){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var h=0,j=-1,b=-1,_=0,$=0,at=e,rt=null;t:for(;;){for(var ut;at!==i||o!==0&&at.nodeType!==3||(j=h+o),at!==c||a!==0&&at.nodeType!==3||(b=h+a),at.nodeType===3&&(h+=at.nodeValue.length),(ut=at.firstChild)!==null;)rt=at,at=ut;for(;;){if(at===e)break t;if(rt===i&&++_===o&&(j=h),rt===c&&++$===a&&(b=h),(ut=at.nextSibling)!==null)break;at=rt,rt=at.parentNode}at=ut}i=j===-1||b===-1?null:{start:j,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:e,selectionRange:i},dd=!1,V=s;V!==null;)if(s=V,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,V=e;else for(;V!==null;){s=V;try{var ot=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var vt=ot.memoizedProps,bt=ot.memoizedState,et=s.stateNode,nt=et.getSnapshotBeforeUpdate(s.elementType===s.type?vt:Ci(s.type,vt),bt);et.__reactInternalSnapshotBeforeUpdate=nt}break;case 3:var st=s.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(gt){W(s,s.return,gt)}if(e=s.sibling,e!==null){e.return=s.return,V=e;break}V=s.return}return ot=Nj,Nj=!1,ot}function Pj(e,s,i){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&e)===e){var c=o.destroy;o.destroy=void 0,c!==void 0&&Mj(s,i,c)}o=o.next}while(o!==a)}}function Qj(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==s)}}function Rj(e){var s=e.ref;if(s!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof s=="function"?s(e):s.current=e}}function Sj(e){var s=e.alternate;s!==null&&(e.alternate=null,Sj(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,s,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(e,s):i.insertBefore(e,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(e,i)):(s=i,s.appendChild(e)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bf));else if(a!==4&&(e=e.child,e!==null))for(Vj(e,s,i),e=e.sibling;e!==null;)Vj(e,s,i),e=e.sibling}function Wj(e,s,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wj(e,s,i),e=e.sibling;e!==null;)Wj(e,s,i),e=e.sibling}var X$1=null,Xj=!1;function Yj(e,s,i){for(i=i.child;i!==null;)Zj(e,s,i),i=i.sibling}function Zj(e,s,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,s);case 6:var a=X$1,o=Xj;X$1=null,Yj(e,s,i),X$1=a,Xj=o,X$1!==null&&(Xj?(e=X$1,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):X$1.removeChild(i.stateNode));break;case 18:X$1!==null&&(Xj?(e=X$1,i=i.stateNode,e.nodeType===8?Kf(e.parentNode,i):e.nodeType===1&&Kf(e,i),bd(e)):Kf(X$1,i.stateNode));break;case 4:a=X$1,o=Xj,X$1=i.stateNode.containerInfo,Xj=!0,Yj(e,s,i),X$1=a,Xj=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,h=c.destroy;c=c.tag,h!==void 0&&(c&2||c&4)&&Mj(i,s,h),o=o.next}while(o!==a)}Yj(e,s,i);break;case 1:if(!U&&(Lj(i,s),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(j){W(i,s,j)}Yj(e,s,i);break;case 21:Yj(e,s,i);break;case 22:i.mode&1?(U=(a=U)||i.memoizedState!==null,Yj(e,s,i),U=a):Yj(e,s,i);break;default:Yj(e,s,i)}}function ak(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Kj),s.forEach(function(a){var o=bk.bind(null,e,a);i.has(a)||(i.add(a),a.then(o,o))})}}function ck(e,s){var i=s.deletions;if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];try{var c=e,h=s,j=h;e:for(;j!==null;){switch(j.tag){case 5:X$1=j.stateNode,Xj=!1;break e;case 3:X$1=j.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=j.stateNode.containerInfo,Xj=!0;break e}j=j.return}if(X$1===null)throw Error(p(160));Zj(c,h,o),X$1=null,Xj=!1;var b=o.alternate;b!==null&&(b.return=null),o.return=null}catch(_){W(o,s,_)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,e),s=s.sibling}function dk(e,s){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(s,e),ek(e),a&4){try{Pj(3,e,e.return),Qj(3,e)}catch(vt){W(e,e.return,vt)}try{Pj(5,e,e.return)}catch(vt){W(e,e.return,vt)}}break;case 1:ck(s,e),ek(e),a&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(s,e),ek(e),a&512&&i!==null&&Lj(i,i.return),e.flags&32){var o=e.stateNode;try{ob(o,"")}catch(vt){W(e,e.return,vt)}}if(a&4&&(o=e.stateNode,o!=null)){var c=e.memoizedProps,h=i!==null?i.memoizedProps:c,j=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{j==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(j,h);var _=vb(j,c);for(h=0;h<b.length;h+=2){var $=b[h],at=b[h+1];$==="style"?sb(o,at):$==="dangerouslySetInnerHTML"?nb(o,at):$==="children"?ob(o,at):ta(o,$,at,_)}switch(j){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var rt=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var ut=c.value;ut!=null?fb(o,!!c.multiple,ut,!1):rt!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(vt){W(e,e.return,vt)}}break;case 6:if(ck(s,e),ek(e),a&4){if(e.stateNode===null)throw Error(p(162));o=e.stateNode,c=e.memoizedProps;try{o.nodeValue=c}catch(vt){W(e,e.return,vt)}}break;case 3:if(ck(s,e),ek(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(vt){W(e,e.return,vt)}break;case 4:ck(s,e),ek(e);break;case 13:ck(s,e),ek(e),o=e.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B())),a&4&&ak(e);break;case 22:if($=i!==null&&i.memoizedState!==null,e.mode&1?(U=(_=U)||$,ck(s,e),U=_):ck(s,e),ek(e),a&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!$&&e.mode&1)for(V=e,$=e.child;$!==null;){for(at=V=$;V!==null;){switch(rt=V,ut=rt.child,rt.tag){case 0:case 11:case 14:case 15:Pj(4,rt,rt.return);break;case 1:Lj(rt,rt.return);var ot=rt.stateNode;if(typeof ot.componentWillUnmount=="function"){a=rt,i=rt.return;try{s=a,ot.props=s.memoizedProps,ot.state=s.memoizedState,ot.componentWillUnmount()}catch(vt){W(a,i,vt)}}break;case 5:Lj(rt,rt.return);break;case 22:if(rt.memoizedState!==null){gk(at);continue}}ut!==null?(ut.return=rt,V=ut):gk(at)}$=$.sibling}e:for($=null,at=e;;){if(at.tag===5){if($===null){$=at;try{o=at.stateNode,_?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(j=at.stateNode,b=at.memoizedProps.style,h=b!=null&&b.hasOwnProperty("display")?b.display:null,j.style.display=rb("display",h))}catch(vt){W(e,e.return,vt)}}}else if(at.tag===6){if($===null)try{at.stateNode.nodeValue=_?"":at.memoizedProps}catch(vt){W(e,e.return,vt)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===e)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===e)break e;for(;at.sibling===null;){if(at.return===null||at.return===e)break e;$===at&&($=null),at=at.return}$===at&&($=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:ck(s,e),ek(e),a&4&&ak(e);break;case 21:break;default:ck(s,e),ek(e)}}function ek(e){var s=e.flags;if(s&2){try{e:{for(var i=e.return;i!==null;){if(Tj(i)){var a=i;break e}i=i.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var c=Uj(e);Wj(e,c,o);break;case 3:case 4:var h=a.stateNode.containerInfo,j=Uj(e);Vj(e,j,h);break;default:throw Error(p(161))}}catch(b){W(e,e.return,b)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hk(e,s,i){V=e,ik(e)}function ik(e,s,i){for(var a=(e.mode&1)!==0;V!==null;){var o=V,c=o.child;if(o.tag===22&&a){var h=o.memoizedState!==null||Jj;if(!h){var j=o.alternate,b=j!==null&&j.memoizedState!==null||U;j=Jj;var _=U;if(Jj=h,(U=b)&&!_)for(V=o;V!==null;)h=V,b=h.child,h.tag===22&&h.memoizedState!==null?jk(o):b!==null?(b.return=h,V=b):jk(o);for(;c!==null;)V=c,ik(c),c=c.sibling;V=o,Jj=j,U=_}kk(e)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V=c):kk(e)}}function kk(e){for(;V!==null;){var s=V;if(s.flags&8772){var i=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!U)if(i===null)a.componentDidMount();else{var o=s.elementType===s.type?i.memoizedProps:Ci(s.type,i.memoizedProps);a.componentDidUpdate(o,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&sh(s,c,a);break;case 3:var h=s.updateQueue;if(h!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}sh(s,h,i)}break;case 5:var j=s.stateNode;if(i===null&&s.flags&4){i=j;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var _=s.alternate;if(_!==null){var $=_.memoizedState;if($!==null){var at=$.dehydrated;at!==null&&bd(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||s.flags&512&&Rj(s)}catch(rt){W(s,s.return,rt)}}if(s===e){V=null;break}if(i=s.sibling,i!==null){i.return=s.return,V=i;break}V=s.return}}function gk(e){for(;V!==null;){var s=V;if(s===e){V=null;break}var i=s.sibling;if(i!==null){i.return=s.return,V=i;break}V=s.return}}function jk(e){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{Qj(4,s)}catch(b){W(s,i,b)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var o=s.return;try{a.componentDidMount()}catch(b){W(s,o,b)}}var c=s.return;try{Rj(s)}catch(b){W(s,c,b)}break;case 5:var h=s.return;try{Rj(s)}catch(b){W(s,h,b)}}}catch(b){W(s,s.return,b)}if(s===e){V=null;break}var j=s.sibling;if(j!==null){j.return=s.return,V=j;break}V=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,s,i,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,i,a),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(e,Z)),Dk(e,a),i===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,s){var i=e.callbackNode;wc(e,s);var a=uc(e,e===Q?Z:0);if(a===0)i!==null&&bc(i),e.callbackNode=null,e.callbackPriority=0;else if(s=a&-a,e.callbackPriority!==s){if(i!=null&&bc(i),s===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(a)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,e))}e.callbackPriority=s,e.callbackNode=i}}function Gk(e,s){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var i=e.callbackNode;if(Hk()&&e.callbackNode!==i)return null;var a=uc(e,e===Q?Z:0);if(a===0)return null;if(a&30||a&e.expiredLanes||s)s=Ik(e,a);else{s=a;var o=K;K|=2;var c=Jk();(Q!==e||Z!==s)&&(uk=null,Gj=B()+500,Kk(e,s));do try{Lk();break}catch(j){Mk(e,j)}while(!0);$g(),mk.current=c,K=o,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(o=xc(e),o!==0&&(a=o,s=Nk(e,o))),s===1)throw i=pk,Kk(e,0),Ck(e,a),Dk(e,B()),i;if(s===6)Ck(e,a);else{if(o=e.current.alternate,!(a&30)&&!Ok(o)&&(s=Ik(e,a),s===2&&(c=xc(e),c!==0&&(a=c,s=Nk(e,c))),s===1))throw i=pk,Kk(e,0),Ck(e,a),Dk(e,B()),i;switch(e.finishedWork=o,e.finishedLanes=a,s){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,a),(a&130023424)===a&&(s=fk+500-B(),10<s)){if(uc(e,0)!==0)break;if(o=e.suspendedLanes,(o&a)!==a){R(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),s);break}Pk(e,tk,uk);break;case 4:if(Ck(e,a),(a&4194240)===a)break;for(s=e.eventTimes,o=-1;0<a;){var h=31-oc(a);c=1<<h,h=s[h],h>o&&(o=h),a&=~c}if(a=o,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),a);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===i?Gk.bind(null,e):null}function Nk(e,s){var i=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,s).flags|=256),e=Ik(e,s),e!==2&&(s=tk,tk=i,s!==null&&Fj(s)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var s=e;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var o=i[a],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(e,s){for(s&=~rk,s&=~qk,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var i=31-oc(s),a=1<<i;e[i]=-1,s&=~a}}function Ek(e){if(K&6)throw Error(p(327));Hk();var s=uc(e,0);if(!(s&1))return Dk(e,B()),null;var i=Ik(e,s);if(e.tag!==0&&i===2){var a=xc(e);a!==0&&(s=a,i=Nk(e,a))}if(i===1)throw i=pk,Kk(e,0),Ck(e,s),Dk(e,B()),i;if(i===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,s){var i=K;K|=1;try{return e(s)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var i=ok.transition,a=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=a,ok.transition=i,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,s){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var a=i;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(i=fh[s],a=i.interleaved,a!==null){i.interleaved=null;var o=a.next,c=i.pending;if(c!==null){var h=c.next;c.next=o,a.next=h}i.pending=a}fh=null}return e}function Mk(e,s){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=s,Y=null;break}e:{var c=e,h=i.return,j=i,b=s;if(s=Z,j.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var _=b,$=j,at=$.tag;if(!($.mode&1)&&(at===0||at===11||at===15)){var rt=$.alternate;rt?($.updateQueue=rt.updateQueue,$.memoizedState=rt.memoizedState,$.lanes=rt.lanes):($.updateQueue=null,$.memoizedState=null)}var ut=Ui(h);if(ut!==null){ut.flags&=-257,Vi(ut,h,j,c,s),ut.mode&1&&Si(c,_,s),s=ut,b=_;var ot=s.updateQueue;if(ot===null){var vt=new Set;vt.add(b),s.updateQueue=vt}else ot.add(b);break e}else{if(!(s&1)){Si(c,_,s),tj();break e}b=Error(p(426))}}else if(I&&j.mode&1){var bt=Ui(h);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),Vi(bt,h,j,c,s),Jg(Ji(b,j));break e}}c=b=Ji(b,j),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var et=Ni(c,b,s);ph(c,et);break e;case 1:j=b;var nt=c.type,st=c.stateNode;if(!(c.flags&128)&&(typeof nt.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Ri===null||!Ri.has(st)))){c.flags|=65536,s&=-s,c.lanes|=s;var gt=Qi(c,j,s);ph(c,gt);break e}}c=c.return}while(c!==null)}Sk(i)}catch(lt){s=lt,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,s){var i=K;K|=2;var a=Jk();(Q!==e||Z!==s)&&(uk=null,Kk(e,s));do try{Tk();break}catch(o){Mk(e,o)}while(!0);if($g(),K=i,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var s=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,s===null?Sk(e):Y=s,nk.current=null}function Sk(e){var s=e;do{var i=s.alternate;if(e=s.return,s.flags&32768){if(i=Ij(i,s),i!==null){i.flags&=32767,Y=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,s,fj),i!==null){Y=i;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=e}while(s!==null);T===0&&(T=5)}function Pk(e,s,i){var a=C,o=ok.transition;try{ok.transition=null,C=1,Wk(e,s,i,a)}finally{ok.transition=o,C=a}return null}function Wk(e,s,i,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));i=e.finishedWork;var o=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(e,c),e===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var h=C;C=1;var j=K;K|=4,nk.current=null,Oj(e,i),dk(i,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=i,hk(i),dc(),K=j,C=h,ok.transition=c}else e.current=i;if(vk&&(vk=!1,wk=e,xk=o),c=e.pendingLanes,c===0&&(Ri=null),mc(i.stateNode),Dk(e,B()),s!==null)for(a=e.onRecoverableError,i=0;i<s.length;i++)o=s[i],a(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),c=e.pendingLanes,c&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),s=ok.transition,i=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var a=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var o=K;for(K|=4,V=e.current;V!==null;){var c=V,h=c.child;if(V.flags&16){var j=c.deletions;if(j!==null){for(var b=0;b<j.length;b++){var _=j[b];for(V=_;V!==null;){var $=V;switch($.tag){case 0:case 11:case 15:Pj(8,$,c)}var at=$.child;if(at!==null)at.return=$,V=at;else for(;V!==null;){$=V;var rt=$.sibling,ut=$.return;if(Sj($),$===_){V=null;break}if(rt!==null){rt.return=ut,V=rt;break}V=ut}}}var ot=c.alternate;if(ot!==null){var vt=ot.child;if(vt!==null){ot.child=null;do{var bt=vt.sibling;vt.sibling=null,vt=bt}while(vt!==null)}}V=c}}if(c.subtreeFlags&2064&&h!==null)h.return=c,V=h;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var et=c.sibling;if(et!==null){et.return=c.return,V=et;break e}V=c.return}}var nt=e.current;for(V=nt;V!==null;){h=V;var st=h.child;if(h.subtreeFlags&2064&&st!==null)st.return=h,V=st;else e:for(h=nt;V!==null;){if(j=V,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Qj(9,j)}}catch(lt){W(j,j.return,lt)}if(j===h){V=null;break e}var gt=j.sibling;if(gt!==null){gt.return=j.return,V=gt;break e}V=j.return}}if(K=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}a=!0}return a}finally{C=i,ok.transition=s}}return!1}function Xk(e,s,i){s=Ji(i,s),s=Ni(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s))}function W(e,s,i){if(e.tag===3)Xk(e,e,i);else for(;s!==null;){if(s.tag===3){Xk(s,e,i);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){e=Ji(i,e),e=Qi(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e));break}}s=s.return}}function Ti(e,s,i){var a=e.pingCache;a!==null&&a.delete(s),s=R(),e.pingedLanes|=e.suspendedLanes&i,Q===e&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=i),Dk(e,s)}function Yk(e,s){s===0&&(e.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var i=R();e=ih(e,s),e!==null&&(Ac(e,s,i),Dk(e,i))}function uj(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Yk(e,i)}function bk(e,s){var i=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(i=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(s),Yk(e,i)}var Vk;Vk=function(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&i)&&!(s.flags&128))return dh=!1,yj(e,s,i);dh=!!(e.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;ij(e,s),e=s.pendingProps;var o=Yf(s,H.current);ch(s,i),o=Nh(null,s,a,e,o,i);var c=Sh();return s.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(a)?(c=!0,cg(s)):c=!1,s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(s),o.updater=Ei,s.stateNode=o,o._reactInternals=s,Ii(s,a,e,i),s=jj(null,s,a,!0,c,i)):(s.tag=0,I&&c&&vg(s),Xi(null,s,o,i),s=s.child),s;case 16:a=s.elementType;e:{switch(ij(e,s),e=s.pendingProps,o=a._init,a=o(a._payload),s.type=a,o=s.tag=Zk(a),e=Ci(a,e),o){case 0:s=cj(null,s,a,e,i);break e;case 1:s=hj(null,s,a,e,i);break e;case 11:s=Yi(null,s,a,e,i);break e;case 14:s=$i(null,s,a,Ci(a.type,e),i);break e}throw Error(p(306,a,""))}return s;case 0:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),cj(e,s,a,o,i);case 1:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),hj(e,s,a,o,i);case 3:e:{if(kj(s),e===null)throw Error(p(387));a=s.pendingProps,c=s.memoizedState,o=c.element,lh(e,s),qh(s,a,null,i);var h=s.memoizedState;if(a=h.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){o=Ji(Error(p(423)),s),s=lj(e,s,a,i,o);break e}else if(a!==o){o=Ji(Error(p(424)),s),s=lj(e,s,a,i,o);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,i=Vg(s,null,a,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),a===o){s=Zi(e,s,i);break e}Xi(e,s,a,i)}s=s.child}return s;case 5:return Ah(s),e===null&&Eg(s),a=s.type,o=s.pendingProps,c=e!==null?e.memoizedProps:null,h=o.children,Ef(a,o)?h=null:c!==null&&Ef(a,c)&&(s.flags|=32),gj(e,s),Xi(e,s,h,i),s.child;case 6:return e===null&&Eg(s),null;case 13:return oj(e,s,i);case 4:return yh(s,s.stateNode.containerInfo),a=s.pendingProps,e===null?s.child=Ug(s,null,a,i):Xi(e,s,a,i),s.child;case 11:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),Yi(e,s,a,o,i);case 7:return Xi(e,s,s.pendingProps,i),s.child;case 8:return Xi(e,s,s.pendingProps.children,i),s.child;case 12:return Xi(e,s,s.pendingProps.children,i),s.child;case 10:e:{if(a=s.type._context,o=s.pendingProps,c=s.memoizedProps,h=o.value,G(Wg,a._currentValue),a._currentValue=h,c!==null)if(He(c.value,h)){if(c.children===o.children&&!Wf.current){s=Zi(e,s,i);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var j=c.dependencies;if(j!==null){h=c.child;for(var b=j.firstContext;b!==null;){if(b.context===a){if(c.tag===1){b=mh(-1,i&-i),b.tag=2;var _=c.updateQueue;if(_!==null){_=_.shared;var $=_.pending;$===null?b.next=b:(b.next=$.next,$.next=b),_.pending=b}}c.lanes|=i,b=c.alternate,b!==null&&(b.lanes|=i),bh(c.return,i,s),j.lanes|=i;break}b=b.next}}else if(c.tag===10)h=c.type===s.type?null:c.child;else if(c.tag===18){if(h=c.return,h===null)throw Error(p(341));h.lanes|=i,j=h.alternate,j!==null&&(j.lanes|=i),bh(h,i,s),h=c.sibling}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===s){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}Xi(e,s,o.children,i),s=s.child}return s;case 9:return o=s.type,a=s.pendingProps.children,ch(s,i),o=eh(o),a=a(o),s.flags|=1,Xi(e,s,a,i),s.child;case 14:return a=s.type,o=Ci(a,s.pendingProps),o=Ci(a.type,o),$i(e,s,a,o,i);case 15:return bj(e,s,s.type,s.pendingProps,i);case 17:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),ij(e,s),s.tag=1,Zf(a)?(e=!0,cg(s)):e=!1,ch(s,i),Gi(s,a,o),Ii(s,a,o,i),jj(null,s,a,!0,e,i);case 19:return xj(e,s,i);case 22:return dj(e,s,i)}throw Error(p(156,s.tag))};function Fk(e,s){return ac(e,s)}function $k(e,s,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,s,i,a){return new $k(e,s,i,a)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,s){var i=e.alternate;return i===null?(i=Bg(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Rg(e,s,i,a,o,c){var h=2;if(a=e,typeof e=="function")aj(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case ya:return Tg(i.children,o,c,s);case za:h=8,o|=8;break;case Aa:return e=Bg(12,i,s,o|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,i,s,o),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,i,s,o),e.elementType=Fa,e.lanes=c,e;case Ia:return pj(i,o,c,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:h=10;break e;case Ca:h=9;break e;case Da:h=11;break e;case Ga:h=14;break e;case Ha:h=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return s=Bg(h,i,s,o),s.elementType=e,s.type=a,s.lanes=c,s}function Tg(e,s,i,a){return e=Bg(7,e,a,s),e.lanes=i,e}function pj(e,s,i,a){return e=Bg(22,e,a,s),e.elementType=Ia,e.lanes=i,e.stateNode={isHidden:!1},e}function Qg(e,s,i){return e=Bg(6,e,null,s),e.lanes=i,e}function Sg(e,s,i){return s=Bg(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function al(e,s,i,a,o){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(e,s,i,a,o,c,h,j,b){return e=new al(e,s,i,j,b),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Bg(3,null,null,s),e.current=c,c.stateNode=e,c.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),e}function cl(e,s,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:e,containerInfo:s,implementation:i}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(e.tag===1){var i=e.type;if(Zf(i))return bg(e,i,s)}return s}function el(e,s,i,a,o,c,h,j,b){return e=bl(i,a,!0,e,o,c,h,j,b),e.context=dl(null),i=e.current,a=R(),o=yi(i),c=mh(a,o),c.callback=s??null,nh(i,c,o),e.current.lanes=o,Ac(e,o,a),Dk(e,a),e}function fl(e,s,i,a){var o=s.current,c=R(),h=yi(o);return i=dl(i),s.context===null?s.context=i:s.pendingContext=i,s=mh(c,h),s.payload={element:e},a=a===void 0?null:a,a!==null&&(s.callback=a),e=nh(o,s,h),e!==null&&(gi(e,o,h,c),oh(e,o,h)),h}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function il(e,s){hl(e,s),(e=e.alternate)&&hl(e,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(p(409));fl(e,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Rk(function(){fl(null,e,null,null)}),s[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var s=Hc();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Qc.length&&s!==0&&s<Qc[i].priority;i++);Qc.splice(i,0,e),i===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,s,i,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var _=gl(h);c.call(_)}}var h=el(s,a,e,0,null,!1,!1,"",pl);return e._reactRootContainer=h,e[uf]=h.current,sf(e.nodeType===8?e.parentNode:e),Rk(),h}for(;o=e.lastChild;)e.removeChild(o);if(typeof a=="function"){var j=a;a=function(){var _=gl(b);j.call(_)}}var b=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=b,e[uf]=b.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(s,b,i,a)}),b}function rl(e,s,i,a,o){var c=i._reactRootContainer;if(c){var h=c;if(typeof o=="function"){var j=o;o=function(){var b=gl(h);j.call(b)}}fl(s,h,e,o)}else h=ql(i,s,e,o,a);return gl(h)}Ec=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var i=tc(s.pendingLanes);i!==0&&(Cc(s,i|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(e,1);if(a!==null){var o=R();gi(a,e,1,o)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var s=ih(e,134217728);if(s!==null){var i=R();gi(s,e,134217728,i)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var s=yi(e),i=ih(e,s);if(i!==null){var a=R();gi(i,e,s,a)}il(e,s)}};Hc=function(){return C};Ic=function(e,s){var i=C;try{return C=e,s()}finally{C=i}};yb=function(e,s,i){switch(s){case"input":if(bb(e,i),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var a=i[s];if(a!==e&&a.form===e.form){var o=Db(a);if(!o)throw Error(p(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(e,i);break;case"select":s=i.value,s!=null&&fb(e,!!i.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p(200));return cl(e,s,null,i)};reactDom_production_min.createRoot=function(e,s){if(!nl(e))throw Error(p(299));var i=!1,a="",o=kl;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),s=bl(e,1,!1,null,null,i,!1,a,o),e[uf]=s.current,sf(e.nodeType===8?e.parentNode:e),new ll(s)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(s),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!0,i)};reactDom_production_min.hydrateRoot=function(e,s,i){if(!nl(e))throw Error(p(405));var a=i!=null&&i.hydratedSources||null,o=!1,c="",h=kl;if(i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),s=el(s,null,e,1,i??null,o,!1,c,h),e[uf]=s.current,sf(e),a)for(e=0;e<a.length;e++)i=a[e],o=i._getVersion,o=o(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,o]:s.mutableSourceEagerHydrationData.push(i,o);return new ml(s)};reactDom_production_min.render=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!1,i)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,s,i,a){if(!ol(i))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,s,i,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(e={}){function s(a,o){let{pathname:c,search:h,hash:j}=a.location;return createLocation("",{pathname:c,search:h,hash:j},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(a,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(s,i,null,e)}function invariant(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function warning(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,s){return{usr:e.state,key:e.key,idx:s}}function createLocation(e,s,i=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?parsePath(s):s,state:i,key:s&&s.key||a||createKey()}}function createPath({pathname:e="/",search:s="",hash:i=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function parsePath(e){let s={};if(e){let i=e.indexOf("#");i>=0&&(s.hash=e.substring(i),e=e.substring(0,i));let a=e.indexOf("?");a>=0&&(s.search=e.substring(a),e=e.substring(0,a)),e&&(s.pathname=e)}return s}function getUrlBasedHistory(e,s,i,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,h=o.history,j="POP",b=null,_=$();_==null&&(_=0,h.replaceState({...h.state,idx:_},""));function $(){return(h.state||{idx:null}).idx}function at(){j="POP";let bt=$(),et=bt==null?null:bt-_;_=bt,b&&b({action:j,location:vt.location,delta:et})}function rt(bt,et){j="PUSH";let nt=createLocation(vt.location,bt,et);_=$()+1;let st=getHistoryState(nt,_),gt=vt.createHref(nt);try{h.pushState(st,"",gt)}catch(lt){if(lt instanceof DOMException&&lt.name==="DataCloneError")throw lt;o.location.assign(gt)}c&&b&&b({action:j,location:vt.location,delta:1})}function ut(bt,et){j="REPLACE";let nt=createLocation(vt.location,bt,et);_=$();let st=getHistoryState(nt,_),gt=vt.createHref(nt);h.replaceState(st,"",gt),c&&b&&b({action:j,location:vt.location,delta:0})}function ot(bt){return createBrowserURLImpl(bt)}let vt={get action(){return j},get location(){return e(o,h)},listen(bt){if(b)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,at),b=bt,()=>{o.removeEventListener(PopStateEventType,at),b=null}},createHref(bt){return s(o,bt)},createURL:ot,encodeLocation(bt){let et=ot(bt);return{pathname:et.pathname,search:et.search,hash:et.hash}},push:rt,replace:ut,go(bt){return h.go(bt)}};return vt}function createBrowserURLImpl(e,s=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(i,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:createPath(e);return a=a.replace(/ $/,"%20"),!s&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function matchRoutes(e,s,i="/"){return matchRoutesImpl(e,s,i,!1)}function matchRoutesImpl(e,s,i,a){let o=typeof s=="string"?parsePath(s):s,c=stripBasename(o.pathname||"/",i);if(c==null)return null;let h=flattenRoutes(e);rankRouteBranches(h);let j=null;for(let b=0;j==null&&b<h.length;++b){let _=decodePath(c);j=matchRouteBranch(h[b],_,a)}return j}function flattenRoutes(e,s=[],i=[],a="",o=!1){let c=(h,j,b=o,_)=>{let $={relativePath:_===void 0?h.path||"":_,caseSensitive:h.caseSensitive===!0,childrenIndex:j,route:h};if($.relativePath.startsWith("/")){if(!$.relativePath.startsWith(a)&&b)return;invariant($.relativePath.startsWith(a),`Absolute route path "${$.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),$.relativePath=$.relativePath.slice(a.length)}let at=joinPaths([a,$.relativePath]),rt=i.concat($);h.children&&h.children.length>0&&(invariant(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${at}".`),flattenRoutes(h.children,s,rt,at,b)),!(h.path==null&&!h.index)&&s.push({path:at,score:computeScore(at,h.index),routesMeta:rt})};return e.forEach((h,j)=>{var b;if(h.path===""||!((b=h.path)!=null&&b.includes("?")))c(h,j);else for(let _ of explodeOptionalSegments(h.path))c(h,j,!0,_)}),s}function explodeOptionalSegments(e){let s=e.split("/");if(s.length===0)return[];let[i,...a]=s,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let h=explodeOptionalSegments(a.join("/")),j=[];return j.push(...h.map(b=>b===""?c:[c,b].join("/"))),o&&j.push(...h),j.map(b=>e.startsWith("/")&&b===""?"/":b)}function rankRouteBranches(e){e.sort((s,i)=>s.score!==i.score?i.score-s.score:compareIndexes(s.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,s){let i=e.split("/"),a=i.length;return i.some(isSplat)&&(a+=splatPenalty),s&&(a+=indexRouteValue),i.filter(o=>!isSplat(o)).reduce((o,c)=>o+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(e,s){return e.length===s.length&&e.slice(0,-1).every((a,o)=>a===s[o])?e[e.length-1]-s[s.length-1]:0}function matchRouteBranch(e,s,i=!1){let{routesMeta:a}=e,o={},c="/",h=[];for(let j=0;j<a.length;++j){let b=a[j],_=j===a.length-1,$=c==="/"?s:s.slice(c.length)||"/",at=matchPath({path:b.relativePath,caseSensitive:b.caseSensitive,end:_},$),rt=b.route;if(!at&&_&&i&&!a[a.length-1].route.index&&(at=matchPath({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},$)),!at)return null;Object.assign(o,at.params),h.push({params:o,pathname:joinPaths([c,at.pathname]),pathnameBase:normalizePathname(joinPaths([c,at.pathnameBase])),route:rt}),at.pathnameBase!=="/"&&(c=joinPaths([c,at.pathnameBase]))}return h}function matchPath(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=compilePath(e.path,e.caseSensitive,e.end),o=s.match(i);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),j=o.slice(1);return{params:a.reduce((_,{paramName:$,isOptional:at},rt)=>{if($==="*"){let ot=j[rt]||"";h=c.slice(0,c.length-ot.length).replace(/(.)\/+$/,"$1")}const ut=j[rt];return at&&!ut?_[$]=void 0:_[$]=(ut||"").replace(/%2F/g,"/"),_},{}),pathname:c,pathnameBase:h,pattern:e}}function compilePath(e,s=!1,i=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,j,b)=>(a.push({paramName:j,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,s?void 0:"i"),a]}function decodePath(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function stripBasename(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let i=s.endsWith("/")?s.length-1:s.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}function resolvePath(e,s="/"){let{pathname:i,search:a="",hash:o=""}=typeof e=="string"?parsePath(e):e;return{pathname:i?i.startsWith("/")?i:resolvePathname(i,s):s,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(e,s){let i=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function getInvalidPathError(e,s,i,a){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((s,i)=>i===0||s.route.path&&s.route.path.length>0)}function getResolveToMatches(e){let s=getPathContributingMatches(e);return s.map((i,a)=>a===s.length-1?i.pathname:i.pathnameBase)}function resolveTo(e,s,i,a=!1){let o;typeof e=="string"?o=parsePath(e):(o={...e},invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let c=e===""||o.pathname==="",h=c?"/":o.pathname,j;if(h==null)j=i;else{let at=s.length-1;if(!a&&h.startsWith("..")){let rt=h.split("/");for(;rt[0]==="..";)rt.shift(),at-=1;o.pathname=rt.join("/")}j=at>=0?s[at]:"/"}let b=resolvePath(o,j),_=h&&h!=="/"&&h.endsWith("/"),$=(c||h===".")&&i.endsWith("/");return!b.pathname.endsWith("/")&&(_||$)&&(b.pathname+="/"),b}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(e,{relative:s}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=reactExports.useContext(NavigationContext),{hash:o,pathname:c,search:h}=useResolvedPath(e,{relative:s}),j=c;return i!=="/"&&(j=c==="/"?i:joinPaths([i,c])),a.createHref({pathname:j,search:h,hash:o})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:s,navigator:i}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),c=JSON.stringify(getResolveToMatches(a)),h=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{h.current=!0}),reactExports.useCallback((b,_={})=>{if(warning(h.current,navigateEffectWarning),!h.current)return;if(typeof b=="number"){i.go(b);return}let $=resolveTo(b,JSON.parse(c),o,_.relative==="path");e==null&&s!=="/"&&($.pathname=$.pathname==="/"?s:joinPaths([s,$.pathname])),(_.replace?i.replace:i.push)($,_.state,_)},[s,i,c,o,e])}var OutletContext=reactExports.createContext(null);function useOutlet(e){let s=reactExports.useContext(RouteContext).outlet;return reactExports.useMemo(()=>s&&reactExports.createElement(OutletContext.Provider,{value:e},s),[s,e])}function useParams(){let{matches:e}=reactExports.useContext(RouteContext),s=e[e.length-1];return s?s.params:{}}function useResolvedPath(e,{relative:s}={}){let{matches:i}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(i));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(o),a,s==="path"),[e,o,a,s])}function useRoutes(e,s){return useRoutesImpl(e,s)}function useRoutesImpl(e,s,i,a,o){var nt;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=reactExports.useContext(NavigationContext),{matches:h}=reactExports.useContext(RouteContext),j=h[h.length-1],b=j?j.params:{},_=j?j.pathname:"/",$=j?j.pathnameBase:"/",at=j&&j.route;{let st=at&&at.path||"";warningOnce(_,!at||st.endsWith("*")||st.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${st}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${st}"> to <Route path="${st==="/"?"*":`${st}/*`}">.`)}let rt=useLocation(),ut;if(s){let st=typeof s=="string"?parsePath(s):s;invariant($==="/"||((nt=st.pathname)==null?void 0:nt.startsWith($)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${$}" but pathname "${st.pathname}" was given in the \`location\` prop.`),ut=st}else ut=rt;let ot=ut.pathname||"/",vt=ot;if($!=="/"){let st=$.replace(/^\//,"").split("/");vt="/"+ot.replace(/^\//,"").split("/").slice(st.length).join("/")}let bt=matchRoutes(e,{pathname:vt});warning(at||bt!=null,`No routes matched location "${ut.pathname}${ut.search}${ut.hash}" `),warning(bt==null||bt[bt.length-1].route.element!==void 0||bt[bt.length-1].route.Component!==void 0||bt[bt.length-1].route.lazy!==void 0,`Matched leaf route at location "${ut.pathname}${ut.search}${ut.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let et=_renderMatches(bt&&bt.map(st=>Object.assign({},st,{params:Object.assign({},b,st.params),pathname:joinPaths([$,c.encodeLocation?c.encodeLocation(st.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:st.pathname]),pathnameBase:st.pathnameBase==="/"?$:joinPaths([$,c.encodeLocation?c.encodeLocation(st.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:st.pathnameBase])})),h,i,a,o);return s&&et?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...ut},navigationType:"POP"}},et):et}function DefaultErrorComponent(){let e=useRouteError(),s=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:c},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:c},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},s),i?reactExports.createElement("pre",{style:o},i):null,h)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.unstable_onError?this.props.unstable_onError(e,s):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:e,match:s,children:i}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},i)}function _renderMatches(e,s=[],i=null,a=null,o=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(s.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let c=e,h=i==null?void 0:i.errors;if(h!=null){let _=c.findIndex($=>$.route.id&&(h==null?void 0:h[$.route.id])!==void 0);invariant(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,_+1))}let j=!1,b=-1;if(i)for(let _=0;_<c.length;_++){let $=c[_];if(($.route.HydrateFallback||$.route.hydrateFallbackElement)&&(b=_),$.route.id){let{loaderData:at,errors:rt}=i,ut=$.route.loader&&!at.hasOwnProperty($.route.id)&&(!rt||rt[$.route.id]===void 0);if($.route.lazy||ut){j=!0,b>=0?c=c.slice(0,b+1):c=[c[0]];break}}}return c.reduceRight((_,$,at)=>{let rt,ut=!1,ot=null,vt=null;i&&(rt=h&&$.route.id?h[$.route.id]:void 0,ot=$.route.errorElement||defaultErrorElement,j&&(b<0&&at===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ut=!0,vt=null):b===at&&(ut=!0,vt=$.route.hydrateFallbackElement||null)));let bt=s.concat(c.slice(0,at+1)),et=()=>{let nt;return rt?nt=ot:ut?nt=vt:$.route.Component?nt=reactExports.createElement($.route.Component,null):$.route.element?nt=$.route.element:nt=_,reactExports.createElement(RenderedRoute,{match:$,routeContext:{outlet:_,matches:bt,isDataRoute:i!=null},children:nt})};return i&&($.route.ErrorBoundary||$.route.errorElement||at===0)?reactExports.createElement(RenderErrorBoundary,{location:i.location,revalidation:i.revalidation,component:ot,error:rt,children:et(),routeContext:{outlet:null,matches:bt,isDataRoute:!0},unstable_onError:a}):et()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let s=reactExports.useContext(DataRouterContext);return invariant(s,getDataRouterConsoleError(e)),s}function useDataRouterState(e){let s=reactExports.useContext(DataRouterStateContext);return invariant(s,getDataRouterConsoleError(e)),s}function useRouteContext(e){let s=reactExports.useContext(RouteContext);return invariant(s,getDataRouterConsoleError(e)),s}function useCurrentRouteId(e){let s=useRouteContext(e),i=s.matches[s.matches.length-1];return invariant(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var a;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState("useRouteError"),i=useCurrentRouteId("useRouteError");return e!==void 0?e:(a=s.errors)==null?void 0:a[i]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),s=useCurrentRouteId("useNavigate"),i=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{i.current=!0}),reactExports.useCallback(async(o,c={})=>{warning(i.current,navigateEffectWarning),i.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:s,...c}))},[e,s])}var alreadyWarned={};function warningOnce(e,s,i){!s&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,i))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:s,state:i,unstable_onError:a}){return useRoutesImpl(e,void 0,i,a,s)}function Navigate({to:e,replace:s,state:i,relative:a}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=reactExports.useContext(NavigationContext);warning(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=reactExports.useContext(RouteContext),{pathname:h}=useLocation(),j=useNavigate(),b=resolveTo(e,getResolveToMatches(c),h,a==="path"),_=JSON.stringify(b);return reactExports.useEffect(()=>{j(JSON.parse(_),{replace:s,state:i,relative:a})},[j,_,a,s,i]),null}function Outlet(e){return useOutlet(e.context)}function Route(e){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:s=null,location:i,navigationType:a="POP",navigator:o,static:c=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),j=reactExports.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof i=="string"&&(i=parsePath(i));let{pathname:b="/",search:_="",hash:$="",state:at=null,key:rt="default"}=i,ut=reactExports.useMemo(()=>{let ot=stripBasename(b,h);return ot==null?null:{location:{pathname:ot,search:_,hash:$,state:at,key:rt},navigationType:a}},[h,b,_,$,at,rt,a]);return warning(ut!=null,`<Router basename="${h}"> is not able to match the URL "${b}${_}${$}" because it does not start with the basename, so the <Router> won't render anything.`),ut==null?null:reactExports.createElement(NavigationContext.Provider,{value:j},reactExports.createElement(LocationContext.Provider,{children:s,value:ut}))}function Routes({children:e,location:s}){return useRoutes(createRoutesFromChildren(e),s)}function createRoutesFromChildren(e,s=[]){let i=[];return reactExports.Children.forEach(e,(a,o)=>{if(!reactExports.isValidElement(a))return;let c=[...s,o];if(a.type===reactExports.Fragment){i.push.apply(i,createRoutesFromChildren(a.props.children,c));return}invariant(a.type===Route,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=createRoutesFromChildren(a.props.children,c)),i.push(h)}),i}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return e!=null&&typeof e.tagName=="string"}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,s){return e.button===0&&(!s||s==="_self")&&!isModifiedEvent(e)}function createSearchParams(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,i)=>{let a=e[i];return s.concat(Array.isArray(a)?a.map(o=>[i,o]):[[i,a]])},[]))}function getSearchParamsForLocation(e,s){let i=createSearchParams(e);return s&&s.forEach((a,o)=>{i.has(o)||s.getAll(o).forEach(c=>{i.append(o,c)})}),i}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,s){let i,a,o,c,h;if(isFormElement(e)){let j=e.getAttribute("action");a=j?stripBasename(j,s):null,i=e.getAttribute("method")||defaultMethod,o=getFormEncType(e.getAttribute("enctype"))||defaultEncType,c=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let j=e.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=e.getAttribute("formaction")||j.getAttribute("action");if(a=b?stripBasename(b,s):null,i=e.getAttribute("formmethod")||j.getAttribute("method")||defaultMethod,o=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(j.getAttribute("enctype"))||defaultEncType,c=new FormData(j,e),!isFormDataSubmitterSupported()){let{name:_,type:$,value:at}=e;if($==="image"){let rt=_?`${_}.`:"";c.append(`${rt}x`,"0"),c.append(`${rt}y`,"0")}else _&&c.append(_,at)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=defaultMethod,a=null,o=defaultEncType,h=e}return c&&o==="text/plain"&&(h=c,c=void 0),{action:a,method:i.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function singleFetchUrl(e,s,i){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${i}`:s&&stripBasename(a.pathname,s)==="/"?a.pathname=`${s.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function loadRouteModule(e,s){if(e.id in s)return s[e.id];try{let i=await import(e.module);return s[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,s,i){let a=await Promise.all(e.map(async o=>{let c=s.routes[o.route.id];if(c){let h=await loadRouteModule(c,i);return h.links?h.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function getNewMatchesForLinks(e,s,i,a,o,c){let h=(b,_)=>i[_]?b.route.id!==i[_].route.id:!0,j=(b,_)=>{var $;return i[_].pathname!==b.pathname||(($=i[_].route.path)==null?void 0:$.endsWith("*"))&&i[_].params["*"]!==b.params["*"]};return c==="assets"?s.filter((b,_)=>h(b,_)||j(b,_)):c==="data"?s.filter((b,_)=>{var at;let $=a.routes[b.route.id];if(!$||!$.hasLoader)return!1;if(h(b,_)||j(b,_))return!0;if(b.route.shouldRevalidate){let rt=b.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((at=i[0])==null?void 0:at.params)||{},nextUrl:new URL(e,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof rt=="boolean")return rt}return!0}):[]}function getModuleLinkHrefs(e,s,{includeHydrateFallback:i}={}){return dedupeHrefs(e.map(a=>{let o=s.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let s={},i=Object.keys(e).sort();for(let a of i)s[a]=e[a];return s}function dedupeLinkDescriptors(e,s){let i=new Set;return new Set(s),e.reduce((a,o)=>{let c=JSON.stringify(sortKeys(o));return i.has(c)||(i.add(c),a.push({key:c,link:o})),a},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,s){let i=reactExports.useContext(FrameworkContext),[a,o]=reactExports.useState(!1),[c,h]=reactExports.useState(!1),{onFocus:j,onBlur:b,onMouseEnter:_,onMouseLeave:$,onTouchStart:at}=s,rt=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let vt=et=>{et.forEach(nt=>{h(nt.isIntersecting)})},bt=new IntersectionObserver(vt,{threshold:.5});return rt.current&&bt.observe(rt.current),()=>{bt.disconnect()}}},[e]),reactExports.useEffect(()=>{if(a){let vt=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(vt)}}},[a]);let ut=()=>{o(!0)},ot=()=>{o(!1),h(!1)};return i?e!=="intent"?[c,rt,{}]:[c,rt,{onFocus:composeEventHandlers(j,ut),onBlur:composeEventHandlers(b,ot),onMouseEnter:composeEventHandlers(_,ut),onMouseLeave:composeEventHandlers($,ot),onTouchStart:composeEventHandlers(at,ut)}]:[!1,rt,{}]}function composeEventHandlers(e,s){return i=>{e&&e(i),i.defaultPrevented||s(i)}}function PrefetchPageLinks({page:e,...s}){let{router:i}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(i.routes,e,i.basename),[i.routes,e,i.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:a,...s}):null}function useKeyedPrefetchLinks(e){let{manifest:s,routeModules:i}=useFrameworkContext(),[a,o]=reactExports.useState([]);return reactExports.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(e,s,i).then(h=>{c||o(h)}),()=>{c=!0}},[e,s,i]),a}function PrefetchPageLinksImpl({page:e,matches:s,...i}){let a=useLocation(),{manifest:o,routeModules:c}=useFrameworkContext(),{basename:h}=useDataRouterContext2(),{loaderData:j,matches:b}=useDataRouterStateContext(),_=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,b,o,a,"data"),[e,s,b,o,a]),$=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,b,o,a,"assets"),[e,s,b,o,a]),at=reactExports.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let ot=new Set,vt=!1;if(s.forEach(et=>{var st;let nt=o.routes[et.route.id];!nt||!nt.hasLoader||(!_.some(gt=>gt.route.id===et.route.id)&&et.route.id in j&&((st=c[et.route.id])!=null&&st.shouldRevalidate)||nt.hasClientLoader?vt=!0:ot.add(et.route.id))}),ot.size===0)return[];let bt=singleFetchUrl(e,h,"data");return vt&&ot.size>0&&bt.searchParams.set("_routes",s.filter(et=>ot.has(et.route.id)).map(et=>et.route.id).join(",")),[bt.pathname+bt.search]},[h,j,a,o,_,s,e,c]),rt=reactExports.useMemo(()=>getModuleLinkHrefs($,o),[$,o]),ut=useKeyedPrefetchLinks($);return reactExports.createElement(reactExports.Fragment,null,at.map(ot=>reactExports.createElement("link",{key:ot,rel:"prefetch",as:"fetch",href:ot,...i})),rt.map(ot=>reactExports.createElement("link",{key:ot,rel:"modulepreload",href:ot,...i})),ut.map(({key:ot,link:vt})=>reactExports.createElement("link",{key:ot,nonce:i.nonce,...vt})))}function mergeRefs(...e){return s=>{e.forEach(i=>{typeof i=="function"?i(s):i!=null&&(i.current=s)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.5")}catch{}function BrowserRouter({basename:e,children:s,window:i}){let a=reactExports.useRef();a.current==null&&(a.current=createBrowserHistory({window:i,v5Compat:!0}));let o=a.current,[c,h]=reactExports.useState({action:o.action,location:o.location}),j=reactExports.useCallback(b=>{reactExports.startTransition(()=>h(b))},[h]);return reactExports.useLayoutEffect(()=>o.listen(j),[o,j]),reactExports.createElement(Router,{basename:e,children:s,location:c.location,navigationType:c.action,navigator:o})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:s,discover:i="render",prefetch:a="none",relative:o,reloadDocument:c,replace:h,state:j,target:b,to:_,preventScrollReset:$,viewTransition:at,...rt},ut){let{basename:ot}=reactExports.useContext(NavigationContext),vt=typeof _=="string"&&ABSOLUTE_URL_REGEX2.test(_),bt,et=!1;if(typeof _=="string"&&vt&&(bt=_,isBrowser))try{let xt=new URL(window.location.href),Ct=_.startsWith("//")?new URL(xt.protocol+_):new URL(_),ht=stripBasename(Ct.pathname,ot);Ct.origin===xt.origin&&ht!=null?_=ht+Ct.search+Ct.hash:et=!0}catch{warning(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let nt=useHref(_,{relative:o}),[st,gt,lt]=usePrefetchBehavior(a,rt),yt=useLinkClickHandler(_,{replace:h,state:j,target:b,preventScrollReset:$,relative:o,viewTransition:at});function ct(xt){s&&s(xt),xt.defaultPrevented||yt(xt)}let mt=reactExports.createElement("a",{...rt,...lt,href:bt||nt,onClick:et||c?s:ct,ref:mergeRefs(ut,gt),target:b,"data-discover":!vt&&i==="render"?"true":void 0});return st&&!vt?reactExports.createElement(reactExports.Fragment,null,mt,reactExports.createElement(PrefetchPageLinks,{page:nt})):mt});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":s="page",caseSensitive:i=!1,className:a="",end:o=!1,style:c,to:h,viewTransition:j,children:b,..._},$){let at=useResolvedPath(h,{relative:_.relative}),rt=useLocation(),ut=reactExports.useContext(DataRouterStateContext),{navigator:ot,basename:vt}=reactExports.useContext(NavigationContext),bt=ut!=null&&useViewTransitionState(at)&&j===!0,et=ot.encodeLocation?ot.encodeLocation(at).pathname:at.pathname,nt=rt.pathname,st=ut&&ut.navigation&&ut.navigation.location?ut.navigation.location.pathname:null;i||(nt=nt.toLowerCase(),st=st?st.toLowerCase():null,et=et.toLowerCase()),st&&vt&&(st=stripBasename(st,vt)||st);const gt=et!=="/"&&et.endsWith("/")?et.length-1:et.length;let lt=nt===et||!o&&nt.startsWith(et)&&nt.charAt(gt)==="/",yt=st!=null&&(st===et||!o&&st.startsWith(et)&&st.charAt(et.length)==="/"),ct={isActive:lt,isPending:yt,isTransitioning:bt},mt=lt?s:void 0,xt;typeof a=="function"?xt=a(ct):xt=[a,lt?"active":null,yt?"pending":null,bt?"transitioning":null].filter(Boolean).join(" ");let Ct=typeof c=="function"?c(ct):c;return reactExports.createElement(Link,{..._,"aria-current":mt,className:xt,ref:$,style:Ct,to:h,viewTransition:j},typeof b=="function"?b(ct):b)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:s,navigate:i,reloadDocument:a,replace:o,state:c,method:h=defaultMethod,action:j,onSubmit:b,relative:_,preventScrollReset:$,viewTransition:at,...rt},ut)=>{let ot=useSubmit(),vt=useFormAction(j,{relative:_}),bt=h.toLowerCase()==="get"?"get":"post",et=typeof j=="string"&&ABSOLUTE_URL_REGEX2.test(j),nt=st=>{if(b&&b(st),st.defaultPrevented)return;st.preventDefault();let gt=st.nativeEvent.submitter,lt=(gt==null?void 0:gt.getAttribute("formmethod"))||h;ot(gt||st.currentTarget,{fetcherKey:s,method:lt,navigate:i,replace:o,state:c,relative:_,preventScrollReset:$,viewTransition:at})};return reactExports.createElement("form",{ref:ut,method:bt,action:vt,onSubmit:a?b:nt,...rt,"data-discover":!et&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let s=reactExports.useContext(DataRouterContext);return invariant(s,getDataRouterConsoleError2(e)),s}function useLinkClickHandler(e,{target:s,replace:i,state:a,preventScrollReset:o,relative:c,viewTransition:h}={}){let j=useNavigate(),b=useLocation(),_=useResolvedPath(e,{relative:c});return reactExports.useCallback($=>{if(shouldProcessLinkClick($,s)){$.preventDefault();let at=i!==void 0?i:createPath(b)===createPath(_);j(e,{replace:at,state:a,preventScrollReset:o,relative:c,viewTransition:h})}},[b,j,_,i,a,s,e,o,c,h])}function useSearchParams(e){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=reactExports.useRef(createSearchParams(e)),i=reactExports.useRef(!1),a=useLocation(),o=reactExports.useMemo(()=>getSearchParamsForLocation(a.search,i.current?null:s.current),[a.search]),c=useNavigate(),h=reactExports.useCallback((j,b)=>{const _=createSearchParams(typeof j=="function"?j(new URLSearchParams(o)):j);i.current=!0,c("?"+_,b)},[c,o]);return[o,h]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:s}=reactExports.useContext(NavigationContext),i=useRouteId();return reactExports.useCallback(async(a,o={})=>{let{action:c,method:h,encType:j,formData:b,body:_}=getFormSubmissionInfo(a,s);if(o.navigate===!1){let $=o.fetcherKey||getUniqueFetcherId();await e.fetch($,i,o.action||c,{preventScrollReset:o.preventScrollReset,formData:b,body:_,formMethod:o.method||h,formEncType:o.encType||j,flushSync:o.flushSync})}else await e.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:b,body:_,formMethod:o.method||h,formEncType:o.encType||j,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,s,i])}function useFormAction(e,{relative:s}={}){let{basename:i}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...useResolvedPath(e||".",{relative:s})},h=useLocation();if(e==null){c.search=h.search;let j=new URLSearchParams(c.search),b=j.getAll("index");if(b.some($=>$==="")){j.delete("index"),b.filter(at=>at).forEach(at=>j.append("index",at));let $=j.toString();c.search=$?`?${$}`:""}}return(!e||e===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:joinPaths([i,c.pathname])),createPath(c)}function useViewTransitionState(e,{relative:s}={}){let i=reactExports.useContext(ViewTransitionContext);invariant(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),o=useResolvedPath(e,{relative:s});if(!i.isTransitioning)return!1;let c=stripBasename(i.currentLocation.pathname,a)||i.currentLocation.pathname,h=stripBasename(i.nextLocation.pathname,a)||i.nextLocation.pathname;return matchPath(o.pathname,h)!=null||matchPath(o.pathname,c)!=null}var dexie_min={exports:{}};(function(e,s){(function(i,a){e.exports=a()})(commonjsGlobal,function(){var i=function(d,g){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,ft){_e.__proto__=ft}||function(_e,ft){for(var Et in ft)Object.prototype.hasOwnProperty.call(ft,Et)&&(_e[Et]=ft[Et])})(d,g)},a=function(){return(a=Object.assign||function(d){for(var g,_e=1,ft=arguments.length;_e<ft;_e++)for(var Et in g=arguments[_e])Object.prototype.hasOwnProperty.call(g,Et)&&(d[Et]=g[Et]);return d}).apply(this,arguments)};function o(d,g,_e){for(var ft,Et=0,St=g.length;Et<St;Et++)!ft&&Et in g||((ft=ft||Array.prototype.slice.call(g,0,Et))[Et]=g[Et]);return d.concat(ft||Array.prototype.slice.call(g))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,h=Object.keys,j=Array.isArray;function b(d,g){return typeof g!="object"||h(g).forEach(function(_e){d[_e]=g[_e]}),d}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var _=Object.getPrototypeOf,$={}.hasOwnProperty;function at(d,g){return $.call(d,g)}function rt(d,g){typeof g=="function"&&(g=g(_(d))),(typeof Reflect>"u"?h:Reflect.ownKeys)(g).forEach(function(_e){ot(d,_e,g[_e])})}var ut=Object.defineProperty;function ot(d,g,_e,ft){ut(d,g,b(_e&&at(_e,"get")&&typeof _e.get=="function"?{get:_e.get,set:_e.set,configurable:!0}:{value:_e,configurable:!0,writable:!0},ft))}function vt(d){return{from:function(g){return d.prototype=Object.create(g.prototype),ot(d.prototype,"constructor",d),{extend:rt.bind(null,d.prototype)}}}}var bt=Object.getOwnPropertyDescriptor,et=[].slice;function nt(d,g,_e){return et.call(d,g,_e)}function st(d,g){return g(d)}function gt(d){if(!d)throw new Error("Assertion Failed")}function lt(d){c.setImmediate?setImmediate(d):setTimeout(d,0)}function yt(d,g){if(typeof g=="string"&&at(d,g))return d[g];if(!g)return d;if(typeof g!="string"){for(var _e=[],ft=0,Et=g.length;ft<Et;++ft){var St=yt(d,g[ft]);_e.push(St)}return _e}var Mt=g.indexOf(".");if(Mt!==-1){var Ht=d[g.substr(0,Mt)];return Ht==null?void 0:yt(Ht,g.substr(Mt+1))}}function ct(d,g,_e){if(d&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof g!="string"&&"length"in g){gt(typeof _e!="string"&&"length"in _e);for(var ft=0,Et=g.length;ft<Et;++ft)ct(d,g[ft],_e[ft])}else{var St,Mt,Ht=g.indexOf(".");Ht!==-1?(St=g.substr(0,Ht),(Mt=g.substr(Ht+1))===""?_e===void 0?j(d)&&!isNaN(parseInt(St))?d.splice(St,1):delete d[St]:d[St]=_e:ct(Ht=!(Ht=d[St])||!at(d,St)?d[St]={}:Ht,Mt,_e)):_e===void 0?j(d)&&!isNaN(parseInt(g))?d.splice(g,1):delete d[g]:d[g]=_e}}function mt(d){var g,_e={};for(g in d)at(d,g)&&(_e[g]=d[g]);return _e}var xt=[].concat;function Ct(d){return xt.apply([],d)}var In="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ct([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(g){return g+d+"Array"})}))).filter(function(d){return c[d]}),ht=new Set(In.map(function(d){return c[d]})),wt=null;function jt(d){return wt=new WeakMap,d=function g(_e){if(!_e||typeof _e!="object")return _e;var ft=wt.get(_e);if(ft)return ft;if(j(_e)){ft=[],wt.set(_e,ft);for(var Et=0,St=_e.length;Et<St;++Et)ft.push(g(_e[Et]))}else if(ht.has(_e.constructor))ft=_e;else{var Mt,Ht=_(_e);for(Mt in ft=Ht===Object.prototype?{}:Object.create(Ht),wt.set(_e,ft),_e)at(_e,Mt)&&(ft[Mt]=g(_e[Mt]))}return ft}(d),wt=null,d}var Xt={}.toString;function Bt(d){return Xt.call(d).slice(8,-1)}var Wt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ut=typeof Wt=="symbol"?function(d){var g;return d!=null&&(g=d[Wt])&&g.apply(d)}:function(){return null};function $t(d,g){return g=d.indexOf(g),0<=g&&d.splice(g,1),0<=g}var kt={};function Ft(d){var g,_e,ft,Et;if(arguments.length===1){if(j(d))return d.slice();if(this===kt&&typeof d=="string")return[d];if(Et=Ut(d)){for(_e=[];!(ft=Et.next()).done;)_e.push(ft.value);return _e}if(d==null)return[d];if(typeof(g=d.length)!="number")return[d];for(_e=new Array(g);g--;)_e[g]=d[g];return _e}for(g=arguments.length,_e=new Array(g);g--;)_e[g]=arguments[g];return _e}var Gt=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Dr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qt),At={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function it(d,g){this.name=d,this.message=g}function dt(d,g){return d+". Errors: "+Object.keys(g).map(function(_e){return g[_e].toString()}).filter(function(_e,ft,Et){return Et.indexOf(_e)===ft}).join(`
`)}function _t(d,g,_e,ft){this.failures=g,this.failedKeys=ft,this.successCount=_e,this.message=dt(d,g)}function Tt(d,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_e){return g[_e]}),this.failuresByPos=g,this.message=dt(d,this.failures)}vt(it).from(Error).extend({toString:function(){return this.name+": "+this.message}}),vt(_t).from(it),vt(Tt).from(it);var Dt=Dr.reduce(function(d,g){return d[g]=g+"Error",d},{}),It=it,Lt=Dr.reduce(function(d,g){var _e=g+"Error";function ft(Et,St){this.name=_e,Et?typeof Et=="string"?(this.message="".concat(Et).concat(St?`
 `+St:""),this.inner=St||null):typeof Et=="object"&&(this.message="".concat(Et.name," ").concat(Et.message),this.inner=Et):(this.message=At[g]||_e,this.inner=null)}return vt(ft).from(It),d[g]=ft,d},{});Lt.Syntax=SyntaxError,Lt.Type=TypeError,Lt.Range=RangeError;var on=Qt.reduce(function(d,g){return d[g+"Error"]=Lt[g],d},{}),vn=Dr.reduce(function(d,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(d[g+"Error"]=Lt[g]),d},{});function un(){}function kn(d){return d}function jn(d,g){return d==null||d===kn?g:function(_e){return g(d(_e))}}function Rn(d,g){return function(){d.apply(this,arguments),g.apply(this,arguments)}}function nn(d,g){return d===un?g:function(){var _e=d.apply(this,arguments);_e!==void 0&&(arguments[0]=_e);var ft=this.onsuccess,Et=this.onerror;this.onsuccess=null,this.onerror=null;var St=g.apply(this,arguments);return ft&&(this.onsuccess=this.onsuccess?Rn(ft,this.onsuccess):ft),Et&&(this.onerror=this.onerror?Rn(Et,this.onerror):Et),St!==void 0?St:_e}}function rn(d,g){return d===un?g:function(){d.apply(this,arguments);var _e=this.onsuccess,ft=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_e&&(this.onsuccess=this.onsuccess?Rn(_e,this.onsuccess):_e),ft&&(this.onerror=this.onerror?Rn(ft,this.onerror):ft)}}function pt(d,g){return d===un?g:function(_e){var ft=d.apply(this,arguments);b(_e,ft);var Et=this.onsuccess,St=this.onerror;return this.onsuccess=null,this.onerror=null,_e=g.apply(this,arguments),Et&&(this.onsuccess=this.onsuccess?Rn(Et,this.onsuccess):Et),St&&(this.onerror=this.onerror?Rn(St,this.onerror):St),ft===void 0?_e===void 0?void 0:_e:b(ft,_e)}}function Rt(d,g){return d===un?g:function(){return g.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function zt(d,g){return d===un?g:function(){var _e=d.apply(this,arguments);if(_e&&typeof _e.then=="function"){for(var ft=this,Et=arguments.length,St=new Array(Et);Et--;)St[Et]=arguments[Et];return _e.then(function(){return g.apply(ft,St)})}return g.apply(this,arguments)}}vn.ModifyError=_t,vn.DexieError=it,vn.BulkError=Tt;var Kt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function hn(d){Kt=d}var Sn={},En=100,In=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,_(d),d];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,_(g),d]}(),Qt=In[0],Dr=In[1],In=In[2],Dr=Dr&&Dr.then,Dn=Qt&&Qt.constructor,nr=!!In,Jn=function(d,g){ln.push([d,g]),Bn&&(queueMicrotask(Nt),Bn=!1)},or=!0,Bn=!0,Yn=[],ar=[],dr=kn,An={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:un,pgp:!1,env:{},finalize:un},Vt=An,ln=[],Ln=0,ir=[];function Pn(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=Vt;if(typeof d!="function"){if(d!==Sn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Fn(this,this._value))}this._state=null,this._value=null,++g.ref,function _e(ft,Et){try{Et(function(St){if(ft._state===null){if(St===ft)throw new TypeError("A promise cannot be resolved with itself.");var Mt=ft._lib&&Pt();St&&typeof St.then=="function"?_e(ft,function(Ht,Jt){St instanceof Pn?St._then(Ht,Jt):St.then(Ht,Jt)}):(ft._state=!0,ft._value=St,Zn(ft)),Mt&&Zt()}},Fn.bind(null,ft))}catch(St){Fn(ft,St)}}(this,d)}var Ot={get:function(){var d=Vt,g=rr;function _e(ft,Et){var St=this,Mt=!d.global&&(d!==Vt||g!==rr),Ht=Mt&&!sr(),Jt=new Pn(function(en,fn){Qn(St,new _n(Ir(ft,d,Mt,Ht),Ir(Et,d,Mt,Ht),en,fn,d))});return this._consoleTask&&(Jt._consoleTask=this._consoleTask),Jt}return _e.prototype=Sn,_e},set:function(d){ot(this,"then",d&&d.prototype===Sn?Ot:{get:function(){return d},set:Ot.set})}};function _n(d,g,_e,ft,Et){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_e,this.reject=ft,this.psd=Et}function Fn(d,g){var _e,ft;ar.push(g),d._state===null&&(_e=d._lib&&Pt(),g=dr(g),d._state=!1,d._value=g,ft=d,Yn.some(function(Et){return Et._value===ft._value})||Yn.push(ft),Zn(d),_e&&Zt())}function Zn(d){var g=d._listeners;d._listeners=[];for(var _e=0,ft=g.length;_e<ft;++_e)Qn(d,g[_e]);var Et=d._PSD;--Et.ref||Et.finalize(),Ln===0&&(++Ln,Jn(function(){--Ln==0&&gn()},[]))}function Qn(d,g){if(d._state!==null){var _e=d._state?g.onFulfilled:g.onRejected;if(_e===null)return(d._state?g.resolve:g.reject)(d._value);++g.psd.ref,++Ln,Jn($n,[_e,d,g])}else d._listeners.push(g)}function $n(d,g,_e){try{var ft,Et=g._value;!g._state&&ar.length&&(ar=[]),ft=Kt&&g._consoleTask?g._consoleTask.run(function(){return d(Et)}):d(Et),g._state||ar.indexOf(Et)!==-1||function(St){for(var Mt=Yn.length;Mt;)if(Yn[--Mt]._value===St._value)return Yn.splice(Mt,1)}(g),_e.resolve(ft)}catch(St){_e.reject(St)}finally{--Ln==0&&gn(),--_e.psd.ref||_e.psd.finalize()}}function Nt(){Sr(An,function(){Pt()&&Zt()})}function Pt(){var d=or;return Bn=or=!1,d}function Zt(){var d,g,_e;do for(;0<ln.length;)for(d=ln,ln=[],_e=d.length,g=0;g<_e;++g){var ft=d[g];ft[0].apply(null,ft[1])}while(0<ln.length);Bn=or=!0}function gn(){var d=Yn;Yn=[],d.forEach(function(ft){ft._PSD.onunhandled.call(null,ft._value,ft)});for(var g=ir.slice(0),_e=g.length;_e;)g[--_e]()}function xn(d){return new Pn(Sn,!1,d)}function bn(d,g){var _e=Vt;return function(){var ft=Pt(),Et=Vt;try{return yr(_e,!0),d.apply(this,arguments)}catch(St){g&&g(St)}finally{yr(Et,!1),ft&&Zt()}}}rt(Pn.prototype,{then:Ot,_then:function(d,g){Qn(this,new _n(null,null,d,g,Vt))},catch:function(d){if(arguments.length===1)return this.then(null,d);var g=d,_e=arguments[1];return typeof g=="function"?this.then(null,function(ft){return(ft instanceof g?_e:xn)(ft)}):this.then(null,function(ft){return(ft&&ft.name===g?_e:xn)(ft)})},finally:function(d){return this.then(function(g){return Pn.resolve(d()).then(function(){return g})},function(g){return Pn.resolve(d()).then(function(){return xn(g)})})},timeout:function(d,g){var _e=this;return d<1/0?new Pn(function(ft,Et){var St=setTimeout(function(){return Et(new Lt.Timeout(g))},d);_e.then(ft,Et).finally(clearTimeout.bind(null,St))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ot(Pn.prototype,Symbol.toStringTag,"Dexie.Promise"),An.env=vr(),rt(Pn,{all:function(){var d=Ft.apply(null,arguments).map(lr);return new Pn(function(g,_e){d.length===0&&g([]);var ft=d.length;d.forEach(function(Et,St){return Pn.resolve(Et).then(function(Mt){d[St]=Mt,--ft||g(d)},_e)})})},resolve:function(d){return d instanceof Pn?d:d&&typeof d.then=="function"?new Pn(function(g,_e){d.then(g,_e)}):new Pn(Sn,!0,d)},reject:xn,race:function(){var d=Ft.apply(null,arguments).map(lr);return new Pn(function(g,_e){d.map(function(ft){return Pn.resolve(ft).then(g,_e)})})},PSD:{get:function(){return Vt},set:function(d){return Vt=d}},totalEchoes:{get:function(){return rr}},newPSD:Vn,usePSD:Sr,scheduler:{get:function(){return Jn},set:function(d){Jn=d}},rejectionMapper:{get:function(){return dr},set:function(d){dr=d}},follow:function(d,g){return new Pn(function(_e,ft){return Vn(function(Et,St){var Mt=Vt;Mt.unhandleds=[],Mt.onunhandled=St,Mt.finalize=Rn(function(){var Ht,Jt=this;Ht=function(){Jt.unhandleds.length===0?Et():St(Jt.unhandleds[0])},ir.push(function en(){Ht(),ir.splice(ir.indexOf(en),1)}),++Ln,Jn(function(){--Ln==0&&gn()},[])},Mt.finalize),d()},g,_e,ft)})}}),Dn&&(Dn.allSettled&&ot(Pn,"allSettled",function(){var d=Ft.apply(null,arguments).map(lr);return new Pn(function(g){d.length===0&&g([]);var _e=d.length,ft=new Array(_e);d.forEach(function(Et,St){return Pn.resolve(Et).then(function(Mt){return ft[St]={status:"fulfilled",value:Mt}},function(Mt){return ft[St]={status:"rejected",reason:Mt}}).then(function(){return--_e||g(ft)})})})}),Dn.any&&typeof AggregateError<"u"&&ot(Pn,"any",function(){var d=Ft.apply(null,arguments).map(lr);return new Pn(function(g,_e){d.length===0&&_e(new AggregateError([]));var ft=d.length,Et=new Array(ft);d.forEach(function(St,Mt){return Pn.resolve(St).then(function(Ht){return g(Ht)},function(Ht){Et[Mt]=Ht,--ft||_e(new AggregateError(Et))})})})}),Dn.withResolvers&&(Pn.withResolvers=Dn.withResolvers));var Cn={awaits:0,echoes:0,id:0},qn=0,Wn=[],Mn=0,rr=0,Kn=0;function Vn(d,g,_e,ft){var Et=Vt,St=Object.create(Et);return St.parent=Et,St.ref=0,St.global=!1,St.id=++Kn,An.env,St.env=nr?{Promise:Pn,PromiseProp:{value:Pn,configurable:!0,writable:!0},all:Pn.all,race:Pn.race,allSettled:Pn.allSettled,any:Pn.any,resolve:Pn.resolve,reject:Pn.reject}:{},g&&b(St,g),++Et.ref,St.finalize=function(){--this.parent.ref||this.parent.finalize()},ft=Sr(St,d,_e,ft),St.ref===0&&St.finalize(),ft}function tr(){return Cn.id||(Cn.id=++qn),++Cn.awaits,Cn.echoes+=En,Cn.id}function sr(){return!!Cn.awaits&&(--Cn.awaits==0&&(Cn.id=0),Cn.echoes=Cn.awaits*En,!0)}function lr(d){return Cn.echoes&&d&&d.constructor===Dn?(tr(),d.then(function(g){return sr(),g},function(g){return sr(),Er(g)})):d}function mr(){var d=Wn[Wn.length-1];Wn.pop(),yr(d,!1)}function yr(d,g){var _e,ft=Vt;(g?!Cn.echoes||Mn++&&d===Vt:!Mn||--Mn&&d===Vt)||queueMicrotask(g?(function(Et){++rr,Cn.echoes&&--Cn.echoes!=0||(Cn.echoes=Cn.awaits=Cn.id=0),Wn.push(Vt),yr(Et,!0)}).bind(null,d):mr),d!==Vt&&(Vt=d,ft===An&&(An.env=vr()),nr&&(_e=An.env.Promise,g=d.env,(ft.global||d.global)&&(Object.defineProperty(c,"Promise",g.PromiseProp),_e.all=g.all,_e.race=g.race,_e.resolve=g.resolve,_e.reject=g.reject,g.allSettled&&(_e.allSettled=g.allSettled),g.any&&(_e.any=g.any))))}function vr(){var d=c.Promise;return nr?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Sr(d,g,_e,ft,Et){var St=Vt;try{return yr(d,!0),g(_e,ft,Et)}finally{yr(St,!1)}}function Ir(d,g,_e,ft){return typeof d!="function"?d:function(){var Et=Vt;_e&&tr(),yr(g,!0);try{return d.apply(this,arguments)}finally{yr(Et,!1),ft&&queueMicrotask(sr)}}}function Pr(d){Promise===Dn&&Cn.echoes===0?Mn===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Dr).indexOf("[native code]")===-1&&(tr=sr=un);var Er=Pn.reject,Wr="",Or="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yl="String expected.",qr=[],_s="__dbnames",_i="readonly",na="readwrite";function Vr(d,g){return d?g?function(){return d.apply(this,arguments)&&g.apply(this,arguments)}:d:g}var El={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ws(d){return typeof d!="string"||/\./.test(d)?function(g){return g}:function(g){return g[d]===void 0&&d in g&&delete(g=jt(g))[d],g}}function _l(){throw Lt.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function pr(d,g){try{var _e=wl(d),ft=wl(g);if(_e!==ft)return _e==="Array"?1:ft==="Array"?-1:_e==="binary"?1:ft==="binary"?-1:_e==="string"?1:ft==="string"?-1:_e==="Date"?1:ft!=="Date"?NaN:-1;switch(_e){case"number":case"Date":case"string":return g<d?1:d<g?-1:0;case"binary":return function(Et,St){for(var Mt=Et.length,Ht=St.length,Jt=Mt<Ht?Mt:Ht,en=0;en<Jt;++en)if(Et[en]!==St[en])return Et[en]<St[en]?-1:1;return Mt===Ht?0:Mt<Ht?-1:1}(Sl(d),Sl(g));case"Array":return function(Et,St){for(var Mt=Et.length,Ht=St.length,Jt=Mt<Ht?Mt:Ht,en=0;en<Jt;++en){var fn=pr(Et[en],St[en]);if(fn!==0)return fn}return Mt===Ht?0:Mt<Ht?-1:1}(d,g)}}catch{}return NaN}function wl(d){var g=typeof d;return g!="object"?g:ArrayBuffer.isView(d)?"binary":(d=Bt(d),d==="ArrayBuffer"?"binary":d)}function Sl(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function Ss(d,g,_e){var ft=d.schema.yProps;return ft?(g&&0<_e.numFailures&&(g=g.filter(function(Et,St){return!_e.failures[St]})),Promise.all(ft.map(function(Et){return Et=Et.updatesTable,g?d.db.table(Et).where("k").anyOf(g).delete():d.db.table(Et).clear()})).then(function(){return _e})):_e}var is=(Al.prototype.execute=function(d){var g=this["@@propmod"];if(g.add!==void 0){var _e=g.add;if(j(_e))return o(o([],j(d)?d:[],!0),_e).sort();if(typeof _e=="number")return(Number(d)||0)+_e;if(typeof _e=="bigint")try{return BigInt(d)+_e}catch{return BigInt(0)+_e}throw new TypeError("Invalid term ".concat(_e))}if(g.remove!==void 0){var ft=g.remove;if(j(ft))return j(d)?d.filter(function(Et){return!ft.includes(Et)}).sort():[];if(typeof ft=="number")return Number(d)-ft;if(typeof ft=="bigint")try{return BigInt(d)-ft}catch{return BigInt(0)-ft}throw new TypeError("Invalid subtrahend ".concat(ft))}return _e=(_e=g.replacePrefix)===null||_e===void 0?void 0:_e[0],_e&&typeof d=="string"&&d.startsWith(_e)?g.replacePrefix[1]+d.substring(_e.length):d},Al);function Al(d){this["@@propmod"]=d}function Rl(d,g){for(var _e=h(g),ft=_e.length,Et=!1,St=0;St<ft;++St){var Mt=_e[St],Ht=g[Mt],Jt=yt(d,Mt);Ht instanceof is?(ct(d,Mt,Ht.execute(Jt)),Et=!0):Jt!==Ht&&(ct(d,Mt,Ht),Et=!0)}return Et}var Cl=(br.prototype._trans=function(d,g,_e){var ft=this._tx||Vt.trans,Et=this.name,St=Kt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function Mt(en,fn,qt){if(!qt.schema[Et])throw new Lt.NotFound("Table "+Et+" not part of transaction");return g(qt.idbtrans,qt)}var Ht=Pt();try{var Jt=ft&&ft.db._novip===this.db._novip?ft===Vt.trans?ft._promise(d,Mt,_e):Vn(function(){return ft._promise(d,Mt,_e)},{trans:ft,transless:Vt.transless||Vt}):function en(fn,qt,mn,tn){if(fn.idbdb&&(fn._state.openComplete||Vt.letThrough||fn._vip)){var sn=fn._createTransaction(qt,mn,fn._dbSchema);try{sn.create(),fn._state.PR1398_maxLoop=3}catch(an){return an.name===Dt.InvalidState&&fn.isOpen()&&0<--fn._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),fn.close({disableAutoOpen:!1}),fn.open().then(function(){return en(fn,qt,mn,tn)})):Er(an)}return sn._promise(qt,function(an,pn){return Vn(function(){return Vt.trans=sn,tn(an,pn,sn)})}).then(function(an){if(qt==="readwrite")try{sn.idbtrans.commit()}catch{}return qt==="readonly"?an:sn._completion.then(function(){return an})})}if(fn._state.openComplete)return Er(new Lt.DatabaseClosed(fn._state.dbOpenError));if(!fn._state.isBeingOpened){if(!fn._state.autoOpen)return Er(new Lt.DatabaseClosed);fn.open().catch(un)}return fn._state.dbReadyPromise.then(function(){return en(fn,qt,mn,tn)})}(this.db,d,[this.name],Mt);return St&&(Jt._consoleTask=St,Jt=Jt.catch(function(en){return console.trace(en),Er(en)})),Jt}finally{Ht&&Zt()}},br.prototype.get=function(d,g){var _e=this;return d&&d.constructor===Object?this.where(d).first(g):d==null?Er(new Lt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ft){return _e.core.get({trans:ft,key:d}).then(function(Et){return _e.hook.reading.fire(Et)})}).then(g)},br.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(j(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var g=h(d);if(g.length===1)return this.where(g[0]).equals(d[g[0]]);var _e=this.schema.indexes.concat(this.schema.primKey).filter(function(Ht){if(Ht.compound&&g.every(function(en){return 0<=Ht.keyPath.indexOf(en)})){for(var Jt=0;Jt<g.length;++Jt)if(g.indexOf(Ht.keyPath[Jt])===-1)return!1;return!0}return!1}).sort(function(Ht,Jt){return Ht.keyPath.length-Jt.keyPath.length})[0];if(_e&&this.db._maxKey!==Wr){var St=_e.keyPath.slice(0,g.length);return this.where(St).equals(St.map(function(Jt){return d[Jt]}))}!_e&&Kt&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var ft=this.schema.idxByName;function Et(Ht,Jt){return pr(Ht,Jt)===0}var Mt=g.reduce(function(qt,Jt){var en=qt[0],fn=qt[1],qt=ft[Jt],mn=d[Jt];return[en||qt,en||!qt?Vr(fn,qt&&qt.multi?function(tn){return tn=yt(tn,Jt),j(tn)&&tn.some(function(sn){return Et(mn,sn)})}:function(tn){return Et(mn,yt(tn,Jt))}):fn]},[null,null]),St=Mt[0],Mt=Mt[1];return St?this.where(St.name).equals(d[St.keyPath]).filter(Mt):_e?this.filter(Mt):this.where(g).equals("")},br.prototype.filter=function(d){return this.toCollection().and(d)},br.prototype.count=function(d){return this.toCollection().count(d)},br.prototype.offset=function(d){return this.toCollection().offset(d)},br.prototype.limit=function(d){return this.toCollection().limit(d)},br.prototype.each=function(d){return this.toCollection().each(d)},br.prototype.toArray=function(d){return this.toCollection().toArray(d)},br.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},br.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,j(d)?"[".concat(d.join("+"),"]"):d))},br.prototype.reverse=function(){return this.toCollection().reverse()},br.prototype.mapToClass=function(d){var g,_e=this.db,ft=this.name;function Et(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof _l&&(function(Jt,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");function fn(){this.constructor=Jt}i(Jt,en),Jt.prototype=en===null?Object.create(en):(fn.prototype=en.prototype,new fn)}(Et,g=d),Object.defineProperty(Et.prototype,"db",{get:function(){return _e},enumerable:!1,configurable:!0}),Et.prototype.table=function(){return ft},d=Et);for(var St=new Set,Mt=d.prototype;Mt;Mt=_(Mt))Object.getOwnPropertyNames(Mt).forEach(function(Jt){return St.add(Jt)});function Ht(Jt){if(!Jt)return Jt;var en,fn=Object.create(d.prototype);for(en in Jt)if(!St.has(en))try{fn[en]=Jt[en]}catch{}return fn}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Ht,this.hook("reading",Ht),d},br.prototype.defineClass=function(){return this.mapToClass(function(d){b(this,d)})},br.prototype.add=function(d,g){var _e=this,ft=this.schema.primKey,Et=ft.auto,St=ft.keyPath,Mt=d;return St&&Et&&(Mt=ws(St)(d)),this._trans("readwrite",function(Ht){return _e.core.mutate({trans:Ht,type:"add",keys:g!=null?[g]:null,values:[Mt]})}).then(function(Ht){return Ht.numFailures?Pn.reject(Ht.failures[0]):Ht.lastResult}).then(function(Ht){if(St)try{ct(d,St,Ht)}catch{}return Ht})},br.prototype.upsert=function(d,g){var _e=this,ft=this.schema.primKey.keyPath;return this._trans("readwrite",function(Et){return _e.core.get({trans:Et,key:d}).then(function(St){var Mt=St??{};return Rl(Mt,g),ft&&ct(Mt,ft,d),_e.core.mutate({trans:Et,type:"put",values:[Mt],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[g]}}).then(function(Ht){return Ht.numFailures?Pn.reject(Ht.failures[0]):!!St})})})},br.prototype.update=function(d,g){return typeof d!="object"||j(d)?this.where(":id").equals(d).modify(g):(d=yt(d,this.schema.primKey.keyPath),d===void 0?Er(new Lt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(g))},br.prototype.put=function(d,g){var _e=this,ft=this.schema.primKey,Et=ft.auto,St=ft.keyPath,Mt=d;return St&&Et&&(Mt=ws(St)(d)),this._trans("readwrite",function(Ht){return _e.core.mutate({trans:Ht,type:"put",values:[Mt],keys:g!=null?[g]:null})}).then(function(Ht){return Ht.numFailures?Pn.reject(Ht.failures[0]):Ht.lastResult}).then(function(Ht){if(St)try{ct(d,St,Ht)}catch{}return Ht})},br.prototype.delete=function(d){var g=this;return this._trans("readwrite",function(_e){return g.core.mutate({trans:_e,type:"delete",keys:[d]}).then(function(ft){return Ss(g,[d],ft)}).then(function(ft){return ft.numFailures?Pn.reject(ft.failures[0]):void 0})})},br.prototype.clear=function(){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"deleteRange",range:El}).then(function(_e){return Ss(d,null,_e)})}).then(function(g){return g.numFailures?Pn.reject(g.failures[0]):void 0})},br.prototype.bulkGet=function(d){var g=this;return this._trans("readonly",function(_e){return g.core.getMany({keys:d,trans:_e}).then(function(ft){return ft.map(function(Et){return g.hook.reading.fire(Et)})})})},br.prototype.bulkAdd=function(d,g,_e){var ft=this,Et=Array.isArray(g)?g:void 0,St=(_e=_e||(Et?void 0:g))?_e.allKeys:void 0;return this._trans("readwrite",function(Mt){var en=ft.schema.primKey,Ht=en.auto,en=en.keyPath;if(en&&Et)throw new Lt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(Et&&Et.length!==d.length)throw new Lt.InvalidArgument("Arguments objects and keys must have the same length");var Jt=d.length,en=en&&Ht?d.map(ws(en)):d;return ft.core.mutate({trans:Mt,type:"add",keys:Et,values:en,wantResults:St}).then(function(sn){var qt=sn.numFailures,mn=sn.results,tn=sn.lastResult,sn=sn.failures;if(qt===0)return St?mn:tn;throw new Tt("".concat(ft.name,".bulkAdd(): ").concat(qt," of ").concat(Jt," operations failed"),sn)})})},br.prototype.bulkPut=function(d,g,_e){var ft=this,Et=Array.isArray(g)?g:void 0,St=(_e=_e||(Et?void 0:g))?_e.allKeys:void 0;return this._trans("readwrite",function(Mt){var en=ft.schema.primKey,Ht=en.auto,en=en.keyPath;if(en&&Et)throw new Lt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(Et&&Et.length!==d.length)throw new Lt.InvalidArgument("Arguments objects and keys must have the same length");var Jt=d.length,en=en&&Ht?d.map(ws(en)):d;return ft.core.mutate({trans:Mt,type:"put",keys:Et,values:en,wantResults:St}).then(function(sn){var qt=sn.numFailures,mn=sn.results,tn=sn.lastResult,sn=sn.failures;if(qt===0)return St?mn:tn;throw new Tt("".concat(ft.name,".bulkPut(): ").concat(qt," of ").concat(Jt," operations failed"),sn)})})},br.prototype.bulkUpdate=function(d){var g=this,_e=this.core,ft=d.map(function(Mt){return Mt.key}),Et=d.map(function(Mt){return Mt.changes}),St=[];return this._trans("readwrite",function(Mt){return _e.getMany({trans:Mt,keys:ft,cache:"clone"}).then(function(Ht){var Jt=[],en=[];d.forEach(function(qt,mn){var tn=qt.key,sn=qt.changes,an=Ht[mn];if(an){for(var pn=0,yn=Object.keys(sn);pn<yn.length;pn++){var wn=yn[pn],Tn=sn[wn];if(wn===g.schema.primKey.keyPath){if(pr(Tn,tn)!==0)throw new Lt.Constraint("Cannot update primary key in bulkUpdate()")}else ct(an,wn,Tn)}St.push(mn),Jt.push(tn),en.push(an)}});var fn=Jt.length;return _e.mutate({trans:Mt,type:"put",keys:Jt,values:en,updates:{keys:ft,changeSpecs:Et}}).then(function(qt){var mn=qt.numFailures,tn=qt.failures;if(mn===0)return fn;for(var sn=0,an=Object.keys(tn);sn<an.length;sn++){var pn,yn=an[sn],wn=St[Number(yn)];wn!=null&&(pn=tn[yn],delete tn[yn],tn[wn]=pn)}throw new Tt("".concat(g.name,".bulkUpdate(): ").concat(mn," of ").concat(fn," operations failed"),tn)})})})},br.prototype.bulkDelete=function(d){var g=this,_e=d.length;return this._trans("readwrite",function(ft){return g.core.mutate({trans:ft,type:"delete",keys:d}).then(function(Et){return Ss(g,d,Et)})}).then(function(Mt){var Et=Mt.numFailures,St=Mt.lastResult,Mt=Mt.failures;if(Et===0)return St;throw new Tt("".concat(g.name,".bulkDelete(): ").concat(Et," of ").concat(_e," operations failed"),Mt)})},br);function br(){}function as(d){function g(Mt,Ht){if(Ht){for(var Jt=arguments.length,en=new Array(Jt-1);--Jt;)en[Jt-1]=arguments[Jt];return _e[Mt].subscribe.apply(null,en),d}if(typeof Mt=="string")return _e[Mt]}var _e={};g.addEventType=St;for(var ft=1,Et=arguments.length;ft<Et;++ft)St(arguments[ft]);return g;function St(Mt,Ht,Jt){if(typeof Mt!="object"){var en;Ht=Ht||Rt;var fn={subscribers:[],fire:Jt=Jt||un,subscribe:function(qt){fn.subscribers.indexOf(qt)===-1&&(fn.subscribers.push(qt),fn.fire=Ht(fn.fire,qt))},unsubscribe:function(qt){fn.subscribers=fn.subscribers.filter(function(mn){return mn!==qt}),fn.fire=fn.subscribers.reduce(Ht,Jt)}};return _e[Mt]=g[Mt]=fn}h(en=Mt).forEach(function(qt){var mn=en[qt];if(j(mn))St(qt,en[qt][0],en[qt][1]);else{if(mn!=="asap")throw new Lt.InvalidArgument("Invalid event config");var tn=St(qt,kn,function(){for(var sn=arguments.length,an=new Array(sn);sn--;)an[sn]=arguments[sn];tn.subscribers.forEach(function(pn){lt(function(){pn.apply(null,an)})})})}})}}function os(d,g){return vt(g).from({prototype:d}),g}function Xr(d,g){return!(d.filter||d.algorithm||d.or)&&(g?d.justLimit:!d.replayFilter)}function ga(d,g){d.filter=Vr(d.filter,g)}function xa(d,g,_e){var ft=d.replayFilter;d.replayFilter=ft?function(){return Vr(ft(),g())}:g,d.justLimit=_e&&!ft}function ks(d,g){if(d.isPrimKey)return g.primaryKey;var _e=g.getIndexByKeyPath(d.index);if(!_e)throw new Lt.Schema("KeyPath "+d.index+" on object store "+g.name+" is not indexed");return _e}function Tl(d,g,_e){var ft=ks(d,g.schema);return g.openCursor({trans:_e,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:ft,range:d.range}})}function As(d,g,_e,ft){var Et=d.replayFilter?Vr(d.filter,d.replayFilter()):d.filter;if(d.or){var St={},Mt=function(Ht,Jt,en){var fn,qt;Et&&!Et(Jt,en,function(mn){return Jt.stop(mn)},function(mn){return Jt.fail(mn)})||((qt=""+(fn=Jt.primaryKey))=="[object ArrayBuffer]"&&(qt=""+new Uint8Array(fn)),at(St,qt)||(St[qt]=!0,g(Ht,Jt,en)))};return Promise.all([d.or._iterate(Mt,_e),Pl(Tl(d,ft,_e),d.algorithm,Mt,!d.keysOnly&&d.valueMapper)])}return Pl(Tl(d,ft,_e),Vr(d.algorithm,Et),g,!d.keysOnly&&d.valueMapper)}function Pl(d,g,_e,ft){var Et=bn(ft?function(St,Mt,Ht){return _e(ft(St),Mt,Ht)}:_e);return d.then(function(St){if(St)return St.start(function(){var Mt=function(){return St.continue()};g&&!g(St,function(Ht){return Mt=Ht},function(Ht){St.stop(Ht),Mt=un},function(Ht){St.fail(Ht),Mt=un})||Et(St.value,St,function(Ht){return Mt=Ht}),Mt()})})}var Du=(gr.prototype._read=function(d,g){var _e=this._ctx;return _e.error?_e.table._trans(null,Er.bind(null,_e.error)):_e.table._trans("readonly",d).then(g)},gr.prototype._write=function(d){var g=this._ctx;return g.error?g.table._trans(null,Er.bind(null,g.error)):g.table._trans("readwrite",d,"locked")},gr.prototype._addAlgorithm=function(d){var g=this._ctx;g.algorithm=Vr(g.algorithm,d)},gr.prototype._iterate=function(d,g){return As(this._ctx,d,g,this._ctx.table.core)},gr.prototype.clone=function(d){var g=Object.create(this.constructor.prototype),_e=Object.create(this._ctx);return d&&b(_e,d),g._ctx=_e,g},gr.prototype.raw=function(){return this._ctx.valueMapper=null,this},gr.prototype.each=function(d){var g=this._ctx;return this._read(function(_e){return As(g,d,_e,g.table.core)})},gr.prototype.count=function(d){var g=this;return this._read(function(_e){var ft=g._ctx,Et=ft.table.core;if(Xr(ft,!0))return Et.count({trans:_e,query:{index:ks(ft,Et.schema),range:ft.range}}).then(function(Mt){return Math.min(Mt,ft.limit)});var St=0;return As(ft,function(){return++St,!1},_e,Et).then(function(){return St})}).then(d)},gr.prototype.sortBy=function(d,g){var _e=d.split(".").reverse(),ft=_e[0],Et=_e.length-1;function St(Jt,en){return en?St(Jt[_e[en]],en-1):Jt[ft]}var Mt=this._ctx.dir==="next"?1:-1;function Ht(Jt,en){return pr(St(Jt,Et),St(en,Et))*Mt}return this.toArray(function(Jt){return Jt.sort(Ht)}).then(g)},gr.prototype.toArray=function(d){var g=this;return this._read(function(_e){var ft=g._ctx;if(ft.dir==="next"&&Xr(ft,!0)&&0<ft.limit){var Et=ft.valueMapper,St=ks(ft,ft.table.core.schema);return ft.table.core.query({trans:_e,limit:ft.limit,values:!0,query:{index:St,range:ft.range}}).then(function(Ht){return Ht=Ht.result,Et?Ht.map(Et):Ht})}var Mt=[];return As(ft,function(Ht){return Mt.push(Ht)},_e,ft.table.core).then(function(){return Mt})},d)},gr.prototype.offset=function(d){var g=this._ctx;return d<=0||(g.offset+=d,Xr(g)?xa(g,function(){var _e=d;return function(ft,Et){return _e===0||(_e===1?--_e:Et(function(){ft.advance(_e),_e=0}),!1)}}):xa(g,function(){var _e=d;return function(){return--_e<0}})),this},gr.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),xa(this._ctx,function(){var g=d;return function(_e,ft,Et){return--g<=0&&ft(Et),0<=g}},!0),this},gr.prototype.until=function(d,g){return ga(this._ctx,function(_e,ft,Et){return!d(_e.value)||(ft(Et),g)}),this},gr.prototype.first=function(d){return this.limit(1).toArray(function(g){return g[0]}).then(d)},gr.prototype.last=function(d){return this.reverse().first(d)},gr.prototype.filter=function(d){var g;return ga(this._ctx,function(_e){return d(_e.value)}),(g=this._ctx).isMatch=Vr(g.isMatch,d),this},gr.prototype.and=function(d){return this.filter(d)},gr.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},gr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},gr.prototype.desc=function(){return this.reverse()},gr.prototype.eachKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_e,ft){d(ft.key,ft)})},gr.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},gr.prototype.eachPrimaryKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_e,ft){d(ft.primaryKey,ft)})},gr.prototype.keys=function(d){var g=this._ctx;g.keysOnly=!g.isMatch;var _e=[];return this.each(function(ft,Et){_e.push(Et.key)}).then(function(){return _e}).then(d)},gr.prototype.primaryKeys=function(d){var g=this._ctx;if(g.dir==="next"&&Xr(g,!0)&&0<g.limit)return this._read(function(ft){var Et=ks(g,g.table.core.schema);return g.table.core.query({trans:ft,values:!1,limit:g.limit,query:{index:Et,range:g.range}})}).then(function(ft){return ft.result}).then(d);g.keysOnly=!g.isMatch;var _e=[];return this.each(function(ft,Et){_e.push(Et.primaryKey)}).then(function(){return _e}).then(d)},gr.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},gr.prototype.firstKey=function(d){return this.limit(1).keys(function(g){return g[0]}).then(d)},gr.prototype.lastKey=function(d){return this.reverse().firstKey(d)},gr.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var g={};return ga(this._ctx,function(Et){var ft=Et.primaryKey.toString(),Et=at(g,ft);return g[ft]=!0,!Et}),this},gr.prototype.modify=function(d){var g=this,_e=this._ctx;return this._write(function(ft){var Et=typeof d=="function"?d:function(an){return Rl(an,d)},St=_e.table.core,en=St.schema.primaryKey,Mt=en.outbound,Ht=en.extractKey,Jt=200,en=g.db._options.modifyChunkSize;en&&(Jt=typeof en=="object"?en[St.name]||en["*"]||200:en);function fn(an,wn){var yn=wn.failures,wn=wn.numFailures;mn+=an-wn;for(var Tn=0,Nn=h(yn);Tn<Nn.length;Tn++){var zn=Nn[Tn];qt.push(yn[zn])}}var qt=[],mn=0,tn=[],sn=d===Dl;return g.clone().primaryKeys().then(function(an){function pn(wn){var Tn=Math.min(Jt,an.length-wn),Nn=an.slice(wn,wn+Tn);return(sn?Promise.resolve([]):St.getMany({trans:ft,keys:Nn,cache:"immutable"})).then(function(zn){var Gn=[],On=[],Un=Mt?[]:null,Xn=sn?Nn:[];if(!sn)for(var Hn=0;Hn<Tn;++Hn){var er=zn[Hn],ur={value:jt(er),primKey:an[wn+Hn]};Et.call(ur,ur.value,ur)!==!1&&(ur.value==null?Xn.push(an[wn+Hn]):Mt||pr(Ht(er),Ht(ur.value))===0?(On.push(ur.value),Mt&&Un.push(an[wn+Hn])):(Xn.push(an[wn+Hn]),Gn.push(ur.value)))}return Promise.resolve(0<Gn.length&&St.mutate({trans:ft,type:"add",values:Gn}).then(function(hr){for(var fr in hr.failures)Xn.splice(parseInt(fr),1);fn(Gn.length,hr)})).then(function(){return(0<On.length||yn&&typeof d=="object")&&St.mutate({trans:ft,type:"put",keys:Un,values:On,criteria:yn,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<wn}).then(function(hr){return fn(On.length,hr)})}).then(function(){return(0<Xn.length||yn&&sn)&&St.mutate({trans:ft,type:"delete",keys:Xn,criteria:yn,isAdditionalChunk:0<wn}).then(function(hr){return Ss(_e.table,Xn,hr)}).then(function(hr){return fn(Xn.length,hr)})}).then(function(){return an.length>wn+Tn&&pn(wn+Jt)})})}var yn=Xr(_e)&&_e.limit===1/0&&(typeof d!="function"||sn)&&{index:_e.index,range:_e.range};return pn(0).then(function(){if(0<qt.length)throw new _t("Error modifying one or more objects",qt,mn,tn);return an.length})})})},gr.prototype.delete=function(){var d=this._ctx,g=d.range;return!Xr(d)||d.table.schema.yProps||!d.isPrimKey&&g.type!==3?this.modify(Dl):this._write(function(_e){var ft=d.table.core.schema.primaryKey,Et=g;return d.table.core.count({trans:_e,query:{index:ft,range:Et}}).then(function(St){return d.table.core.mutate({trans:_e,type:"deleteRange",range:Et}).then(function(Jt){var Ht=Jt.failures,Jt=Jt.numFailures;if(Jt)throw new _t("Could not delete some values",Object.keys(Ht).map(function(en){return Ht[en]}),St-Jt);return St-Jt})})})},gr);function gr(){}var Dl=function(d,g){return g.value=null};function Nu(d,g){return d<g?-1:d===g?0:1}function Iu(d,g){return g<d?-1:d===g?0:1}function jr(d,g,_e){return d=d instanceof Il?new d.Collection(d):d,d._ctx.error=new(_e||TypeError)(g),d}function Yr(d){return new d.Collection(d,function(){return Nl("")}).limit(0)}function Rs(d,g,_e,ft){var Et,St,Mt,Ht,Jt,en,fn,qt=_e.length;if(!_e.every(function(sn){return typeof sn=="string"}))return jr(d,yl);function mn(sn){Et=sn==="next"?function(pn){return pn.toUpperCase()}:function(pn){return pn.toLowerCase()},St=sn==="next"?function(pn){return pn.toLowerCase()}:function(pn){return pn.toUpperCase()},Mt=sn==="next"?Nu:Iu;var an=_e.map(function(pn){return{lower:St(pn),upper:Et(pn)}}).sort(function(pn,yn){return Mt(pn.lower,yn.lower)});Ht=an.map(function(pn){return pn.upper}),Jt=an.map(function(pn){return pn.lower}),fn=(en=sn)==="next"?"":ft}mn("next"),d=new d.Collection(d,function(){return $r(Ht[0],Jt[qt-1]+ft)}),d._ondirectionchange=function(sn){mn(sn)};var tn=0;return d._addAlgorithm(function(sn,an,pn){var yn=sn.key;if(typeof yn!="string")return!1;var wn=St(yn);if(g(wn,Jt,tn))return!0;for(var Tn=null,Nn=tn;Nn<qt;++Nn){var zn=function(Gn,On,Un,Xn,Hn,er){for(var ur=Math.min(Gn.length,Xn.length),hr=-1,fr=0;fr<ur;++fr){var Tr=On[fr];if(Tr!==Xn[fr])return Hn(Gn[fr],Un[fr])<0?Gn.substr(0,fr)+Un[fr]+Un.substr(fr+1):Hn(Gn[fr],Xn[fr])<0?Gn.substr(0,fr)+Xn[fr]+Un.substr(fr+1):0<=hr?Gn.substr(0,hr)+On[hr]+Un.substr(hr+1):null;Hn(Gn[fr],Tr)<0&&(hr=fr)}return ur<Xn.length&&er==="next"?Gn+Un.substr(Gn.length):ur<Gn.length&&er==="prev"?Gn.substr(0,Un.length):hr<0?null:Gn.substr(0,hr)+Xn[hr]+Un.substr(hr+1)}(yn,wn,Ht[Nn],Jt[Nn],Mt,en);zn===null&&Tn===null?tn=Nn+1:(Tn===null||0<Mt(Tn,zn))&&(Tn=zn)}return an(Tn!==null?function(){sn.continue(Tn+fn)}:pn),!1}),d}function $r(d,g,_e,ft){return{type:2,lower:d,upper:g,lowerOpen:_e,upperOpen:ft}}function Nl(d){return{type:1,lower:d,upper:d}}var Il=(Object.defineProperty(wr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),wr.prototype.between=function(d,g,_e,ft){_e=_e!==!1,ft=ft===!0;try{return 0<this._cmp(d,g)||this._cmp(d,g)===0&&(_e||ft)&&(!_e||!ft)?Yr(this):new this.Collection(this,function(){return $r(d,g,!_e,!ft)})}catch{return jr(this,Or)}},wr.prototype.equals=function(d){return d==null?jr(this,Or):new this.Collection(this,function(){return Nl(d)})},wr.prototype.above=function(d){return d==null?jr(this,Or):new this.Collection(this,function(){return $r(d,void 0,!0)})},wr.prototype.aboveOrEqual=function(d){return d==null?jr(this,Or):new this.Collection(this,function(){return $r(d,void 0,!1)})},wr.prototype.below=function(d){return d==null?jr(this,Or):new this.Collection(this,function(){return $r(void 0,d,!1,!0)})},wr.prototype.belowOrEqual=function(d){return d==null?jr(this,Or):new this.Collection(this,function(){return $r(void 0,d)})},wr.prototype.startsWith=function(d){return typeof d!="string"?jr(this,yl):this.between(d,d+Wr,!0,!0)},wr.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):Rs(this,function(g,_e){return g.indexOf(_e[0])===0},[d],Wr)},wr.prototype.equalsIgnoreCase=function(d){return Rs(this,function(g,_e){return g===_e[0]},[d],"")},wr.prototype.anyOfIgnoreCase=function(){var d=Ft.apply(kt,arguments);return d.length===0?Yr(this):Rs(this,function(g,_e){return _e.indexOf(g)!==-1},d,"")},wr.prototype.startsWithAnyOfIgnoreCase=function(){var d=Ft.apply(kt,arguments);return d.length===0?Yr(this):Rs(this,function(g,_e){return _e.some(function(ft){return g.indexOf(ft)===0})},d,Wr)},wr.prototype.anyOf=function(){var d=this,g=Ft.apply(kt,arguments),_e=this._cmp;try{g.sort(_e)}catch{return jr(this,Or)}if(g.length===0)return Yr(this);var ft=new this.Collection(this,function(){return $r(g[0],g[g.length-1])});ft._ondirectionchange=function(St){_e=St==="next"?d._ascending:d._descending,g.sort(_e)};var Et=0;return ft._addAlgorithm(function(St,Mt,Ht){for(var Jt=St.key;0<_e(Jt,g[Et]);)if(++Et===g.length)return Mt(Ht),!1;return _e(Jt,g[Et])===0||(Mt(function(){St.continue(g[Et])}),!1)}),ft},wr.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},wr.prototype.noneOf=function(){var d=Ft.apply(kt,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return jr(this,Or)}var g=d.reduce(function(_e,ft){return _e?_e.concat([[_e[_e.length-1][1],ft]]):[[-1/0,ft]]},null);return g.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},wr.prototype.inAnyRange=function(yn,g){var _e=this,ft=this._cmp,Et=this._ascending,St=this._descending,Mt=this._min,Ht=this._max;if(yn.length===0)return Yr(this);if(!yn.every(function(wn){return wn[0]!==void 0&&wn[1]!==void 0&&Et(wn[0],wn[1])<=0}))return jr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Lt.InvalidArgument);var Jt=!g||g.includeLowers!==!1,en=g&&g.includeUppers===!0,fn,qt=Et;function mn(wn,Tn){return qt(wn[0],Tn[0])}try{(fn=yn.reduce(function(wn,Tn){for(var Nn=0,zn=wn.length;Nn<zn;++Nn){var Gn=wn[Nn];if(ft(Tn[0],Gn[1])<0&&0<ft(Tn[1],Gn[0])){Gn[0]=Mt(Gn[0],Tn[0]),Gn[1]=Ht(Gn[1],Tn[1]);break}}return Nn===zn&&wn.push(Tn),wn},[])).sort(mn)}catch{return jr(this,Or)}var tn=0,sn=en?function(wn){return 0<Et(wn,fn[tn][1])}:function(wn){return 0<=Et(wn,fn[tn][1])},an=Jt?function(wn){return 0<St(wn,fn[tn][0])}:function(wn){return 0<=St(wn,fn[tn][0])},pn=sn,yn=new this.Collection(this,function(){return $r(fn[0][0],fn[fn.length-1][1],!Jt,!en)});return yn._ondirectionchange=function(wn){qt=wn==="next"?(pn=sn,Et):(pn=an,St),fn.sort(mn)},yn._addAlgorithm(function(wn,Tn,Nn){for(var zn,Gn=wn.key;pn(Gn);)if(++tn===fn.length)return Tn(Nn),!1;return!sn(zn=Gn)&&!an(zn)||(_e._cmp(Gn,fn[tn][1])===0||_e._cmp(Gn,fn[tn][0])===0||Tn(function(){qt===Et?wn.continue(fn[tn][0]):wn.continue(fn[tn][1])}),!1)}),yn},wr.prototype.startsWithAnyOf=function(){var d=Ft.apply(kt,arguments);return d.every(function(g){return typeof g=="string"})?d.length===0?Yr(this):this.inAnyRange(d.map(function(g){return[g,g+Wr]})):jr(this,"startsWithAnyOf() only works with strings")},wr);function wr(){}function Fr(d){return bn(function(g){return ls(g),d(g.target.error),!1})}function ls(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var cs="storagemutated",ba="x-storagemutated-1",Ur=as(null,cs),Fu=(Mr.prototype._lock=function(){return gt(!Vt.global),++this._reculock,this._reculock!==1||Vt.global||(Vt.lockOwnerFor=this),this},Mr.prototype._unlock=function(){if(gt(!Vt.global),--this._reculock==0)for(Vt.global||(Vt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Sr(d[1],d[0])}catch{}}return this},Mr.prototype._locked=function(){return this._reculock&&Vt.lockOwnerFor!==this},Mr.prototype.create=function(d){var g=this;if(!this.mode)return this;var _e=this.db.idbdb,ft=this.db._state.dbOpenError;if(gt(!this.idbtrans),!d&&!_e)switch(ft&&ft.name){case"DatabaseClosedError":throw new Lt.DatabaseClosed(ft);case"MissingAPIError":throw new Lt.MissingAPI(ft.message,ft);default:throw new Lt.OpenFailed(ft)}if(!this.active)throw new Lt.TransactionInactive;return gt(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||_e).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=bn(function(Et){ls(Et),g._reject(d.error)}),d.onabort=bn(function(Et){ls(Et),g.active&&g._reject(new Lt.Abort(d.error)),g.active=!1,g.on("abort").fire(Et)}),d.oncomplete=bn(function(){g.active=!1,g._resolve(),"mutatedParts"in d&&Ur.storagemutated.fire(d.mutatedParts)}),this},Mr.prototype._promise=function(d,g,_e){var ft=this;if(d==="readwrite"&&this.mode!=="readwrite")return Er(new Lt.ReadOnly("Transaction is readonly"));if(!this.active)return Er(new Lt.TransactionInactive);if(this._locked())return new Pn(function(St,Mt){ft._blockedFuncs.push([function(){ft._promise(d,g,_e).then(St,Mt)},Vt])});if(_e)return Vn(function(){var St=new Pn(function(Mt,Ht){ft._lock();var Jt=g(Mt,Ht,ft);Jt&&Jt.then&&Jt.then(Mt,Ht)});return St.finally(function(){return ft._unlock()}),St._lib=!0,St});var Et=new Pn(function(St,Mt){var Ht=g(St,Mt,ft);Ht&&Ht.then&&Ht.then(St,Mt)});return Et._lib=!0,Et},Mr.prototype._root=function(){return this.parent?this.parent._root():this},Mr.prototype.waitFor=function(d){var g,_e=this._root(),ft=Pn.resolve(d);_e._waitingFor?_e._waitingFor=_e._waitingFor.then(function(){return ft}):(_e._waitingFor=ft,_e._waitingQueue=[],g=_e.idbtrans.objectStore(_e.storeNames[0]),function St(){for(++_e._spinCount;_e._waitingQueue.length;)_e._waitingQueue.shift()();_e._waitingFor&&(g.get(-1/0).onsuccess=St)}());var Et=_e._waitingFor;return new Pn(function(St,Mt){ft.then(function(Ht){return _e._waitingQueue.push(bn(St.bind(null,Ht)))},function(Ht){return _e._waitingQueue.push(bn(Mt.bind(null,Ht)))}).finally(function(){_e._waitingFor===Et&&(_e._waitingFor=null)})})},Mr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Lt.Abort))},Mr.prototype.table=function(d){var g=this._memoizedTables||(this._memoizedTables={});if(at(g,d))return g[d];var _e=this.schema[d];if(!_e)throw new Lt.NotFound("Table "+d+" not part of transaction");return _e=new this.db.Table(d,_e,this),_e.core=this.db.core.table(d),g[d]=_e},Mr);function Mr(){}function _a(d,g,_e,ft,Et,St,Mt,Ht){return{name:d,keyPath:g,unique:_e,multi:ft,auto:Et,compound:St,src:(_e&&!Mt?"&":"")+(ft?"*":"")+(Et?"++":"")+Fl(g),type:Ht}}function Fl(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function $a(d,g,_e){return{name:d,primKey:g,indexes:_e,mappedClass:null,idxByName:(ft=function(Et){return[Et.name,Et]},_e.reduce(function(Et,St,Mt){return Mt=ft(St,Mt),Mt&&(Et[Mt[0]]=Mt[1]),Et},{}))};var ft}var us=function(d){try{return d.only([[]]),us=function(){return[[]]},[[]]}catch{return us=function(){return Wr},Wr}};function eo(d){return d==null?function(){}:typeof d=="string"?(g=d).split(".").length===1?function(_e){return _e[g]}:function(_e){return yt(_e,g)}:function(_e){return yt(_e,d)};var g}function Ml(d){return[].slice.call(d)}var Mu=0;function ds(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function Ou(d,g,Jt){function ft(pn){if(pn.type===3)return null;if(pn.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var tn=pn.lower,sn=pn.upper,an=pn.lowerOpen,pn=pn.upperOpen;return tn===void 0?sn===void 0?null:g.upperBound(sn,!!pn):sn===void 0?g.lowerBound(tn,!!an):g.bound(tn,sn,!!an,!!pn)}function Et(mn){var tn,sn=mn.name;return{name:sn,schema:mn,mutate:function(an){var pn=an.trans,yn=an.type,wn=an.keys,Tn=an.values,Nn=an.range;return new Promise(function(zn,Gn){zn=bn(zn);var On=pn.objectStore(sn),Un=On.keyPath==null,Xn=yn==="put"||yn==="add";if(!Xn&&yn!=="delete"&&yn!=="deleteRange")throw new Error("Invalid operation type: "+yn);var Hn,er=(wn||Tn||{length:1}).length;if(wn&&Tn&&wn.length!==Tn.length)throw new Error("Given keys array must have same length as given values array.");if(er===0)return zn({numFailures:0,failures:{},results:[],lastResult:void 0});function ur(Cr){++Tr,ls(Cr)}var hr=[],fr=[],Tr=0;if(yn==="deleteRange"){if(Nn.type===4)return zn({numFailures:Tr,failures:fr,results:[],lastResult:void 0});Nn.type===3?hr.push(Hn=On.clear()):hr.push(Hn=On.delete(ft(Nn)))}else{var Un=Xn?Un?[Tn,wn]:[Tn,null]:[wn,null],cr=Un[0],Ar=Un[1];if(Xn)for(var Rr=0;Rr<er;++Rr)hr.push(Hn=Ar&&Ar[Rr]!==void 0?On[yn](cr[Rr],Ar[Rr]):On[yn](cr[Rr])),Hn.onerror=ur;else for(Rr=0;Rr<er;++Rr)hr.push(Hn=On[yn](cr[Rr])),Hn.onerror=ur}function zs(Cr){Cr=Cr.target.result,hr.forEach(function(Kr,vo){return Kr.error!=null&&(fr[vo]=Kr.error)}),zn({numFailures:Tr,failures:fr,results:yn==="delete"?wn:hr.map(function(Kr){return Kr.result}),lastResult:Cr})}Hn.onerror=function(Cr){ur(Cr),zs(Cr)},Hn.onsuccess=zs})},getMany:function(an){var pn=an.trans,yn=an.keys;return new Promise(function(wn,Tn){wn=bn(wn);for(var Nn,zn=pn.objectStore(sn),Gn=yn.length,On=new Array(Gn),Un=0,Xn=0,Hn=function(hr){hr=hr.target,On[hr._pos]=hr.result,++Xn===Un&&wn(On)},er=Fr(Tn),ur=0;ur<Gn;++ur)yn[ur]!=null&&((Nn=zn.get(yn[ur]))._pos=ur,Nn.onsuccess=Hn,Nn.onerror=er,++Un);Un===0&&wn(On)})},get:function(an){var pn=an.trans,yn=an.key;return new Promise(function(wn,Tn){wn=bn(wn);var Nn=pn.objectStore(sn).get(yn);Nn.onsuccess=function(zn){return wn(zn.target.result)},Nn.onerror=Fr(Tn)})},query:(tn=en,function(an){return new Promise(function(pn,yn){pn=bn(pn);var wn,Tn,Nn,Un=an.trans,zn=an.values,Gn=an.limit,Hn=an.query,On=Gn===1/0?void 0:Gn,Xn=Hn.index,Hn=Hn.range,Un=Un.objectStore(sn),Xn=Xn.isPrimaryKey?Un:Un.index(Xn.name),Hn=ft(Hn);if(Gn===0)return pn({result:[]});tn?((On=zn?Xn.getAll(Hn,On):Xn.getAllKeys(Hn,On)).onsuccess=function(er){return pn({result:er.target.result})},On.onerror=Fr(yn)):(wn=0,Tn=!zn&&"openKeyCursor"in Xn?Xn.openKeyCursor(Hn):Xn.openCursor(Hn),Nn=[],Tn.onsuccess=function(er){var ur=Tn.result;return ur?(Nn.push(zn?ur.value:ur.primaryKey),++wn===Gn?pn({result:Nn}):void ur.continue()):pn({result:Nn})},Tn.onerror=Fr(yn))})}),openCursor:function(an){var pn=an.trans,yn=an.values,wn=an.query,Tn=an.reverse,Nn=an.unique;return new Promise(function(zn,Gn){zn=bn(zn);var Xn=wn.index,On=wn.range,Un=pn.objectStore(sn),Un=Xn.isPrimaryKey?Un:Un.index(Xn.name),Xn=Tn?Nn?"prevunique":"prev":Nn?"nextunique":"next",Hn=!yn&&"openKeyCursor"in Un?Un.openKeyCursor(ft(On),Xn):Un.openCursor(ft(On),Xn);Hn.onerror=Fr(Gn),Hn.onsuccess=bn(function(er){var ur,hr,fr,Tr,cr=Hn.result;cr?(cr.___id=++Mu,cr.done=!1,ur=cr.continue.bind(cr),hr=(hr=cr.continuePrimaryKey)&&hr.bind(cr),fr=cr.advance.bind(cr),Tr=function(){throw new Error("Cursor not stopped")},cr.trans=pn,cr.stop=cr.continue=cr.continuePrimaryKey=cr.advance=function(){throw new Error("Cursor not started")},cr.fail=bn(Gn),cr.next=function(){var Ar=this,Rr=1;return this.start(function(){return Rr--?Ar.continue():Ar.stop()}).then(function(){return Ar})},cr.start=function(Ar){function Rr(){if(Hn.result)try{Ar()}catch(Cr){cr.fail(Cr)}else cr.done=!0,cr.start=function(){throw new Error("Cursor behind last entry")},cr.stop()}var zs=new Promise(function(Cr,Kr){Cr=bn(Cr),Hn.onerror=Fr(Kr),cr.fail=Kr,cr.stop=function(vo){cr.stop=cr.continue=cr.continuePrimaryKey=cr.advance=Tr,Cr(vo)}});return Hn.onsuccess=bn(function(Cr){Hn.onsuccess=Rr,Rr()}),cr.continue=ur,cr.continuePrimaryKey=hr,cr.advance=fr,Rr(),zs},zn(cr)):zn(null)},Gn)})},count:function(an){var pn=an.query,yn=an.trans,wn=pn.index,Tn=pn.range;return new Promise(function(Nn,zn){var Gn=yn.objectStore(sn),On=wn.isPrimaryKey?Gn:Gn.index(wn.name),Gn=ft(Tn),On=Gn?On.count(Gn):On.count();On.onsuccess=bn(function(Un){return Nn(Un.target.result)}),On.onerror=Fr(zn)})}}}var St,Mt,Ht,fn=(Mt=Jt,Ht=Ml((St=d).objectStoreNames),{schema:{name:St.name,tables:Ht.map(function(mn){return Mt.objectStore(mn)}).map(function(mn){var tn=mn.keyPath,pn=mn.autoIncrement,sn=j(tn),an={},pn={name:mn.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:tn==null,compound:sn,keyPath:tn,autoIncrement:pn,unique:!0,extractKey:eo(tn)},indexes:Ml(mn.indexNames).map(function(yn){return mn.index(yn)}).map(function(Nn){var wn=Nn.name,Tn=Nn.unique,zn=Nn.multiEntry,Nn=Nn.keyPath,zn={name:wn,compound:j(Nn),keyPath:Nn,unique:Tn,multiEntry:zn,extractKey:eo(Nn)};return an[ds(Nn)]=zn}),getIndexByKeyPath:function(yn){return an[ds(yn)]}};return an[":id"]=pn.primaryKey,tn!=null&&(an[ds(tn)]=pn.primaryKey),pn})},hasGetAll:0<Ht.length&&"getAll"in Mt.objectStore(Ht[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Jt=fn.schema,en=fn.hasGetAll,fn=Jt.tables.map(Et),qt={};return fn.forEach(function(mn){return qt[mn.name]=mn}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(mn){if(!qt[mn])throw new Error("Table '".concat(mn,"' not found"));return qt[mn]},MIN_KEY:-1/0,MAX_KEY:us(g),schema:Jt}}function Lu(d,g,_e,ft){var Et=_e.IDBKeyRange;return _e.indexedDB,{dbcore:(ft=Ou(g,Et,ft),d.dbcore.reduce(function(St,Mt){return Mt=Mt.create,a(a({},St),Mt(St))},ft))}}function Cs(d,ft){var _e=ft.db,ft=Lu(d._middlewares,_e,d._deps,ft);d.core=ft.dbcore,d.tables.forEach(function(Et){var St=Et.name;d.core.schema.tables.some(function(Mt){return Mt.name===St})&&(Et.core=d.core.table(St),d[St]instanceof d.Table&&(d[St].core=Et.core))})}function js(d,g,_e,ft){_e.forEach(function(Et){var St=ft[Et];g.forEach(function(Mt){var Ht=function Jt(en,fn){return bt(en,fn)||(en=_(en))&&Jt(en,fn)}(Mt,Et);(!Ht||"value"in Ht&&Ht.value===void 0)&&(Mt===d.Transaction.prototype||Mt instanceof d.Transaction?ot(Mt,Et,{get:function(){return this.table(Et)},set:function(Jt){ut(this,Et,{value:Jt,writable:!0,configurable:!0,enumerable:!0})}}):Mt[Et]=new d.Table(Et,St))})})}function to(d,g){g.forEach(function(_e){for(var ft in _e)_e[ft]instanceof d.Table&&delete _e[ft]})}function zu(d,g){return d._cfg.version-g._cfg.version}function $u(d,g,_e,ft){var Et=d._dbSchema;_e.objectStoreNames.contains("$meta")&&!Et.$meta&&(Et.$meta=$a("$meta",Ll("")[0],[]),d._storeNames.push("$meta"));var St=d._createTransaction("readwrite",d._storeNames,Et);St.create(_e),St._completion.catch(ft);var Mt=St._reject.bind(St),Ht=Vt.transless||Vt;Vn(function(){return Vt.trans=St,Vt.transless=Ht,g!==0?(Cs(d,_e),en=g,((Jt=St).storeNames.includes("$meta")?Jt.table("$meta").get("version").then(function(fn){return fn??en}):Pn.resolve(en)).then(function(fn){return mn=fn,tn=St,sn=_e,an=[],fn=(qt=d)._versions,pn=qt._dbSchema=Ps(0,qt.idbdb,sn),(fn=fn.filter(function(yn){return yn._cfg.version>=mn})).length!==0?(fn.forEach(function(yn){an.push(function(){var wn=pn,Tn=yn._cfg.dbschema;Ds(qt,wn,sn),Ds(qt,Tn,sn),pn=qt._dbSchema=Tn;var Nn=no(wn,Tn);Nn.add.forEach(function(Xn){ro(sn,Xn[0],Xn[1].primKey,Xn[1].indexes)}),Nn.change.forEach(function(Xn){if(Xn.recreate)throw new Lt.Upgrade("Not yet support for changing primary key");var Hn=sn.objectStore(Xn.name);Xn.add.forEach(function(er){return Ts(Hn,er)}),Xn.change.forEach(function(er){Hn.deleteIndex(er.name),Ts(Hn,er)}),Xn.del.forEach(function(er){return Hn.deleteIndex(er)})});var zn=yn._cfg.contentUpgrade;if(zn&&yn._cfg.version>mn){Cs(qt,sn),tn._memoizedTables={};var Gn=mt(Tn);Nn.del.forEach(function(Xn){Gn[Xn]=wn[Xn]}),to(qt,[qt.Transaction.prototype]),js(qt,[qt.Transaction.prototype],h(Gn),Gn),tn.schema=Gn;var On,Un=Gt(zn);return Un&&tr(),Nn=Pn.follow(function(){var Xn;(On=zn(tn))&&Un&&(Xn=sr.bind(null,null),On.then(Xn,Xn))}),On&&typeof On.then=="function"?Pn.resolve(On):Nn.then(function(){return On})}}),an.push(function(wn){var Tn,Nn,zn=yn._cfg.dbschema;Tn=zn,Nn=wn,[].slice.call(Nn.db.objectStoreNames).forEach(function(Gn){return Tn[Gn]==null&&Nn.db.deleteObjectStore(Gn)}),to(qt,[qt.Transaction.prototype]),js(qt,[qt.Transaction.prototype],qt._storeNames,qt._dbSchema),tn.schema=qt._dbSchema}),an.push(function(wn){qt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qt.idbdb.version/10)===yn._cfg.version?(qt.idbdb.deleteObjectStore("$meta"),delete qt._dbSchema.$meta,qt._storeNames=qt._storeNames.filter(function(Tn){return Tn!=="$meta"})):wn.objectStore("$meta").put(yn._cfg.version,"version"))})}),function yn(){return an.length?Pn.resolve(an.shift()(tn.idbtrans)).then(yn):Pn.resolve()}().then(function(){Ol(pn,sn)})):Pn.resolve();var qt,mn,tn,sn,an,pn}).catch(Mt)):(h(Et).forEach(function(fn){ro(_e,fn,Et[fn].primKey,Et[fn].indexes)}),Cs(d,_e),void Pn.follow(function(){return d.on.populate.fire(St)}).catch(Mt));var Jt,en})}function Uu(d,g){Ol(d._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _e=Ps(0,d.idbdb,g);Ds(d,d._dbSchema,g);for(var ft=0,Et=no(_e,d._dbSchema).change;ft<Et.length;ft++){var St=function(Mt){if(Mt.change.length||Mt.recreate)return console.warn("Unable to patch indexes of table ".concat(Mt.name," because it has changes on the type of index or primary key.")),{value:void 0};var Ht=g.objectStore(Mt.name);Mt.add.forEach(function(Jt){Kt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Mt.name,".").concat(Jt.src)),Ts(Ht,Jt)})}(Et[ft]);if(typeof St=="object")return St.value}}function no(d,g){var _e,ft={del:[],add:[],change:[]};for(_e in d)g[_e]||ft.del.push(_e);for(_e in g){var Et=d[_e],St=g[_e];if(Et){var Mt={name:_e,def:St,recreate:!1,del:[],add:[],change:[]};if(""+(Et.primKey.keyPath||"")!=""+(St.primKey.keyPath||"")||Et.primKey.auto!==St.primKey.auto)Mt.recreate=!0,ft.change.push(Mt);else{var Ht=Et.idxByName,Jt=St.idxByName,en=void 0;for(en in Ht)Jt[en]||Mt.del.push(en);for(en in Jt){var fn=Ht[en],qt=Jt[en];fn?fn.src!==qt.src&&Mt.change.push(qt):Mt.add.push(qt)}(0<Mt.del.length||0<Mt.add.length||0<Mt.change.length)&&ft.change.push(Mt)}}else ft.add.push([_e,St])}return ft}function ro(d,g,_e,ft){var Et=d.db.createObjectStore(g,_e.keyPath?{keyPath:_e.keyPath,autoIncrement:_e.auto}:{autoIncrement:_e.auto});return ft.forEach(function(St){return Ts(Et,St)}),Et}function Ol(d,g){h(d).forEach(function(_e){g.db.objectStoreNames.contains(_e)||(Kt&&console.debug("Dexie: Creating missing table",_e),ro(g,_e,d[_e].primKey,d[_e].indexes))})}function Ts(d,g){d.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Ps(d,g,_e){var ft={};return nt(g.objectStoreNames,0).forEach(function(Et){for(var St=_e.objectStore(Et),Mt=_a(Fl(en=St.keyPath),en||"",!0,!1,!!St.autoIncrement,en&&typeof en!="string",!0),Ht=[],Jt=0;Jt<St.indexNames.length;++Jt){var fn=St.index(St.indexNames[Jt]),en=fn.keyPath,fn=_a(fn.name,en,!!fn.unique,!!fn.multiEntry,!1,en&&typeof en!="string",!1);Ht.push(fn)}ft[Et]=$a(Et,Mt,Ht)}),ft}function Ds(d,g,_e){for(var ft=_e.db.objectStoreNames,Et=0;Et<ft.length;++Et){var St=ft[Et],Mt=_e.objectStore(St);d._hasGetAll="getAll"in Mt;for(var Ht=0;Ht<Mt.indexNames.length;++Ht){var Jt=Mt.indexNames[Ht],en=Mt.index(Jt).keyPath,fn=typeof en=="string"?en:"["+nt(en).join("+")+"]";!g[St]||(en=g[St].idxByName[fn])&&(en.name=Jt,delete g[St].idxByName[fn],g[St].idxByName[Jt]=en)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Ll(d){return d.split(",").map(function(g,_e){var St=g.split(":"),ft=(Et=St[1])===null||Et===void 0?void 0:Et.trim(),Et=(g=St[0].trim()).replace(/([&*]|\+\+)/g,""),St=/^\[/.test(Et)?Et.match(/^\[(.*)\]$/)[1].split("+"):Et;return _a(Et,St||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),j(St),_e===0,ft)})}var Bu=(Qr.prototype._createTableSchema=$a,Qr.prototype._parseIndexSyntax=Ll,Qr.prototype._parseStoresSpec=function(d,g){var _e=this;h(d).forEach(function(ft){if(d[ft]!==null){var Et=_e._parseIndexSyntax(d[ft]),St=Et.shift();if(!St)throw new Lt.Schema("Invalid schema for table "+ft+": "+d[ft]);if(St.unique=!0,St.multi)throw new Lt.Schema("Primary key cannot be multiEntry*");Et.forEach(function(Mt){if(Mt.auto)throw new Lt.Schema("Only primary key can be marked as autoIncrement (++)");if(!Mt.keyPath)throw new Lt.Schema("Index must have a name and cannot be an empty string")}),Et=_e._createTableSchema(ft,St,Et),g[ft]=Et}})},Qr.prototype.stores=function(_e){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,_e):_e;var _e=g._versions,ft={},Et={};return _e.forEach(function(St){b(ft,St._cfg.storesSource),Et=St._cfg.dbschema={},St._parseStoresSpec(ft,Et)}),g._dbSchema=Et,to(g,[g._allTables,g,g.Transaction.prototype]),js(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],h(Et),Et),g._storeNames=h(Et),this},Qr.prototype.upgrade=function(d){return this._cfg.contentUpgrade=zt(this._cfg.contentUpgrade||un,d),this},Qr);function Qr(){}function so(d,g){var _e=d._dbNamesDB;return _e||(_e=d._dbNamesDB=new Lr(_s,{addons:[],indexedDB:d,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_e.table("dbnames")}function io(d){return d&&typeof d.databases=="function"}function ao(d){return Vn(function(){return Vt.letThrough=!0,d()})}function oo(d){return!("from"in d)}var kr=function(d,g){if(!this){var _e=new kr;return d&&"d"in d&&b(_e,d),_e}b(this,arguments.length?{d:1,from:d,to:1<arguments.length?g:d}:{d:0})};function hs(d,g,_e){var ft=pr(g,_e);if(!isNaN(ft)){if(0<ft)throw RangeError();if(oo(d))return b(d,{from:g,to:_e,d:1});var Et=d.l,ft=d.r;if(pr(_e,d.from)<0)return Et?hs(Et,g,_e):d.l={from:g,to:_e,d:1,l:null,r:null},$l(d);if(0<pr(g,d.to))return ft?hs(ft,g,_e):d.r={from:g,to:_e,d:1,l:null,r:null},$l(d);pr(g,d.from)<0&&(d.from=g,d.l=null,d.d=ft?ft.d+1:1),0<pr(_e,d.to)&&(d.to=_e,d.r=null,d.d=d.l?d.l.d+1:1),_e=!d.r,Et&&!d.l&&fs(d,Et),ft&&_e&&fs(d,ft)}}function fs(d,g){oo(g)||function _e(ft,Jt){var St=Jt.from,Mt=Jt.to,Ht=Jt.l,Jt=Jt.r;hs(ft,St,Mt),Ht&&_e(ft,Ht),Jt&&_e(ft,Jt)}(d,g)}function zl(d,g){var _e=Ns(g),ft=_e.next();if(ft.done)return!1;for(var Et=ft.value,St=Ns(d),Mt=St.next(Et.from),Ht=Mt.value;!ft.done&&!Mt.done;){if(pr(Ht.from,Et.to)<=0&&0<=pr(Ht.to,Et.from))return!0;pr(Et.from,Ht.from)<0?Et=(ft=_e.next(Ht.from)).value:Ht=(Mt=St.next(Et.from)).value}return!1}function Ns(d){var g=oo(d)?null:{s:0,n:d};return{next:function(_e){for(var ft=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,ft)for(;g.n.l&&pr(_e,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!ft||pr(_e,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function $l(d){var g,_e,ft=(((g=d.r)===null||g===void 0?void 0:g.d)||0)-(((_e=d.l)===null||_e===void 0?void 0:_e.d)||0),Et=1<ft?"r":ft<-1?"l":"";Et&&(g=Et=="r"?"l":"r",_e=a({},d),ft=d[Et],d.from=ft.from,d.to=ft.to,d[Et]=ft[Et],_e[Et]=ft[g],(d[g]=_e).d=Ul(_e)),d.d=Ul(d)}function Ul(_e){var g=_e.r,_e=_e.l;return(g?_e?Math.max(g.d,_e.d):g.d:_e?_e.d:0)+1}function Is(d,g){return h(g).forEach(function(_e){d[_e]?fs(d[_e],g[_e]):d[_e]=function ft(Et){var St,Mt,Ht={};for(St in Et)at(Et,St)&&(Mt=Et[St],Ht[St]=!Mt||typeof Mt!="object"||ht.has(Mt.constructor)?Mt:ft(Mt));return Ht}(g[_e])}),d}function lo(d,g){return d.all||g.all||Object.keys(d).some(function(_e){return g[_e]&&zl(g[_e],d[_e])})}rt(kr.prototype,((Dr={add:function(d){return fs(this,d),this},addKey:function(d){return hs(this,d,d),this},addKeys:function(d){var g=this;return d.forEach(function(_e){return hs(g,_e,_e)}),this},hasKey:function(d){var g=Ns(this).next(d).value;return g&&pr(g.from,d)<=0&&0<=pr(g.to,d)}})[Wt]=function(){return Ns(this)},Dr));var Hr={},co={},uo=!1;function Fs(d){Is(co,d),uo||(uo=!0,setTimeout(function(){uo=!1,ho(co,!(co={}))},0))}function ho(d,g){g===void 0&&(g=!1);var _e=new Set;if(d.all)for(var ft=0,Et=Object.values(Hr);ft<Et.length;ft++)Bl(Mt=Et[ft],d,_e,g);else for(var St in d){var Mt,Ht=/^idb\:\/\/(.*)\/(.*)\//.exec(St);Ht&&(St=Ht[1],Ht=Ht[2],(Mt=Hr["idb://".concat(St,"/").concat(Ht)])&&Bl(Mt,d,_e,g))}_e.forEach(function(Jt){return Jt()})}function Bl(d,g,_e,ft){for(var Et=[],St=0,Mt=Object.entries(d.queries.query);St<Mt.length;St++){for(var Ht=Mt[St],Jt=Ht[0],en=[],fn=0,qt=Ht[1];fn<qt.length;fn++){var mn=qt[fn];lo(g,mn.obsSet)?mn.subscribers.forEach(function(pn){return _e.add(pn)}):ft&&en.push(mn)}ft&&Et.push([Jt,en])}if(ft)for(var tn=0,sn=Et;tn<sn.length;tn++){var an=sn[tn],Jt=an[0],en=an[1];d.queries.query[Jt]=en}}function Wu(d){var g=d._state,_e=d._deps.indexedDB;if(g.isBeingOpened||d.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?Er(g.dbOpenError):d});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var ft=g.openCanceller,Et=Math.round(10*d.verno),St=!1;function Mt(){if(g.openCanceller!==ft)throw new Lt.DatabaseClosed("db.open() was cancelled")}function Ht(){return new Pn(function(mn,tn){if(Mt(),!_e)throw new Lt.MissingAPI;var sn=d.name,an=g.autoSchema||!Et?_e.open(sn):_e.open(sn,Et);if(!an)throw new Lt.MissingAPI;an.onerror=Fr(tn),an.onblocked=bn(d._fireOnBlocked),an.onupgradeneeded=bn(function(pn){var yn;fn=an.transaction,g.autoSchema&&!d._options.allowEmptyDB?(an.onerror=ls,fn.abort(),an.result.close(),(yn=_e.deleteDatabase(sn)).onsuccess=yn.onerror=bn(function(){tn(new Lt.NoSuchDatabase("Database ".concat(sn," doesnt exist")))})):(fn.onerror=Fr(tn),pn=pn.oldVersion>Math.pow(2,62)?0:pn.oldVersion,qt=pn<1,d.idbdb=an.result,St&&Uu(d,fn),$u(d,pn/10,fn,tn))},tn),an.onsuccess=bn(function(){fn=null;var pn,yn,wn,Tn,Nn,zn=d.idbdb=an.result,Gn=nt(zn.objectStoreNames);if(0<Gn.length)try{var On=zn.transaction((Tn=Gn).length===1?Tn[0]:Tn,"readonly");if(g.autoSchema)yn=zn,wn=On,(pn=d).verno=yn.version/10,wn=pn._dbSchema=Ps(0,yn,wn),pn._storeNames=nt(yn.objectStoreNames,0),js(pn,[pn._allTables],h(wn),wn);else if(Ds(d,d._dbSchema,On),((Nn=no(Ps(0,(Nn=d).idbdb,On),Nn._dbSchema)).add.length||Nn.change.some(function(Un){return Un.add.length||Un.change.length}))&&!St)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),zn.close(),Et=zn.version+1,St=!0,mn(Ht());Cs(d,On)}catch{}qr.push(d),zn.onversionchange=bn(function(Un){g.vcFired=!0,d.on("versionchange").fire(Un)}),zn.onclose=bn(function(){d.close({disableAutoOpen:!1})}),qt&&(Nn=d._deps,On=sn,zn=Nn.indexedDB,Nn=Nn.IDBKeyRange,io(zn)||On===_s||so(zn,Nn).put({name:On}).catch(un)),mn()},tn)}).catch(function(mn){switch(mn==null?void 0:mn.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Ht();break;case"VersionError":if(0<Et)return Et=0,Ht()}return Pn.reject(mn)})}var Jt,en=g.dbReadyResolve,fn=null,qt=!1;return Pn.race([ft,(typeof navigator>"u"?Pn.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(mn){function tn(){return indexedDB.databases().finally(mn)}Jt=setInterval(tn,100),tn()}).finally(function(){return clearInterval(Jt)}):Promise.resolve()).then(Ht)]).then(function(){return Mt(),g.onReadyBeingFired=[],Pn.resolve(ao(function(){return d.on.ready.fire(d.vip)})).then(function mn(){if(0<g.onReadyBeingFired.length){var tn=g.onReadyBeingFired.reduce(zt,un);return g.onReadyBeingFired=[],Pn.resolve(ao(function(){return tn(d.vip)})).then(mn)}})}).finally(function(){g.openCanceller===ft&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(mn){g.dbOpenError=mn;try{fn&&fn.abort()}catch{}return ft===g.openCanceller&&d._close(),Er(mn)}).finally(function(){g.openComplete=!0,en()}).then(function(){var mn;return qt&&(mn={},d.tables.forEach(function(tn){tn.schema.indexes.forEach(function(sn){sn.name&&(mn["idb://".concat(d.name,"/").concat(tn.name,"/").concat(sn.name)]=new kr(-1/0,[[[]]]))}),mn["idb://".concat(d.name,"/").concat(tn.name,"/")]=mn["idb://".concat(d.name,"/").concat(tn.name,"/:dels")]=new kr(-1/0,[[[]]])}),Ur(cs).fire(mn),ho(mn,!0)),d})}function fo(d){function g(St){return d.next(St)}var _e=Et(g),ft=Et(function(St){return d.throw(St)});function Et(St){return function(Jt){var Ht=St(Jt),Jt=Ht.value;return Ht.done?Jt:Jt&&typeof Jt.then=="function"?Jt.then(_e,ft):j(Jt)?Promise.all(Jt).then(_e,ft):_e(Jt)}}return Et(g)()}function Ms(d,g,_e){for(var ft=j(d)?d.slice():[d],Et=0;Et<_e;++Et)ft.push(g);return ft}var Vu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return a(a({},d),{table:function(g){var _e=d.table(g),ft=_e.schema,Et={},St=[];function Mt(qt,mn,tn){var sn=ds(qt),an=Et[sn]=Et[sn]||[],pn=qt==null?0:typeof qt=="string"?1:qt.length,yn=0<mn,yn=a(a({},tn),{name:yn?"".concat(sn,"(virtual-from:").concat(tn.name,")"):tn.name,lowLevelIndex:tn,isVirtual:yn,keyTail:mn,keyLength:pn,extractKey:eo(qt),unique:!yn&&tn.unique});return an.push(yn),yn.isPrimaryKey||St.push(yn),1<pn&&Mt(pn===2?qt[0]:qt.slice(0,pn-1),mn+1,tn),an.sort(function(wn,Tn){return wn.keyTail-Tn.keyTail}),yn}g=Mt(ft.primaryKey.keyPath,0,ft.primaryKey),Et[":id"]=[g];for(var Ht=0,Jt=ft.indexes;Ht<Jt.length;Ht++){var en=Jt[Ht];Mt(en.keyPath,0,en)}function fn(qt){var mn,tn=qt.query.index;return tn.isVirtual?a(a({},qt),{query:{index:tn.lowLevelIndex,range:(mn=qt.query.range,tn=tn.keyTail,{type:mn.type===1?2:mn.type,lower:Ms(mn.lower,mn.lowerOpen?d.MAX_KEY:d.MIN_KEY,tn),lowerOpen:!0,upper:Ms(mn.upper,mn.upperOpen?d.MIN_KEY:d.MAX_KEY,tn),upperOpen:!0})}}):qt}return a(a({},_e),{schema:a(a({},ft),{primaryKey:g,indexes:St,getIndexByKeyPath:function(qt){return(qt=Et[ds(qt)])&&qt[0]}}),count:function(qt){return _e.count(fn(qt))},query:function(qt){return _e.query(fn(qt))},openCursor:function(qt){var mn=qt.query.index,tn=mn.keyTail,sn=mn.isVirtual,an=mn.keyLength;return sn?_e.openCursor(fn(qt)).then(function(yn){return yn&&pn(yn)}):_e.openCursor(qt);function pn(yn){return Object.create(yn,{continue:{value:function(wn){wn!=null?yn.continue(Ms(wn,qt.reverse?d.MAX_KEY:d.MIN_KEY,tn)):qt.unique?yn.continue(yn.key.slice(0,an).concat(qt.reverse?d.MIN_KEY:d.MAX_KEY,tn)):yn.continue()}},continuePrimaryKey:{value:function(wn,Tn){yn.continuePrimaryKey(Ms(wn,d.MAX_KEY,tn),Tn)}},primaryKey:{get:function(){return yn.primaryKey}},key:{get:function(){var wn=yn.key;return an===1?wn[0]:wn.slice(0,an)}},value:{get:function(){return yn.value}}})}}})}})}};function po(d,g,_e,ft){return _e=_e||{},ft=ft||"",h(d).forEach(function(Et){var St,Mt,Ht;at(g,Et)?(St=d[Et],Mt=g[Et],typeof St=="object"&&typeof Mt=="object"&&St&&Mt?(Ht=Bt(St))!==Bt(Mt)?_e[ft+Et]=g[Et]:Ht==="Object"?po(St,Mt,_e,ft+Et+"."):St!==Mt&&(_e[ft+Et]=g[Et]):St!==Mt&&(_e[ft+Et]=g[Et])):_e[ft+Et]=void 0}),h(g).forEach(function(Et){at(d,Et)||(_e[ft+Et]=g[Et])}),_e}function mo(d,g){return g.type==="delete"?g.keys:g.keys||g.values.map(d.extractKey)}var Hu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return a(a({},d),{table:function(g){var _e=d.table(g),ft=_e.schema.primaryKey;return a(a({},_e),{mutate:function(Et){var St=Vt.trans,Mt=St.table(g).hook,Ht=Mt.deleting,Jt=Mt.creating,en=Mt.updating;switch(Et.type){case"add":if(Jt.fire===un)break;return St._promise("readwrite",function(){return fn(Et)},!0);case"put":if(Jt.fire===un&&en.fire===un)break;return St._promise("readwrite",function(){return fn(Et)},!0);case"delete":if(Ht.fire===un)break;return St._promise("readwrite",function(){return fn(Et)},!0);case"deleteRange":if(Ht.fire===un)break;return St._promise("readwrite",function(){return function qt(mn,tn,sn){return _e.query({trans:mn,values:!1,query:{index:ft,range:tn},limit:sn}).then(function(an){var pn=an.result;return fn({type:"delete",keys:pn,trans:mn}).then(function(yn){return 0<yn.numFailures?Promise.reject(yn.failures[0]):pn.length<sn?{failures:[],numFailures:0,lastResult:void 0}:qt(mn,a(a({},tn),{lower:pn[pn.length-1],lowerOpen:!0}),sn)})})}(Et.trans,Et.range,1e4)},!0)}return _e.mutate(Et);function fn(qt){var mn,tn,sn,an=Vt.trans,pn=qt.keys||mo(ft,qt);if(!pn)throw new Error("Keys missing");return(qt=qt.type==="add"||qt.type==="put"?a(a({},qt),{keys:pn}):a({},qt)).type!=="delete"&&(qt.values=o([],qt.values)),qt.keys&&(qt.keys=o([],qt.keys)),mn=_e,sn=pn,((tn=qt).type==="add"?Promise.resolve([]):mn.getMany({trans:tn.trans,keys:sn,cache:"immutable"})).then(function(yn){var wn=pn.map(function(Tn,Nn){var zn,Gn,On,Un=yn[Nn],Xn={onerror:null,onsuccess:null};return qt.type==="delete"?Ht.fire.call(Xn,Tn,Un,an):qt.type==="add"||Un===void 0?(zn=Jt.fire.call(Xn,Tn,qt.values[Nn],an),Tn==null&&zn!=null&&(qt.keys[Nn]=Tn=zn,ft.outbound||ct(qt.values[Nn],ft.keyPath,Tn))):(zn=po(Un,qt.values[Nn]),(Gn=en.fire.call(Xn,zn,Tn,Un,an))&&(On=qt.values[Nn],Object.keys(Gn).forEach(function(Hn){at(On,Hn)?On[Hn]=Gn[Hn]:ct(On,Hn,Gn[Hn])}))),Xn});return _e.mutate(qt).then(function(Tn){for(var Nn=Tn.failures,zn=Tn.results,Gn=Tn.numFailures,Tn=Tn.lastResult,On=0;On<pn.length;++On){var Un=(zn||pn)[On],Xn=wn[On];Un==null?Xn.onerror&&Xn.onerror(Nn[On]):Xn.onsuccess&&Xn.onsuccess(qt.type==="put"&&yn[On]?qt.values[On]:Un)}return{failures:Nn,results:zn,numFailures:Gn,lastResult:Tn}}).catch(function(Tn){return wn.forEach(function(Nn){return Nn.onerror&&Nn.onerror(Tn)}),Promise.reject(Tn)})})}}})}})}};function Wl(d,g,_e){try{if(!g||g.keys.length<d.length)return null;for(var ft=[],Et=0,St=0;Et<g.keys.length&&St<d.length;++Et)pr(g.keys[Et],d[St])===0&&(ft.push(_e?jt(g.values[Et]):g.values[Et]),++St);return ft.length===d.length?ft:null}catch{return null}}var Zu={stack:"dbcore",level:-1,create:function(d){return{table:function(g){var _e=d.table(g);return a(a({},_e),{getMany:function(ft){if(!ft.cache)return _e.getMany(ft);var Et=Wl(ft.keys,ft.trans._cache,ft.cache==="clone");return Et?Pn.resolve(Et):_e.getMany(ft).then(function(St){return ft.trans._cache={keys:ft.keys,values:ft.cache==="clone"?jt(St):St},St})},mutate:function(ft){return ft.type!=="add"&&(ft.trans._cache=null),_e.mutate(ft)}})}}}};function Vl(d,g){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function Hl(d,g){switch(d){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ku={stack:"dbcore",level:0,name:"Observability",create:function(d){var g=d.schema.name,_e=new kr(d.MIN_KEY,d.MAX_KEY);return a(a({},d),{transaction:function(ft,Et,St){if(Vt.subscr&&Et!=="readonly")throw new Lt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Vt.querier));return d.transaction(ft,Et,St)},table:function(ft){var Et=d.table(ft),St=Et.schema,Mt=St.primaryKey,qt=St.indexes,Ht=Mt.extractKey,Jt=Mt.outbound,en=Mt.autoIncrement&&qt.filter(function(tn){return tn.compound&&tn.keyPath.includes(Mt.keyPath)}),fn=a(a({},Et),{mutate:function(tn){function sn(Hn){return Hn="idb://".concat(g,"/").concat(ft,"/").concat(Hn),Tn[Hn]||(Tn[Hn]=new kr)}var an,pn,yn,wn=tn.trans,Tn=tn.mutatedParts||(tn.mutatedParts={}),Nn=sn(""),zn=sn(":dels"),Gn=tn.type,Xn=tn.type==="deleteRange"?[tn.range]:tn.type==="delete"?[tn.keys]:tn.values.length<50?[mo(Mt,tn).filter(function(Hn){return Hn}),tn.values]:[],On=Xn[0],Un=Xn[1],Xn=tn.trans._cache;return j(On)?(Nn.addKeys(On),(Xn=Gn==="delete"||On.length===Un.length?Wl(On,Xn):null)||zn.addKeys(On),(Xn||Un)&&(an=sn,pn=Xn,yn=Un,St.indexes.forEach(function(Hn){var er=an(Hn.name||"");function ur(fr){return fr!=null?Hn.extractKey(fr):null}function hr(fr){return Hn.multiEntry&&j(fr)?fr.forEach(function(Tr){return er.addKey(Tr)}):er.addKey(fr)}(pn||yn).forEach(function(fr,Ar){var cr=pn&&ur(pn[Ar]),Ar=yn&&ur(yn[Ar]);pr(cr,Ar)!==0&&(cr!=null&&hr(cr),Ar!=null&&hr(Ar))})}))):On?(Un={from:(Un=On.lower)!==null&&Un!==void 0?Un:d.MIN_KEY,to:(Un=On.upper)!==null&&Un!==void 0?Un:d.MAX_KEY},zn.add(Un),Nn.add(Un)):(Nn.add(_e),zn.add(_e),St.indexes.forEach(function(Hn){return sn(Hn.name).add(_e)})),Et.mutate(tn).then(function(Hn){return!On||tn.type!=="add"&&tn.type!=="put"||(Nn.addKeys(Hn.results),en&&en.forEach(function(er){for(var ur=tn.values.map(function(cr){return er.extractKey(cr)}),hr=er.keyPath.findIndex(function(cr){return cr===Mt.keyPath}),fr=0,Tr=Hn.results.length;fr<Tr;++fr)ur[fr][hr]=Hn.results[fr];sn(er.name).addKeys(ur)})),wn.mutatedParts=Is(wn.mutatedParts||{},Tn),Hn})}}),qt=function(sn){var an=sn.query,sn=an.index,an=an.range;return[sn,new kr((sn=an.lower)!==null&&sn!==void 0?sn:d.MIN_KEY,(an=an.upper)!==null&&an!==void 0?an:d.MAX_KEY)]},mn={get:function(tn){return[Mt,new kr(tn.key)]},getMany:function(tn){return[Mt,new kr().addKeys(tn.keys)]},count:qt,query:qt,openCursor:qt};return h(mn).forEach(function(tn){fn[tn]=function(sn){var an=Vt.subscr,pn=!!an,yn=Vl(Vt,Et)&&Hl(tn,sn)?sn.obsSet={}:an;if(pn){var wn=function(Un){return Un="idb://".concat(g,"/").concat(ft,"/").concat(Un),yn[Un]||(yn[Un]=new kr)},Tn=wn(""),Nn=wn(":dels"),an=mn[tn](sn),pn=an[0],an=an[1];if((tn==="query"&&pn.isPrimaryKey&&!sn.values?Nn:wn(pn.name||"")).add(an),!pn.isPrimaryKey){if(tn!=="count"){var zn=tn==="query"&&Jt&&sn.values&&Et.query(a(a({},sn),{values:!1}));return Et[tn].apply(this,arguments).then(function(Un){if(tn==="query"){if(Jt&&sn.values)return zn.then(function(ur){return ur=ur.result,Tn.addKeys(ur),Un});var Xn=sn.values?Un.result.map(Ht):Un.result;(sn.values?Tn:Nn).addKeys(Xn)}else if(tn==="openCursor"){var Hn=Un,er=sn.values;return Hn&&Object.create(Hn,{key:{get:function(){return Nn.addKey(Hn.primaryKey),Hn.key}},primaryKey:{get:function(){var ur=Hn.primaryKey;return Nn.addKey(ur),ur}},value:{get:function(){return er&&Tn.addKey(Hn.primaryKey),Hn.value}}})}return Un})}Nn.add(_e)}}return Et[tn].apply(this,arguments)}}),fn}})}};function Zl(d,g,_e){if(_e.numFailures===0)return g;if(g.type==="deleteRange")return null;var ft=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _e.numFailures===ft?null:(g=a({},g),j(g.keys)&&(g.keys=g.keys.filter(function(Et,St){return!(St in _e.failures)})),"values"in g&&j(g.values)&&(g.values=g.values.filter(function(Et,St){return!(St in _e.failures)})),g)}function go(d,g){return _e=d,((ft=g).lower===void 0||(ft.lowerOpen?0<pr(_e,ft.lower):0<=pr(_e,ft.lower)))&&(d=d,(g=g).upper===void 0||(g.upperOpen?pr(d,g.upper)<0:pr(d,g.upper)<=0));var _e,ft}function Kl(d,g,mn,ft,Et,St){if(!mn||mn.length===0)return d;var Mt=g.query.index,Ht=Mt.multiEntry,Jt=g.query.range,en=ft.schema.primaryKey.extractKey,fn=Mt.extractKey,qt=(Mt.lowLevelIndex||Mt).extractKey,mn=mn.reduce(function(tn,sn){var an=tn,pn=[];if(sn.type==="add"||sn.type==="put")for(var yn=new kr,wn=sn.values.length-1;0<=wn;--wn){var Tn,Nn=sn.values[wn],zn=en(Nn);yn.hasKey(zn)||(Tn=fn(Nn),(Ht&&j(Tn)?Tn.some(function(Hn){return go(Hn,Jt)}):go(Tn,Jt))&&(yn.addKey(zn),pn.push(Nn)))}switch(sn.type){case"add":var Gn=new kr().addKeys(g.values?tn.map(function(er){return en(er)}):tn),an=tn.concat(g.values?pn.filter(function(er){return er=en(er),!Gn.hasKey(er)&&(Gn.addKey(er),!0)}):pn.map(function(er){return en(er)}).filter(function(er){return!Gn.hasKey(er)&&(Gn.addKey(er),!0)}));break;case"put":var On=new kr().addKeys(sn.values.map(function(er){return en(er)}));an=tn.filter(function(er){return!On.hasKey(g.values?en(er):er)}).concat(g.values?pn:pn.map(function(er){return en(er)}));break;case"delete":var Un=new kr().addKeys(sn.keys);an=tn.filter(function(er){return!Un.hasKey(g.values?en(er):er)});break;case"deleteRange":var Xn=sn.range;an=tn.filter(function(er){return!go(en(er),Xn)})}return an},d);return mn===d?d:(mn.sort(function(tn,sn){return pr(qt(tn),qt(sn))||pr(en(tn),en(sn))}),g.limit&&g.limit<1/0&&(mn.length>g.limit?mn.length=g.limit:d.length===g.limit&&mn.length<g.limit&&(Et.dirty=!0)),St?Object.freeze(mn):mn)}function Gl(d,g){return pr(d.lower,g.lower)===0&&pr(d.upper,g.upper)===0&&!!d.lowerOpen==!!g.lowerOpen&&!!d.upperOpen==!!g.upperOpen}function Gu(d,g){return function(_e,ft,Et,St){if(_e===void 0)return ft!==void 0?-1:0;if(ft===void 0)return 1;if((ft=pr(_e,ft))===0){if(Et&&St)return 0;if(Et)return 1;if(St)return-1}return ft}(d.lower,g.lower,d.lowerOpen,g.lowerOpen)<=0&&0<=function(_e,ft,Et,St){if(_e===void 0)return ft!==void 0?1:0;if(ft===void 0)return-1;if((ft=pr(_e,ft))===0){if(Et&&St)return 0;if(Et)return-1;if(St)return 1}return ft}(d.upper,g.upper,d.upperOpen,g.upperOpen)}function qu(d,g,_e,ft){d.subscribers.add(_e),ft.addEventListener("abort",function(){var Et,St;d.subscribers.delete(_e),d.subscribers.size===0&&(Et=d,St=g,setTimeout(function(){Et.subscribers.size===0&&$t(St,Et)},3e3))})}var Xu={stack:"dbcore",level:0,name:"Cache",create:function(d){var g=d.schema.name;return a(a({},d),{transaction:function(_e,ft,Et){var St,Mt,Ht=d.transaction(_e,ft,Et);return ft==="readwrite"&&(Mt=(St=new AbortController).signal,Et=function(Jt){return function(){if(St.abort(),ft==="readwrite"){for(var en=new Set,fn=0,qt=_e;fn<qt.length;fn++){var mn=qt[fn],tn=Hr["idb://".concat(g,"/").concat(mn)];if(tn){var sn=d.table(mn),an=tn.optimisticOps.filter(function(er){return er.trans===Ht});if(Ht._explicit&&Jt&&Ht.mutatedParts)for(var pn=0,yn=Object.values(tn.queries.query);pn<yn.length;pn++)for(var wn=0,Tn=(Gn=yn[pn]).slice();wn<Tn.length;wn++)lo((On=Tn[wn]).obsSet,Ht.mutatedParts)&&($t(Gn,On),On.subscribers.forEach(function(er){return en.add(er)}));else if(0<an.length){tn.optimisticOps=tn.optimisticOps.filter(function(er){return er.trans!==Ht});for(var Nn=0,zn=Object.values(tn.queries.query);Nn<zn.length;Nn++)for(var Gn,On,Un,Xn=0,Hn=(Gn=zn[Nn]).slice();Xn<Hn.length;Xn++)(On=Hn[Xn]).res!=null&&Ht.mutatedParts&&(Jt&&!On.dirty?(Un=Object.isFrozen(On.res),Un=Kl(On.res,On.req,an,sn,On,Un),On.dirty?($t(Gn,On),On.subscribers.forEach(function(er){return en.add(er)})):Un!==On.res&&(On.res=Un,On.promise=Pn.resolve({result:Un}))):(On.dirty&&$t(Gn,On),On.subscribers.forEach(function(er){return en.add(er)})))}}}en.forEach(function(er){return er()})}}},Ht.addEventListener("abort",Et(!1),{signal:Mt}),Ht.addEventListener("error",Et(!1),{signal:Mt}),Ht.addEventListener("complete",Et(!0),{signal:Mt})),Ht},table:function(_e){var ft=d.table(_e),Et=ft.schema.primaryKey;return a(a({},ft),{mutate:function(St){var Mt=Vt.trans;if(Et.outbound||Mt.db._options.cache==="disabled"||Mt.explicit||Mt.idbtrans.mode!=="readwrite")return ft.mutate(St);var Ht=Hr["idb://".concat(g,"/").concat(_e)];return Ht?(Mt=ft.mutate(St),St.type!=="add"&&St.type!=="put"||!(50<=St.values.length||mo(Et,St).some(function(Jt){return Jt==null}))?(Ht.optimisticOps.push(St),St.mutatedParts&&Fs(St.mutatedParts),Mt.then(function(Jt){0<Jt.numFailures&&($t(Ht.optimisticOps,St),(Jt=Zl(0,St,Jt))&&Ht.optimisticOps.push(Jt),St.mutatedParts&&Fs(St.mutatedParts))}),Mt.catch(function(){$t(Ht.optimisticOps,St),St.mutatedParts&&Fs(St.mutatedParts)})):Mt.then(function(Jt){var en=Zl(0,a(a({},St),{values:St.values.map(function(fn,qt){var mn;return Jt.failures[qt]?fn:(fn=(mn=Et.keyPath)!==null&&mn!==void 0&&mn.includes(".")?jt(fn):a({},fn),ct(fn,Et.keyPath,Jt.results[qt]),fn)})}),Jt);Ht.optimisticOps.push(en),queueMicrotask(function(){return St.mutatedParts&&Fs(St.mutatedParts)})}),Mt):ft.mutate(St)},query:function(St){if(!Vl(Vt,ft)||!Hl("query",St))return ft.query(St);var Mt=((en=Vt.trans)===null||en===void 0?void 0:en.db._options.cache)==="immutable",qt=Vt,Ht=qt.requery,Jt=qt.signal,en=function(sn,an,pn,yn){var wn=Hr["idb://".concat(sn,"/").concat(an)];if(!wn)return[];if(!(an=wn.queries[pn]))return[null,!1,wn,null];var Tn=an[(yn.query?yn.query.index.name:null)||""];if(!Tn)return[null,!1,wn,null];switch(pn){case"query":var Nn=Tn.find(function(zn){return zn.req.limit===yn.limit&&zn.req.values===yn.values&&Gl(zn.req.query.range,yn.query.range)});return Nn?[Nn,!0,wn,Tn]:[Tn.find(function(zn){return("limit"in zn.req?zn.req.limit:1/0)>=yn.limit&&(!yn.values||zn.req.values)&&Gu(zn.req.query.range,yn.query.range)}),!1,wn,Tn];case"count":return Nn=Tn.find(function(zn){return Gl(zn.req.query.range,yn.query.range)}),[Nn,!!Nn,wn,Tn]}}(g,_e,"query",St),fn=en[0],qt=en[1],mn=en[2],tn=en[3];return fn&&qt?fn.obsSet=St.obsSet:(qt=ft.query(St).then(function(sn){var an=sn.result;if(fn&&(fn.res=an),Mt){for(var pn=0,yn=an.length;pn<yn;++pn)Object.freeze(an[pn]);Object.freeze(an)}else sn.result=jt(an);return sn}).catch(function(sn){return tn&&fn&&$t(tn,fn),Promise.reject(sn)}),fn={obsSet:St.obsSet,promise:qt,subscribers:new Set,type:"query",req:St,dirty:!1},tn?tn.push(fn):(tn=[fn],(mn=mn||(Hr["idb://".concat(g,"/").concat(_e)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[St.query.index.name||""]=tn)),qu(fn,tn,Ht,Jt),fn.promise.then(function(sn){return{result:Kl(sn.result,St,mn==null?void 0:mn.optimisticOps,ft,fn,Mt)}})}})}})}};function Os(d,g){return new Proxy(d,{get:function(_e,ft,Et){return ft==="db"?g:Reflect.get(_e,ft,Et)}})}var Lr=(_r.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Lt.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Lt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var g=this._versions,_e=g.filter(function(ft){return ft._cfg.version===d})[0];return _e||(_e=new this.Version(d),g.push(_e),g.sort(zu),_e.stores({}),this._state.autoSchema=!1,_e)},_r.prototype._whenReady=function(d){var g=this;return this.idbdb&&(this._state.openComplete||Vt.letThrough||this._vip)?d():new Pn(function(_e,ft){if(g._state.openComplete)return ft(new Lt.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void ft(new Lt.DatabaseClosed);g.open().catch(un)}g._state.dbReadyPromise.then(_e,ft)}).then(d)},_r.prototype.use=function(d){var g=d.stack,_e=d.create,ft=d.level,Et=d.name;return Et&&this.unuse({stack:g,name:Et}),d=this._middlewares[g]||(this._middlewares[g]=[]),d.push({stack:g,create:_e,level:ft??10,name:Et}),d.sort(function(St,Mt){return St.level-Mt.level}),this},_r.prototype.unuse=function(d){var g=d.stack,_e=d.name,ft=d.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(Et){return ft?Et.create!==ft:!!_e&&Et.name!==_e})),this},_r.prototype.open=function(){var d=this;return Sr(An,function(){return Wu(d)})},_r.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,g=qr.indexOf(this);if(0<=g&&qr.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Pn(function(_e){d.dbReadyResolve=_e}),d.openCanceller=new Pn(function(_e,ft){d.cancelOpen=ft}))},_r.prototype.close=function(_e){var g=(_e===void 0?{disableAutoOpen:!0}:_e).disableAutoOpen,_e=this._state;g?(_e.isBeingOpened&&_e.cancelOpen(new Lt.DatabaseClosed),this._close(),_e.autoOpen=!1,_e.dbOpenError=new Lt.DatabaseClosed):(this._close(),_e.autoOpen=this._options.autoOpen||_e.isBeingOpened,_e.openComplete=!1,_e.dbOpenError=null)},_r.prototype.delete=function(d){var g=this;d===void 0&&(d={disableAutoOpen:!0});var _e=0<arguments.length&&typeof arguments[0]!="object",ft=this._state;return new Pn(function(Et,St){function Mt(){g.close(d);var Ht=g._deps.indexedDB.deleteDatabase(g.name);Ht.onsuccess=bn(function(){var Jt,en,fn;Jt=g._deps,en=g.name,fn=Jt.indexedDB,Jt=Jt.IDBKeyRange,io(fn)||en===_s||so(fn,Jt).delete(en).catch(un),Et()}),Ht.onerror=Fr(St),Ht.onblocked=g._fireOnBlocked}if(_e)throw new Lt.InvalidArgument("Invalid closeOptions argument to db.delete()");ft.isBeingOpened?ft.dbReadyPromise.then(Mt):Mt()})},_r.prototype.backendDB=function(){return this.idbdb},_r.prototype.isOpen=function(){return this.idbdb!==null},_r.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},_r.prototype.hasFailed=function(){return this._state.dbOpenError!==null},_r.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(_r.prototype,"tables",{get:function(){var d=this;return h(this._allTables).map(function(g){return d._allTables[g]})},enumerable:!1,configurable:!0}),_r.prototype.transaction=function(){var d=(function(g,_e,ft){var Et=arguments.length;if(Et<2)throw new Lt.InvalidArgument("Too few arguments");for(var St=new Array(Et-1);--Et;)St[Et-1]=arguments[Et];return ft=St.pop(),[g,Ct(St),ft]}).apply(this,arguments);return this._transaction.apply(this,d)},_r.prototype._transaction=function(d,g,_e){var ft=this,Et=Vt.trans;Et&&Et.db===this&&d.indexOf("!")===-1||(Et=null);var St,Mt,Ht=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(Mt=g.map(function(en){if(en=en instanceof ft.Table?en.name:en,typeof en!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return en}),d=="r"||d===_i)St=_i;else{if(d!="rw"&&d!=na)throw new Lt.InvalidArgument("Invalid transaction mode: "+d);St=na}if(Et){if(Et.mode===_i&&St===na){if(!Ht)throw new Lt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");Et=null}Et&&Mt.forEach(function(en){if(Et&&Et.storeNames.indexOf(en)===-1){if(!Ht)throw new Lt.SubTransaction("Table "+en+" not included in parent transaction.");Et=null}}),Ht&&Et&&!Et.active&&(Et=null)}}catch(en){return Et?Et._promise(null,function(fn,qt){qt(en)}):Er(en)}var Jt=(function en(fn,qt,mn,tn,sn){return Pn.resolve().then(function(){var an=Vt.transless||Vt,pn=fn._createTransaction(qt,mn,fn._dbSchema,tn);if(pn.explicit=!0,an={trans:pn,transless:an},tn)pn.idbtrans=tn.idbtrans;else try{pn.create(),pn.idbtrans._explicit=!0,fn._state.PR1398_maxLoop=3}catch(Tn){return Tn.name===Dt.InvalidState&&fn.isOpen()&&0<--fn._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),fn.close({disableAutoOpen:!1}),fn.open().then(function(){return en(fn,qt,mn,null,sn)})):Er(Tn)}var yn,wn=Gt(sn);return wn&&tr(),an=Pn.follow(function(){var Tn;(yn=sn.call(pn,pn))&&(wn?(Tn=sr.bind(null,null),yn.then(Tn,Tn)):typeof yn.next=="function"&&typeof yn.throw=="function"&&(yn=fo(yn)))},an),(yn&&typeof yn.then=="function"?Pn.resolve(yn).then(function(Tn){return pn.active?Tn:Er(new Lt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):an.then(function(){return yn})).then(function(Tn){return tn&&pn._resolve(),pn._completion.then(function(){return Tn})}).catch(function(Tn){return pn._reject(Tn),Er(Tn)})})}).bind(null,this,St,Mt,Et,_e);return Et?Et._promise(St,Jt,"lock"):Vt.trans?Sr(Vt.transless,function(){return ft._whenReady(Jt)}):this._whenReady(Jt)},_r.prototype.table=function(d){if(!at(this._allTables,d))throw new Lt.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},_r);function _r(d,g){var _e=this;this._middlewares={},this.verno=0;var ft=_r.dependencies;this._options=g=a({addons:_r.addons,autoOpen:!0,indexedDB:ft.indexedDB,IDBKeyRange:ft.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},ft=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var Et,St,Mt,Ht,Jt,en={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:un,dbReadyPromise:null,cancelOpen:un,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};en.dbReadyPromise=new Pn(function(qt){en.dbReadyResolve=qt}),en.openCanceller=new Pn(function(qt,mn){en.cancelOpen=mn}),this._state=en,this.name=d,this.on=as(this,"populate","blocked","versionchange","close",{ready:[zt,un]}),this.once=function(qt,mn){var tn=function(){for(var sn=[],an=0;an<arguments.length;an++)sn[an]=arguments[an];_e.on(qt).unsubscribe(tn),mn.apply(_e,sn)};return _e.on(qt,tn)},this.on.ready.subscribe=st(this.on.ready.subscribe,function(qt){return function(mn,tn){_r.vip(function(){var sn,an=_e._state;an.openComplete?(an.dbOpenError||Pn.resolve().then(mn),tn&&qt(mn)):an.onReadyBeingFired?(an.onReadyBeingFired.push(mn),tn&&qt(mn)):(qt(mn),sn=_e,tn||qt(function pn(){sn.on.ready.unsubscribe(mn),sn.on.ready.unsubscribe(pn)}))})}}),this.Collection=(Et=this,os(Du.prototype,function(yn,pn){this.db=Et;var tn=El,sn=null;if(pn)try{tn=pn()}catch(wn){sn=wn}var an=yn._ctx,pn=an.table,yn=pn.hook.reading.fire;this._ctx={table:pn,index:an.index,isPrimKey:!an.index||pn.schema.primKey.keyPath&&an.index===pn.schema.primKey.name,range:tn,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:sn,or:an.or,valueMapper:yn!==kn?yn:null}})),this.Table=(St=this,os(Cl.prototype,function(qt,mn,tn){this.db=St,this._tx=tn,this.name=qt,this.schema=mn,this.hook=St._allTables[qt]?St._allTables[qt].hook:as(null,{creating:[nn,un],reading:[jn,kn],updating:[pt,un],deleting:[rn,un]})})),this.Transaction=(Mt=this,os(Fu.prototype,function(qt,mn,tn,sn,an){var pn=this;qt!=="readonly"&&mn.forEach(function(yn){yn=(yn=tn[yn])===null||yn===void 0?void 0:yn.yProps,yn&&(mn=mn.concat(yn.map(function(wn){return wn.updatesTable})))}),this.db=Mt,this.mode=qt,this.storeNames=mn,this.schema=tn,this.chromeTransactionDurability=sn,this.idbtrans=null,this.on=as(this,"complete","error","abort"),this.parent=an||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pn(function(yn,wn){pn._resolve=yn,pn._reject=wn}),this._completion.then(function(){pn.active=!1,pn.on.complete.fire()},function(yn){var wn=pn.active;return pn.active=!1,pn.on.error.fire(yn),pn.parent?pn.parent._reject(yn):wn&&pn.idbtrans&&pn.idbtrans.abort(),Er(yn)})})),this.Version=(Ht=this,os(Bu.prototype,function(qt){this.db=Ht,this._cfg={version:qt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Jt=this,os(Il.prototype,function(qt,mn,tn){if(this.db=Jt,this._ctx={table:qt,index:mn===":id"?null:mn,or:tn},this._cmp=this._ascending=pr,this._descending=function(sn,an){return pr(an,sn)},this._max=function(sn,an){return 0<pr(sn,an)?sn:an},this._min=function(sn,an){return pr(sn,an)<0?sn:an},this._IDBKeyRange=Jt._deps.IDBKeyRange,!this._IDBKeyRange)throw new Lt.MissingAPI})),this.on("versionchange",function(qt){0<qt.newVersion?console.warn("Another connection wants to upgrade database '".concat(_e.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_e.name,"'. Closing db now to resume the delete request.")),_e.close({disableAutoOpen:!1})}),this.on("blocked",function(qt){!qt.newVersion||qt.newVersion<qt.oldVersion?console.warn("Dexie.delete('".concat(_e.name,"') was blocked")):console.warn("Upgrade '".concat(_e.name,"' blocked by other connection holding version ").concat(qt.oldVersion/10))}),this._maxKey=us(g.IDBKeyRange),this._createTransaction=function(qt,mn,tn,sn){return new _e.Transaction(qt,mn,tn,_e._options.chromeTransactionDurability,sn)},this._fireOnBlocked=function(qt){_e.on("blocked").fire(qt),qr.filter(function(mn){return mn.name===_e.name&&mn!==_e&&!mn._state.vcFired}).map(function(mn){return mn.on("versionchange").fire(qt)})},this.use(Zu),this.use(Xu),this.use(Ku),this.use(Vu),this.use(Hu);var fn=new Proxy(this,{get:function(qt,mn,tn){if(mn==="_vip")return!0;if(mn==="table")return function(an){return Os(_e.table(an),fn)};var sn=Reflect.get(qt,mn,tn);return sn instanceof Cl?Os(sn,fn):mn==="tables"?sn.map(function(an){return Os(an,fn)}):mn==="_createTransaction"?function(){return Os(sn.apply(this,arguments),fn)}:sn}});this.vip=fn,ft.forEach(function(qt){return qt(_e)})}var Ls,Dr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yu=(xo.prototype.subscribe=function(d,g,_e){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:g,complete:_e})},xo.prototype[Dr]=function(){return this},xo);function xo(d){this._subscribe=d}try{Ls={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Ls={indexedDB:null,IDBKeyRange:null}}function Xl(d){var g,_e=!1,ft=new Yu(function(Et){var St=Gt(d),Mt,Ht=!1,Jt={},en={},fn={get closed(){return Ht},unsubscribe:function(){Ht||(Ht=!0,Mt&&Mt.abort(),qt&&Ur.storagemutated.unsubscribe(tn))}};Et.start&&Et.start(fn);var qt=!1,mn=function(){return Pr(sn)},tn=function(an){Is(Jt,an),lo(en,Jt)&&mn()},sn=function(){var an,pn,yn;!Ht&&Ls.indexedDB&&(Jt={},an={},Mt&&Mt.abort(),Mt=new AbortController,yn=function(wn){var Tn=Pt();try{St&&tr();var Nn=Vn(d,wn);return Nn=St?Nn.finally(sr):Nn}finally{Tn&&Zt()}}(pn={subscr:an,signal:Mt.signal,requery:mn,querier:d,trans:null}),Promise.resolve(yn).then(function(wn){_e=!0,g=wn,Ht||pn.signal.aborted||(Jt={},function(Tn){for(var Nn in Tn)if(at(Tn,Nn))return;return 1}(en=an)||qt||(Ur(cs,tn),qt=!0),Pr(function(){return!Ht&&Et.next&&Et.next(wn)}))},function(wn){_e=!1,["DatabaseClosedError","AbortError"].includes(wn==null?void 0:wn.name)||Ht||Pr(function(){Ht||Et.error&&Et.error(wn)})}))};return setTimeout(mn,0),fn});return ft.hasValue=function(){return _e},ft.getValue=function(){return g},ft}var Zr=Lr;function yo(d){var g=Br;try{Br=!0,Ur.storagemutated.fire(d),ho(d,!0)}finally{Br=g}}rt(Zr,a(a({},vn),{delete:function(d){return new Zr(d,{addons:[]}).delete()},exists:function(d){return new Zr(d,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return g=Zr.dependencies,_e=g.indexedDB,g=g.IDBKeyRange,(io(_e)?Promise.resolve(_e.databases()).then(function(ft){return ft.map(function(Et){return Et.name}).filter(function(Et){return Et!==_s})}):so(_e,g).toCollection().primaryKeys()).then(d)}catch{return Er(new Lt.MissingAPI)}var g,_e},defineClass:function(){return function(d){b(this,d)}},ignoreTransaction:function(d){return Vt.trans?Sr(Vt.transless,d):d()},vip:ao,async:function(d){return function(){try{var g=fo(d.apply(this,arguments));return g&&typeof g.then=="function"?g:Pn.resolve(g)}catch(_e){return Er(_e)}}},spawn:function(d,g,_e){try{var ft=fo(d.apply(_e,g||[]));return ft&&typeof ft.then=="function"?ft:Pn.resolve(ft)}catch(Et){return Er(Et)}},currentTransaction:{get:function(){return Vt.trans||null}},waitFor:function(d,g){return g=Pn.resolve(typeof d=="function"?Zr.ignoreTransaction(d):d).timeout(g||6e4),Vt.trans?Vt.trans.waitFor(g):g},Promise:Pn,debug:{get:function(){return Kt},set:function(d){hn(d)}},derive:vt,extend:b,props:rt,override:st,Events:as,on:Ur,liveQuery:Xl,extendObservabilitySet:Is,getByKeyPath:yt,setByKeyPath:ct,delByKeyPath:function(d,g){typeof g=="string"?ct(d,g,void 0):"length"in g&&[].map.call(g,function(_e){ct(d,_e,void 0)})},shallowClone:mt,deepClone:jt,getObjectDiff:po,cmp:pr,asap:lt,minKey:-1/0,addons:[],connections:qr,errnames:Dt,dependencies:Ls,cache:Hr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,g,_e){return d+g/Math.pow(10,2*_e)})})),Zr.maxKey=us(Zr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ur(cs,function(d){Br||(d=new CustomEvent(ba,{detail:d}),Br=!0,dispatchEvent(d),Br=!1)}),addEventListener(ba,function(d){d=d.detail,Br||yo(d)}));var Jr,Br=!1,Yl=function(){};return typeof BroadcastChannel<"u"&&((Yl=function(){(Jr=new BroadcastChannel(ba)).onmessage=function(d){return d.data&&yo(d.data)}})(),typeof Jr.unref=="function"&&Jr.unref(),Ur(cs,function(d){Br||Jr.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Lr.disableBfCache&&d.persisted){Kt&&console.debug("Dexie: handling persisted pagehide"),Jr!=null&&Jr.close();for(var g=0,_e=qr;g<_e.length;g++)_e[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Lr.disableBfCache&&d.persisted&&(Kt&&console.debug("Dexie: handling persisted pageshow"),Yl(),yo({all:new kr(-1/0,[[]])}))})),Pn.rejectionMapper=function(d,g){return!d||d instanceof it||d instanceof TypeError||d instanceof SyntaxError||!d.name||!on[d.name]?d:(g=new on[d.name](g||d.message,d),"stack"in d&&ot(g,"stack",{get:function(){return this.inner.stack}}),g)},hn(Kt),a(Lr,Object.freeze({__proto__:null,Dexie:Lr,liveQuery:Xl,Entity:_l,cmp:pr,PropModification:is,replacePrefix:function(d,g){return new is({replacePrefix:[d,g]})},add:function(d){return new is({add:d})},remove:function(d){return new is({remove:d})},default:Lr,RangeSet:kr,mergeRanges:fs,rangesOverlap:zl}),{default:Lr}),Lr})})(dexie_min);var dexie_minExports=dexie_min.exports;const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie;/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...e)=>e.filter((s,i,a)=>!!s&&a.indexOf(s)===i).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:h,...j},b)=>reactExports.createElement("svg",{ref:b,...defaultAttributes,width:s,height:s,stroke:e,strokeWidth:a?Number(i)*24/Number(s):i,className:mergeClasses("lucide",o),...j},[...h.map(([_,$])=>reactExports.createElement(_,$)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(e,s)=>{const i=reactExports.forwardRef(({className:a,...o},c)=>reactExports.createElement(Icon,{ref:c,iconNode:s,className:mergeClasses(`lucide-${toKebabCase(e)}`,a),...o}));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar$1=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DollarSign=createLucideIcon("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ellipsis=createLucideIcon("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Folder=createLucideIcon("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const House=createLucideIcon("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NotebookPen=createLucideIcon("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SquareCheckBig=createLucideIcon("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class EstateWorkspaceDB extends Dexie{constructor(){super("estate-workspace");xr(this,"tasks");xr(this,"documents");xr(this,"journalEntries");this.version(1).stores({tasks:"id, due_date, status, priority, created_at, updated_at, *tags, *docIds"}),this.version(2).stores({tasks:"id, due_date, status, priority, created_at, updated_at, *tags, *docIds",documents:"id, title, contentType, size, created_at, taskId, *tags"}),this.version(3).stores({tasks:"id, due_date, status, priority, created_at, updated_at, *tags, *docIds",documents:"id, title, contentType, size, created_at, taskId, *tags",journalEntries:"id, created_at, title"}),this.version(4).stores({tasks:"id, estateId, due_date, status, priority, created_at, updated_at, seedVersion, *tags, *docIds",documents:"id, estateId, title, contentType, size, created_at, taskId, *tags",journalEntries:"id, estateId, created_at, title"}).upgrade(async i=>{await i.table("tasks").toCollection().modify(a=>{a.estateId||(a.estateId="mother")}),await i.table("documents").toCollection().modify(a=>{a.estateId||(a.estateId="mother")}),await i.table("journalEntries").toCollection().modify(a=>{a.estateId||(a.estateId="mother")})})}}const db=new EstateWorkspaceDB,seedTasksIfEmpty=async()=>{await db.tasks.count()},nowISO=()=>new Date().toISOString(),normalizeISODate=e=>new Date(e).toISOString(),createTask=async e=>{const s=generateId$1("task"),i={...e,id:s,docIds:e.docIds??[],due_date:normalizeISODate(e.due_date),created_at:nowISO(),updated_at:nowISO()};return await db.tasks.add(i),s},updateTask=async(e,s)=>{const i={...s,updated_at:nowISO()};s.due_date&&(i.due_date=normalizeISODate(s.due_date)),await db.tasks.update(e,i)},deleteTask=async e=>{await db.tasks.delete(e)},createDocument=async({file:e,title:s,tags:i,taskId:a,estateId:o})=>{const c=generateId$1("doc");let h=o;if(a){const b=await db.tasks.get(a);b&&(h=b.estateId)}const j={id:c,estateId:h,title:s,tags:i,taskId:null,contentType:e.type||"application/octet-stream",size:e.size,file:e,created_at:nowISO()};return await db.documents.add(j),a&&await linkDocumentToTask(c,a),c},linkDocumentToTask=async(e,s)=>{await db.transaction("rw",db.documents,db.tasks,async()=>{const[i,a]=await Promise.all([db.documents.get(e),db.tasks.get(s)]);if(!i||!a)throw new Error("Document or task not found");if(i.estateId!==a.estateId&&await db.documents.update(e,{estateId:a.estateId}),i.taskId&&i.taskId!==s){const o=await db.tasks.get(i.taskId);o&&await db.tasks.update(o.id,{docIds:o.docIds.filter(c=>c!==e),updated_at:nowISO()})}await db.documents.update(e,{taskId:s}),a.docIds.includes(e)?await db.tasks.update(s,{updated_at:nowISO()}):await db.tasks.update(s,{docIds:[...a.docIds,e],updated_at:nowISO()})})},unlinkDocumentFromTask=async e=>{await db.transaction("rw",db.documents,db.tasks,async()=>{const s=await db.documents.get(e);if(!s)return;const{taskId:i}=s;if(await db.documents.update(e,{taskId:null}),!i)return;const a=await db.tasks.get(i);a&&await db.tasks.update(i,{docIds:a.docIds.filter(o=>o!==e),updated_at:nowISO()})})},getJournalEntries=async e=>db.journalEntries.where("estateId").equals(e).sortBy("created_at").then(s=>s.reverse()),createJournalEntry=async({title:e,body:s,estateId:i})=>{const a={id:generateId$1("journal"),estateId:i,title:e,body:s,created_at:nowISO()};return await db.journalEntries.add(a),a.id},updateJournalEntry=async(e,s)=>{await db.journalEntries.update(e,s)},deleteJournalEntry=async e=>{await db.journalEntries.delete(e)},generateId$1=e=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${e}-${Math.random().toString(36).slice(2,11)}`;function $constructor(e,s,i){function a(j,b){var _;Object.defineProperty(j,"_zod",{value:j._zod??{},enumerable:!1}),(_=j._zod).traits??(_.traits=new Set),j._zod.traits.add(e),s(j,b);for(const $ in h.prototype)$ in j||Object.defineProperty(j,$,{value:h.prototype[$].bind(j)});j._zod.constr=h,j._zod.def=b}const o=(i==null?void 0:i.Parent)??Object;class c extends o{}Object.defineProperty(c,"name",{value:e});function h(j){var b;const _=i!=null&&i.Parent?new c:this;a(_,j),(b=_._zod).deferred??(b.deferred=[]);for(const $ of _._zod.deferred)$();return _}return Object.defineProperty(h,"init",{value:a}),Object.defineProperty(h,Symbol.hasInstance,{value:j=>{var b,_;return i!=null&&i.Parent&&j instanceof i.Parent?!0:(_=(b=j==null?void 0:j._zod)==null?void 0:b.traits)==null?void 0:_.has(e)}}),Object.defineProperty(h,"name",{value:e}),h}class $ZodAsyncError extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class $ZodEncodeError extends Error{constructor(s){super(`Encountered unidirectional transform during encode: ${s}`),this.name="ZodEncodeError"}}const globalConfig={};function config(e){return globalConfig}function getEnumValues(e){const s=Object.values(e).filter(a=>typeof a=="number");return Object.entries(e).filter(([a,o])=>s.indexOf(+a)===-1).map(([a,o])=>o)}function jsonStringifyReplacer(e,s){return typeof s=="bigint"?s.toString():s}function cached(e){return{get value(){{const s=e();return Object.defineProperty(this,"value",{value:s}),s}}}}function nullish(e){return e==null}function cleanRegex(e){const s=e.startsWith("^")?1:0,i=e.endsWith("$")?e.length-1:e.length;return e.slice(s,i)}const EVALUATING=Symbol("evaluating");function defineLazy(e,s,i){let a;Object.defineProperty(e,s,{get(){if(a!==EVALUATING)return a===void 0&&(a=EVALUATING,a=i()),a},set(o){Object.defineProperty(e,s,{value:o})},configurable:!0})}function assignProp(e,s,i){Object.defineProperty(e,s,{value:i,writable:!0,enumerable:!0,configurable:!0})}function mergeDefs(...e){const s={};for(const i of e){const a=Object.getOwnPropertyDescriptors(i);Object.assign(s,a)}return Object.defineProperties({},s)}function esc(e){return JSON.stringify(e)}const captureStackTrace="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function isObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const allowsEval=cached(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const s=Function;return new s(""),!0}catch{return!1}});function isPlainObject(e){if(isObject(e)===!1)return!1;const s=e.constructor;if(s===void 0)return!0;const i=s.prototype;return!(isObject(i)===!1||Object.prototype.hasOwnProperty.call(i,"isPrototypeOf")===!1)}function shallowClone(e){return isPlainObject(e)?{...e}:Array.isArray(e)?[...e]:e}const propertyKeyTypes=new Set(["string","number","symbol"]);function escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function clone(e,s,i){const a=new e._zod.constr(s??e._zod.def);return(!s||i!=null&&i.parent)&&(a._zod.parent=e),a}function normalizeParams(e){const s=e;if(!s)return{};if(typeof s=="string")return{error:()=>s};if((s==null?void 0:s.message)!==void 0){if((s==null?void 0:s.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");s.error=s.message}return delete s.message,typeof s.error=="string"?{...s,error:()=>s.error}:s}function optionalKeys(e){return Object.keys(e).filter(s=>e[s]._zod.optin==="optional"&&e[s]._zod.optout==="optional")}function pick(e,s){const i=e._zod.def,a=mergeDefs(e._zod.def,{get shape(){const o={};for(const c in s){if(!(c in i.shape))throw new Error(`Unrecognized key: "${c}"`);s[c]&&(o[c]=i.shape[c])}return assignProp(this,"shape",o),o},checks:[]});return clone(e,a)}function omit(e,s){const i=e._zod.def,a=mergeDefs(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const c in s){if(!(c in i.shape))throw new Error(`Unrecognized key: "${c}"`);s[c]&&delete o[c]}return assignProp(this,"shape",o),o},checks:[]});return clone(e,a)}function extend(e,s){if(!isPlainObject(s))throw new Error("Invalid input to extend: expected a plain object");const i=e._zod.def.checks;if(i&&i.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const o=mergeDefs(e._zod.def,{get shape(){const c={...e._zod.def.shape,...s};return assignProp(this,"shape",c),c},checks:[]});return clone(e,o)}function safeExtend(e,s){if(!isPlainObject(s))throw new Error("Invalid input to safeExtend: expected a plain object");const i={...e._zod.def,get shape(){const a={...e._zod.def.shape,...s};return assignProp(this,"shape",a),a},checks:e._zod.def.checks};return clone(e,i)}function merge(e,s){const i=mergeDefs(e._zod.def,{get shape(){const a={...e._zod.def.shape,...s._zod.def.shape};return assignProp(this,"shape",a),a},get catchall(){return s._zod.def.catchall},checks:[]});return clone(e,i)}function partial(e,s,i){const a=mergeDefs(s._zod.def,{get shape(){const o=s._zod.def.shape,c={...o};if(i)for(const h in i){if(!(h in o))throw new Error(`Unrecognized key: "${h}"`);i[h]&&(c[h]=e?new e({type:"optional",innerType:o[h]}):o[h])}else for(const h in o)c[h]=e?new e({type:"optional",innerType:o[h]}):o[h];return assignProp(this,"shape",c),c},checks:[]});return clone(s,a)}function required(e,s,i){const a=mergeDefs(s._zod.def,{get shape(){const o=s._zod.def.shape,c={...o};if(i)for(const h in i){if(!(h in c))throw new Error(`Unrecognized key: "${h}"`);i[h]&&(c[h]=new e({type:"nonoptional",innerType:o[h]}))}else for(const h in o)c[h]=new e({type:"nonoptional",innerType:o[h]});return assignProp(this,"shape",c),c},checks:[]});return clone(s,a)}function aborted(e,s=0){var i;if(e.aborted===!0)return!0;for(let a=s;a<e.issues.length;a++)if(((i=e.issues[a])==null?void 0:i.continue)!==!0)return!0;return!1}function prefixIssues(e,s){return s.map(i=>{var a;return(a=i).path??(a.path=[]),i.path.unshift(e),i})}function unwrapMessage(e){return typeof e=="string"?e:e==null?void 0:e.message}function finalizeIssue(e,s,i){var o,c,h,j,b,_;const a={...e,path:e.path??[]};if(!e.message){const $=unwrapMessage((h=(c=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:c.error)==null?void 0:h.call(c,e))??unwrapMessage((j=s==null?void 0:s.error)==null?void 0:j.call(s,e))??unwrapMessage((b=i.customError)==null?void 0:b.call(i,e))??unwrapMessage((_=i.localeError)==null?void 0:_.call(i,e))??"Invalid input";a.message=$}return delete a.inst,delete a.continue,s!=null&&s.reportInput||delete a.input,a}function getLengthableOrigin(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function issue(...e){const[s,i,a]=e;return typeof s=="string"?{message:s,code:"custom",input:i,inst:a}:{...s}}const initializer$1=(e,s)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:s,enumerable:!1}),e.message=JSON.stringify(s,jsonStringifyReplacer,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},$ZodError=$constructor("$ZodError",initializer$1),$ZodRealError=$constructor("$ZodError",initializer$1,{Parent:Error});function flattenError(e,s=i=>i.message){const i={},a=[];for(const o of e.issues)o.path.length>0?(i[o.path[0]]=i[o.path[0]]||[],i[o.path[0]].push(s(o))):a.push(s(o));return{formErrors:a,fieldErrors:i}}function formatError(e,s=i=>i.message){const i={_errors:[]},a=o=>{for(const c of o.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(h=>a({issues:h}));else if(c.code==="invalid_key")a({issues:c.issues});else if(c.code==="invalid_element")a({issues:c.issues});else if(c.path.length===0)i._errors.push(s(c));else{let h=i,j=0;for(;j<c.path.length;){const b=c.path[j];j===c.path.length-1?(h[b]=h[b]||{_errors:[]},h[b]._errors.push(s(c))):h[b]=h[b]||{_errors:[]},h=h[b],j++}}};return a(e),i}const _parse=e=>(s,i,a,o)=>{const c=a?Object.assign(a,{async:!1}):{async:!1},h=s._zod.run({value:i,issues:[]},c);if(h instanceof Promise)throw new $ZodAsyncError;if(h.issues.length){const j=new((o==null?void 0:o.Err)??e)(h.issues.map(b=>finalizeIssue(b,c,config())));throw captureStackTrace(j,o==null?void 0:o.callee),j}return h.value},_parseAsync=e=>async(s,i,a,o)=>{const c=a?Object.assign(a,{async:!0}):{async:!0};let h=s._zod.run({value:i,issues:[]},c);if(h instanceof Promise&&(h=await h),h.issues.length){const j=new((o==null?void 0:o.Err)??e)(h.issues.map(b=>finalizeIssue(b,c,config())));throw captureStackTrace(j,o==null?void 0:o.callee),j}return h.value},_safeParse=e=>(s,i,a)=>{const o=a?{...a,async:!1}:{async:!1},c=s._zod.run({value:i,issues:[]},o);if(c instanceof Promise)throw new $ZodAsyncError;return c.issues.length?{success:!1,error:new(e??$ZodError)(c.issues.map(h=>finalizeIssue(h,o,config())))}:{success:!0,data:c.value}},safeParse$1=_safeParse($ZodRealError),_safeParseAsync=e=>async(s,i,a)=>{const o=a?Object.assign(a,{async:!0}):{async:!0};let c=s._zod.run({value:i,issues:[]},o);return c instanceof Promise&&(c=await c),c.issues.length?{success:!1,error:new e(c.issues.map(h=>finalizeIssue(h,o,config())))}:{success:!0,data:c.value}},safeParseAsync$1=_safeParseAsync($ZodRealError),_encode=e=>(s,i,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return _parse(e)(s,i,o)},_decode=e=>(s,i,a)=>_parse(e)(s,i,a),_encodeAsync=e=>async(s,i,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return _parseAsync(e)(s,i,o)},_decodeAsync=e=>async(s,i,a)=>_parseAsync(e)(s,i,a),_safeEncode=e=>(s,i,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return _safeParse(e)(s,i,o)},_safeDecode=e=>(s,i,a)=>_safeParse(e)(s,i,a),_safeEncodeAsync=e=>async(s,i,a)=>{const o=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return _safeParseAsync(e)(s,i,o)},_safeDecodeAsync=e=>async(s,i,a)=>_safeParseAsync(e)(s,i,a),cuid=/^[cC][^\s-]{8,}$/,cuid2=/^[0-9a-z]+$/,ulid=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xid=/^[0-9a-vA-V]{20}$/,ksuid=/^[A-Za-z0-9]{27}$/,nanoid=/^[a-zA-Z0-9_-]{21}$/,duration$1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,guid=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,uuid=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,email=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_emoji$1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function emoji(){return new RegExp(_emoji$1,"u")}const ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,cidrv4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cidrv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,base64url=/^[A-Za-z0-9_-]*$/,hostname=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,e164=/^\+(?:[0-9]){6,14}[0-9]$/,dateSource="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",date$1=new RegExp(`^${dateSource}$`);function timeSource(e){const s="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${s}`:e.precision===0?`${s}:[0-5]\\d`:`${s}:[0-5]\\d\\.\\d{${e.precision}}`:`${s}(?::[0-5]\\d(?:\\.\\d+)?)?`}function time$1(e){return new RegExp(`^${timeSource(e)}$`)}function datetime$1(e){const s=timeSource({precision:e.precision}),i=["Z"];e.local&&i.push(""),e.offset&&i.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const a=`${s}(?:${i.join("|")})`;return new RegExp(`^${dateSource}T(?:${a})$`)}const string$1=e=>{const s=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${s}$`)},lowercase=/^[^A-Z]*$/,uppercase=/^[^a-z]*$/,$ZodCheck=$constructor("$ZodCheck",(e,s)=>{var i;e._zod??(e._zod={}),e._zod.def=s,(i=e._zod).onattach??(i.onattach=[])}),$ZodCheckMaxLength=$constructor("$ZodCheckMaxLength",(e,s)=>{var i;$ZodCheck.init(e,s),(i=e._zod.def).when??(i.when=a=>{const o=a.value;return!nullish(o)&&o.length!==void 0}),e._zod.onattach.push(a=>{const o=a._zod.bag.maximum??Number.POSITIVE_INFINITY;s.maximum<o&&(a._zod.bag.maximum=s.maximum)}),e._zod.check=a=>{const o=a.value;if(o.length<=s.maximum)return;const h=getLengthableOrigin(o);a.issues.push({origin:h,code:"too_big",maximum:s.maximum,inclusive:!0,input:o,inst:e,continue:!s.abort})}}),$ZodCheckMinLength=$constructor("$ZodCheckMinLength",(e,s)=>{var i;$ZodCheck.init(e,s),(i=e._zod.def).when??(i.when=a=>{const o=a.value;return!nullish(o)&&o.length!==void 0}),e._zod.onattach.push(a=>{const o=a._zod.bag.minimum??Number.NEGATIVE_INFINITY;s.minimum>o&&(a._zod.bag.minimum=s.minimum)}),e._zod.check=a=>{const o=a.value;if(o.length>=s.minimum)return;const h=getLengthableOrigin(o);a.issues.push({origin:h,code:"too_small",minimum:s.minimum,inclusive:!0,input:o,inst:e,continue:!s.abort})}}),$ZodCheckLengthEquals=$constructor("$ZodCheckLengthEquals",(e,s)=>{var i;$ZodCheck.init(e,s),(i=e._zod.def).when??(i.when=a=>{const o=a.value;return!nullish(o)&&o.length!==void 0}),e._zod.onattach.push(a=>{const o=a._zod.bag;o.minimum=s.length,o.maximum=s.length,o.length=s.length}),e._zod.check=a=>{const o=a.value,c=o.length;if(c===s.length)return;const h=getLengthableOrigin(o),j=c>s.length;a.issues.push({origin:h,...j?{code:"too_big",maximum:s.length}:{code:"too_small",minimum:s.length},inclusive:!0,exact:!0,input:a.value,inst:e,continue:!s.abort})}}),$ZodCheckStringFormat=$constructor("$ZodCheckStringFormat",(e,s)=>{var i,a;$ZodCheck.init(e,s),e._zod.onattach.push(o=>{const c=o._zod.bag;c.format=s.format,s.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(s.pattern))}),s.pattern?(i=e._zod).check??(i.check=o=>{s.pattern.lastIndex=0,!s.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:s.format,input:o.value,...s.pattern?{pattern:s.pattern.toString()}:{},inst:e,continue:!s.abort})}):(a=e._zod).check??(a.check=()=>{})}),$ZodCheckRegex=$constructor("$ZodCheckRegex",(e,s)=>{$ZodCheckStringFormat.init(e,s),e._zod.check=i=>{s.pattern.lastIndex=0,!s.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:"regex",input:i.value,pattern:s.pattern.toString(),inst:e,continue:!s.abort})}}),$ZodCheckLowerCase=$constructor("$ZodCheckLowerCase",(e,s)=>{s.pattern??(s.pattern=lowercase),$ZodCheckStringFormat.init(e,s)}),$ZodCheckUpperCase=$constructor("$ZodCheckUpperCase",(e,s)=>{s.pattern??(s.pattern=uppercase),$ZodCheckStringFormat.init(e,s)}),$ZodCheckIncludes=$constructor("$ZodCheckIncludes",(e,s)=>{$ZodCheck.init(e,s);const i=escapeRegex(s.includes),a=new RegExp(typeof s.position=="number"?`^.{${s.position}}${i}`:i);s.pattern=a,e._zod.onattach.push(o=>{const c=o._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(a)}),e._zod.check=o=>{o.value.includes(s.includes,s.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:s.includes,input:o.value,inst:e,continue:!s.abort})}}),$ZodCheckStartsWith=$constructor("$ZodCheckStartsWith",(e,s)=>{$ZodCheck.init(e,s);const i=new RegExp(`^${escapeRegex(s.prefix)}.*`);s.pattern??(s.pattern=i),e._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),e._zod.check=a=>{a.value.startsWith(s.prefix)||a.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:s.prefix,input:a.value,inst:e,continue:!s.abort})}}),$ZodCheckEndsWith=$constructor("$ZodCheckEndsWith",(e,s)=>{$ZodCheck.init(e,s);const i=new RegExp(`.*${escapeRegex(s.suffix)}$`);s.pattern??(s.pattern=i),e._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),e._zod.check=a=>{a.value.endsWith(s.suffix)||a.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:s.suffix,input:a.value,inst:e,continue:!s.abort})}}),$ZodCheckOverwrite=$constructor("$ZodCheckOverwrite",(e,s)=>{$ZodCheck.init(e,s),e._zod.check=i=>{i.value=s.tx(i.value)}});class Doc{constructor(s=[]){this.content=[],this.indent=0,this&&(this.args=s)}indented(s){this.indent+=1,s(this),this.indent-=1}write(s){if(typeof s=="function"){s(this,{execution:"sync"}),s(this,{execution:"async"});return}const a=s.split(`
`).filter(h=>h),o=Math.min(...a.map(h=>h.length-h.trimStart().length)),c=a.map(h=>h.slice(o)).map(h=>" ".repeat(this.indent*2)+h);for(const h of c)this.content.push(h)}compile(){const s=Function,i=this==null?void 0:this.args,o=[...((this==null?void 0:this.content)??[""]).map(c=>`  ${c}`)];return new s(...i,o.join(`
`))}}const version={major:4,minor:1,patch:12},$ZodType=$constructor("$ZodType",(e,s)=>{var o;var i;e??(e={}),e._zod.def=s,e._zod.bag=e._zod.bag||{},e._zod.version=version;const a=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&a.unshift(e);for(const c of a)for(const h of c._zod.onattach)h(e);if(a.length===0)(i=e._zod).deferred??(i.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const c=(j,b,_)=>{let $=aborted(j),at;for(const rt of b){if(rt._zod.def.when){if(!rt._zod.def.when(j))continue}else if($)continue;const ut=j.issues.length,ot=rt._zod.check(j);if(ot instanceof Promise&&(_==null?void 0:_.async)===!1)throw new $ZodAsyncError;if(at||ot instanceof Promise)at=(at??Promise.resolve()).then(async()=>{await ot,j.issues.length!==ut&&($||($=aborted(j,ut)))});else{if(j.issues.length===ut)continue;$||($=aborted(j,ut))}}return at?at.then(()=>j):j},h=(j,b,_)=>{if(aborted(j))return j.aborted=!0,j;const $=c(b,a,_);if($ instanceof Promise){if(_.async===!1)throw new $ZodAsyncError;return $.then(at=>e._zod.parse(at,_))}return e._zod.parse($,_)};e._zod.run=(j,b)=>{if(b.skipChecks)return e._zod.parse(j,b);if(b.direction==="backward"){const $=e._zod.parse({value:j.value,issues:[]},{...b,skipChecks:!0});return $ instanceof Promise?$.then(at=>h(at,j,b)):h($,j,b)}const _=e._zod.parse(j,b);if(_ instanceof Promise){if(b.async===!1)throw new $ZodAsyncError;return _.then($=>c($,a,b))}return c(_,a,b)}}e["~standard"]={validate:c=>{var h;try{const j=safeParse$1(e,c);return j.success?{value:j.data}:{issues:(h=j.error)==null?void 0:h.issues}}catch{return safeParseAsync$1(e,c).then(b=>{var _;return b.success?{value:b.data}:{issues:(_=b.error)==null?void 0:_.issues}})}},vendor:"zod",version:1}}),$ZodString=$constructor("$ZodString",(e,s)=>{var i;$ZodType.init(e,s),e._zod.pattern=[...((i=e==null?void 0:e._zod.bag)==null?void 0:i.patterns)??[]].pop()??string$1(e._zod.bag),e._zod.parse=(a,o)=>{if(s.coerce)try{a.value=String(a.value)}catch{}return typeof a.value=="string"||a.issues.push({expected:"string",code:"invalid_type",input:a.value,inst:e}),a}}),$ZodStringFormat=$constructor("$ZodStringFormat",(e,s)=>{$ZodCheckStringFormat.init(e,s),$ZodString.init(e,s)}),$ZodGUID=$constructor("$ZodGUID",(e,s)=>{s.pattern??(s.pattern=guid),$ZodStringFormat.init(e,s)}),$ZodUUID=$constructor("$ZodUUID",(e,s)=>{if(s.version){const a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[s.version];if(a===void 0)throw new Error(`Invalid UUID version: "${s.version}"`);s.pattern??(s.pattern=uuid(a))}else s.pattern??(s.pattern=uuid());$ZodStringFormat.init(e,s)}),$ZodEmail=$constructor("$ZodEmail",(e,s)=>{s.pattern??(s.pattern=email),$ZodStringFormat.init(e,s)}),$ZodURL=$constructor("$ZodURL",(e,s)=>{$ZodStringFormat.init(e,s),e._zod.check=i=>{try{const a=i.value.trim(),o=new URL(a);s.hostname&&(s.hostname.lastIndex=0,s.hostname.test(o.hostname)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:hostname.source,input:i.value,inst:e,continue:!s.abort})),s.protocol&&(s.protocol.lastIndex=0,s.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:s.protocol.source,input:i.value,inst:e,continue:!s.abort})),s.normalize?i.value=o.href:i.value=a;return}catch{i.issues.push({code:"invalid_format",format:"url",input:i.value,inst:e,continue:!s.abort})}}}),$ZodEmoji=$constructor("$ZodEmoji",(e,s)=>{s.pattern??(s.pattern=emoji()),$ZodStringFormat.init(e,s)}),$ZodNanoID=$constructor("$ZodNanoID",(e,s)=>{s.pattern??(s.pattern=nanoid),$ZodStringFormat.init(e,s)}),$ZodCUID=$constructor("$ZodCUID",(e,s)=>{s.pattern??(s.pattern=cuid),$ZodStringFormat.init(e,s)}),$ZodCUID2=$constructor("$ZodCUID2",(e,s)=>{s.pattern??(s.pattern=cuid2),$ZodStringFormat.init(e,s)}),$ZodULID=$constructor("$ZodULID",(e,s)=>{s.pattern??(s.pattern=ulid),$ZodStringFormat.init(e,s)}),$ZodXID=$constructor("$ZodXID",(e,s)=>{s.pattern??(s.pattern=xid),$ZodStringFormat.init(e,s)}),$ZodKSUID=$constructor("$ZodKSUID",(e,s)=>{s.pattern??(s.pattern=ksuid),$ZodStringFormat.init(e,s)}),$ZodISODateTime=$constructor("$ZodISODateTime",(e,s)=>{s.pattern??(s.pattern=datetime$1(s)),$ZodStringFormat.init(e,s)}),$ZodISODate=$constructor("$ZodISODate",(e,s)=>{s.pattern??(s.pattern=date$1),$ZodStringFormat.init(e,s)}),$ZodISOTime=$constructor("$ZodISOTime",(e,s)=>{s.pattern??(s.pattern=time$1(s)),$ZodStringFormat.init(e,s)}),$ZodISODuration=$constructor("$ZodISODuration",(e,s)=>{s.pattern??(s.pattern=duration$1),$ZodStringFormat.init(e,s)}),$ZodIPv4=$constructor("$ZodIPv4",(e,s)=>{s.pattern??(s.pattern=ipv4),$ZodStringFormat.init(e,s),e._zod.onattach.push(i=>{const a=i._zod.bag;a.format="ipv4"})}),$ZodIPv6=$constructor("$ZodIPv6",(e,s)=>{s.pattern??(s.pattern=ipv6),$ZodStringFormat.init(e,s),e._zod.onattach.push(i=>{const a=i._zod.bag;a.format="ipv6"}),e._zod.check=i=>{try{new URL(`http://[${i.value}]`)}catch{i.issues.push({code:"invalid_format",format:"ipv6",input:i.value,inst:e,continue:!s.abort})}}}),$ZodCIDRv4=$constructor("$ZodCIDRv4",(e,s)=>{s.pattern??(s.pattern=cidrv4),$ZodStringFormat.init(e,s)}),$ZodCIDRv6=$constructor("$ZodCIDRv6",(e,s)=>{s.pattern??(s.pattern=cidrv6),$ZodStringFormat.init(e,s),e._zod.check=i=>{const a=i.value.split("/");try{if(a.length!==2)throw new Error;const[o,c]=a;if(!c)throw new Error;const h=Number(c);if(`${h}`!==c)throw new Error;if(h<0||h>128)throw new Error;new URL(`http://[${o}]`)}catch{i.issues.push({code:"invalid_format",format:"cidrv6",input:i.value,inst:e,continue:!s.abort})}}});function isValidBase64(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const $ZodBase64=$constructor("$ZodBase64",(e,s)=>{s.pattern??(s.pattern=base64),$ZodStringFormat.init(e,s),e._zod.onattach.push(i=>{i._zod.bag.contentEncoding="base64"}),e._zod.check=i=>{isValidBase64(i.value)||i.issues.push({code:"invalid_format",format:"base64",input:i.value,inst:e,continue:!s.abort})}});function isValidBase64URL(e){if(!base64url.test(e))return!1;const s=e.replace(/[-_]/g,a=>a==="-"?"+":"/"),i=s.padEnd(Math.ceil(s.length/4)*4,"=");return isValidBase64(i)}const $ZodBase64URL=$constructor("$ZodBase64URL",(e,s)=>{s.pattern??(s.pattern=base64url),$ZodStringFormat.init(e,s),e._zod.onattach.push(i=>{i._zod.bag.contentEncoding="base64url"}),e._zod.check=i=>{isValidBase64URL(i.value)||i.issues.push({code:"invalid_format",format:"base64url",input:i.value,inst:e,continue:!s.abort})}}),$ZodE164=$constructor("$ZodE164",(e,s)=>{s.pattern??(s.pattern=e164),$ZodStringFormat.init(e,s)});function isValidJWT(e,s=null){try{const i=e.split(".");if(i.length!==3)return!1;const[a]=i;if(!a)return!1;const o=JSON.parse(atob(a));return!("typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||s&&(!("alg"in o)||o.alg!==s))}catch{return!1}}const $ZodJWT=$constructor("$ZodJWT",(e,s)=>{$ZodStringFormat.init(e,s),e._zod.check=i=>{isValidJWT(i.value,s.alg)||i.issues.push({code:"invalid_format",format:"jwt",input:i.value,inst:e,continue:!s.abort})}}),$ZodUnknown=$constructor("$ZodUnknown",(e,s)=>{$ZodType.init(e,s),e._zod.parse=i=>i}),$ZodNever=$constructor("$ZodNever",(e,s)=>{$ZodType.init(e,s),e._zod.parse=(i,a)=>(i.issues.push({expected:"never",code:"invalid_type",input:i.value,inst:e}),i)});function handleArrayResult(e,s,i){e.issues.length&&s.issues.push(...prefixIssues(i,e.issues)),s.value[i]=e.value}const $ZodArray=$constructor("$ZodArray",(e,s)=>{$ZodType.init(e,s),e._zod.parse=(i,a)=>{const o=i.value;if(!Array.isArray(o))return i.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),i;i.value=Array(o.length);const c=[];for(let h=0;h<o.length;h++){const j=o[h],b=s.element._zod.run({value:j,issues:[]},a);b instanceof Promise?c.push(b.then(_=>handleArrayResult(_,i,h))):handleArrayResult(b,i,h)}return c.length?Promise.all(c).then(()=>i):i}});function handlePropertyResult(e,s,i,a){e.issues.length&&s.issues.push(...prefixIssues(i,e.issues)),e.value===void 0?i in a&&(s.value[i]=void 0):s.value[i]=e.value}function normalizeDef(e){var a,o,c,h;const s=Object.keys(e.shape);for(const j of s)if(!((h=(c=(o=(a=e.shape)==null?void 0:a[j])==null?void 0:o._zod)==null?void 0:c.traits)!=null&&h.has("$ZodType")))throw new Error(`Invalid element at key "${j}": expected a Zod schema`);const i=optionalKeys(e.shape);return{...e,keys:s,keySet:new Set(s),numKeys:s.length,optionalKeys:new Set(i)}}function handleCatchall(e,s,i,a,o,c){const h=[],j=o.keySet,b=o.catchall._zod,_=b.def.type;for(const $ of Object.keys(s)){if(j.has($))continue;if(_==="never"){h.push($);continue}const at=b.run({value:s[$],issues:[]},a);at instanceof Promise?e.push(at.then(rt=>handlePropertyResult(rt,i,$,s))):handlePropertyResult(at,i,$,s)}return h.length&&i.issues.push({code:"unrecognized_keys",keys:h,input:s,inst:c}),e.length?Promise.all(e).then(()=>i):i}const $ZodObject=$constructor("$ZodObject",(e,s)=>{$ZodType.init(e,s);const i=Object.getOwnPropertyDescriptor(s,"shape");if(!(i!=null&&i.get)){const j=s.shape;Object.defineProperty(s,"shape",{get:()=>{const b={...j};return Object.defineProperty(s,"shape",{value:b}),b}})}const a=cached(()=>normalizeDef(s));defineLazy(e._zod,"propValues",()=>{const j=s.shape,b={};for(const _ in j){const $=j[_]._zod;if($.values){b[_]??(b[_]=new Set);for(const at of $.values)b[_].add(at)}}return b});const o=isObject,c=s.catchall;let h;e._zod.parse=(j,b)=>{h??(h=a.value);const _=j.value;if(!o(_))return j.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),j;j.value={};const $=[],at=h.shape;for(const rt of h.keys){const ot=at[rt]._zod.run({value:_[rt],issues:[]},b);ot instanceof Promise?$.push(ot.then(vt=>handlePropertyResult(vt,j,rt,_))):handlePropertyResult(ot,j,rt,_)}return c?handleCatchall($,_,j,b,a.value,e):$.length?Promise.all($).then(()=>j):j}}),$ZodObjectJIT=$constructor("$ZodObjectJIT",(e,s)=>{$ZodObject.init(e,s);const i=e._zod.parse,a=cached(()=>normalizeDef(s)),o=rt=>{const ut=new Doc(["shape","payload","ctx"]),ot=a.value,vt=st=>{const gt=esc(st);return`shape[${gt}]._zod.run({ value: input[${gt}], issues: [] }, ctx)`};ut.write("const input = payload.value;");const bt=Object.create(null);let et=0;for(const st of ot.keys)bt[st]=`key_${et++}`;ut.write("const newResult = {};");for(const st of ot.keys){const gt=bt[st],lt=esc(st);ut.write(`const ${gt} = ${vt(st)};`),ut.write(`
        if (${gt}.issues.length) {
          payload.issues = payload.issues.concat(${gt}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${lt}, ...iss.path] : [${lt}]
          })));
        }
        
        
        if (${gt}.value === undefined) {
          if (${lt} in input) {
            newResult[${lt}] = undefined;
          }
        } else {
          newResult[${lt}] = ${gt}.value;
        }
        
      `)}ut.write("payload.value = newResult;"),ut.write("return payload;");const nt=ut.compile();return(st,gt)=>nt(rt,st,gt)};let c;const h=isObject,j=!globalConfig.jitless,_=j&&allowsEval.value,$=s.catchall;let at;e._zod.parse=(rt,ut)=>{at??(at=a.value);const ot=rt.value;return h(ot)?j&&_&&(ut==null?void 0:ut.async)===!1&&ut.jitless!==!0?(c||(c=o(s.shape)),rt=c(rt,ut),$?handleCatchall([],ot,rt,ut,at,e):rt):i(rt,ut):(rt.issues.push({expected:"object",code:"invalid_type",input:ot,inst:e}),rt)}});function handleUnionResults(e,s,i,a){for(const c of e)if(c.issues.length===0)return s.value=c.value,s;const o=e.filter(c=>!aborted(c));return o.length===1?(s.value=o[0].value,o[0]):(s.issues.push({code:"invalid_union",input:s.value,inst:i,errors:e.map(c=>c.issues.map(h=>finalizeIssue(h,a,config())))}),s)}const $ZodUnion=$constructor("$ZodUnion",(e,s)=>{$ZodType.init(e,s),defineLazy(e._zod,"optin",()=>s.options.some(o=>o._zod.optin==="optional")?"optional":void 0),defineLazy(e._zod,"optout",()=>s.options.some(o=>o._zod.optout==="optional")?"optional":void 0),defineLazy(e._zod,"values",()=>{if(s.options.every(o=>o._zod.values))return new Set(s.options.flatMap(o=>Array.from(o._zod.values)))}),defineLazy(e._zod,"pattern",()=>{if(s.options.every(o=>o._zod.pattern)){const o=s.options.map(c=>c._zod.pattern);return new RegExp(`^(${o.map(c=>cleanRegex(c.source)).join("|")})$`)}});const i=s.options.length===1,a=s.options[0]._zod.run;e._zod.parse=(o,c)=>{if(i)return a(o,c);let h=!1;const j=[];for(const b of s.options){const _=b._zod.run({value:o.value,issues:[]},c);if(_ instanceof Promise)j.push(_),h=!0;else{if(_.issues.length===0)return _;j.push(_)}}return h?Promise.all(j).then(b=>handleUnionResults(b,o,e,c)):handleUnionResults(j,o,e,c)}}),$ZodIntersection=$constructor("$ZodIntersection",(e,s)=>{$ZodType.init(e,s),e._zod.parse=(i,a)=>{const o=i.value,c=s.left._zod.run({value:o,issues:[]},a),h=s.right._zod.run({value:o,issues:[]},a);return c instanceof Promise||h instanceof Promise?Promise.all([c,h]).then(([b,_])=>handleIntersectionResults(i,b,_)):handleIntersectionResults(i,c,h)}});function mergeValues(e,s){if(e===s)return{valid:!0,data:e};if(e instanceof Date&&s instanceof Date&&+e==+s)return{valid:!0,data:e};if(isPlainObject(e)&&isPlainObject(s)){const i=Object.keys(s),a=Object.keys(e).filter(c=>i.indexOf(c)!==-1),o={...e,...s};for(const c of a){const h=mergeValues(e[c],s[c]);if(!h.valid)return{valid:!1,mergeErrorPath:[c,...h.mergeErrorPath]};o[c]=h.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(s)){if(e.length!==s.length)return{valid:!1,mergeErrorPath:[]};const i=[];for(let a=0;a<e.length;a++){const o=e[a],c=s[a],h=mergeValues(o,c);if(!h.valid)return{valid:!1,mergeErrorPath:[a,...h.mergeErrorPath]};i.push(h.data)}return{valid:!0,data:i}}return{valid:!1,mergeErrorPath:[]}}function handleIntersectionResults(e,s,i){if(s.issues.length&&e.issues.push(...s.issues),i.issues.length&&e.issues.push(...i.issues),aborted(e))return e;const a=mergeValues(s.value,i.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}const $ZodEnum=$constructor("$ZodEnum",(e,s)=>{$ZodType.init(e,s);const i=getEnumValues(s.entries),a=new Set(i);e._zod.values=a,e._zod.pattern=new RegExp(`^(${i.filter(o=>propertyKeyTypes.has(typeof o)).map(o=>typeof o=="string"?escapeRegex(o):o.toString()).join("|")})$`),e._zod.parse=(o,c)=>{const h=o.value;return a.has(h)||o.issues.push({code:"invalid_value",values:i,input:h,inst:e}),o}}),$ZodTransform=$constructor("$ZodTransform",(e,s)=>{$ZodType.init(e,s),e._zod.parse=(i,a)=>{if(a.direction==="backward")throw new $ZodEncodeError(e.constructor.name);const o=s.transform(i.value,i);if(a.async)return(o instanceof Promise?o:Promise.resolve(o)).then(h=>(i.value=h,i));if(o instanceof Promise)throw new $ZodAsyncError;return i.value=o,i}});function handleOptionalResult(e,s){return e.issues.length&&s===void 0?{issues:[],value:void 0}:e}const $ZodOptional=$constructor("$ZodOptional",(e,s)=>{$ZodType.init(e,s),e._zod.optin="optional",e._zod.optout="optional",defineLazy(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,void 0]):void 0),defineLazy(e._zod,"pattern",()=>{const i=s.innerType._zod.pattern;return i?new RegExp(`^(${cleanRegex(i.source)})?$`):void 0}),e._zod.parse=(i,a)=>{if(s.innerType._zod.optin==="optional"){const o=s.innerType._zod.run(i,a);return o instanceof Promise?o.then(c=>handleOptionalResult(c,i.value)):handleOptionalResult(o,i.value)}return i.value===void 0?i:s.innerType._zod.run(i,a)}}),$ZodNullable=$constructor("$ZodNullable",(e,s)=>{$ZodType.init(e,s),defineLazy(e._zod,"optin",()=>s.innerType._zod.optin),defineLazy(e._zod,"optout",()=>s.innerType._zod.optout),defineLazy(e._zod,"pattern",()=>{const i=s.innerType._zod.pattern;return i?new RegExp(`^(${cleanRegex(i.source)}|null)$`):void 0}),defineLazy(e._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,null]):void 0),e._zod.parse=(i,a)=>i.value===null?i:s.innerType._zod.run(i,a)}),$ZodDefault=$constructor("$ZodDefault",(e,s)=>{$ZodType.init(e,s),e._zod.optin="optional",defineLazy(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(i,a)=>{if(a.direction==="backward")return s.innerType._zod.run(i,a);if(i.value===void 0)return i.value=s.defaultValue,i;const o=s.innerType._zod.run(i,a);return o instanceof Promise?o.then(c=>handleDefaultResult(c,s)):handleDefaultResult(o,s)}});function handleDefaultResult(e,s){return e.value===void 0&&(e.value=s.defaultValue),e}const $ZodPrefault=$constructor("$ZodPrefault",(e,s)=>{$ZodType.init(e,s),e._zod.optin="optional",defineLazy(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(i,a)=>(a.direction==="backward"||i.value===void 0&&(i.value=s.defaultValue),s.innerType._zod.run(i,a))}),$ZodNonOptional=$constructor("$ZodNonOptional",(e,s)=>{$ZodType.init(e,s),defineLazy(e._zod,"values",()=>{const i=s.innerType._zod.values;return i?new Set([...i].filter(a=>a!==void 0)):void 0}),e._zod.parse=(i,a)=>{const o=s.innerType._zod.run(i,a);return o instanceof Promise?o.then(c=>handleNonOptionalResult(c,e)):handleNonOptionalResult(o,e)}});function handleNonOptionalResult(e,s){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:s}),e}const $ZodCatch=$constructor("$ZodCatch",(e,s)=>{$ZodType.init(e,s),defineLazy(e._zod,"optin",()=>s.innerType._zod.optin),defineLazy(e._zod,"optout",()=>s.innerType._zod.optout),defineLazy(e._zod,"values",()=>s.innerType._zod.values),e._zod.parse=(i,a)=>{if(a.direction==="backward")return s.innerType._zod.run(i,a);const o=s.innerType._zod.run(i,a);return o instanceof Promise?o.then(c=>(i.value=c.value,c.issues.length&&(i.value=s.catchValue({...i,error:{issues:c.issues.map(h=>finalizeIssue(h,a,config()))},input:i.value}),i.issues=[]),i)):(i.value=o.value,o.issues.length&&(i.value=s.catchValue({...i,error:{issues:o.issues.map(c=>finalizeIssue(c,a,config()))},input:i.value}),i.issues=[]),i)}}),$ZodPipe=$constructor("$ZodPipe",(e,s)=>{$ZodType.init(e,s),defineLazy(e._zod,"values",()=>s.in._zod.values),defineLazy(e._zod,"optin",()=>s.in._zod.optin),defineLazy(e._zod,"optout",()=>s.out._zod.optout),defineLazy(e._zod,"propValues",()=>s.in._zod.propValues),e._zod.parse=(i,a)=>{if(a.direction==="backward"){const c=s.out._zod.run(i,a);return c instanceof Promise?c.then(h=>handlePipeResult(h,s.in,a)):handlePipeResult(c,s.in,a)}const o=s.in._zod.run(i,a);return o instanceof Promise?o.then(c=>handlePipeResult(c,s.out,a)):handlePipeResult(o,s.out,a)}});function handlePipeResult(e,s,i){return e.issues.length?(e.aborted=!0,e):s._zod.run({value:e.value,issues:e.issues},i)}const $ZodReadonly=$constructor("$ZodReadonly",(e,s)=>{$ZodType.init(e,s),defineLazy(e._zod,"propValues",()=>s.innerType._zod.propValues),defineLazy(e._zod,"values",()=>s.innerType._zod.values),defineLazy(e._zod,"optin",()=>s.innerType._zod.optin),defineLazy(e._zod,"optout",()=>s.innerType._zod.optout),e._zod.parse=(i,a)=>{if(a.direction==="backward")return s.innerType._zod.run(i,a);const o=s.innerType._zod.run(i,a);return o instanceof Promise?o.then(handleReadonlyResult):handleReadonlyResult(o)}});function handleReadonlyResult(e){return e.value=Object.freeze(e.value),e}const $ZodCustom=$constructor("$ZodCustom",(e,s)=>{$ZodCheck.init(e,s),$ZodType.init(e,s),e._zod.parse=(i,a)=>i,e._zod.check=i=>{const a=i.value,o=s.fn(a);if(o instanceof Promise)return o.then(c=>handleRefineResult(c,i,a,e));handleRefineResult(o,i,a,e)}});function handleRefineResult(e,s,i,a){if(!e){const o={code:"custom",input:i,inst:a,path:[...a._zod.def.path??[]],continue:!a._zod.def.abort};a._zod.def.params&&(o.params=a._zod.def.params),s.issues.push(issue(o))}}class $ZodRegistry{constructor(){this._map=new WeakMap,this._idmap=new Map}add(s,...i){const a=i[0];if(this._map.set(s,a),a&&typeof a=="object"&&"id"in a){if(this._idmap.has(a.id))throw new Error(`ID ${a.id} already exists in the registry`);this._idmap.set(a.id,s)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(s){const i=this._map.get(s);return i&&typeof i=="object"&&"id"in i&&this._idmap.delete(i.id),this._map.delete(s),this}get(s){const i=s._zod.parent;if(i){const a={...this.get(i)??{}};delete a.id;const o={...a,...this._map.get(s)};return Object.keys(o).length?o:void 0}return this._map.get(s)}has(s){return this._map.has(s)}}function registry(){return new $ZodRegistry}const globalRegistry=registry();function _string(e,s){return new e({type:"string",...normalizeParams(s)})}function _email(e,s){return new e({type:"string",format:"email",check:"string_format",abort:!1,...normalizeParams(s)})}function _guid(e,s){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...normalizeParams(s)})}function _uuid(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...normalizeParams(s)})}function _uuidv4(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...normalizeParams(s)})}function _uuidv6(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...normalizeParams(s)})}function _uuidv7(e,s){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...normalizeParams(s)})}function _url(e,s){return new e({type:"string",format:"url",check:"string_format",abort:!1,...normalizeParams(s)})}function _emoji(e,s){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...normalizeParams(s)})}function _nanoid(e,s){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...normalizeParams(s)})}function _cuid(e,s){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...normalizeParams(s)})}function _cuid2(e,s){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...normalizeParams(s)})}function _ulid(e,s){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...normalizeParams(s)})}function _xid(e,s){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...normalizeParams(s)})}function _ksuid(e,s){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...normalizeParams(s)})}function _ipv4(e,s){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...normalizeParams(s)})}function _ipv6(e,s){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...normalizeParams(s)})}function _cidrv4(e,s){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...normalizeParams(s)})}function _cidrv6(e,s){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...normalizeParams(s)})}function _base64(e,s){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...normalizeParams(s)})}function _base64url(e,s){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...normalizeParams(s)})}function _e164(e,s){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...normalizeParams(s)})}function _jwt(e,s){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...normalizeParams(s)})}function _isoDateTime(e,s){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...normalizeParams(s)})}function _isoDate(e,s){return new e({type:"string",format:"date",check:"string_format",...normalizeParams(s)})}function _isoTime(e,s){return new e({type:"string",format:"time",check:"string_format",precision:null,...normalizeParams(s)})}function _isoDuration(e,s){return new e({type:"string",format:"duration",check:"string_format",...normalizeParams(s)})}function _unknown(e){return new e({type:"unknown"})}function _never(e,s){return new e({type:"never",...normalizeParams(s)})}function _maxLength(e,s){return new $ZodCheckMaxLength({check:"max_length",...normalizeParams(s),maximum:e})}function _minLength(e,s){return new $ZodCheckMinLength({check:"min_length",...normalizeParams(s),minimum:e})}function _length(e,s){return new $ZodCheckLengthEquals({check:"length_equals",...normalizeParams(s),length:e})}function _regex(e,s){return new $ZodCheckRegex({check:"string_format",format:"regex",...normalizeParams(s),pattern:e})}function _lowercase(e){return new $ZodCheckLowerCase({check:"string_format",format:"lowercase",...normalizeParams(e)})}function _uppercase(e){return new $ZodCheckUpperCase({check:"string_format",format:"uppercase",...normalizeParams(e)})}function _includes(e,s){return new $ZodCheckIncludes({check:"string_format",format:"includes",...normalizeParams(s),includes:e})}function _startsWith(e,s){return new $ZodCheckStartsWith({check:"string_format",format:"starts_with",...normalizeParams(s),prefix:e})}function _endsWith(e,s){return new $ZodCheckEndsWith({check:"string_format",format:"ends_with",...normalizeParams(s),suffix:e})}function _overwrite(e){return new $ZodCheckOverwrite({check:"overwrite",tx:e})}function _normalize(e){return _overwrite(s=>s.normalize(e))}function _trim(){return _overwrite(e=>e.trim())}function _toLowerCase(){return _overwrite(e=>e.toLowerCase())}function _toUpperCase(){return _overwrite(e=>e.toUpperCase())}function _array(e,s,i){return new e({type:"array",element:s,...normalizeParams(i)})}function _refine(e,s,i){return new e({type:"custom",check:"custom",fn:s,...normalizeParams(i)})}function _superRefine(e){const s=_check(i=>(i.addIssue=a=>{if(typeof a=="string")i.issues.push(issue(a,i.value,s._zod.def));else{const o=a;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=i.value),o.inst??(o.inst=s),o.continue??(o.continue=!s._zod.def.abort),i.issues.push(issue(o))}},e(i.value,i)));return s}function _check(e,s){const i=new $ZodCheck({check:"custom",...normalizeParams(s)});return i._zod.check=e,i}const ZodISODateTime=$constructor("ZodISODateTime",(e,s)=>{$ZodISODateTime.init(e,s),ZodStringFormat.init(e,s)});function datetime(e){return _isoDateTime(ZodISODateTime,e)}const ZodISODate=$constructor("ZodISODate",(e,s)=>{$ZodISODate.init(e,s),ZodStringFormat.init(e,s)});function date(e){return _isoDate(ZodISODate,e)}const ZodISOTime=$constructor("ZodISOTime",(e,s)=>{$ZodISOTime.init(e,s),ZodStringFormat.init(e,s)});function time(e){return _isoTime(ZodISOTime,e)}const ZodISODuration=$constructor("ZodISODuration",(e,s)=>{$ZodISODuration.init(e,s),ZodStringFormat.init(e,s)});function duration(e){return _isoDuration(ZodISODuration,e)}const initializer=(e,s)=>{$ZodError.init(e,s),e.name="ZodError",Object.defineProperties(e,{format:{value:i=>formatError(e,i)},flatten:{value:i=>flattenError(e,i)},addIssue:{value:i=>{e.issues.push(i),e.message=JSON.stringify(e.issues,jsonStringifyReplacer,2)}},addIssues:{value:i=>{e.issues.push(...i),e.message=JSON.stringify(e.issues,jsonStringifyReplacer,2)}},isEmpty:{get(){return e.issues.length===0}}})},ZodRealError=$constructor("ZodError",initializer,{Parent:Error}),parse=_parse(ZodRealError),parseAsync=_parseAsync(ZodRealError),safeParse=_safeParse(ZodRealError),safeParseAsync=_safeParseAsync(ZodRealError),encode=_encode(ZodRealError),decode=_decode(ZodRealError),encodeAsync=_encodeAsync(ZodRealError),decodeAsync=_decodeAsync(ZodRealError),safeEncode=_safeEncode(ZodRealError),safeDecode=_safeDecode(ZodRealError),safeEncodeAsync=_safeEncodeAsync(ZodRealError),safeDecodeAsync=_safeDecodeAsync(ZodRealError),ZodType=$constructor("ZodType",(e,s)=>($ZodType.init(e,s),e.def=s,e.type=s.type,Object.defineProperty(e,"_def",{value:s}),e.check=(...i)=>e.clone(mergeDefs(s,{checks:[...s.checks??[],...i.map(a=>typeof a=="function"?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),e.clone=(i,a)=>clone(e,i,a),e.brand=()=>e,e.register=(i,a)=>(i.add(e,a),e),e.parse=(i,a)=>parse(e,i,a,{callee:e.parse}),e.safeParse=(i,a)=>safeParse(e,i,a),e.parseAsync=async(i,a)=>parseAsync(e,i,a,{callee:e.parseAsync}),e.safeParseAsync=async(i,a)=>safeParseAsync(e,i,a),e.spa=e.safeParseAsync,e.encode=(i,a)=>encode(e,i,a),e.decode=(i,a)=>decode(e,i,a),e.encodeAsync=async(i,a)=>encodeAsync(e,i,a),e.decodeAsync=async(i,a)=>decodeAsync(e,i,a),e.safeEncode=(i,a)=>safeEncode(e,i,a),e.safeDecode=(i,a)=>safeDecode(e,i,a),e.safeEncodeAsync=async(i,a)=>safeEncodeAsync(e,i,a),e.safeDecodeAsync=async(i,a)=>safeDecodeAsync(e,i,a),e.refine=(i,a)=>e.check(refine(i,a)),e.superRefine=i=>e.check(superRefine(i)),e.overwrite=i=>e.check(_overwrite(i)),e.optional=()=>optional(e),e.nullable=()=>nullable(e),e.nullish=()=>optional(nullable(e)),e.nonoptional=i=>nonoptional(e,i),e.array=()=>array(e),e.or=i=>union([e,i]),e.and=i=>intersection(e,i),e.transform=i=>pipe(e,transform(i)),e.default=i=>_default(e,i),e.prefault=i=>prefault(e,i),e.catch=i=>_catch(e,i),e.pipe=i=>pipe(e,i),e.readonly=()=>readonly(e),e.describe=i=>{const a=e.clone();return globalRegistry.add(a,{description:i}),a},Object.defineProperty(e,"description",{get(){var i;return(i=globalRegistry.get(e))==null?void 0:i.description},configurable:!0}),e.meta=(...i)=>{if(i.length===0)return globalRegistry.get(e);const a=e.clone();return globalRegistry.add(a,i[0]),a},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),_ZodString=$constructor("_ZodString",(e,s)=>{$ZodString.init(e,s),ZodType.init(e,s);const i=e._zod.bag;e.format=i.format??null,e.minLength=i.minimum??null,e.maxLength=i.maximum??null,e.regex=(...a)=>e.check(_regex(...a)),e.includes=(...a)=>e.check(_includes(...a)),e.startsWith=(...a)=>e.check(_startsWith(...a)),e.endsWith=(...a)=>e.check(_endsWith(...a)),e.min=(...a)=>e.check(_minLength(...a)),e.max=(...a)=>e.check(_maxLength(...a)),e.length=(...a)=>e.check(_length(...a)),e.nonempty=(...a)=>e.check(_minLength(1,...a)),e.lowercase=a=>e.check(_lowercase(a)),e.uppercase=a=>e.check(_uppercase(a)),e.trim=()=>e.check(_trim()),e.normalize=(...a)=>e.check(_normalize(...a)),e.toLowerCase=()=>e.check(_toLowerCase()),e.toUpperCase=()=>e.check(_toUpperCase())}),ZodString=$constructor("ZodString",(e,s)=>{$ZodString.init(e,s),_ZodString.init(e,s),e.email=i=>e.check(_email(ZodEmail,i)),e.url=i=>e.check(_url(ZodURL,i)),e.jwt=i=>e.check(_jwt(ZodJWT,i)),e.emoji=i=>e.check(_emoji(ZodEmoji,i)),e.guid=i=>e.check(_guid(ZodGUID,i)),e.uuid=i=>e.check(_uuid(ZodUUID,i)),e.uuidv4=i=>e.check(_uuidv4(ZodUUID,i)),e.uuidv6=i=>e.check(_uuidv6(ZodUUID,i)),e.uuidv7=i=>e.check(_uuidv7(ZodUUID,i)),e.nanoid=i=>e.check(_nanoid(ZodNanoID,i)),e.guid=i=>e.check(_guid(ZodGUID,i)),e.cuid=i=>e.check(_cuid(ZodCUID,i)),e.cuid2=i=>e.check(_cuid2(ZodCUID2,i)),e.ulid=i=>e.check(_ulid(ZodULID,i)),e.base64=i=>e.check(_base64(ZodBase64,i)),e.base64url=i=>e.check(_base64url(ZodBase64URL,i)),e.xid=i=>e.check(_xid(ZodXID,i)),e.ksuid=i=>e.check(_ksuid(ZodKSUID,i)),e.ipv4=i=>e.check(_ipv4(ZodIPv4,i)),e.ipv6=i=>e.check(_ipv6(ZodIPv6,i)),e.cidrv4=i=>e.check(_cidrv4(ZodCIDRv4,i)),e.cidrv6=i=>e.check(_cidrv6(ZodCIDRv6,i)),e.e164=i=>e.check(_e164(ZodE164,i)),e.datetime=i=>e.check(datetime(i)),e.date=i=>e.check(date(i)),e.time=i=>e.check(time(i)),e.duration=i=>e.check(duration(i))});function string(e){return _string(ZodString,e)}const ZodStringFormat=$constructor("ZodStringFormat",(e,s)=>{$ZodStringFormat.init(e,s),_ZodString.init(e,s)}),ZodEmail=$constructor("ZodEmail",(e,s)=>{$ZodEmail.init(e,s),ZodStringFormat.init(e,s)}),ZodGUID=$constructor("ZodGUID",(e,s)=>{$ZodGUID.init(e,s),ZodStringFormat.init(e,s)}),ZodUUID=$constructor("ZodUUID",(e,s)=>{$ZodUUID.init(e,s),ZodStringFormat.init(e,s)}),ZodURL=$constructor("ZodURL",(e,s)=>{$ZodURL.init(e,s),ZodStringFormat.init(e,s)}),ZodEmoji=$constructor("ZodEmoji",(e,s)=>{$ZodEmoji.init(e,s),ZodStringFormat.init(e,s)}),ZodNanoID=$constructor("ZodNanoID",(e,s)=>{$ZodNanoID.init(e,s),ZodStringFormat.init(e,s)}),ZodCUID=$constructor("ZodCUID",(e,s)=>{$ZodCUID.init(e,s),ZodStringFormat.init(e,s)}),ZodCUID2=$constructor("ZodCUID2",(e,s)=>{$ZodCUID2.init(e,s),ZodStringFormat.init(e,s)}),ZodULID=$constructor("ZodULID",(e,s)=>{$ZodULID.init(e,s),ZodStringFormat.init(e,s)}),ZodXID=$constructor("ZodXID",(e,s)=>{$ZodXID.init(e,s),ZodStringFormat.init(e,s)}),ZodKSUID=$constructor("ZodKSUID",(e,s)=>{$ZodKSUID.init(e,s),ZodStringFormat.init(e,s)}),ZodIPv4=$constructor("ZodIPv4",(e,s)=>{$ZodIPv4.init(e,s),ZodStringFormat.init(e,s)}),ZodIPv6=$constructor("ZodIPv6",(e,s)=>{$ZodIPv6.init(e,s),ZodStringFormat.init(e,s)}),ZodCIDRv4=$constructor("ZodCIDRv4",(e,s)=>{$ZodCIDRv4.init(e,s),ZodStringFormat.init(e,s)}),ZodCIDRv6=$constructor("ZodCIDRv6",(e,s)=>{$ZodCIDRv6.init(e,s),ZodStringFormat.init(e,s)}),ZodBase64=$constructor("ZodBase64",(e,s)=>{$ZodBase64.init(e,s),ZodStringFormat.init(e,s)}),ZodBase64URL=$constructor("ZodBase64URL",(e,s)=>{$ZodBase64URL.init(e,s),ZodStringFormat.init(e,s)}),ZodE164=$constructor("ZodE164",(e,s)=>{$ZodE164.init(e,s),ZodStringFormat.init(e,s)}),ZodJWT=$constructor("ZodJWT",(e,s)=>{$ZodJWT.init(e,s),ZodStringFormat.init(e,s)}),ZodUnknown=$constructor("ZodUnknown",(e,s)=>{$ZodUnknown.init(e,s),ZodType.init(e,s)});function unknown(){return _unknown(ZodUnknown)}const ZodNever=$constructor("ZodNever",(e,s)=>{$ZodNever.init(e,s),ZodType.init(e,s)});function never(e){return _never(ZodNever,e)}const ZodArray=$constructor("ZodArray",(e,s)=>{$ZodArray.init(e,s),ZodType.init(e,s),e.element=s.element,e.min=(i,a)=>e.check(_minLength(i,a)),e.nonempty=i=>e.check(_minLength(1,i)),e.max=(i,a)=>e.check(_maxLength(i,a)),e.length=(i,a)=>e.check(_length(i,a)),e.unwrap=()=>e.element});function array(e,s){return _array(ZodArray,e,s)}const ZodObject=$constructor("ZodObject",(e,s)=>{$ZodObjectJIT.init(e,s),ZodType.init(e,s),defineLazy(e,"shape",()=>s.shape),e.keyof=()=>_enum(Object.keys(e._zod.def.shape)),e.catchall=i=>e.clone({...e._zod.def,catchall:i}),e.passthrough=()=>e.clone({...e._zod.def,catchall:unknown()}),e.loose=()=>e.clone({...e._zod.def,catchall:unknown()}),e.strict=()=>e.clone({...e._zod.def,catchall:never()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=i=>extend(e,i),e.safeExtend=i=>safeExtend(e,i),e.merge=i=>merge(e,i),e.pick=i=>pick(e,i),e.omit=i=>omit(e,i),e.partial=(...i)=>partial(ZodOptional,e,i[0]),e.required=(...i)=>required(ZodNonOptional,e,i[0])});function object(e,s){const i={type:"object",shape:e??{},...normalizeParams(s)};return new ZodObject(i)}const ZodUnion=$constructor("ZodUnion",(e,s)=>{$ZodUnion.init(e,s),ZodType.init(e,s),e.options=s.options});function union(e,s){return new ZodUnion({type:"union",options:e,...normalizeParams(s)})}const ZodIntersection=$constructor("ZodIntersection",(e,s)=>{$ZodIntersection.init(e,s),ZodType.init(e,s)});function intersection(e,s){return new ZodIntersection({type:"intersection",left:e,right:s})}const ZodEnum=$constructor("ZodEnum",(e,s)=>{$ZodEnum.init(e,s),ZodType.init(e,s),e.enum=s.entries,e.options=Object.values(s.entries);const i=new Set(Object.keys(s.entries));e.extract=(a,o)=>{const c={};for(const h of a)if(i.has(h))c[h]=s.entries[h];else throw new Error(`Key ${h} not found in enum`);return new ZodEnum({...s,checks:[],...normalizeParams(o),entries:c})},e.exclude=(a,o)=>{const c={...s.entries};for(const h of a)if(i.has(h))delete c[h];else throw new Error(`Key ${h} not found in enum`);return new ZodEnum({...s,checks:[],...normalizeParams(o),entries:c})}});function _enum(e,s){const i=Array.isArray(e)?Object.fromEntries(e.map(a=>[a,a])):e;return new ZodEnum({type:"enum",entries:i,...normalizeParams(s)})}const ZodTransform=$constructor("ZodTransform",(e,s)=>{$ZodTransform.init(e,s),ZodType.init(e,s),e._zod.parse=(i,a)=>{if(a.direction==="backward")throw new $ZodEncodeError(e.constructor.name);i.addIssue=c=>{if(typeof c=="string")i.issues.push(issue(c,i.value,s));else{const h=c;h.fatal&&(h.continue=!1),h.code??(h.code="custom"),h.input??(h.input=i.value),h.inst??(h.inst=e),i.issues.push(issue(h))}};const o=s.transform(i.value,i);return o instanceof Promise?o.then(c=>(i.value=c,i)):(i.value=o,i)}});function transform(e){return new ZodTransform({type:"transform",transform:e})}const ZodOptional=$constructor("ZodOptional",(e,s)=>{$ZodOptional.init(e,s),ZodType.init(e,s),e.unwrap=()=>e._zod.def.innerType});function optional(e){return new ZodOptional({type:"optional",innerType:e})}const ZodNullable=$constructor("ZodNullable",(e,s)=>{$ZodNullable.init(e,s),ZodType.init(e,s),e.unwrap=()=>e._zod.def.innerType});function nullable(e){return new ZodNullable({type:"nullable",innerType:e})}const ZodDefault=$constructor("ZodDefault",(e,s)=>{$ZodDefault.init(e,s),ZodType.init(e,s),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _default(e,s){return new ZodDefault({type:"default",innerType:e,get defaultValue(){return typeof s=="function"?s():shallowClone(s)}})}const ZodPrefault=$constructor("ZodPrefault",(e,s)=>{$ZodPrefault.init(e,s),ZodType.init(e,s),e.unwrap=()=>e._zod.def.innerType});function prefault(e,s){return new ZodPrefault({type:"prefault",innerType:e,get defaultValue(){return typeof s=="function"?s():shallowClone(s)}})}const ZodNonOptional=$constructor("ZodNonOptional",(e,s)=>{$ZodNonOptional.init(e,s),ZodType.init(e,s),e.unwrap=()=>e._zod.def.innerType});function nonoptional(e,s){return new ZodNonOptional({type:"nonoptional",innerType:e,...normalizeParams(s)})}const ZodCatch=$constructor("ZodCatch",(e,s)=>{$ZodCatch.init(e,s),ZodType.init(e,s),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function _catch(e,s){return new ZodCatch({type:"catch",innerType:e,catchValue:typeof s=="function"?s:()=>s})}const ZodPipe=$constructor("ZodPipe",(e,s)=>{$ZodPipe.init(e,s),ZodType.init(e,s),e.in=s.in,e.out=s.out});function pipe(e,s){return new ZodPipe({type:"pipe",in:e,out:s})}const ZodReadonly=$constructor("ZodReadonly",(e,s)=>{$ZodReadonly.init(e,s),ZodType.init(e,s),e.unwrap=()=>e._zod.def.innerType});function readonly(e){return new ZodReadonly({type:"readonly",innerType:e})}const ZodCustom=$constructor("ZodCustom",(e,s)=>{$ZodCustom.init(e,s),ZodType.init(e,s)});function refine(e,s={}){return _refine(ZodCustom,e,s)}function superRefine(e){return _superRefine(e)}const iso=string().datetime({offset:!1}).or(string().regex(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)),Profile$1=object({id:string().min(1),label:string().min(1),county:string().min(1),decedentName:string().min(1),dodISO:iso,lettersISO:iso.nullable().optional(),firstPublicationISO:iso.nullable().optional(),notes:string().optional()}),SeedTask=object({estateId:string().min(1),title:string().min(1),description:string().optional(),tags:array(string()).default([]),dueISO:iso.nullable().optional(),status:_enum(["not-started","in-progress","done"]).optional().default("not-started"),priority:_enum(["low","med","high"]).optional().default("med")}),Guidance$1=object({estateId:string().min(1),title:string().min(1),body:string().min(1),links:array(object({label:string(),url:string().url()})).optional()}),PlanV2=object({seedVersion:string().min(1),profiles:array(Profile$1).min(1),seedTasks:array(SeedTask).default([]),guidance:array(Guidance$1).default([])});function coercePlan(e){const s=typeof e=="string"?JSON.parse(e):e;if(!s||typeof s!="object")return s;if(s.estateProfiles&&!s.profiles){const a=s.estateProfiles;s.profiles=Object.keys(a).map(o=>({id:o,...a[o]}))}s.tasks&&!s.seedTasks&&(s.seedTasks=s.tasks),s.guidancePages&&!s.guidance&&(s.guidance=s.guidancePages),s.profiles||(s.profiles=[]),s.seedTasks||(s.seedTasks=[]),s.guidance||(s.guidance=[]);const i=a=>a===""?null:a;return s.profiles=s.profiles.map(a=>({...a,lettersISO:i(a.lettersISO??null),firstPublicationISO:i(a.firstPublicationISO??null)})),s.seedTasks=s.seedTasks.map(a=>({...a,dueISO:i(a.dueISO??null)})),s}const ESTATE_PROFILES_KEY="estateProfiles",ESTATE_ACTIVE_ID_KEY="estateActiveId",SEED_VERSION_KEY="seedVersion",TASKS_KEY_PREFIX="tasks:",SEED_TASKS_KEY_PREFIX="seedTasks:",GUIDANCE_KEY_PREFIX="guidance:",ESTATE_IDS=["mother","father"],ESTATE_PLAN_UPDATED_EVENT="estate-plan-updated",dispatchPlanUpdated=()=>{typeof window>"u"||window.dispatchEvent(new Event(ESTATE_PLAN_UPDATED_EVENT))},notifyPlanUpdated=()=>{dispatchPlanUpdated()},isRecord$1=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),storageAvailable$1=()=>typeof window<"u"&&!!window.localStorage,writeJson=(e,s)=>{if(storageAvailable$1()){if(s===void 0){window.localStorage.removeItem(e);return}window.localStorage.setItem(e,JSON.stringify(s))}},readJson=(e,s)=>{if(!storageAvailable$1())return s;try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):s}catch(i){return console.warn(`Unable to parse storage key ${e}`,i),s}},tasksKeyFor=e=>`${TASKS_KEY_PREFIX}${e}`,seedTasksKeyFor=e=>`${SEED_TASKS_KEY_PREFIX}${e}`,guidanceKeyFor=e=>`${GUIDANCE_KEY_PREFIX}${e}`,toEstateProfile=(e,s)=>{if(!isRecord$1(e))throw new Error(`Estate profile for ${s} is invalid`);const i=Profile$1.safeParse({id:s,...e});if(!i.success)throw new Error(`Estate profile for ${s} is invalid`);const a=i.data;return{id:s,label:a.label,county:a.county,decedentName:a.decedentName,dodISO:a.dodISO,lettersISO:a.lettersISO??void 0,firstPublicationISO:a.firstPublicationISO??void 0,notes:a.notes??void 0}},loadEstateProfiles=()=>{const e={mother:{id:"mother",label:"Mother",county:"",decedentName:"",dodISO:""},father:{id:"father",label:"Father",county:"",decedentName:"",dodISO:""}};if(!storageAvailable$1())return e;const s=window.localStorage.getItem(ESTATE_PROFILES_KEY);if(!s)return e;try{const i=JSON.parse(s),a={...e};for(const o of ESTATE_IDS){const c=i[o];if(c)try{a[o]=toEstateProfile(c,o)}catch(h){console.warn(`Ignoring invalid estate profile for ${o}`,h)}}return a}catch(i){return console.warn("Unable to parse estate profiles from storage",i),e}},loadSeedTasks=e=>{const s=readJson(seedTasksKeyFor(e),null);return Array.isArray(s)?s:readJson(tasksKeyFor(e),[])},loadSeedGuidance=e=>readJson(guidanceKeyFor(e),[]),loadSeedVersion=()=>storageAvailable$1()?window.localStorage.getItem(SEED_VERSION_KEY):null,getActiveEstateId=()=>{if(!storageAvailable$1())return"mother";const e=window.localStorage.getItem(ESTATE_ACTIVE_ID_KEY);return e==="mother"||e==="father"?e:"mother"},setActiveEstateId=e=>{storageAvailable$1()&&window.localStorage.setItem(ESTATE_ACTIVE_ID_KEY,e)};function reseedFromPlan(e){if(storageAvailable$1())for(const s of e.profiles){const i=tasksKeyFor(s.id);let a=[];try{const b=window.localStorage.getItem(i);if(b){const _=JSON.parse(b);Array.isArray(_)&&(a=_)}}catch(b){console.warn(`Unable to parse existing tasks for ${s.id}`,b)}const o=b=>isRecord$1(b)&&isRecord$1(b._seed)&&b._seed.v===e.seedVersion,c=a.filter(b=>!o(b)),h=new Date().toISOString(),j=e.seedTasks.filter(b=>b.estateId===s.id).map(b=>({id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${e.seedVersion}-${Math.random().toString(36).slice(2)}`,title:b.title,description:b.description??"",due_date:b.dueISO??null,status:b.status??"not-started",priority:b.priority??"med",tags:b.tags??[],created_at:h,updated_at:h,estateId:s.id,_seed:{v:e.seedVersion,k:`${s.id}:${b.title}`}}));window.localStorage.setItem(i,JSON.stringify([...c,...j]))}}const saveEstateProfiles=e=>{writeJson(ESTATE_PROFILES_KEY,e)},saveSeedVersion=e=>{storageAvailable$1()&&window.localStorage.setItem(SEED_VERSION_KEY,e)},EstateContext=reactExports.createContext(void 0),EstateProvider=({children:e})=>{const[s,i]=reactExports.useState(()=>getActiveEstateId()),[a,o]=reactExports.useState(()=>loadEstateProfiles()),c=reactExports.useCallback(b=>{i(b),setActiveEstateId(b)},[]),h=reactExports.useCallback(()=>{o(loadEstateProfiles())},[]),j=reactExports.useMemo(()=>({activeEstateId:s,estateProfiles:a,setActiveEstateId:c,refreshEstateProfiles:h}),[s,a,h,c]);return jsxRuntimeExports.jsx(EstateContext.Provider,{value:j,children:e})},useEstate=()=>{const e=reactExports.useContext(EstateContext);if(!e)throw new Error("useEstate must be used within an EstateProvider");return e},startOfDay=e=>{const s=new Date(e);return s.setHours(0,0,0,0),s},toDateKey=e=>{const s=e.getFullYear(),i=`${e.getMonth()+1}`.padStart(2,"0"),a=`${e.getDate()}`.padStart(2,"0");return`${s}-${i}-${a}`},fromDateKey=e=>{const[s,i,a]=e.split("-").map(Number);return new Date(s,(i??1)-1,a??1)},isSameDay=(e,s)=>toDateKey(e)===toDateKey(s),getCalendarDays=e=>{const s=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0),a=new Date(s);a.setDate(s.getDate()-s.getDay());const o=new Date(i);o.setDate(i.getDate()+(6-i.getDay()));const c=startOfDay(new Date),h=[];for(let j=a;j<=o;j.setDate(j.getDate()+1)){const b=new Date(j);h.push({date:b,key:toDateKey(b),label:`${b.getDate()}`,isCurrentMonth:b.getMonth()===e.getMonth()&&b.getFullYear()===e.getFullYear(),isToday:isSameDay(b,c)})}return h},formatDueDate$1=e=>new Date(e).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),formatSelectedDate=e=>fromDateKey(e).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"}),addDays$2=(e,s)=>{const i=new Date(e);return i.setDate(i.getDate()+s),i},Calendar=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(()=>{const st=new Date;return new Date(st.getFullYear(),st.getMonth(),1)}),[o,c]=reactExports.useState(()=>toDateKey(new Date)),{activeEstateId:h}=useEstate();reactExports.useEffect(()=>{let st=!0;seedTasksIfEmpty().catch(lt=>{console.error(lt)});const gt=liveQuery(()=>db.tasks.where("estateId").equals(h).toArray()).subscribe({next:lt=>{if(!st)return;const yt=[...lt].sort((ct,mt)=>new Date(ct.due_date).getTime()-new Date(mt.due_date).getTime());s(yt)},error:lt=>{console.error(lt)}});return()=>{st=!1,gt.unsubscribe()}},[h]);const j=reactExports.useMemo(()=>e.filter(st=>st.due_date&&st.status!=="done"),[e]),b=reactExports.useMemo(()=>{const st=new Map;return j.forEach(gt=>{var yt;if(!gt.due_date)return;const lt=toDateKey(new Date(gt.due_date));st.has(lt)||st.set(lt,[]),(yt=st.get(lt))==null||yt.push(gt)}),st},[j]),_=reactExports.useMemo(()=>getCalendarDays(i),[i]),$=reactExports.useMemo(()=>[...b.get(o)??[]].sort((gt,lt)=>new Date(gt.due_date).getTime()-new Date(lt.due_date).getTime()),[b,o]),at=reactExports.useMemo(()=>startOfDay(new Date),[]),rt=reactExports.useMemo(()=>addDays$2(at,6),[at]),ut=reactExports.useMemo(()=>addDays$2(at,29),[at]),ot=reactExports.useMemo(()=>j.filter(st=>{const gt=startOfDay(new Date(st.due_date));return gt>=at&&gt<=rt}).sort((st,gt)=>new Date(st.due_date).getTime()-new Date(gt.due_date).getTime()),[j,rt,at]),vt=reactExports.useMemo(()=>j.filter(st=>{const gt=startOfDay(new Date(st.due_date));return gt>rt&&gt<=ut}).sort((st,gt)=>new Date(st.due_date).getTime()-new Date(gt.due_date).getTime()),[j,rt,ut]),bt=st=>{c(st)},et=()=>{a(st=>new Date(st.getFullYear(),st.getMonth()-1,1))},nt=()=>{a(st=>new Date(st.getFullYear(),st.getMonth()+1,1))};return jsxRuntimeExports.jsxs("section",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Calendar"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Monitor due dates across the family office and surface upcoming priorities."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr,1fr]",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:i.toLocaleDateString(void 0,{month:"long",year:"numeric"})})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:et,className:"rounded-full border border-slate-200 p-2 text-slate-500 transition hover:border-primary-200 hover:text-primary-600","aria-label":"Previous month",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:nt,className:"rounded-full border border-slate-200 p-2 text-slate-500 transition hover:border-primary-200 hover:text-primary-600","aria-label":"Next month",children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 grid grid-cols-7 text-center text-xs font-semibold uppercase tracking-wide text-slate-400",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(st=>jsxRuntimeExports.jsx("div",{className:"py-2",children:st},st))}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 gap-1 text-sm",children:_.map(st=>{var yt;const gt=((yt=b.get(st.key))==null?void 0:yt.length)??0,lt=o===st.key;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>bt(st.key),className:`flex h-20 flex-col justify-between rounded-xl border p-3 text-left transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 ${lt?"border-primary-400 bg-primary-50":st.isCurrentMonth?"border-transparent bg-white":"border-transparent bg-slate-50 text-slate-400"}`,children:[jsxRuntimeExports.jsx("span",{className:`text-sm font-medium ${st.isToday?"text-primary-600":""}`,children:st.label}),gt>0&&jsxRuntimeExports.jsx("span",{className:"inline-flex min-w-[2rem] justify-center rounded-full bg-primary-100 px-2 py-1 text-xs font-semibold text-primary-700",children:gt})]},st.key)})})]}),jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:formatSelectedDate(o)}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Tasks scheduled for this day."})]}),$.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"No outstanding tasks for this date."}):jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:$.map(st=>jsxRuntimeExports.jsxs("li",{className:"rounded-xl border border-slate-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-primary-600",children:formatDueDate$1(st.due_date)}),jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400",children:st.priority==="high"?"High priority":st.priority==="med"?"Medium priority":"Low priority"})]}),jsxRuntimeExports.jsx("h3",{className:"mt-2 text-base font-semibold text-slate-900",children:st.title}),st.description&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-slate-600",children:st.description}),st.tags.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:st.tags.map(gt=>jsxRuntimeExports.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600",children:gt},gt))})]},st.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upcoming 7 days"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Next week's deadlines at a glance."})]}),ot.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"No due tasks in the next 7 days."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:ot.map(st=>jsxRuntimeExports.jsxs("li",{className:"rounded-xl border border-slate-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:formatDueDate$1(st.due_date)}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:st.title}),st.tags.length>0&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:st.tags.join(", ")})]},st.id))})]}),jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upcoming 30 days"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Keep an eye on longer horizon deadlines."})]}),vt.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"No due tasks in the next 30 days."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:vt.map(st=>jsxRuntimeExports.jsxs("li",{className:"rounded-xl border border-slate-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:formatDueDate$1(st.due_date)}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:st.title}),st.tags.length>0&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:st.tags.join(", ")})]},st.id))})]})]})]})]})},formatDate$1=e=>{const s=new Date(e);return Number.isNaN(s.valueOf())?"No due date":s.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},formatDateTime$1=e=>{const s=new Date(e);return Number.isNaN(s.valueOf())?"Unknown date":s.toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},Dashboard=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState([]),[o,c]=reactExports.useState([]),h=useNavigate(),{activeEstateId:j}=useEstate();reactExports.useEffect(()=>{let rt=!0;const ut=liveQuery(()=>db.tasks.where("estateId").equals(j).toArray()).subscribe({next:ot=>{if(!rt)return;const vt=[...ot].sort((bt,et)=>new Date(bt.due_date).getTime()-new Date(et.due_date).getTime());s(vt)},error:ot=>{console.error(ot)}});return()=>{rt=!1,ut.unsubscribe()}},[j]),reactExports.useEffect(()=>{let rt=!0;const ut=liveQuery(()=>db.documents.where("estateId").equals(j).toArray()).subscribe({next:ot=>{if(!rt)return;const vt=[...ot].sort((bt,et)=>new Date(et.created_at).getTime()-new Date(bt.created_at).getTime());a(vt)},error:ot=>{console.error(ot)}});return()=>{rt=!1,ut.unsubscribe()}},[j]),reactExports.useEffect(()=>{let rt=!0;const ut=liveQuery(()=>db.journalEntries.where("estateId").equals(j).sortBy("created_at")).subscribe({next:ot=>{rt&&c(ot.slice().reverse())},error:ot=>{console.error(ot)}});return()=>{rt=!1,ut.unsubscribe()}},[j]);const b=reactExports.useMemo(()=>{const rt=e.length,ut=e.filter(mt=>mt.status==="done").length,ot=rt-ut,vt=rt===0?0:Math.round(ut/rt*100),bt=new Date;bt.setHours(0,0,0,0);const et=new Date(bt);et.setDate(et.getDate()+7);let nt=0,st=0;const gt=new Map,lt=[];e.forEach(mt=>{mt.tags.forEach(Ct=>{gt.set(Ct,(gt.get(Ct)??0)+1)});const xt=new Date(mt.due_date);Number.isNaN(xt.valueOf())||mt.status!=="done"&&(xt<bt?nt+=1:xt<=et&&(st+=1),xt>=bt&&lt.push(mt))});const yt=Array.from(gt.entries()).map(([mt,xt])=>({tag:mt,count:xt})).sort((mt,xt)=>xt.count-mt.count||mt.tag.localeCompare(xt.tag)).slice(0,10),ct=lt.sort((mt,xt)=>new Date(mt.due_date).getTime()-new Date(xt.due_date).getTime()).slice(0,3);return{total:rt,completed:ut,open:ot,progressPercent:vt,overdue:nt,dueThisWeek:st,tagBreakdown:yt,upcomingDeadlines:ct}},[e]),_=i[0]??null,$=o[0]??null,at=[{label:"Add task",description:"Capture a new responsibility and assign an owner and due date.",onClick:()=>h("/tasks",{state:{startCreate:!0}})},{label:"Upload document",description:"Store signed agreements, statements, and supporting files.",onClick:()=>h("/documents",{state:{startUpload:!0}})},{label:"New journal entry",description:"Record family updates or decisions for future reference.",onClick:()=>h("/journal",{state:{focusNewEntry:!0}})}];return jsxRuntimeExports.jsxs("section",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm uppercase tracking-wide text-primary-600",children:"Overview"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Your estate at a glance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Keep tabs on deadlines, documentation, and noteseverything you need to guide the estate plan forward."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Task progress"}),jsxRuntimeExports.jsxs("h2",{className:"mt-1 text-xl font-semibold text-slate-900",children:[b.total," tasks"]})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-semibold text-primary-600",children:[b.progressPercent,"% done"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[jsxRuntimeExports.jsxs("span",{children:[b.open," open"]}),jsxRuntimeExports.jsxs("span",{children:[b.completed," completed"]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-100",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full bg-primary-500 transition-all",style:{width:`${b.progressPercent}%`}})})]})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Deadlines"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Upcoming commitments"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-rose-50 px-3 py-2 text-rose-700",children:[jsxRuntimeExports.jsx("span",{children:"Overdue"}),jsxRuntimeExports.jsx("span",{className:"text-base font-semibold",children:b.overdue})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-amber-50 px-3 py-2 text-amber-700",children:[jsxRuntimeExports.jsx("span",{children:"Due this week"}),jsxRuntimeExports.jsx("span",{className:"text-base font-semibold",children:b.dueThisWeek})]})]})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Quick actions"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Jump back in"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-3",children:at.map(rt=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:rt.onClick,className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-left text-sm font-medium text-slate-700 transition hover:border-primary-200 hover:bg-primary-50/60 hover:text-primary-700",children:[jsxRuntimeExports.jsx("span",{className:"block text-base font-semibold text-slate-900",children:rt.label}),jsxRuntimeExports.jsx("span",{className:"block text-xs text-slate-500",children:rt.description})]},rt.label))})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm lg:col-span-2",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Next deadlines"}),jsxRuntimeExports.jsx("h2",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Coming up"})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>h("/tasks"),className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:"View all tasks"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-3",children:b.upcomingDeadlines.length===0?jsxRuntimeExports.jsx("p",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-sm text-slate-500",children:"No upcoming deadlinesreview overdue items or add new tasks to see them here."}):b.upcomingDeadlines.map(rt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 px-4 py-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-base font-semibold text-slate-900",children:rt.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:rt.tags.length?rt.tags.map(ut=>`#${ut}`).join("  "):"No tags"})]}),jsxRuntimeExports.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600",children:["Due ",formatDate$1(rt.due_date)]})]},rt.id))})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recent activity"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Latest updates"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Document"}),_?jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-base font-semibold text-slate-900",children:_.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",formatDateTime$1(_.created_at)]}),_.tags.length>0?jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Tags: ",_.tags.map(rt=>`#${rt}`).join(", ")]}):null]}):jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Upload your first document to see it here."})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Journal"}),$?jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-base font-semibold text-slate-900",children:$.title}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Last updated ",formatDateTime$1($.created_at)]})]}):jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Capture your first journal entry to see it here."})]})]})]})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Tags"}),jsxRuntimeExports.jsx("h2",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Work by category"})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>h("/tasks"),className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:"Manage tags"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:b.tagBreakdown.length===0?jsxRuntimeExports.jsx("p",{className:"col-span-full rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-sm text-slate-500",children:"No tags yetadd labels to tasks to organize work by theme."}):b.tagBreakdown.map(rt=>jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["#",rt.tag]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:[rt.count," task",rt.count===1?"":"s"]})]},rt.tag))})]})]})};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const nodeCrypto={},__viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:nodeCrypto},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal);(function(module,exports$1){(function(s,i){module.exports=s.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,s)=>{var dr;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=kt,s.bytesToString=vn,s.createValidAbsoluteUrl=Gt,s.getModificationDate=Dn,s.getUuid=Yn,s.getVerbosityLevel=Bt,s.info=Wt,s.isArrayBuffer=Qt,s.isArrayEqual=In,s.isNodeJS=void 0,s.normalizeUnicode=Bn,s.objectFromMap=Rn,s.objectSize=jn,s.setVerbosityLevel=Xt,s.shadow=At,s.string32=kn,s.stringToBytes=un,s.stringToPDFString=hn,s.stringToUTF8String=Sn,s.unreachable=$t,s.utf8StringToString=En,s.warn=Ut;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=i;const a=[1,0,0,1,0,0];s.IDENTITY_MATRIX=a;const o=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=o;const c=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=c;const h=1.35;s.LINE_FACTOR=h;const j=.35;s.LINE_DESCENT_FACTOR=j;const b=j/h;s.BASELINE_FACTOR=b;const _={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=_;const $={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=$;const at="pdfjs_internal_editor_";s.AnnotationEditorPrefix=at;const rt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=rt;const ut={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=ut;const ot={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=ot;const vt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=vt;const bt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=bt;const et={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=et;const nt={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=nt;const st={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=st;const gt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=gt;const lt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=lt;const yt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=yt;const ct={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=ct;const mt={O:"PageOpen",C:"PageClose"};s.PageActionEventType=mt;const xt={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=xt;const Ct={NONE:0,BINARY:1};s.CMapCompressionType=Ct;const ht={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=ht;const wt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=wt;let jt=xt.WARNINGS;function Xt(An){Number.isInteger(An)&&(jt=An)}function Bt(){return jt}function Wt(An){jt>=xt.INFOS&&console.log(`Info: ${An}`)}function Ut(An){jt>=xt.WARNINGS&&console.log(`Warning: ${An}`)}function $t(An){throw new Error(An)}function kt(An,Vt){An||$t(Vt)}function Ft(An){switch(An==null?void 0:An.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Gt(An,Vt=null,ln=null){if(!An)return null;try{if(ln&&typeof An=="string"){if(ln.addDefaultProtocol&&An.startsWith("www.")){const ir=An.match(/\./g);(ir==null?void 0:ir.length)>=2&&(An=`http://${An}`)}if(ln.tryConvertEncoding)try{An=Sn(An)}catch{}}const Ln=Vt?new URL(An,Vt):new URL(An);if(Ft(Ln))return Ln}catch{}return null}function At(An,Vt,ln,Ln=!1){return Object.defineProperty(An,Vt,{value:ln,enumerable:!Ln,configurable:!0,writable:!1}),ln}const it=function(){function Vt(ln,Ln){this.constructor===Vt&&$t("Cannot initialize BaseException."),this.message=ln,this.name=Ln}return Vt.prototype=new Error,Vt.constructor=Vt,Vt}();s.BaseException=it;class dt extends it{constructor(Vt,ln){super(Vt,"PasswordException"),this.code=ln}}s.PasswordException=dt;class _t extends it{constructor(Vt,ln){super(Vt,"UnknownErrorException"),this.details=ln}}s.UnknownErrorException=_t;class Tt extends it{constructor(Vt){super(Vt,"InvalidPDFException")}}s.InvalidPDFException=Tt;class Dt extends it{constructor(Vt){super(Vt,"MissingPDFException")}}s.MissingPDFException=Dt;class It extends it{constructor(Vt,ln){super(Vt,"UnexpectedResponseException"),this.status=ln}}s.UnexpectedResponseException=It;class Lt extends it{constructor(Vt){super(Vt,"FormatError")}}s.FormatError=Lt;class on extends it{constructor(Vt){super(Vt,"AbortException")}}s.AbortException=on;function vn(An){(typeof An!="object"||(An==null?void 0:An.length)===void 0)&&$t("Invalid argument for bytesToString");const Vt=An.length,ln=8192;if(Vt<ln)return String.fromCharCode.apply(null,An);const Ln=[];for(let ir=0;ir<Vt;ir+=ln){const Pn=Math.min(ir+ln,Vt),Ot=An.subarray(ir,Pn);Ln.push(String.fromCharCode.apply(null,Ot))}return Ln.join("")}function un(An){typeof An!="string"&&$t("Invalid argument for stringToBytes");const Vt=An.length,ln=new Uint8Array(Vt);for(let Ln=0;Ln<Vt;++Ln)ln[Ln]=An.charCodeAt(Ln)&255;return ln}function kn(An){return String.fromCharCode(An>>24&255,An>>16&255,An>>8&255,An&255)}function jn(An){return Object.keys(An).length}function Rn(An){const Vt=Object.create(null);for(const[ln,Ln]of An)Vt[ln]=Ln;return Vt}function nn(){const An=new Uint8Array(4);return An[0]=1,new Uint32Array(An.buffer,0,1)[0]===1}function rn(){try{return new Function(""),!0}catch{return!1}}class pt{static get isLittleEndian(){return At(this,"isLittleEndian",nn())}static get isEvalSupported(){return At(this,"isEvalSupported",rn())}static get isOffscreenCanvasSupported(){return At(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?At(this,"platform",{isWin:!1,isMac:!1}):At(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Vt,ln;return At(this,"isCSSRoundSupported",(ln=(Vt=globalThis.CSS)==null?void 0:Vt.supports)==null?void 0:ln.call(Vt,"width: round(1.5px, 1px)"))}}s.FeatureTest=pt;const Rt=[...Array(256).keys()].map(An=>An.toString(16).padStart(2,"0"));class zt{static makeHexColor(Vt,ln,Ln){return`#${Rt[Vt]}${Rt[ln]}${Rt[Ln]}`}static scaleMinMax(Vt,ln){let Ln;Vt[0]?(Vt[0]<0&&(Ln=ln[0],ln[0]=ln[1],ln[1]=Ln),ln[0]*=Vt[0],ln[1]*=Vt[0],Vt[3]<0&&(Ln=ln[2],ln[2]=ln[3],ln[3]=Ln),ln[2]*=Vt[3],ln[3]*=Vt[3]):(Ln=ln[0],ln[0]=ln[2],ln[2]=Ln,Ln=ln[1],ln[1]=ln[3],ln[3]=Ln,Vt[1]<0&&(Ln=ln[2],ln[2]=ln[3],ln[3]=Ln),ln[2]*=Vt[1],ln[3]*=Vt[1],Vt[2]<0&&(Ln=ln[0],ln[0]=ln[1],ln[1]=Ln),ln[0]*=Vt[2],ln[1]*=Vt[2]),ln[0]+=Vt[4],ln[1]+=Vt[4],ln[2]+=Vt[5],ln[3]+=Vt[5]}static transform(Vt,ln){return[Vt[0]*ln[0]+Vt[2]*ln[1],Vt[1]*ln[0]+Vt[3]*ln[1],Vt[0]*ln[2]+Vt[2]*ln[3],Vt[1]*ln[2]+Vt[3]*ln[3],Vt[0]*ln[4]+Vt[2]*ln[5]+Vt[4],Vt[1]*ln[4]+Vt[3]*ln[5]+Vt[5]]}static applyTransform(Vt,ln){const Ln=Vt[0]*ln[0]+Vt[1]*ln[2]+ln[4],ir=Vt[0]*ln[1]+Vt[1]*ln[3]+ln[5];return[Ln,ir]}static applyInverseTransform(Vt,ln){const Ln=ln[0]*ln[3]-ln[1]*ln[2],ir=(Vt[0]*ln[3]-Vt[1]*ln[2]+ln[2]*ln[5]-ln[4]*ln[3])/Ln,Pn=(-Vt[0]*ln[1]+Vt[1]*ln[0]+ln[4]*ln[1]-ln[5]*ln[0])/Ln;return[ir,Pn]}static getAxialAlignedBoundingBox(Vt,ln){const Ln=this.applyTransform(Vt,ln),ir=this.applyTransform(Vt.slice(2,4),ln),Pn=this.applyTransform([Vt[0],Vt[3]],ln),Ot=this.applyTransform([Vt[2],Vt[1]],ln);return[Math.min(Ln[0],ir[0],Pn[0],Ot[0]),Math.min(Ln[1],ir[1],Pn[1],Ot[1]),Math.max(Ln[0],ir[0],Pn[0],Ot[0]),Math.max(Ln[1],ir[1],Pn[1],Ot[1])]}static inverseTransform(Vt){const ln=Vt[0]*Vt[3]-Vt[1]*Vt[2];return[Vt[3]/ln,-Vt[1]/ln,-Vt[2]/ln,Vt[0]/ln,(Vt[2]*Vt[5]-Vt[4]*Vt[3])/ln,(Vt[4]*Vt[1]-Vt[5]*Vt[0])/ln]}static singularValueDecompose2dScale(Vt){const ln=[Vt[0],Vt[2],Vt[1],Vt[3]],Ln=Vt[0]*ln[0]+Vt[1]*ln[2],ir=Vt[0]*ln[1]+Vt[1]*ln[3],Pn=Vt[2]*ln[0]+Vt[3]*ln[2],Ot=Vt[2]*ln[1]+Vt[3]*ln[3],_n=(Ln+Ot)/2,Fn=Math.sqrt((Ln+Ot)**2-4*(Ln*Ot-Pn*ir))/2,Zn=_n+Fn||1,Qn=_n-Fn||1;return[Math.sqrt(Zn),Math.sqrt(Qn)]}static normalizeRect(Vt){const ln=Vt.slice(0);return Vt[0]>Vt[2]&&(ln[0]=Vt[2],ln[2]=Vt[0]),Vt[1]>Vt[3]&&(ln[1]=Vt[3],ln[3]=Vt[1]),ln}static intersect(Vt,ln){const Ln=Math.max(Math.min(Vt[0],Vt[2]),Math.min(ln[0],ln[2])),ir=Math.min(Math.max(Vt[0],Vt[2]),Math.max(ln[0],ln[2]));if(Ln>ir)return null;const Pn=Math.max(Math.min(Vt[1],Vt[3]),Math.min(ln[1],ln[3])),Ot=Math.min(Math.max(Vt[1],Vt[3]),Math.max(ln[1],ln[3]));return Pn>Ot?null:[Ln,Pn,ir,Ot]}static bezierBoundingBox(Vt,ln,Ln,ir,Pn,Ot,_n,Fn){const Zn=[],Qn=[[],[]];let $n,Nt,Pt,Zt,gn,xn,bn,Cn;for(let rr=0;rr<2;++rr){if(rr===0?(Nt=6*Vt-12*Ln+6*Pn,$n=-3*Vt+9*Ln-9*Pn+3*_n,Pt=3*Ln-3*Vt):(Nt=6*ln-12*ir+6*Ot,$n=-3*ln+9*ir-9*Ot+3*Fn,Pt=3*ir-3*ln),Math.abs($n)<1e-12){if(Math.abs(Nt)<1e-12)continue;Zt=-Pt/Nt,0<Zt&&Zt<1&&Zn.push(Zt);continue}bn=Nt*Nt-4*Pt*$n,Cn=Math.sqrt(bn),!(bn<0)&&(gn=(-Nt+Cn)/(2*$n),0<gn&&gn<1&&Zn.push(gn),xn=(-Nt-Cn)/(2*$n),0<xn&&xn<1&&Zn.push(xn))}let qn=Zn.length,Wn;const Mn=qn;for(;qn--;)Zt=Zn[qn],Wn=1-Zt,Qn[0][qn]=Wn*Wn*Wn*Vt+3*Wn*Wn*Zt*Ln+3*Wn*Zt*Zt*Pn+Zt*Zt*Zt*_n,Qn[1][qn]=Wn*Wn*Wn*ln+3*Wn*Wn*Zt*ir+3*Wn*Zt*Zt*Ot+Zt*Zt*Zt*Fn;return Qn[0][Mn]=Vt,Qn[1][Mn]=ln,Qn[0][Mn+1]=_n,Qn[1][Mn+1]=Fn,Qn[0].length=Qn[1].length=Mn+2,[Math.min(...Qn[0]),Math.min(...Qn[1]),Math.max(...Qn[0]),Math.max(...Qn[1])]}}s.Util=zt;const Kt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function hn(An){if(An[0]>=""){let ln;if(An[0]===""&&An[1]===""?ln="utf-16be":An[0]===""&&An[1]===""?ln="utf-16le":An[0]===""&&An[1]===""&&An[2]===""&&(ln="utf-8"),ln)try{const Ln=new TextDecoder(ln,{fatal:!0}),ir=un(An);return Ln.decode(ir)}catch(Ln){Ut(`stringToPDFString: "${Ln}".`)}}const Vt=[];for(let ln=0,Ln=An.length;ln<Ln;ln++){const ir=Kt[An.charCodeAt(ln)];Vt.push(ir?String.fromCharCode(ir):An.charAt(ln))}return Vt.join("")}function Sn(An){return decodeURIComponent(escape(An))}function En(An){return unescape(encodeURIComponent(An))}function Qt(An){return typeof An=="object"&&(An==null?void 0:An.byteLength)!==void 0}function In(An,Vt){if(An.length!==Vt.length)return!1;for(let ln=0,Ln=An.length;ln<Ln;ln++)if(An[ln]!==Vt[ln])return!1;return!0}function Dn(An=new Date){return[An.getUTCFullYear().toString(),(An.getUTCMonth()+1).toString().padStart(2,"0"),An.getUTCDate().toString().padStart(2,"0"),An.getUTCHours().toString().padStart(2,"0"),An.getUTCMinutes().toString().padStart(2,"0"),An.getUTCSeconds().toString().padStart(2,"0")].join("")}class nr{constructor(){cn(this,dr,!1);this.promise=new Promise((Vt,ln)=>{this.resolve=Ln=>{dn(this,dr,!0),Vt(Ln)},this.reject=Ln=>{dn(this,dr,!0),ln(Ln)}})}get settled(){return tt(this,dr)}}dr=new WeakMap,s.PromiseCapability=nr;let Jn=null,or=null;function Bn(An){return Jn||(Jn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,or=new Map([["","t"]])),An.replaceAll(Jn,(Vt,ln,Ln)=>ln?ln.normalize("NFKC"):or.get(Ln))}function Yn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const An=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(An);else for(let Vt=0;Vt<32;Vt++)An[Vt]=Math.floor(Math.random()*255);return vn(An)}const ar="pdfjs_internal_id_";s.AnnotationPrefix=ar},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var e,i,a,o,es,$s,j,b,_,$,at,rt,ut,ot,vt,Us,et,nt,Eo,gt,lt;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(ct){if(typeof ct=="string"||ct instanceof URL?ct={url:ct}:(0,_util.isArrayBuffer)(ct)&&(ct={data:ct}),typeof ct!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!ct.url&&!ct.data&&!ct.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const mt=new PDFDocumentLoadingTask,{docId:xt}=mt,Ct=ct.url?getUrlProp(ct.url):null,ht=ct.data?getDataProp(ct.data):null,wt=ct.httpHeaders||null,jt=ct.withCredentials===!0,Xt=ct.password??null,Bt=ct.range instanceof PDFDataRangeTransport?ct.range:null,Wt=Number.isInteger(ct.rangeChunkSize)&&ct.rangeChunkSize>0?ct.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ut=ct.worker instanceof PDFWorker?ct.worker:null;const $t=ct.verbosity,kt=typeof ct.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(ct.docBaseUrl)?ct.docBaseUrl:null,Ft=typeof ct.cMapUrl=="string"?ct.cMapUrl:null,Gt=ct.cMapPacked!==!1,At=ct.CMapReaderFactory||DefaultCMapReaderFactory,it=typeof ct.standardFontDataUrl=="string"?ct.standardFontDataUrl:null,dt=ct.StandardFontDataFactory||DefaultStandardFontDataFactory,_t=ct.stopAtErrors!==!0,Tt=Number.isInteger(ct.maxImageSize)&&ct.maxImageSize>-1?ct.maxImageSize:-1,Dt=ct.isEvalSupported!==!1,It=typeof ct.isOffscreenCanvasSupported=="boolean"?ct.isOffscreenCanvasSupported:!_util.isNodeJS,Lt=Number.isInteger(ct.canvasMaxAreaInBytes)?ct.canvasMaxAreaInBytes:-1,on=typeof ct.disableFontFace=="boolean"?ct.disableFontFace:_util.isNodeJS,vn=ct.fontExtraProperties===!0,un=ct.enableXfa===!0,kn=ct.ownerDocument||globalThis.document,jn=ct.disableRange===!0,Rn=ct.disableStream===!0,nn=ct.disableAutoFetch===!0,rn=ct.pdfBug===!0,pt=Bt?Bt.length:ct.length??NaN,Rt=typeof ct.useSystemFonts=="boolean"?ct.useSystemFonts:!_util.isNodeJS&&!on,zt=typeof ct.useWorkerFetch=="boolean"?ct.useWorkerFetch:At===_display_utils.DOMCMapReaderFactory&&dt===_display_utils.DOMStandardFontDataFactory&&Ft&&it&&(0,_display_utils.isValidFetchUrl)(Ft,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(it,document.baseURI),Kt=ct.canvasFactory||new DefaultCanvasFactory({ownerDocument:kn}),hn=ct.filterFactory||new DefaultFilterFactory({docId:xt,ownerDocument:kn}),Sn=null;(0,_util.setVerbosityLevel)($t);const En={canvasFactory:Kt,filterFactory:hn};if(zt||(En.cMapReaderFactory=new At({baseUrl:Ft,isCompressed:Gt}),En.standardFontDataFactory=new dt({baseUrl:it})),!Ut){const Dn={verbosity:$t,port:_worker_options.GlobalWorkerOptions.workerPort};Ut=Dn.port?PDFWorker.fromPort(Dn):new PDFWorker(Dn),mt._worker=Ut}const Qt={docId:xt,apiVersion:"3.11.174",data:ht,password:Xt,disableAutoFetch:nn,rangeChunkSize:Wt,length:pt,docBaseUrl:kt,enableXfa:un,evaluatorOptions:{maxImageSize:Tt,disableFontFace:on,ignoreErrors:_t,isEvalSupported:Dt,isOffscreenCanvasSupported:It,canvasMaxAreaInBytes:Lt,fontExtraProperties:vn,useSystemFonts:Rt,cMapUrl:zt?Ft:null,standardFontDataUrl:zt?it:null}},In={ignoreErrors:_t,isEvalSupported:Dt,disableFontFace:on,fontExtraProperties:vn,enableXfa:un,ownerDocument:kn,disableAutoFetch:nn,pdfBug:rn,styleElement:Sn};return Ut.promise.then(function(){if(mt.destroyed)throw new Error("Loading aborted");const Dn=_fetchDocument(Ut,Qt),nr=new Promise(function(Jn){let or;Bt?or=new _transport_stream.PDFDataTransportStream({length:pt,initialData:Bt.initialData,progressiveDone:Bt.progressiveDone,contentDispositionFilename:Bt.contentDispositionFilename,disableRange:jn,disableStream:Rn},Bt):ht||(or=(Yn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Yn):(0,_display_utils.isValidFetchUrl)(Yn.url)?new _displayFetch_stream.PDFFetchStream(Yn):new _displayNetwork.PDFNetworkStream(Yn))({url:Ct,length:pt,httpHeaders:wt,withCredentials:jt,rangeChunkSize:Wt,disableRange:jn,disableStream:Rn})),Jn(or)});return Promise.all([Dn,nr]).then(function([Jn,or]){if(mt.destroyed)throw new Error("Loading aborted");const Bn=new _message_handler.MessageHandler(xt,Jn,Ut.port),Yn=new WorkerTransport(Bn,mt,or,In,En);mt._transport=Yn,Bn.send("Ready",null)})}).catch(mt._capability.reject),mt}async function _fetchDocument(ct,mt){if(ct.destroyed)throw new Error("Worker was destroyed");const xt=await ct.messageHandler.sendWithPromise("GetDocRequest",mt,mt.data?[mt.data.buffer]:null);if(ct.destroyed)throw new Error("Worker was destroyed");return xt}function getUrlProp(ct){if(ct instanceof URL)return ct.href;try{return new URL(ct,window.location).href}catch{if(_util.isNodeJS&&typeof ct=="string")return ct}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(ct){if(_util.isNodeJS&&typeof Buffer<"u"&&ct instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(ct instanceof Uint8Array&&ct.byteLength===ct.buffer.byteLength)return ct;if(typeof ct=="string")return(0,_util.stringToBytes)(ct);if(typeof ct=="object"&&!isNaN(ct==null?void 0:ct.length)||(0,_util.isArrayBuffer)(ct))return new Uint8Array(ct);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ps(s,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var mt,xt,Ct;this.destroyed=!0;try{(mt=this._worker)!=null&&mt.port&&(this._worker._pendingDestroy=!0),await((xt=this._transport)==null?void 0:xt.destroy())}catch(ht){throw(Ct=this._worker)!=null&&Ct.port&&delete this._worker._pendingDestroy,ht}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,cn(s,e,0);let PDFDocumentLoadingTask=s;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(mt,xt,Ct=!1,ht=null){this.length=mt,this.initialData=xt,this.progressiveDone=Ct,this.contentDispositionFilename=ht,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(mt){this._rangeListeners.push(mt)}addProgressListener(mt){this._progressListeners.push(mt)}addProgressiveReadListener(mt){this._progressiveReadListeners.push(mt)}addProgressiveDoneListener(mt){this._progressiveDoneListeners.push(mt)}onDataRange(mt,xt){for(const Ct of this._rangeListeners)Ct(mt,xt)}onDataProgress(mt,xt){this._readyCapability.promise.then(()=>{for(const Ct of this._progressListeners)Ct(mt,xt)})}onDataProgressiveRead(mt){this._readyCapability.promise.then(()=>{for(const xt of this._progressiveReadListeners)xt(mt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const mt of this._progressiveDoneListeners)mt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(mt,xt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(mt,xt){this._pdfInfo=mt,this._transport=xt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Ct=>{if(!Ct)return Ct;const ht=[];for(const wt in Ct)ht.push(...Ct[wt]);return ht}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(mt){return this._transport.getPage(mt)}getPageIndex(mt){return this._transport.getPageIndex(mt)}getDestinations(){return this._transport.getDestinations()}getDestination(mt){return this._transport.getDestination(mt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(mt=!1){return this._transport.startCleanup(mt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(mt,xt,Ct,ht=!1){cn(this,o);cn(this,i,null);cn(this,a,!1);this._pageIndex=mt,this._pageInfo=xt,this._transport=Ct,this._stats=ht?new _display_utils.StatTimer:null,this._pdfBug=ht,this.commonObjs=Ct.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:mt,rotation:xt=this.rotate,offsetX:Ct=0,offsetY:ht=0,dontFlip:wt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:mt,rotation:xt,offsetX:Ct,offsetY:ht,dontFlip:wt})}getAnnotations({intent:mt="display"}={}){const xt=this._transport.getRenderingIntent(mt);return this._transport.getAnnotations(this._pageIndex,xt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var mt;return((mt=this._transport._htmlForXfa)==null?void 0:mt.children[this._pageIndex])||null}render({canvasContext:mt,viewport:xt,intent:Ct="display",annotationMode:ht=_util.AnnotationMode.ENABLE,transform:wt=null,background:jt=null,optionalContentConfigPromise:Xt=null,annotationCanvasMap:Bt=null,pageColors:Wt=null,printAnnotationStorage:Ut=null}){var dt,_t;(dt=this._stats)==null||dt.time("Overall");const $t=this._transport.getRenderingIntent(Ct,ht,Ut);dn(this,a,!1),Yt(this,o,$s).call(this),Xt||(Xt=this._transport.getOptionalContentConfig());let kt=this._intentStates.get($t.cacheKey);kt||(kt=Object.create(null),this._intentStates.set($t.cacheKey,kt)),kt.streamReaderCancelTimeout&&(clearTimeout(kt.streamReaderCancelTimeout),kt.streamReaderCancelTimeout=null);const Ft=!!($t.renderingIntent&_util.RenderingIntentFlag.PRINT);kt.displayReadyCapability||(kt.displayReadyCapability=new _util.PromiseCapability,kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_t=this._stats)==null||_t.time("Page Request"),this._pumpOperatorList($t));const Gt=Tt=>{var Dt,It;kt.renderTasks.delete(At),(this._maybeCleanupAfterRender||Ft)&&dn(this,a,!0),Yt(this,o,es).call(this,!Ft),Tt?(At.capability.reject(Tt),this._abortOperatorList({intentState:kt,reason:Tt instanceof Error?Tt:new Error(Tt)})):At.capability.resolve(),(Dt=this._stats)==null||Dt.timeEnd("Rendering"),(It=this._stats)==null||It.timeEnd("Overall")},At=new InternalRenderTask({callback:Gt,params:{canvasContext:mt,viewport:xt,transform:wt,background:jt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Bt,operatorList:kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ft,pdfBug:this._pdfBug,pageColors:Wt});(kt.renderTasks||(kt.renderTasks=new Set)).add(At);const it=At.task;return Promise.all([kt.displayReadyCapability.promise,Xt]).then(([Tt,Dt])=>{var It;if(this.destroyed){Gt();return}(It=this._stats)==null||It.time("Rendering"),At.initializeGraphics({transparency:Tt,optionalContentConfig:Dt}),At.operatorListChanged()}).catch(Gt),it}getOperatorList({intent:mt="display",annotationMode:xt=_util.AnnotationMode.ENABLE,printAnnotationStorage:Ct=null}={}){var Bt;function ht(){jt.operatorList.lastChunk&&(jt.opListReadCapability.resolve(jt.operatorList),jt.renderTasks.delete(Xt))}const wt=this._transport.getRenderingIntent(mt,xt,Ct,!0);let jt=this._intentStates.get(wt.cacheKey);jt||(jt=Object.create(null),this._intentStates.set(wt.cacheKey,jt));let Xt;return jt.opListReadCapability||(Xt=Object.create(null),Xt.operatorListChanged=ht,jt.opListReadCapability=new _util.PromiseCapability,(jt.renderTasks||(jt.renderTasks=new Set)).add(Xt),jt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Bt=this._stats)==null||Bt.time("Page Request"),this._pumpOperatorList(wt)),jt.opListReadCapability.promise}streamTextContent({includeMarkedContent:mt=!1,disableNormalization:xt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:mt===!0,disableNormalization:xt===!0},{highWaterMark:100,size(ht){return ht.items.length}})}getTextContent(mt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Ct=>_xfa_text.XfaText.textContent(Ct));const xt=this.streamTextContent(mt);return new Promise(function(Ct,ht){function wt(){jt.read().then(function({value:Bt,done:Wt}){if(Wt){Ct(Xt);return}Object.assign(Xt.styles,Bt.styles),Xt.items.push(...Bt.items),wt()},ht)}const jt=xt.getReader(),Xt={items:[],styles:Object.create(null)};wt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const mt=[];for(const xt of this._intentStates.values())if(this._abortOperatorList({intentState:xt,reason:new Error("Page was destroyed."),force:!0}),!xt.opListReadCapability)for(const Ct of xt.renderTasks)mt.push(Ct.completed),Ct.cancel();return this.objs.clear(),dn(this,a,!1),Yt(this,o,$s).call(this),Promise.all(mt)}cleanup(mt=!1){dn(this,a,!0);const xt=Yt(this,o,es).call(this,!1);return mt&&xt&&this._stats&&(this._stats=new _display_utils.StatTimer),xt}_startRenderPage(mt,xt){var ht,wt;const Ct=this._intentStates.get(xt);Ct&&((ht=this._stats)==null||ht.timeEnd("Page Request"),(wt=Ct.displayReadyCapability)==null||wt.resolve(mt))}_renderPageChunk(mt,xt){for(let Ct=0,ht=mt.length;Ct<ht;Ct++)xt.operatorList.fnArray.push(mt.fnArray[Ct]),xt.operatorList.argsArray.push(mt.argsArray[Ct]);xt.operatorList.lastChunk=mt.lastChunk,xt.operatorList.separateAnnots=mt.separateAnnots;for(const Ct of xt.renderTasks)Ct.operatorListChanged();mt.lastChunk&&Yt(this,o,es).call(this,!0)}_pumpOperatorList({renderingIntent:mt,cacheKey:xt,annotationStorageSerializable:Ct}){const{map:ht,transfers:wt}=Ct,Xt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:mt,cacheKey:xt,annotationStorage:ht},wt).getReader(),Bt=this._intentStates.get(xt);Bt.streamReader=Xt;const Wt=()=>{Xt.read().then(({value:Ut,done:$t})=>{if($t){Bt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ut,Bt),Wt())},Ut=>{if(Bt.streamReader=null,!this._transport.destroyed){if(Bt.operatorList){Bt.operatorList.lastChunk=!0;for(const $t of Bt.renderTasks)$t.operatorListChanged();Yt(this,o,es).call(this,!0)}if(Bt.displayReadyCapability)Bt.displayReadyCapability.reject(Ut);else if(Bt.opListReadCapability)Bt.opListReadCapability.reject(Ut);else throw Ut}})};Wt()}_abortOperatorList({intentState:mt,reason:xt,force:Ct=!1}){if(mt.streamReader){if(mt.streamReaderCancelTimeout&&(clearTimeout(mt.streamReaderCancelTimeout),mt.streamReaderCancelTimeout=null),!Ct){if(mt.renderTasks.size>0)return;if(xt instanceof _display_utils.RenderingCancelledException){let ht=RENDERING_CANCELLED_TIMEOUT;xt.extraDelay>0&&xt.extraDelay<1e3&&(ht+=xt.extraDelay),mt.streamReaderCancelTimeout=setTimeout(()=>{mt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:mt,reason:xt,force:!0})},ht);return}}if(mt.streamReader.cancel(new _util.AbortException(xt.message)).catch(()=>{}),mt.streamReader=null,!this._transport.destroyed){for(const[ht,wt]of this._intentStates)if(wt===mt){this._intentStates.delete(ht);break}this.cleanup()}}}get stats(){return this._stats}}i=new WeakMap,a=new WeakMap,o=new WeakSet,es=function(mt=!1){if(Yt(this,o,$s).call(this),!tt(this,a)||this.destroyed)return!1;if(mt)return dn(this,i,setTimeout(()=>{dn(this,i,null),Yt(this,o,es).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:xt,operatorList:Ct}of this._intentStates.values())if(xt.size>0||!Ct.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),dn(this,a,!1),!0},$s=function(){tt(this,i)&&(clearTimeout(tt(this,i)),dn(this,i,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){cn(this,j,new Set);cn(this,b,Promise.resolve())}postMessage(mt,xt){const Ct={data:structuredClone(mt,xt?{transfer:xt}:null)};tt(this,b).then(()=>{for(const ht of tt(this,j))ht.call(this,Ct)})}addEventListener(mt,xt){tt(this,j).add(xt)}removeEventListener(mt,xt){tt(this,j).delete(xt)}terminate(){tt(this,j).clear()}}j=new WeakMap,b=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const ct=(_=document==null?void 0:document.currentScript)==null?void 0:_.src;ct&&(PDFWorkerUtil.fallbackWorkerSrc=ct.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(ct,mt){let xt;try{if(xt=new URL(ct),!xt.origin||xt.origin==="null")return!1}catch{return!1}const Ct=new URL(mt,xt);return xt.origin===Ct.origin},PDFWorkerUtil.createCDNWrapper=function(ct){const mt=`importScripts("${ct}");`;return URL.createObjectURL(new Blob([mt]))}}const _PDFWorker=class _PDFWorker{constructor({name:ct=null,port:mt=null,verbosity:xt=(0,_util.getVerbosityLevel)()}={}){var Ct;if(this.name=ct,this.destroyed=!1,this.verbosity=xt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,mt){if((Ct=tt(_PDFWorker,$))!=null&&Ct.has(mt))throw new Error("Cannot use more than one PDFWorker per port.");(tt(_PDFWorker,$)||dn(_PDFWorker,$,new WeakMap)).set(mt,this),this._initializeFromPort(mt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(ct){this._port=ct,this._messageHandler=new _message_handler.MessageHandler("main","worker",ct),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:ct}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,ct)||(ct=PDFWorkerUtil.createCDNWrapper(new URL(ct,window.location).href));const mt=new Worker(ct),xt=new _message_handler.MessageHandler("main","worker",mt),Ct=()=>{mt.removeEventListener("error",ht),xt.destroy(),mt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ht=()=>{this._webWorker||Ct()};mt.addEventListener("error",ht),xt.on("test",jt=>{if(mt.removeEventListener("error",ht),this.destroyed){Ct();return}jt?(this._messageHandler=xt,this._port=mt,this._webWorker=mt,this._readyCapability.resolve(),xt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),xt.destroy(),mt.terminate())}),xt.on("ready",jt=>{if(mt.removeEventListener("error",ht),this.destroyed){Ct();return}try{wt()}catch{this._setupFakeWorker()}});const wt=()=>{const jt=new Uint8Array;xt.send("test",jt,[jt.buffer])};wt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(ct=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const mt=new LoopbackPort;this._port=mt;const xt=`fake${PDFWorkerUtil.fakeWorkerId++}`,Ct=new _message_handler.MessageHandler(xt+"_worker",xt,mt);ct.setup(Ct,mt);const ht=new _message_handler.MessageHandler(xt,xt+"_worker",mt);this._messageHandler=ht,this._readyCapability.resolve(),ht.send("configure",{verbosity:this.verbosity})}).catch(ct=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${ct.message}".`))})}destroy(){var ct;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(ct=tt(_PDFWorker,$))==null||ct.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(ct){var xt;if(!(ct!=null&&ct.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const mt=(xt=tt(this,$))==null?void 0:xt.get(ct.port);if(mt){if(mt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return mt}return new _PDFWorker(ct)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var ct;try{return((ct=globalThis.pdfjsWorker)==null?void 0:ct.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};$=new WeakMap,cn(_PDFWorker,$);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(mt,xt,Ct,ht,wt){cn(this,vt);cn(this,at,new Map);cn(this,rt,new Map);cn(this,ut,new Map);cn(this,ot,null);this.messageHandler=mt,this.loadingTask=xt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:ht.ownerDocument,styleElement:ht.styleElement}),this._params=ht,this.canvasFactory=wt.canvasFactory,this.filterFactory=wt.filterFactory,this.cMapReaderFactory=wt.cMapReaderFactory,this.standardFontDataFactory=wt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Ct,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(mt,xt=_util.AnnotationMode.ENABLE,Ct=null,ht=!1){let wt=_util.RenderingIntentFlag.DISPLAY,jt=_annotation_storage.SerializableEmpty;switch(mt){case"any":wt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":wt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${mt}`)}switch(xt){case _util.AnnotationMode.DISABLE:wt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:wt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:wt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,jt=(wt&_util.RenderingIntentFlag.PRINT&&Ct instanceof _annotation_storage.PrintAnnotationStorage?Ct:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${xt}`)}return ht&&(wt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:wt,cacheKey:`${wt}_${jt.hash}`,annotationStorageSerializable:jt}}destroy(){var Ct;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Ct=tt(this,ot))==null||Ct.reject(new Error("Worker was destroyed during onPassword callback"));const mt=[];for(const ht of tt(this,rt).values())mt.push(ht._destroy());tt(this,rt).clear(),tt(this,ut).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const xt=this.messageHandler.sendWithPromise("Terminate",null);return mt.push(xt),Promise.all(mt).then(()=>{var ht;this.commonObjs.clear(),this.fontLoader.clear(),tt(this,at).clear(),this.filterFactory.destroy(),(ht=this._networkStream)==null||ht.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:mt,loadingTask:xt}=this;mt.on("GetReader",(Ct,ht)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=wt=>{this._lastProgress={loaded:wt.loaded,total:wt.total}},ht.onPull=()=>{this._fullReader.read().then(function({value:wt,done:jt}){if(jt){ht.close();return}(0,_util.assert)(wt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(wt),1,[wt])}).catch(wt=>{ht.error(wt)})},ht.onCancel=wt=>{this._fullReader.cancel(wt),ht.ready.catch(jt=>{if(!this.destroyed)throw jt})}}),mt.on("ReaderHeadersReady",Ct=>{const ht=new _util.PromiseCapability,wt=this._fullReader;return wt.headersReady.then(()=>{var jt;(!wt.isStreamingSupported||!wt.isRangeSupported)&&(this._lastProgress&&((jt=xt.onProgress)==null||jt.call(xt,this._lastProgress)),wt.onProgress=Xt=>{var Bt;(Bt=xt.onProgress)==null||Bt.call(xt,{loaded:Xt.loaded,total:Xt.total})}),ht.resolve({isStreamingSupported:wt.isStreamingSupported,isRangeSupported:wt.isRangeSupported,contentLength:wt.contentLength})},ht.reject),ht.promise}),mt.on("GetRangeReader",(Ct,ht)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const wt=this._networkStream.getRangeReader(Ct.begin,Ct.end);if(!wt){ht.close();return}ht.onPull=()=>{wt.read().then(function({value:jt,done:Xt}){if(Xt){ht.close();return}(0,_util.assert)(jt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(jt),1,[jt])}).catch(jt=>{ht.error(jt)})},ht.onCancel=jt=>{wt.cancel(jt),ht.ready.catch(Xt=>{if(!this.destroyed)throw Xt})}}),mt.on("GetDoc",({pdfInfo:Ct})=>{this._numPages=Ct.numPages,this._htmlForXfa=Ct.htmlForXfa,delete Ct.htmlForXfa,xt._capability.resolve(new PDFDocumentProxy(Ct,this))}),mt.on("DocException",function(Ct){let ht;switch(Ct.name){case"PasswordException":ht=new _util.PasswordException(Ct.message,Ct.code);break;case"InvalidPDFException":ht=new _util.InvalidPDFException(Ct.message);break;case"MissingPDFException":ht=new _util.MissingPDFException(Ct.message);break;case"UnexpectedResponseException":ht=new _util.UnexpectedResponseException(Ct.message,Ct.status);break;case"UnknownErrorException":ht=new _util.UnknownErrorException(Ct.message,Ct.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}xt._capability.reject(ht)}),mt.on("PasswordRequest",Ct=>{if(dn(this,ot,new _util.PromiseCapability),xt.onPassword){const ht=wt=>{wt instanceof Error?tt(this,ot).reject(wt):tt(this,ot).resolve({password:wt})};try{xt.onPassword(ht,Ct.code)}catch(wt){tt(this,ot).reject(wt)}}else tt(this,ot).reject(new _util.PasswordException(Ct.message,Ct.code));return tt(this,ot).promise}),mt.on("DataLoaded",Ct=>{var ht;(ht=xt.onProgress)==null||ht.call(xt,{loaded:Ct.length,total:Ct.length}),this.downloadInfoCapability.resolve(Ct)}),mt.on("StartRenderPage",Ct=>{if(this.destroyed)return;tt(this,rt).get(Ct.pageIndex)._startRenderPage(Ct.transparency,Ct.cacheKey)}),mt.on("commonobj",([Ct,ht,wt])=>{var jt;if(!this.destroyed&&!this.commonObjs.has(Ct))switch(ht){case"Font":const Xt=this._params;if("error"in wt){const Ut=wt.error;(0,_util.warn)(`Error during font loading: ${Ut}`),this.commonObjs.resolve(Ct,Ut);break}const Bt=Xt.pdfBug&&((jt=globalThis.FontInspector)!=null&&jt.enabled)?(Ut,$t)=>globalThis.FontInspector.fontAdded(Ut,$t):null,Wt=new _font_loader.FontFaceObject(wt,{isEvalSupported:Xt.isEvalSupported,disableFontFace:Xt.disableFontFace,ignoreErrors:Xt.ignoreErrors,inspectFont:Bt});this.fontLoader.bind(Wt).catch(Ut=>mt.sendWithPromise("FontFallback",{id:Ct})).finally(()=>{!Xt.fontExtraProperties&&Wt.data&&(Wt.data=null),this.commonObjs.resolve(Ct,Wt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Ct,wt);break;default:throw new Error(`Got unknown common object type ${ht}`)}}),mt.on("obj",([Ct,ht,wt,jt])=>{var Bt;if(this.destroyed)return;const Xt=tt(this,rt).get(ht);if(!Xt.objs.has(Ct))switch(wt){case"Image":if(Xt.objs.resolve(Ct,jt),jt){let Wt;if(jt.bitmap){const{width:Ut,height:$t}=jt;Wt=Ut*$t*4}else Wt=((Bt=jt.data)==null?void 0:Bt.length)||0;Wt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Xt._maybeCleanupAfterRender=!0)}break;case"Pattern":Xt.objs.resolve(Ct,jt);break;default:throw new Error(`Got unknown object type ${wt}`)}}),mt.on("DocProgress",Ct=>{var ht;this.destroyed||(ht=xt.onProgress)==null||ht.call(xt,{loaded:Ct.loaded,total:Ct.total})}),mt.on("FetchBuiltInCMap",Ct=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Ct):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),mt.on("FetchStandardFontData",Ct=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Ct):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Ct;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:mt,transfers:xt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:mt,filename:((Ct=this._fullReader)==null?void 0:Ct.filename)??null},xt).finally(()=>{this.annotationStorage.resetModified()})}getPage(mt){if(!Number.isInteger(mt)||mt<=0||mt>this._numPages)return Promise.reject(new Error("Invalid page request."));const xt=mt-1,Ct=tt(this,ut).get(xt);if(Ct)return Ct;const ht=this.messageHandler.sendWithPromise("GetPage",{pageIndex:xt}).then(wt=>{if(this.destroyed)throw new Error("Transport destroyed");const jt=new PDFPageProxy(xt,wt,this,this._params.pdfBug);return tt(this,rt).set(xt,jt),jt});return tt(this,ut).set(xt,ht),ht}getPageIndex(mt){return typeof mt!="object"||mt===null||!Number.isInteger(mt.num)||mt.num<0||!Number.isInteger(mt.gen)||mt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:mt.num,gen:mt.gen})}getAnnotations(mt,xt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:mt,intent:xt})}getFieldObjects(){return Yt(this,vt,Us).call(this,"GetFieldObjects")}hasJSActions(){return Yt(this,vt,Us).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(mt){return typeof mt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:mt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Yt(this,vt,Us).call(this,"GetDocJSActions")}getPageJSActions(mt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:mt})}getStructTree(mt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:mt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(mt=>new _optional_content_config.OptionalContentConfig(mt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const mt="GetMetadata",xt=tt(this,at).get(mt);if(xt)return xt;const Ct=this.messageHandler.sendWithPromise(mt,null).then(ht=>{var wt,jt;return{info:ht[0],metadata:ht[1]?new _metadata.Metadata(ht[1]):null,contentDispositionFilename:((wt=this._fullReader)==null?void 0:wt.filename)??null,contentLength:((jt=this._fullReader)==null?void 0:jt.contentLength)??null}});return tt(this,at).set(mt,Ct),Ct}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(mt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const xt of tt(this,rt).values())if(!xt.cleanup())throw new Error(`startCleanup: Page ${xt.pageNumber} is currently rendering.`);this.commonObjs.clear(),mt||this.fontLoader.clear(),tt(this,at).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:mt,enableXfa:xt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:mt,enableXfa:xt})}}at=new WeakMap,rt=new WeakMap,ut=new WeakMap,ot=new WeakMap,vt=new WeakSet,Us=function(mt,xt=null){const Ct=tt(this,at).get(mt);if(Ct)return Ct;const ht=this.messageHandler.sendWithPromise(mt,xt);return tt(this,at).set(mt,ht),ht};class PDFObjects{constructor(){cn(this,nt);cn(this,et,Object.create(null))}get(mt,xt=null){if(xt){const ht=Yt(this,nt,Eo).call(this,mt);return ht.capability.promise.then(()=>xt(ht.data)),null}const Ct=tt(this,et)[mt];if(!(Ct!=null&&Ct.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${mt}.`);return Ct.data}has(mt){const xt=tt(this,et)[mt];return(xt==null?void 0:xt.capability.settled)||!1}resolve(mt,xt=null){const Ct=Yt(this,nt,Eo).call(this,mt);Ct.data=xt,Ct.capability.resolve()}clear(){var mt;for(const xt in tt(this,et)){const{data:Ct}=tt(this,et)[xt];(mt=Ct==null?void 0:Ct.bitmap)==null||mt.close()}dn(this,et,Object.create(null))}}et=new WeakMap,nt=new WeakSet,Eo=function(mt){var xt;return(xt=tt(this,et))[mt]||(xt[mt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(mt){cn(this,gt,null);dn(this,gt,mt),this.onContinue=null}get promise(){return tt(this,gt).capability.promise}cancel(mt=0){tt(this,gt).cancel(null,mt)}get separateAnnots(){const{separateAnnots:mt}=tt(this,gt).operatorList;if(!mt)return!1;const{annotationCanvasMap:xt}=tt(this,gt);return mt.form||mt.canvas&&(xt==null?void 0:xt.size)>0}}gt=new WeakMap,exports$1.RenderTask=RenderTask;const yt=class yt{constructor({callback:mt,params:xt,objs:Ct,commonObjs:ht,annotationCanvasMap:wt,operatorList:jt,pageIndex:Xt,canvasFactory:Bt,filterFactory:Wt,useRequestAnimationFrame:Ut=!1,pdfBug:$t=!1,pageColors:kt=null}){this.callback=mt,this.params=xt,this.objs=Ct,this.commonObjs=ht,this.annotationCanvasMap=wt,this.operatorListIdx=null,this.operatorList=jt,this._pageIndex=Xt,this.canvasFactory=Bt,this.filterFactory=Wt,this._pdfBug=$t,this.pageColors=kt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ut===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=xt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:mt=!1,optionalContentConfig:xt}){var Xt,Bt;if(this.cancelled)return;if(this._canvas){if(tt(yt,lt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");tt(yt,lt).add(this._canvas)}this._pdfBug&&((Xt=globalThis.StepperManager)!=null&&Xt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Ct,viewport:ht,transform:wt,background:jt}=this.params;this.gfx=new _canvas.CanvasGraphics(Ct,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:xt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:wt,viewport:ht,transparency:mt,background:jt}),this.operatorListIdx=0,this.graphicsReady=!0,(Bt=this.graphicsReadyCallback)==null||Bt.call(this)}cancel(mt=null,xt=0){var Ct;this.running=!1,this.cancelled=!0,(Ct=this.gfx)==null||Ct.endDrawing(),tt(yt,lt).delete(this._canvas),this.callback(mt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,xt))}operatorListChanged(){var mt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(mt=this.stepper)==null||mt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),tt(yt,lt).delete(this._canvas),this.callback())))}};lt=new WeakMap,cn(yt,lt,new WeakSet);let InternalRenderTask=yt;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(e,s,i)=>{var _,$,at,Jl,ut;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var a=i(1),o=i(4),c=i(8);const h=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=h;class j{constructor(){cn(this,at);cn(this,_,!1);cn(this,$,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(vt,bt){const et=tt(this,$).get(vt);return et===void 0?bt:Object.assign(bt,et)}getRawValue(vt){return tt(this,$).get(vt)}remove(vt){if(tt(this,$).delete(vt),tt(this,$).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const bt of tt(this,$).values())if(bt instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(vt,bt){const et=tt(this,$).get(vt);let nt=!1;if(et!==void 0)for(const[st,gt]of Object.entries(bt))et[st]!==gt&&(nt=!0,et[st]=gt);else nt=!0,tt(this,$).set(vt,bt);nt&&Yt(this,at,Jl).call(this),bt instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(bt.constructor._type)}has(vt){return tt(this,$).has(vt)}getAll(){return tt(this,$).size>0?(0,a.objectFromMap)(tt(this,$)):null}setAll(vt){for(const[bt,et]of Object.entries(vt))this.setValue(bt,et)}get size(){return tt(this,$).size}resetModified(){tt(this,_)&&(dn(this,_,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(tt(this,$).size===0)return h;const vt=new Map,bt=new c.MurmurHash3_64,et=[],nt=Object.create(null);let st=!1;for(const[gt,lt]of tt(this,$)){const yt=lt instanceof o.AnnotationEditor?lt.serialize(!1,nt):lt;yt&&(vt.set(gt,yt),bt.update(`${gt}:${JSON.stringify(yt)}`),st||(st=!!yt.bitmap))}if(st)for(const gt of vt.values())gt.bitmap&&et.push(gt.bitmap);return vt.size>0?{map:vt,hash:bt.hexdigest(),transfers:et}:h}}_=new WeakMap,$=new WeakMap,at=new WeakSet,Jl=function(){tt(this,_)||(dn(this,_,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=j;class b extends j{constructor(bt){super();cn(this,ut);const{map:et,hash:nt,transfers:st}=bt.serializable,gt=structuredClone(et,st?{transfer:st}:null);dn(this,ut,{map:gt,hash:nt,transfers:st})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return tt(this,ut)}}ut=new WeakMap,s.PrintAnnotationStorage=b},(e,s,i)=>{var b,_,$,at,rt,ut,ot,vt,bt,et,nt,st,gt,lt,yt,_o,wo,xt,So,ko,_c,eu,tu,Ao,nu;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var a=i(5),o=i(1),c=i(6);const Ut=class Ut{constructor(kt){cn(this,yt);cn(this,b,"");cn(this,_,!1);cn(this,$,null);cn(this,at,null);cn(this,rt,null);cn(this,ut,!1);cn(this,ot,null);cn(this,vt,this.focusin.bind(this));cn(this,bt,this.focusout.bind(this));cn(this,et,!1);cn(this,nt,!1);cn(this,st,!1);xr(this,"_initialOptions",Object.create(null));xr(this,"_uiManager",null);xr(this,"_focusEventsAllowed",!0);xr(this,"_l10nPromise",null);cn(this,gt,!1);cn(this,lt,Ut._zIndex++);this.constructor===Ut&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=kt.parent,this.id=kt.id,this.width=this.height=null,this.pageIndex=kt.parent.pageIndex,this.name=kt.name,this.div=null,this._uiManager=kt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=kt.isCentered,this._structTreeParentId=null;const{rotation:Ft,rawDims:{pageWidth:Gt,pageHeight:At,pageX:it,pageY:dt}}=this.parent.viewport;this.rotation=Ft,this.pageRotation=(360+Ft-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Gt,At],this.pageTranslation=[it,dt];const[_t,Tt]=this.parentDimensions;this.x=kt.x/_t,this.y=kt.y/Tt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(kt){const Ft=new j({id:kt.parent.getNextId(),parent:kt.parent,uiManager:kt._uiManager});Ft.annotationElementId=kt.annotationElementId,Ft.deleted=!0,Ft._uiManager.addToAnnotationStorage(Ft)}static initialize(kt,Ft=null){if(Ut._l10nPromise||(Ut._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(At=>[At,kt.get(At)]))),Ft!=null&&Ft.strings)for(const At of Ft.strings)Ut._l10nPromise.set(At,kt.get(At));if(Ut._borderLineWidth!==-1)return;const Gt=getComputedStyle(document.documentElement);Ut._borderLineWidth=parseFloat(Gt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(kt,Ft){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(kt){return!1}static paste(kt,Ft){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return tt(this,gt)}set _isDraggable(kt){var Ft;dn(this,gt,kt),(Ft=this.div)==null||Ft.classList.toggle("draggable",kt)}center(){const[kt,Ft]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Ft/(kt*2),this.y+=this.width*kt/(Ft*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Ft/(kt*2),this.y-=this.width*kt/(Ft*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(kt){this._uiManager.addCommands(kt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=tt(this,lt)}setParent(kt){kt!==null&&(this.pageIndex=kt.pageIndex,this.pageDimensions=kt.pageDimensions),this.parent=kt}focusin(kt){this._focusEventsAllowed&&(tt(this,et)?dn(this,et,!1):this.parent.setSelected(this))}focusout(kt){var Gt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Ft=kt.relatedTarget;Ft!=null&&Ft.closest(`#${this.id}`)||(kt.preventDefault(),(Gt=this.parent)!=null&&Gt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(kt,Ft,Gt,At){const[it,dt]=this.parentDimensions;[Gt,At]=this.screenToPageTranslation(Gt,At),this.x=(kt+Gt)/it,this.y=(Ft+At)/dt,this.fixAndSetPosition()}translate(kt,Ft){Yt(this,yt,_o).call(this,this.parentDimensions,kt,Ft)}translateInPage(kt,Ft){Yt(this,yt,_o).call(this,this.pageDimensions,kt,Ft),this.div.scrollIntoView({block:"nearest"})}drag(kt,Ft){const[Gt,At]=this.parentDimensions;if(this.x+=kt/Gt,this.y+=Ft/At,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Dt,y:It}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Dt,It)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:it,y:dt}=this;const[_t,Tt]=Yt(this,yt,wo).call(this);it+=_t,dt+=Tt,this.div.style.left=`${(100*it).toFixed(2)}%`,this.div.style.top=`${(100*dt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[kt,Ft]=this.pageDimensions;let{x:Gt,y:At,width:it,height:dt}=this;switch(it*=kt,dt*=Ft,Gt*=kt,At*=Ft,this.rotation){case 0:Gt=Math.max(0,Math.min(kt-it,Gt)),At=Math.max(0,Math.min(Ft-dt,At));break;case 90:Gt=Math.max(0,Math.min(kt-dt,Gt)),At=Math.min(Ft,Math.max(it,At));break;case 180:Gt=Math.min(kt,Math.max(it,Gt)),At=Math.min(Ft,Math.max(dt,At));break;case 270:Gt=Math.min(kt,Math.max(dt,Gt)),At=Math.max(0,Math.min(Ft-it,At));break}this.x=Gt/=kt,this.y=At/=Ft;const[_t,Tt]=Yt(this,yt,wo).call(this);Gt+=_t,At+=Tt;const{style:Dt}=this.div;Dt.left=`${(100*Gt).toFixed(2)}%`,Dt.top=`${(100*At).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(kt,Ft){var Gt;return Yt(Gt=Ut,xt,So).call(Gt,kt,Ft,this.parentRotation)}pageTranslationToScreen(kt,Ft){var Gt;return Yt(Gt=Ut,xt,So).call(Gt,kt,Ft,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:kt,pageDimensions:[Ft,Gt]}=this,At=Ft*kt,it=Gt*kt;return o.FeatureTest.isCSSRoundSupported?[Math.round(At),Math.round(it)]:[At,it]}setDims(kt,Ft){var it;const[Gt,At]=this.parentDimensions;this.div.style.width=`${(100*kt/Gt).toFixed(2)}%`,tt(this,ut)||(this.div.style.height=`${(100*Ft/At).toFixed(2)}%`),(it=tt(this,$))==null||it.classList.toggle("small",kt<Ut.SMALL_EDITOR_SIZE||Ft<Ut.SMALL_EDITOR_SIZE)}fixDims(){const{style:kt}=this.div,{height:Ft,width:Gt}=kt,At=Gt.endsWith("%"),it=!tt(this,ut)&&Ft.endsWith("%");if(At&&it)return;const[dt,_t]=this.parentDimensions;At||(kt.width=`${(100*parseFloat(Gt)/dt).toFixed(2)}%`),!tt(this,ut)&&!it&&(kt.height=`${(100*parseFloat(Ft)/_t).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(tt(this,$))return;const kt=dn(this,$,document.createElement("button"));kt.className="altText";const Ft=await Ut._l10nPromise.get("editor_alt_text_button_label");kt.textContent=Ft,kt.setAttribute("aria-label",Ft),kt.tabIndex="0",kt.addEventListener("contextmenu",c.noContextMenu),kt.addEventListener("pointerdown",Gt=>Gt.stopPropagation()),kt.addEventListener("click",Gt=>{Gt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),kt.addEventListener("keydown",Gt=>{Gt.target===kt&&Gt.key==="Enter"&&(Gt.preventDefault(),this._uiManager.editAltText(this))}),Yt(this,yt,Ao).call(this),this.div.append(kt),Ut.SMALL_EDITOR_SIZE||(Ut.SMALL_EDITOR_SIZE=Math.min(128,Math.round(kt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:tt(this,b),decorative:tt(this,_)}}set altTextData({altText:kt,decorative:Ft}){tt(this,b)===kt&&tt(this,_)===Ft||(dn(this,b,kt),dn(this,_,Ft),Yt(this,yt,Ao).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",tt(this,vt)),this.div.addEventListener("focusout",tt(this,bt));const[kt,Ft]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Ft/kt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*kt/Ft).toFixed(2)}%`);const[Gt,At]=this.getInitialTranslation();return this.translate(Gt,At),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(kt){const{isMac:Ft}=o.FeatureTest.platform;if(kt.button!==0||kt.ctrlKey&&Ft){kt.preventDefault();return}dn(this,et,!0),Yt(this,yt,nu).call(this,kt)}moveInDOM(){var kt;(kt=this.parent)==null||kt.moveEditorInDOM(this)}_setParentAndPosition(kt,Ft,Gt){kt.changeParent(this),this.x=Ft,this.y=Gt,this.fixAndSetPosition()}getRect(kt,Ft){const Gt=this.parentScale,[At,it]=this.pageDimensions,[dt,_t]=this.pageTranslation,Tt=kt/Gt,Dt=Ft/Gt,It=this.x*At,Lt=this.y*it,on=this.width*At,vn=this.height*it;switch(this.rotation){case 0:return[It+Tt+dt,it-Lt-Dt-vn+_t,It+Tt+on+dt,it-Lt-Dt+_t];case 90:return[It+Dt+dt,it-Lt+Tt+_t,It+Dt+vn+dt,it-Lt+Tt+on+_t];case 180:return[It-Tt-on+dt,it-Lt+Dt+_t,It-Tt+dt,it-Lt+Dt+vn+_t];case 270:return[It-Dt-vn+dt,it-Lt-Tt-on+_t,It-Dt+dt,it-Lt-Tt+_t];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(kt,Ft){const[Gt,At,it,dt]=kt,_t=it-Gt,Tt=dt-At;switch(this.rotation){case 0:return[Gt,Ft-dt,_t,Tt];case 90:return[Gt,Ft-At,Tt,_t];case 180:return[it,Ft-At,_t,Tt];case 270:return[it,Ft-dt,Tt,_t];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){dn(this,st,!0)}disableEditMode(){dn(this,st,!1)}isInEditMode(){return tt(this,st)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var kt,Ft;(kt=this.div)==null||kt.addEventListener("focusin",tt(this,vt)),(Ft=this.div)==null||Ft.addEventListener("focusout",tt(this,bt))}serialize(kt=!1,Ft=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(kt,Ft,Gt){const At=new this.prototype.constructor({parent:Ft,id:Ft.getNextId(),uiManager:Gt});At.rotation=kt.rotation;const[it,dt]=At.pageDimensions,[_t,Tt,Dt,It]=At.getRectInCurrentCoords(kt.rect,dt);return At.x=_t/it,At.y=Tt/dt,At.width=Dt/it,At.height=It/dt,At}remove(){var kt;this.div.removeEventListener("focusin",tt(this,vt)),this.div.removeEventListener("focusout",tt(this,bt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(kt=tt(this,$))==null||kt.remove(),dn(this,$,null),dn(this,at,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Yt(this,yt,_c).call(this),tt(this,ot).classList.remove("hidden"))}select(){var kt;this.makeResizable(),(kt=this.div)==null||kt.classList.add("selectedEditor")}unselect(){var kt,Ft,Gt;(kt=tt(this,ot))==null||kt.classList.add("hidden"),(Ft=this.div)==null||Ft.classList.remove("selectedEditor"),(Gt=this.div)!=null&&Gt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(kt,Ft){}disableEditing(){tt(this,$)&&(tt(this,$).hidden=!0)}enableEditing(){tt(this,$)&&(tt(this,$).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return tt(this,nt)}set isEditing(kt){dn(this,nt,kt),this.parent&&(kt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(kt,Ft){dn(this,ut,!0);const Gt=kt/Ft,{style:At}=this.div;At.aspectRatio=Gt,At.height="auto"}static get MIN_SIZE(){return 16}};b=new WeakMap,_=new WeakMap,$=new WeakMap,at=new WeakMap,rt=new WeakMap,ut=new WeakMap,ot=new WeakMap,vt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,gt=new WeakMap,lt=new WeakMap,yt=new WeakSet,_o=function([kt,Ft],Gt,At){[Gt,At]=this.screenToPageTranslation(Gt,At),this.x+=Gt/kt,this.y+=At/Ft,this.fixAndSetPosition()},wo=function(){const[kt,Ft]=this.parentDimensions,{_borderLineWidth:Gt}=Ut,At=Gt/kt,it=Gt/Ft;switch(this.rotation){case 90:return[-At,it];case 180:return[At,it];case 270:return[At,-it];default:return[-At,-it]}},xt=new WeakSet,So=function(kt,Ft,Gt){switch(Gt){case 90:return[Ft,-kt];case 180:return[-kt,-Ft];case 270:return[-Ft,kt];default:return[kt,Ft]}},ko=function(kt){switch(kt){case 90:{const[Ft,Gt]=this.pageDimensions;return[0,-Ft/Gt,Gt/Ft,0]}case 180:return[-1,0,0,-1];case 270:{const[Ft,Gt]=this.pageDimensions;return[0,Ft/Gt,-Gt/Ft,0]}default:return[1,0,0,1]}},_c=function(){if(tt(this,ot))return;dn(this,ot,document.createElement("div")),tt(this,ot).classList.add("resizers");const kt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||kt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Ft of kt){const Gt=document.createElement("div");tt(this,ot).append(Gt),Gt.classList.add("resizer",Ft),Gt.addEventListener("pointerdown",Yt(this,yt,eu).bind(this,Ft)),Gt.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(tt(this,ot))},eu=function(kt,Ft){Ft.preventDefault();const{isMac:Gt}=o.FeatureTest.platform;if(Ft.button!==0||Ft.ctrlKey&&Gt)return;const At=Yt(this,yt,tu).bind(this,kt),it=this._isDraggable;this._isDraggable=!1;const dt={passive:!0,capture:!0};window.addEventListener("pointermove",At,dt);const _t=this.x,Tt=this.y,Dt=this.width,It=this.height,Lt=this.parent.div.style.cursor,on=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Ft.target).cursor;const vn=()=>{this._isDraggable=it,window.removeEventListener("pointerup",vn),window.removeEventListener("blur",vn),window.removeEventListener("pointermove",At,dt),this.parent.div.style.cursor=Lt,this.div.style.cursor=on;const un=this.x,kn=this.y,jn=this.width,Rn=this.height;un===_t&&kn===Tt&&jn===Dt&&Rn===It||this.addCommands({cmd:()=>{this.width=jn,this.height=Rn,this.x=un,this.y=kn;const[nn,rn]=this.parentDimensions;this.setDims(nn*jn,rn*Rn),this.fixAndSetPosition()},undo:()=>{this.width=Dt,this.height=It,this.x=_t,this.y=Tt;const[nn,rn]=this.parentDimensions;this.setDims(nn*Dt,rn*It),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",vn),window.addEventListener("blur",vn)},tu=function(kt,Ft){const[Gt,At]=this.parentDimensions,it=this.x,dt=this.y,_t=this.width,Tt=this.height,Dt=Ut.MIN_SIZE/Gt,It=Ut.MIN_SIZE/At,Lt=Bn=>Math.round(Bn*1e4)/1e4,on=Yt(this,yt,ko).call(this,this.rotation),vn=(Bn,Yn)=>[on[0]*Bn+on[2]*Yn,on[1]*Bn+on[3]*Yn],un=Yt(this,yt,ko).call(this,360-this.rotation),kn=(Bn,Yn)=>[un[0]*Bn+un[2]*Yn,un[1]*Bn+un[3]*Yn];let jn,Rn,nn=!1,rn=!1;switch(kt){case"topLeft":nn=!0,jn=(Bn,Yn)=>[0,0],Rn=(Bn,Yn)=>[Bn,Yn];break;case"topMiddle":jn=(Bn,Yn)=>[Bn/2,0],Rn=(Bn,Yn)=>[Bn/2,Yn];break;case"topRight":nn=!0,jn=(Bn,Yn)=>[Bn,0],Rn=(Bn,Yn)=>[0,Yn];break;case"middleRight":rn=!0,jn=(Bn,Yn)=>[Bn,Yn/2],Rn=(Bn,Yn)=>[0,Yn/2];break;case"bottomRight":nn=!0,jn=(Bn,Yn)=>[Bn,Yn],Rn=(Bn,Yn)=>[0,0];break;case"bottomMiddle":jn=(Bn,Yn)=>[Bn/2,Yn],Rn=(Bn,Yn)=>[Bn/2,0];break;case"bottomLeft":nn=!0,jn=(Bn,Yn)=>[0,Yn],Rn=(Bn,Yn)=>[Bn,0];break;case"middleLeft":rn=!0,jn=(Bn,Yn)=>[0,Yn/2],Rn=(Bn,Yn)=>[Bn,Yn/2];break}const pt=jn(_t,Tt),Rt=Rn(_t,Tt);let zt=vn(...Rt);const Kt=Lt(it+zt[0]),hn=Lt(dt+zt[1]);let Sn=1,En=1,[Qt,In]=this.screenToPageTranslation(Ft.movementX,Ft.movementY);if([Qt,In]=kn(Qt/Gt,In/At),nn){const Bn=Math.hypot(_t,Tt);Sn=En=Math.max(Math.min(Math.hypot(Rt[0]-pt[0]-Qt,Rt[1]-pt[1]-In)/Bn,1/_t,1/Tt),Dt/_t,It/Tt)}else rn?Sn=Math.max(Dt,Math.min(1,Math.abs(Rt[0]-pt[0]-Qt)))/_t:En=Math.max(It,Math.min(1,Math.abs(Rt[1]-pt[1]-In)))/Tt;const Dn=Lt(_t*Sn),nr=Lt(Tt*En);zt=vn(...Rn(Dn,nr));const Jn=Kt-zt[0],or=hn-zt[1];this.width=Dn,this.height=nr,this.x=Jn,this.y=or,this.setDims(Gt*Dn,At*nr),this.fixAndSetPosition()},Ao=async function(){var Gt;const kt=tt(this,$);if(!kt)return;if(!tt(this,b)&&!tt(this,_)){kt.classList.remove("done"),(Gt=tt(this,at))==null||Gt.remove();return}Ut._l10nPromise.get("editor_alt_text_edit_button_label").then(At=>{kt.setAttribute("aria-label",At)});let Ft=tt(this,at);if(!Ft){dn(this,at,Ft=document.createElement("span")),Ft.className="tooltip",Ft.setAttribute("role","tooltip");const At=Ft.id=`alt-text-tooltip-${this.id}`;kt.setAttribute("aria-describedby",At);const it=100;kt.addEventListener("mouseenter",()=>{dn(this,rt,setTimeout(()=>{dn(this,rt,null),tt(this,at).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},it))}),kt.addEventListener("mouseleave",()=>{var dt;clearTimeout(tt(this,rt)),dn(this,rt,null),(dt=tt(this,at))==null||dt.classList.remove("show")})}kt.classList.add("done"),Ft.innerText=tt(this,_)?await Ut._l10nPromise.get("editor_alt_text_decorative_tooltip"):tt(this,b),Ft.parentNode||kt.append(Ft)},nu=function(kt){if(!this._isDraggable)return;const Ft=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Gt,At;Ft&&(Gt={passive:!0,capture:!0},At=dt=>{const[_t,Tt]=this.screenToPageTranslation(dt.movementX,dt.movementY);this._uiManager.dragSelectedEditors(_t,Tt)},window.addEventListener("pointermove",At,Gt));const it=()=>{if(window.removeEventListener("pointerup",it),window.removeEventListener("blur",it),Ft&&window.removeEventListener("pointermove",At,Gt),dn(this,et,!1),!this._uiManager.endDragSession()){const{isMac:dt}=o.FeatureTest.platform;kt.ctrlKey&&!dt||kt.shiftKey||kt.metaKey&&dt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",it),window.addEventListener("blur",it)},cn(Ut,xt),xr(Ut,"_borderLineWidth",-1),xr(Ut,"_colorManager",new a.ColorManager),xr(Ut,"_zIndex",1),xr(Ut,"SMALL_EDITOR_SIZE",0);let h=Ut;s.AnnotationEditor=h;class j extends h{constructor(kt){super(kt),this.annotationElementId=kt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,s,i)=>{var ut,ot,vt,bt,et,Ro,gt,lt,yt,ct,mt,ru,ht,wt,jt,Xt,Bt,Wt,Ut,$t,kt,Ft,Gt,At,it,dt,_t,Tt,Dt,It,Lt,on,vn,un,kn,jn,Rn,nn,rn,pt,Rt,zt,Kt,hn,Sn,En,Qt,su,Co,jo,Bs,To,Po,Nr,ms,iu,au,Do,gs,No;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=c,s.opacityToHex=h;var a=i(1),o=i(6);function c(Pn,Ot,_n){for(const Fn of _n)Ot.addEventListener(Fn,Pn[Fn].bind(Pn))}function h(Pn){return Math.round(Math.min(255,Math.max(1,255*Pn))).toString(16).padStart(2,"0")}class j{constructor(){cn(this,ut,0)}getId(){return`${a.AnnotationEditorPrefix}${ps(this,ut)._++}`}}ut=new WeakMap;const st=class st{constructor(){cn(this,et);cn(this,ot,(0,a.getUuid)());cn(this,vt,0);cn(this,bt,null)}static get _isSVGFittingCanvas(){const Ot='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Fn=new OffscreenCanvas(1,3).getContext("2d"),Zn=new Image;Zn.src=Ot;const Qn=Zn.decode().then(()=>(Fn.drawImage(Zn,0,0,1,1,0,0,1,3),new Uint32Array(Fn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",Qn)}async getFromFile(Ot){const{lastModified:_n,name:Fn,size:Zn,type:Qn}=Ot;return Yt(this,et,Ro).call(this,`${_n}_${Fn}_${Zn}_${Qn}`,Ot)}async getFromUrl(Ot){return Yt(this,et,Ro).call(this,Ot,Ot)}async getFromId(Ot){tt(this,bt)||dn(this,bt,new Map);const _n=tt(this,bt).get(Ot);return _n?_n.bitmap?(_n.refCounter+=1,_n):_n.file?this.getFromFile(_n.file):this.getFromUrl(_n.url):null}getSvgUrl(Ot){const _n=tt(this,bt).get(Ot);return _n!=null&&_n.isSvg?_n.svgUrl:null}deleteId(Ot){tt(this,bt)||dn(this,bt,new Map);const _n=tt(this,bt).get(Ot);_n&&(_n.refCounter-=1,_n.refCounter===0&&(_n.bitmap=null))}isValidId(Ot){return Ot.startsWith(`image_${tt(this,ot)}_`)}};ot=new WeakMap,vt=new WeakMap,bt=new WeakMap,et=new WeakSet,Ro=async function(Ot,_n){tt(this,bt)||dn(this,bt,new Map);let Fn=tt(this,bt).get(Ot);if(Fn===null)return null;if(Fn!=null&&Fn.bitmap)return Fn.refCounter+=1,Fn;try{Fn||(Fn={bitmap:null,id:`image_${tt(this,ot)}_${ps(this,vt)._++}`,refCounter:0,isSvg:!1});let Zn;if(typeof _n=="string"){Fn.url=_n;const Qn=await fetch(_n);if(!Qn.ok)throw new Error(Qn.statusText);Zn=await Qn.blob()}else Zn=Fn.file=_n;if(Zn.type==="image/svg+xml"){const Qn=st._isSVGFittingCanvas,$n=new FileReader,Nt=new Image,Pt=new Promise((Zt,gn)=>{Nt.onload=()=>{Fn.bitmap=Nt,Fn.isSvg=!0,Zt()},$n.onload=async()=>{const xn=Fn.svgUrl=$n.result;Nt.src=await Qn?`${xn}#svgView(preserveAspectRatio(none))`:xn},Nt.onerror=$n.onerror=gn});$n.readAsDataURL(Zn),await Pt}else Fn.bitmap=await createImageBitmap(Zn);Fn.refCounter=1}catch(Zn){console.error(Zn),Fn=null}return tt(this,bt).set(Ot,Fn),Fn&&tt(this,bt).set(Fn.id,Fn),Fn};let b=st;class _{constructor(Ot=128){cn(this,gt,[]);cn(this,lt,!1);cn(this,yt);cn(this,ct,-1);dn(this,yt,Ot)}add({cmd:Ot,undo:_n,mustExec:Fn,type:Zn=NaN,overwriteIfSameType:Qn=!1,keepUndo:$n=!1}){if(Fn&&Ot(),tt(this,lt))return;const Nt={cmd:Ot,undo:_n,type:Zn};if(tt(this,ct)===-1){tt(this,gt).length>0&&(tt(this,gt).length=0),dn(this,ct,0),tt(this,gt).push(Nt);return}if(Qn&&tt(this,gt)[tt(this,ct)].type===Zn){$n&&(Nt.undo=tt(this,gt)[tt(this,ct)].undo),tt(this,gt)[tt(this,ct)]=Nt;return}const Pt=tt(this,ct)+1;Pt===tt(this,yt)?tt(this,gt).splice(0,1):(dn(this,ct,Pt),Pt<tt(this,gt).length&&tt(this,gt).splice(Pt)),tt(this,gt).push(Nt)}undo(){tt(this,ct)!==-1&&(dn(this,lt,!0),tt(this,gt)[tt(this,ct)].undo(),dn(this,lt,!1),dn(this,ct,tt(this,ct)-1))}redo(){tt(this,ct)<tt(this,gt).length-1&&(dn(this,ct,tt(this,ct)+1),dn(this,lt,!0),tt(this,gt)[tt(this,ct)].cmd(),dn(this,lt,!1))}hasSomethingToUndo(){return tt(this,ct)!==-1}hasSomethingToRedo(){return tt(this,ct)<tt(this,gt).length-1}destroy(){dn(this,gt,null)}}gt=new WeakMap,lt=new WeakMap,yt=new WeakMap,ct=new WeakMap,s.CommandManager=_;class ${constructor(Ot){cn(this,mt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_n}=a.FeatureTest.platform;for(const[Fn,Zn,Qn={}]of Ot)for(const $n of Fn){const Nt=$n.startsWith("mac+");_n&&Nt?(this.callbacks.set($n.slice(4),{callback:Zn,options:Qn}),this.allKeys.add($n.split("+").at(-1))):!_n&&!Nt&&(this.callbacks.set($n,{callback:Zn,options:Qn}),this.allKeys.add($n.split("+").at(-1)))}}exec(Ot,_n){if(!this.allKeys.has(_n.key))return;const Fn=this.callbacks.get(Yt(this,mt,ru).call(this,_n));if(!Fn)return;const{callback:Zn,options:{bubbles:Qn=!1,args:$n=[],checker:Nt=null}}=Fn;Nt&&!Nt(Ot,_n)||(Zn.bind(Ot,...$n)(),Qn||(_n.stopPropagation(),_n.preventDefault()))}}mt=new WeakSet,ru=function(Ot){Ot.altKey&&this.buffer.push("alt"),Ot.ctrlKey&&this.buffer.push("ctrl"),Ot.metaKey&&this.buffer.push("meta"),Ot.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ot.key);const _n=this.buffer.join("+");return this.buffer.length=0,_n},s.KeyboardManager=$;const Ct=class Ct{get _colors(){const Ot=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(Ot),(0,a.shadow)(this,"_colors",Ot)}convert(Ot){const _n=(0,o.getRGB)(Ot);if(!window.matchMedia("(forced-colors: active)").matches)return _n;for(const[Fn,Zn]of this._colors)if(Zn.every((Qn,$n)=>Qn===_n[$n]))return Ct._colorsMapping.get(Fn);return _n}getHexCode(Ot){const _n=this._colors.get(Ot);return _n?a.Util.makeHexColor(..._n):Ot}};xr(Ct,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let at=Ct;s.ColorManager=at;const ir=class ir{constructor(Ot,_n,Fn,Zn,Qn,$n){cn(this,Qt);cn(this,ht,null);cn(this,wt,new Map);cn(this,jt,new Map);cn(this,Xt,null);cn(this,Bt,null);cn(this,Wt,new _);cn(this,Ut,0);cn(this,$t,new Set);cn(this,kt,null);cn(this,Ft,null);cn(this,Gt,new Set);cn(this,At,null);cn(this,it,new j);cn(this,dt,!1);cn(this,_t,!1);cn(this,Tt,null);cn(this,Dt,a.AnnotationEditorType.NONE);cn(this,It,new Set);cn(this,Lt,null);cn(this,on,this.blur.bind(this));cn(this,vn,this.focus.bind(this));cn(this,un,this.copy.bind(this));cn(this,kn,this.cut.bind(this));cn(this,jn,this.paste.bind(this));cn(this,Rn,this.keydown.bind(this));cn(this,nn,this.onEditingAction.bind(this));cn(this,rn,this.onPageChanging.bind(this));cn(this,pt,this.onScaleChanging.bind(this));cn(this,Rt,this.onRotationChanging.bind(this));cn(this,zt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});cn(this,Kt,[0,0]);cn(this,hn,null);cn(this,Sn,null);cn(this,En,null);dn(this,Sn,Ot),dn(this,En,_n),dn(this,Xt,Fn),this._eventBus=Zn,this._eventBus._on("editingaction",tt(this,nn)),this._eventBus._on("pagechanging",tt(this,rn)),this._eventBus._on("scalechanging",tt(this,pt)),this._eventBus._on("rotationchanging",tt(this,Rt)),dn(this,Bt,Qn.annotationStorage),dn(this,At,Qn.filterFactory),dn(this,Lt,$n),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Ot=ir.prototype,_n=Qn=>{const{activeElement:$n}=document;return $n&&tt(Qn,Sn).contains($n)&&Qn.hasSomethingToControl()},Fn=this.TRANSLATE_SMALL,Zn=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new $([[["ctrl+a","mac+meta+a"],Ot.selectAll],[["ctrl+z","mac+meta+z"],Ot.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Ot.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Ot.delete],[["Escape","mac+Escape"],Ot.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Ot.translateSelectedEditors,{args:[-Fn,0],checker:_n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ot.translateSelectedEditors,{args:[-Zn,0],checker:_n}],[["ArrowRight","mac+ArrowRight"],Ot.translateSelectedEditors,{args:[Fn,0],checker:_n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ot.translateSelectedEditors,{args:[Zn,0],checker:_n}],[["ArrowUp","mac+ArrowUp"],Ot.translateSelectedEditors,{args:[0,-Fn],checker:_n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ot.translateSelectedEditors,{args:[0,-Zn],checker:_n}],[["ArrowDown","mac+ArrowDown"],Ot.translateSelectedEditors,{args:[0,Fn],checker:_n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ot.translateSelectedEditors,{args:[0,Zn],checker:_n}]]))}destroy(){Yt(this,Qt,Bs).call(this),Yt(this,Qt,Co).call(this),this._eventBus._off("editingaction",tt(this,nn)),this._eventBus._off("pagechanging",tt(this,rn)),this._eventBus._off("scalechanging",tt(this,pt)),this._eventBus._off("rotationchanging",tt(this,Rt));for(const Ot of tt(this,jt).values())Ot.destroy();tt(this,jt).clear(),tt(this,wt).clear(),tt(this,Gt).clear(),dn(this,ht,null),tt(this,It).clear(),tt(this,Wt).destroy(),tt(this,Xt).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",tt(this,Lt)?tt(this,At).addHCMFilter(tt(this,Lt).foreground,tt(this,Lt).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(tt(this,Sn)).direction)}editAltText(Ot){var _n;(_n=tt(this,Xt))==null||_n.editAltText(this,Ot)}onPageChanging({pageNumber:Ot}){dn(this,Ut,Ot-1)}focusMainContainer(){tt(this,Sn).focus()}findParent(Ot,_n){for(const Fn of tt(this,jt).values()){const{x:Zn,y:Qn,width:$n,height:Nt}=Fn.div.getBoundingClientRect();if(Ot>=Zn&&Ot<=Zn+$n&&_n>=Qn&&_n<=Qn+Nt)return Fn}return null}disableUserSelect(Ot=!1){tt(this,En).classList.toggle("noUserSelect",Ot)}addShouldRescale(Ot){tt(this,Gt).add(Ot)}removeShouldRescale(Ot){tt(this,Gt).delete(Ot)}onScaleChanging({scale:Ot}){this.commitOrRemove(),this.viewParameters.realScale=Ot*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _n of tt(this,Gt))_n.onScaleChanging()}onRotationChanging({pagesRotation:Ot}){this.commitOrRemove(),this.viewParameters.rotation=Ot}addToAnnotationStorage(Ot){!Ot.isEmpty()&&tt(this,Bt)&&!tt(this,Bt).has(Ot.id)&&tt(this,Bt).setValue(Ot.id,Ot)}blur(){if(!this.hasSelection)return;const{activeElement:Ot}=document;for(const _n of tt(this,It))if(_n.div.contains(Ot)){dn(this,Tt,[_n,Ot]),_n._focusEventsAllowed=!1;break}}focus(){if(!tt(this,Tt))return;const[Ot,_n]=tt(this,Tt);dn(this,Tt,null),_n.addEventListener("focusin",()=>{Ot._focusEventsAllowed=!0},{once:!0}),_n.focus()}addEditListeners(){Yt(this,Qt,jo).call(this),Yt(this,Qt,To).call(this)}removeEditListeners(){Yt(this,Qt,Bs).call(this),Yt(this,Qt,Po).call(this)}copy(Ot){var Fn;if(Ot.preventDefault(),(Fn=tt(this,ht))==null||Fn.commitOrRemove(),!this.hasSelection)return;const _n=[];for(const Zn of tt(this,It)){const Qn=Zn.serialize(!0);Qn&&_n.push(Qn)}_n.length!==0&&Ot.clipboardData.setData("application/pdfjs",JSON.stringify(_n))}cut(Ot){this.copy(Ot),this.delete()}paste(Ot){Ot.preventDefault();const{clipboardData:_n}=Ot;for(const Qn of _n.items)for(const $n of tt(this,Ft))if($n.isHandlingMimeForPasting(Qn.type)){$n.paste(Qn,this.currentLayer);return}let Fn=_n.getData("application/pdfjs");if(!Fn)return;try{Fn=JSON.parse(Fn)}catch(Qn){(0,a.warn)(`paste: "${Qn.message}".`);return}if(!Array.isArray(Fn))return;this.unselectAll();const Zn=this.currentLayer;try{const Qn=[];for(const Pt of Fn){const Zt=Zn.deserialize(Pt);if(!Zt)return;Qn.push(Zt)}const $n=()=>{for(const Pt of Qn)Yt(this,Qt,Do).call(this,Pt);Yt(this,Qt,No).call(this,Qn)},Nt=()=>{for(const Pt of Qn)Pt.remove()};this.addCommands({cmd:$n,undo:Nt,mustExec:!0})}catch(Qn){(0,a.warn)(`paste: "${Qn.message}".`)}}keydown(Ot){var _n;(_n=this.getActive())!=null&&_n.shouldGetKeyboardEvents()||ir._keyboardManager.exec(this,Ot)}onEditingAction(Ot){["undo","redo","delete","selectAll"].includes(Ot.name)&&this[Ot.name]()}setEditingState(Ot){Ot?(Yt(this,Qt,su).call(this),Yt(this,Qt,jo).call(this),Yt(this,Qt,To).call(this),Yt(this,Qt,Nr).call(this,{isEditing:tt(this,Dt)!==a.AnnotationEditorType.NONE,isEmpty:Yt(this,Qt,gs).call(this),hasSomethingToUndo:tt(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:tt(this,Wt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Yt(this,Qt,Co).call(this),Yt(this,Qt,Bs).call(this),Yt(this,Qt,Po).call(this),Yt(this,Qt,Nr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Ot){if(!tt(this,Ft)){dn(this,Ft,Ot);for(const _n of tt(this,Ft))Yt(this,Qt,ms).call(this,_n.defaultPropertiesToUpdate)}}getId(){return tt(this,it).getId()}get currentLayer(){return tt(this,jt).get(tt(this,Ut))}getLayer(Ot){return tt(this,jt).get(Ot)}get currentPageIndex(){return tt(this,Ut)}addLayer(Ot){tt(this,jt).set(Ot.pageIndex,Ot),tt(this,dt)?Ot.enable():Ot.disable()}removeLayer(Ot){tt(this,jt).delete(Ot.pageIndex)}updateMode(Ot,_n=null){if(tt(this,Dt)!==Ot){if(dn(this,Dt,Ot),Ot===a.AnnotationEditorType.NONE){this.setEditingState(!1),Yt(this,Qt,au).call(this);return}this.setEditingState(!0),Yt(this,Qt,iu).call(this),this.unselectAll();for(const Fn of tt(this,jt).values())Fn.updateMode(Ot);if(_n){for(const Fn of tt(this,wt).values())if(Fn.annotationElementId===_n){this.setSelected(Fn),Fn.enterInEditMode();break}}}}updateToolbar(Ot){Ot!==tt(this,Dt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Ot})}updateParams(Ot,_n){if(tt(this,Ft)){if(Ot===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Ot);return}for(const Fn of tt(this,It))Fn.updateParams(Ot,_n);for(const Fn of tt(this,Ft))Fn.updateDefaultParams(Ot,_n)}}enableWaiting(Ot=!1){if(tt(this,_t)!==Ot){dn(this,_t,Ot);for(const _n of tt(this,jt).values())Ot?_n.disableClick():_n.enableClick(),_n.div.classList.toggle("waiting",Ot)}}getEditors(Ot){const _n=[];for(const Fn of tt(this,wt).values())Fn.pageIndex===Ot&&_n.push(Fn);return _n}getEditor(Ot){return tt(this,wt).get(Ot)}addEditor(Ot){tt(this,wt).set(Ot.id,Ot)}removeEditor(Ot){var _n;tt(this,wt).delete(Ot.id),this.unselect(Ot),(!Ot.annotationElementId||!tt(this,$t).has(Ot.annotationElementId))&&((_n=tt(this,Bt))==null||_n.remove(Ot.id))}addDeletedAnnotationElement(Ot){tt(this,$t).add(Ot.annotationElementId),Ot.deleted=!0}isDeletedAnnotationElement(Ot){return tt(this,$t).has(Ot)}removeDeletedAnnotationElement(Ot){tt(this,$t).delete(Ot.annotationElementId),Ot.deleted=!1}setActiveEditor(Ot){tt(this,ht)!==Ot&&(dn(this,ht,Ot),Ot&&Yt(this,Qt,ms).call(this,Ot.propertiesToUpdate))}toggleSelected(Ot){if(tt(this,It).has(Ot)){tt(this,It).delete(Ot),Ot.unselect(),Yt(this,Qt,Nr).call(this,{hasSelectedEditor:this.hasSelection});return}tt(this,It).add(Ot),Ot.select(),Yt(this,Qt,ms).call(this,Ot.propertiesToUpdate),Yt(this,Qt,Nr).call(this,{hasSelectedEditor:!0})}setSelected(Ot){for(const _n of tt(this,It))_n!==Ot&&_n.unselect();tt(this,It).clear(),tt(this,It).add(Ot),Ot.select(),Yt(this,Qt,ms).call(this,Ot.propertiesToUpdate),Yt(this,Qt,Nr).call(this,{hasSelectedEditor:!0})}isSelected(Ot){return tt(this,It).has(Ot)}unselect(Ot){Ot.unselect(),tt(this,It).delete(Ot),Yt(this,Qt,Nr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return tt(this,It).size!==0}undo(){tt(this,Wt).undo(),Yt(this,Qt,Nr).call(this,{hasSomethingToUndo:tt(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Yt(this,Qt,gs).call(this)})}redo(){tt(this,Wt).redo(),Yt(this,Qt,Nr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:tt(this,Wt).hasSomethingToRedo(),isEmpty:Yt(this,Qt,gs).call(this)})}addCommands(Ot){tt(this,Wt).add(Ot),Yt(this,Qt,Nr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Yt(this,Qt,gs).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Ot=[...tt(this,It)],_n=()=>{for(const Zn of Ot)Zn.remove()},Fn=()=>{for(const Zn of Ot)Yt(this,Qt,Do).call(this,Zn)};this.addCommands({cmd:_n,undo:Fn,mustExec:!0})}commitOrRemove(){var Ot;(Ot=tt(this,ht))==null||Ot.commitOrRemove()}hasSomethingToControl(){return tt(this,ht)||this.hasSelection}selectAll(){for(const Ot of tt(this,It))Ot.commit();Yt(this,Qt,No).call(this,tt(this,wt).values())}unselectAll(){if(tt(this,ht)){tt(this,ht).commitOrRemove();return}if(this.hasSelection){for(const Ot of tt(this,It))Ot.unselect();tt(this,It).clear(),Yt(this,Qt,Nr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Ot,_n,Fn=!1){if(Fn||this.commitOrRemove(),!this.hasSelection)return;tt(this,Kt)[0]+=Ot,tt(this,Kt)[1]+=_n;const[Zn,Qn]=tt(this,Kt),$n=[...tt(this,It)],Nt=1e3;tt(this,hn)&&clearTimeout(tt(this,hn)),dn(this,hn,setTimeout(()=>{dn(this,hn,null),tt(this,Kt)[0]=tt(this,Kt)[1]=0,this.addCommands({cmd:()=>{for(const Pt of $n)tt(this,wt).has(Pt.id)&&Pt.translateInPage(Zn,Qn)},undo:()=>{for(const Pt of $n)tt(this,wt).has(Pt.id)&&Pt.translateInPage(-Zn,-Qn)},mustExec:!1})},Nt));for(const Pt of $n)Pt.translateInPage(Ot,_n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),dn(this,kt,new Map);for(const Ot of tt(this,It))tt(this,kt).set(Ot,{savedX:Ot.x,savedY:Ot.y,savedPageIndex:Ot.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!tt(this,kt))return!1;this.disableUserSelect(!1);const Ot=tt(this,kt);dn(this,kt,null);let _n=!1;for(const[{x:Zn,y:Qn,pageIndex:$n},Nt]of Ot)Nt.newX=Zn,Nt.newY=Qn,Nt.newPageIndex=$n,_n||(_n=Zn!==Nt.savedX||Qn!==Nt.savedY||$n!==Nt.savedPageIndex);if(!_n)return!1;const Fn=(Zn,Qn,$n,Nt)=>{if(tt(this,wt).has(Zn.id)){const Pt=tt(this,jt).get(Nt);Pt?Zn._setParentAndPosition(Pt,Qn,$n):(Zn.pageIndex=Nt,Zn.x=Qn,Zn.y=$n)}};return this.addCommands({cmd:()=>{for(const[Zn,{newX:Qn,newY:$n,newPageIndex:Nt}]of Ot)Fn(Zn,Qn,$n,Nt)},undo:()=>{for(const[Zn,{savedX:Qn,savedY:$n,savedPageIndex:Nt}]of Ot)Fn(Zn,Qn,$n,Nt)},mustExec:!0}),!0}dragSelectedEditors(Ot,_n){if(tt(this,kt))for(const Fn of tt(this,kt).keys())Fn.drag(Ot,_n)}rebuild(Ot){if(Ot.parent===null){const _n=this.getLayer(Ot.pageIndex);_n?(_n.changeParent(Ot),_n.addOrRebuild(Ot)):(this.addEditor(Ot),this.addToAnnotationStorage(Ot),Ot.rebuild())}else Ot.parent.addOrRebuild(Ot)}isActive(Ot){return tt(this,ht)===Ot}getActive(){return tt(this,ht)}getMode(){return tt(this,Dt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new b)}};ht=new WeakMap,wt=new WeakMap,jt=new WeakMap,Xt=new WeakMap,Bt=new WeakMap,Wt=new WeakMap,Ut=new WeakMap,$t=new WeakMap,kt=new WeakMap,Ft=new WeakMap,Gt=new WeakMap,At=new WeakMap,it=new WeakMap,dt=new WeakMap,_t=new WeakMap,Tt=new WeakMap,Dt=new WeakMap,It=new WeakMap,Lt=new WeakMap,on=new WeakMap,vn=new WeakMap,un=new WeakMap,kn=new WeakMap,jn=new WeakMap,Rn=new WeakMap,nn=new WeakMap,rn=new WeakMap,pt=new WeakMap,Rt=new WeakMap,zt=new WeakMap,Kt=new WeakMap,hn=new WeakMap,Sn=new WeakMap,En=new WeakMap,Qt=new WeakSet,su=function(){window.addEventListener("focus",tt(this,vn)),window.addEventListener("blur",tt(this,on))},Co=function(){window.removeEventListener("focus",tt(this,vn)),window.removeEventListener("blur",tt(this,on))},jo=function(){window.addEventListener("keydown",tt(this,Rn),{capture:!0})},Bs=function(){window.removeEventListener("keydown",tt(this,Rn),{capture:!0})},To=function(){document.addEventListener("copy",tt(this,un)),document.addEventListener("cut",tt(this,kn)),document.addEventListener("paste",tt(this,jn))},Po=function(){document.removeEventListener("copy",tt(this,un)),document.removeEventListener("cut",tt(this,kn)),document.removeEventListener("paste",tt(this,jn))},Nr=function(Ot){Object.entries(Ot).some(([Fn,Zn])=>tt(this,zt)[Fn]!==Zn)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(tt(this,zt),Ot)})},ms=function(Ot){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Ot})},iu=function(){if(!tt(this,dt)){dn(this,dt,!0);for(const Ot of tt(this,jt).values())Ot.enable()}},au=function(){if(this.unselectAll(),tt(this,dt)){dn(this,dt,!1);for(const Ot of tt(this,jt).values())Ot.disable()}},Do=function(Ot){const _n=tt(this,jt).get(Ot.pageIndex);_n?_n.addOrRebuild(Ot):this.addEditor(Ot)},gs=function(){if(tt(this,wt).size===0)return!0;if(tt(this,wt).size===1)for(const Ot of tt(this,wt).values())return Ot.isEmpty();return!1},No=function(Ot){tt(this,It).clear();for(const _n of Ot)_n.isEmpty()||(tt(this,It).add(_n),_n.select());Yt(this,Qt,Nr).call(this,{hasSelectedEditor:!0})},xr(ir,"TRANSLATE_SMALL",1),xr(ir,"TRANSLATE_BIG",10);let rt=ir;s.AnnotationEditorUIManager=rt},(e,s,i)=>{var Ut,$t,kt,Ft,Gt,At,it,dt,_t,Tt,Dt,It,ts,ns,Io,Ws,Vs,xs,ys;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=ct,s.getColorValues=wt,s.getCurrentTransform=jt,s.getCurrentTransformInverse=Xt,s.getFilenameFromUrl=et,s.getPdfFilenameFromUrl=nt,s.getRGB=ht,s.getXfaPageViewport=Ct,s.isDataScheme=vt,s.isPdfFile=bt,s.isValidFetchUrl=gt,s.loadScript=yt,s.noContextMenu=lt,s.setLayerDimensions=Bt;var a=i(7),o=i(1);const c="http://www.w3.org/2000/svg",Wt=class Wt{};xr(Wt,"CSS",96),xr(Wt,"PDF",72),xr(Wt,"PDF_TO_CSS_UNITS",Wt.CSS/Wt.PDF);let h=Wt;s.PixelsPerInch=h;class j extends a.BaseFilterFactory{constructor({docId:pt,ownerDocument:Rt=globalThis.document}={}){super();cn(this,It);cn(this,Ut);cn(this,$t);cn(this,kt);cn(this,Ft);cn(this,Gt);cn(this,At);cn(this,it);cn(this,dt);cn(this,_t);cn(this,Tt);cn(this,Dt,0);dn(this,kt,pt),dn(this,Ft,Rt)}addFilter(pt){if(!pt)return"none";let Rt=tt(this,It,ts).get(pt);if(Rt)return Rt;let zt,Kt,hn,Sn;if(pt.length===1){const Dn=pt[0],nr=new Array(256);for(let Jn=0;Jn<256;Jn++)nr[Jn]=Dn[Jn]/255;Sn=zt=Kt=hn=nr.join(",")}else{const[Dn,nr,Jn]=pt,or=new Array(256),Bn=new Array(256),Yn=new Array(256);for(let ar=0;ar<256;ar++)or[ar]=Dn[ar]/255,Bn[ar]=nr[ar]/255,Yn[ar]=Jn[ar]/255;zt=or.join(","),Kt=Bn.join(","),hn=Yn.join(","),Sn=`${zt}${Kt}${hn}`}if(Rt=tt(this,It,ts).get(Sn),Rt)return tt(this,It,ts).set(pt,Rt),Rt;const En=`g_${tt(this,kt)}_transfer_map_${ps(this,Dt)._++}`,Qt=`url(#${En})`;tt(this,It,ts).set(pt,Qt),tt(this,It,ts).set(Sn,Qt);const In=Yt(this,It,Ws).call(this,En);return Yt(this,It,xs).call(this,zt,Kt,hn,In),Qt}addHCMFilter(pt,Rt){var nr;const zt=`${pt}-${Rt}`;if(tt(this,At)===zt)return tt(this,it);if(dn(this,At,zt),dn(this,it,"none"),(nr=tt(this,Gt))==null||nr.remove(),!pt||!Rt)return tt(this,it);const Kt=Yt(this,It,ys).call(this,pt);pt=o.Util.makeHexColor(...Kt);const hn=Yt(this,It,ys).call(this,Rt);if(Rt=o.Util.makeHexColor(...hn),tt(this,It,ns).style.color="",pt==="#000000"&&Rt==="#ffffff"||pt===Rt)return tt(this,it);const Sn=new Array(256);for(let Jn=0;Jn<=255;Jn++){const or=Jn/255;Sn[Jn]=or<=.03928?or/12.92:((or+.055)/1.055)**2.4}const En=Sn.join(","),Qt=`g_${tt(this,kt)}_hcm_filter`,In=dn(this,dt,Yt(this,It,Ws).call(this,Qt));Yt(this,It,xs).call(this,En,En,En,In),Yt(this,It,Io).call(this,In);const Dn=(Jn,or)=>{const Bn=Kt[Jn]/255,Yn=hn[Jn]/255,ar=new Array(or+1);for(let dr=0;dr<=or;dr++)ar[dr]=Bn+dr/or*(Yn-Bn);return ar.join(",")};return Yt(this,It,xs).call(this,Dn(0,5),Dn(1,5),Dn(2,5),In),dn(this,it,`url(#${Qt})`),tt(this,it)}addHighlightHCMFilter(pt,Rt,zt,Kt){var Yn;const hn=`${pt}-${Rt}-${zt}-${Kt}`;if(tt(this,_t)===hn)return tt(this,Tt);if(dn(this,_t,hn),dn(this,Tt,"none"),(Yn=tt(this,dt))==null||Yn.remove(),!pt||!Rt)return tt(this,Tt);const[Sn,En]=[pt,Rt].map(Yt(this,It,ys).bind(this));let Qt=Math.round(.2126*Sn[0]+.7152*Sn[1]+.0722*Sn[2]),In=Math.round(.2126*En[0]+.7152*En[1]+.0722*En[2]),[Dn,nr]=[zt,Kt].map(Yt(this,It,ys).bind(this));In<Qt&&([Qt,In,Dn,nr]=[In,Qt,nr,Dn]),tt(this,It,ns).style.color="";const Jn=(ar,dr,An)=>{const Vt=new Array(256),ln=(In-Qt)/An,Ln=ar/255,ir=(dr-ar)/(255*An);let Pn=0;for(let Ot=0;Ot<=An;Ot++){const _n=Math.round(Qt+Ot*ln),Fn=Ln+Ot*ir;for(let Zn=Pn;Zn<=_n;Zn++)Vt[Zn]=Fn;Pn=_n+1}for(let Ot=Pn;Ot<256;Ot++)Vt[Ot]=Vt[Pn-1];return Vt.join(",")},or=`g_${tt(this,kt)}_hcm_highlight_filter`,Bn=dn(this,dt,Yt(this,It,Ws).call(this,or));return Yt(this,It,Io).call(this,Bn),Yt(this,It,xs).call(this,Jn(Dn[0],nr[0],5),Jn(Dn[1],nr[1],5),Jn(Dn[2],nr[2],5),Bn),dn(this,Tt,`url(#${or})`),tt(this,Tt)}destroy(pt=!1){pt&&(tt(this,it)||tt(this,Tt))||(tt(this,$t)&&(tt(this,$t).parentNode.parentNode.remove(),dn(this,$t,null)),tt(this,Ut)&&(tt(this,Ut).clear(),dn(this,Ut,null)),dn(this,Dt,0))}}Ut=new WeakMap,$t=new WeakMap,kt=new WeakMap,Ft=new WeakMap,Gt=new WeakMap,At=new WeakMap,it=new WeakMap,dt=new WeakMap,_t=new WeakMap,Tt=new WeakMap,Dt=new WeakMap,It=new WeakSet,ts=function(){return tt(this,Ut)||dn(this,Ut,new Map)},ns=function(){if(!tt(this,$t)){const pt=tt(this,Ft).createElement("div"),{style:Rt}=pt;Rt.visibility="hidden",Rt.contain="strict",Rt.width=Rt.height=0,Rt.position="absolute",Rt.top=Rt.left=0,Rt.zIndex=-1;const zt=tt(this,Ft).createElementNS(c,"svg");zt.setAttribute("width",0),zt.setAttribute("height",0),dn(this,$t,tt(this,Ft).createElementNS(c,"defs")),pt.append(zt),zt.append(tt(this,$t)),tt(this,Ft).body.append(pt)}return tt(this,$t)},Io=function(pt){const Rt=tt(this,Ft).createElementNS(c,"feColorMatrix");Rt.setAttribute("type","matrix"),Rt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),pt.append(Rt)},Ws=function(pt){const Rt=tt(this,Ft).createElementNS(c,"filter");return Rt.setAttribute("color-interpolation-filters","sRGB"),Rt.setAttribute("id",pt),tt(this,It,ns).append(Rt),Rt},Vs=function(pt,Rt,zt){const Kt=tt(this,Ft).createElementNS(c,Rt);Kt.setAttribute("type","discrete"),Kt.setAttribute("tableValues",zt),pt.append(Kt)},xs=function(pt,Rt,zt,Kt){const hn=tt(this,Ft).createElementNS(c,"feComponentTransfer");Kt.append(hn),Yt(this,It,Vs).call(this,hn,"feFuncR",pt),Yt(this,It,Vs).call(this,hn,"feFuncG",Rt),Yt(this,It,Vs).call(this,hn,"feFuncB",zt)},ys=function(pt){return tt(this,It,ns).style.color=pt,ht(getComputedStyle(tt(this,It,ns)).getPropertyValue("color"))},s.DOMFilterFactory=j;class b extends a.BaseCanvasFactory{constructor({ownerDocument:rn=globalThis.document}={}){super(),this._document=rn}_createCanvas(rn,pt){const Rt=this._document.createElement("canvas");return Rt.width=rn,Rt.height=pt,Rt}}s.DOMCanvasFactory=b;async function _(nn,rn=!1){if(gt(nn,document.baseURI)){const pt=await fetch(nn);if(!pt.ok)throw new Error(pt.statusText);return rn?new Uint8Array(await pt.arrayBuffer()):(0,o.stringToBytes)(await pt.text())}return new Promise((pt,Rt)=>{const zt=new XMLHttpRequest;zt.open("GET",nn,!0),rn&&(zt.responseType="arraybuffer"),zt.onreadystatechange=()=>{if(zt.readyState===XMLHttpRequest.DONE){if(zt.status===200||zt.status===0){let Kt;if(rn&&zt.response?Kt=new Uint8Array(zt.response):!rn&&zt.responseText&&(Kt=(0,o.stringToBytes)(zt.responseText)),Kt){pt(Kt);return}}Rt(new Error(zt.statusText))}},zt.send(null)})}class $ extends a.BaseCMapReaderFactory{_fetchData(rn,pt){return _(rn,this.isCompressed).then(Rt=>({cMapData:Rt,compressionType:pt}))}}s.DOMCMapReaderFactory=$;class at extends a.BaseStandardFontDataFactory{_fetchData(rn){return _(rn,!0)}}s.DOMStandardFontDataFactory=at;class rt extends a.BaseSVGFactory{_createSVG(rn){return document.createElementNS(c,rn)}}s.DOMSVGFactory=rt;class ut{constructor({viewBox:rn,scale:pt,rotation:Rt,offsetX:zt=0,offsetY:Kt=0,dontFlip:hn=!1}){this.viewBox=rn,this.scale=pt,this.rotation=Rt,this.offsetX=zt,this.offsetY=Kt;const Sn=(rn[2]+rn[0])/2,En=(rn[3]+rn[1])/2;let Qt,In,Dn,nr;switch(Rt%=360,Rt<0&&(Rt+=360),Rt){case 180:Qt=-1,In=0,Dn=0,nr=1;break;case 90:Qt=0,In=1,Dn=1,nr=0;break;case 270:Qt=0,In=-1,Dn=-1,nr=0;break;case 0:Qt=1,In=0,Dn=0,nr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}hn&&(Dn=-Dn,nr=-nr);let Jn,or,Bn,Yn;Qt===0?(Jn=Math.abs(En-rn[1])*pt+zt,or=Math.abs(Sn-rn[0])*pt+Kt,Bn=(rn[3]-rn[1])*pt,Yn=(rn[2]-rn[0])*pt):(Jn=Math.abs(Sn-rn[0])*pt+zt,or=Math.abs(En-rn[1])*pt+Kt,Bn=(rn[2]-rn[0])*pt,Yn=(rn[3]-rn[1])*pt),this.transform=[Qt*pt,In*pt,Dn*pt,nr*pt,Jn-Qt*pt*Sn-Dn*pt*En,or-In*pt*Sn-nr*pt*En],this.width=Bn,this.height=Yn}get rawDims(){const{viewBox:rn}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:rn[2]-rn[0],pageHeight:rn[3]-rn[1],pageX:rn[0],pageY:rn[1]})}clone({scale:rn=this.scale,rotation:pt=this.rotation,offsetX:Rt=this.offsetX,offsetY:zt=this.offsetY,dontFlip:Kt=!1}={}){return new ut({viewBox:this.viewBox.slice(),scale:rn,rotation:pt,offsetX:Rt,offsetY:zt,dontFlip:Kt})}convertToViewportPoint(rn,pt){return o.Util.applyTransform([rn,pt],this.transform)}convertToViewportRectangle(rn){const pt=o.Util.applyTransform([rn[0],rn[1]],this.transform),Rt=o.Util.applyTransform([rn[2],rn[3]],this.transform);return[pt[0],pt[1],Rt[0],Rt[1]]}convertToPdfPoint(rn,pt){return o.Util.applyInverseTransform([rn,pt],this.transform)}}s.PageViewport=ut;class ot extends o.BaseException{constructor(rn,pt=0){super(rn,"RenderingCancelledException"),this.extraDelay=pt}}s.RenderingCancelledException=ot;function vt(nn){const rn=nn.length;let pt=0;for(;pt<rn&&nn[pt].trim()==="";)pt++;return nn.substring(pt,pt+5).toLowerCase()==="data:"}function bt(nn){return typeof nn=="string"&&/\.pdf$/i.test(nn)}function et(nn,rn=!1){return rn||([nn]=nn.split(/[#?]/,1)),nn.substring(nn.lastIndexOf("/")+1)}function nt(nn,rn="document.pdf"){if(typeof nn!="string")return rn;if(vt(nn))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),rn;const pt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Rt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,zt=pt.exec(nn);let Kt=Rt.exec(zt[1])||Rt.exec(zt[2])||Rt.exec(zt[3]);if(Kt&&(Kt=Kt[0],Kt.includes("%")))try{Kt=Rt.exec(decodeURIComponent(Kt))[0]}catch{}return Kt||rn}class st{constructor(){xr(this,"started",Object.create(null));xr(this,"times",[])}time(rn){rn in this.started&&(0,o.warn)(`Timer is already running for ${rn}`),this.started[rn]=Date.now()}timeEnd(rn){rn in this.started||(0,o.warn)(`Timer has not been started for ${rn}`),this.times.push({name:rn,start:this.started[rn],end:Date.now()}),delete this.started[rn]}toString(){const rn=[];let pt=0;for(const{name:Rt}of this.times)pt=Math.max(Rt.length,pt);for(const{name:Rt,start:zt,end:Kt}of this.times)rn.push(`${Rt.padEnd(pt)} ${Kt-zt}ms
`);return rn.join("")}}s.StatTimer=st;function gt(nn,rn){try{const{protocol:pt}=rn?new URL(nn,rn):new URL(nn);return pt==="http:"||pt==="https:"}catch{return!1}}function lt(nn){nn.preventDefault()}function yt(nn,rn=!1){return new Promise((pt,Rt)=>{const zt=document.createElement("script");zt.src=nn,zt.onload=function(Kt){rn&&zt.remove(),pt(Kt)},zt.onerror=function(){Rt(new Error(`Cannot load script at: ${zt.src}`))},(document.head||document.documentElement).append(zt)})}function ct(nn){console.log("Deprecated API usage: "+nn)}let mt;class xt{static toDateObject(rn){if(!rn||typeof rn!="string")return null;mt||(mt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const pt=mt.exec(rn);if(!pt)return null;const Rt=parseInt(pt[1],10);let zt=parseInt(pt[2],10);zt=zt>=1&&zt<=12?zt-1:0;let Kt=parseInt(pt[3],10);Kt=Kt>=1&&Kt<=31?Kt:1;let hn=parseInt(pt[4],10);hn=hn>=0&&hn<=23?hn:0;let Sn=parseInt(pt[5],10);Sn=Sn>=0&&Sn<=59?Sn:0;let En=parseInt(pt[6],10);En=En>=0&&En<=59?En:0;const Qt=pt[7]||"Z";let In=parseInt(pt[8],10);In=In>=0&&In<=23?In:0;let Dn=parseInt(pt[9],10)||0;return Dn=Dn>=0&&Dn<=59?Dn:0,Qt==="-"?(hn+=In,Sn+=Dn):Qt==="+"&&(hn-=In,Sn-=Dn),new Date(Date.UTC(Rt,zt,Kt,hn,Sn,En))}}s.PDFDateString=xt;function Ct(nn,{scale:rn=1,rotation:pt=0}){const{width:Rt,height:zt}=nn.attributes.style,Kt=[0,0,parseInt(Rt),parseInt(zt)];return new ut({viewBox:Kt,scale:rn,rotation:pt})}function ht(nn){if(nn.startsWith("#")){const rn=parseInt(nn.slice(1),16);return[(rn&16711680)>>16,(rn&65280)>>8,rn&255]}return nn.startsWith("rgb(")?nn.slice(4,-1).split(",").map(rn=>parseInt(rn)):nn.startsWith("rgba(")?nn.slice(5,-1).split(",").map(rn=>parseInt(rn)).slice(0,3):((0,o.warn)(`Not a valid color format: "${nn}"`),[0,0,0])}function wt(nn){const rn=document.createElement("span");rn.style.visibility="hidden",document.body.append(rn);for(const pt of nn.keys()){rn.style.color=pt;const Rt=window.getComputedStyle(rn).color;nn.set(pt,ht(Rt))}rn.remove()}function jt(nn){const{a:rn,b:pt,c:Rt,d:zt,e:Kt,f:hn}=nn.getTransform();return[rn,pt,Rt,zt,Kt,hn]}function Xt(nn){const{a:rn,b:pt,c:Rt,d:zt,e:Kt,f:hn}=nn.getTransform().invertSelf();return[rn,pt,Rt,zt,Kt,hn]}function Bt(nn,rn,pt=!1,Rt=!0){if(rn instanceof ut){const{pageWidth:zt,pageHeight:Kt}=rn.rawDims,{style:hn}=nn,Sn=o.FeatureTest.isCSSRoundSupported,En=`var(--scale-factor) * ${zt}px`,Qt=`var(--scale-factor) * ${Kt}px`,In=Sn?`round(${En}, 1px)`:`calc(${En})`,Dn=Sn?`round(${Qt}, 1px)`:`calc(${Qt})`;!pt||rn.rotation%180===0?(hn.width=In,hn.height=Dn):(hn.width=Dn,hn.height=In)}Rt&&nn.setAttribute("data-main-rotation",rn.rotation)}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var a=i(1);class o{constructor(){this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter($){return"none"}addHCMFilter($,at){return"none"}addHighlightHCMFilter($,at,rt,ut){return"none"}destroy($=!1){}}s.BaseFilterFactory=o;class c{constructor(){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create($,at){if($<=0||at<=0)throw new Error("Invalid canvas size");const rt=this._createCanvas($,at);return{canvas:rt,context:rt.getContext("2d")}}reset($,at,rt){if(!$.canvas)throw new Error("Canvas is not specified");if(at<=0||rt<=0)throw new Error("Invalid canvas size");$.canvas.width=at,$.canvas.height=rt}destroy($){if(!$.canvas)throw new Error("Canvas is not specified");$.canvas.width=0,$.canvas.height=0,$.canvas=null,$.context=null}_createCanvas($,at){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=c;class h{constructor({baseUrl:$=null,isCompressed:at=!0}){this.constructor===h&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=$,this.isCompressed=at}async fetch({name:$}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!$)throw new Error("CMap name must be specified.");const at=this.baseUrl+$+(this.isCompressed?".bcmap":""),rt=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(at,rt).catch(ut=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${at}`)})}_fetchData($,at){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=h;class j{constructor({baseUrl:$=null}){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=$}async fetch({filename:$}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!$)throw new Error("Font filename must be specified.");const at=`${this.baseUrl}${$}`;return this._fetchData(at).catch(rt=>{throw new Error(`Unable to load font data at: ${at}`)})}_fetchData($){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=j;class b{constructor(){this.constructor===b&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create($,at,rt=!1){if($<=0||at<=0)throw new Error("Invalid SVG dimensions");const ut=this._createSVG("svg:svg");return ut.setAttribute("version","1.1"),rt||(ut.setAttribute("width",`${$}px`),ut.setAttribute("height",`${at}px`)),ut.setAttribute("preserveAspectRatio","none"),ut.setAttribute("viewBox",`0 0 ${$} ${at}`),ut}createElement($){if(typeof $!="string")throw new Error("Invalid SVG element type");return this._createSVG($)}_createSVG($){(0,a.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=b},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var a=i(1);const o=3285377520,c=4294901760,h=65535;class j{constructor(_){this.h1=_?_&4294967295:o,this.h2=_?_&4294967295:o}update(_){let $,at;if(typeof _=="string"){$=new Uint8Array(_.length*2),at=0;for(let ct=0,mt=_.length;ct<mt;ct++){const xt=_.charCodeAt(ct);xt<=255?$[at++]=xt:($[at++]=xt>>>8,$[at++]=xt&255)}}else if((0,a.isArrayBuffer)(_))$=_.slice(),at=$.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const rt=at>>2,ut=at-rt*4,ot=new Uint32Array($.buffer,0,rt);let vt=0,bt=0,et=this.h1,nt=this.h2;const st=3432918353,gt=461845907,lt=st&h,yt=gt&h;for(let ct=0;ct<rt;ct++)ct&1?(vt=ot[ct],vt=vt*st&c|vt*lt&h,vt=vt<<15|vt>>>17,vt=vt*gt&c|vt*yt&h,et^=vt,et=et<<13|et>>>19,et=et*5+3864292196):(bt=ot[ct],bt=bt*st&c|bt*lt&h,bt=bt<<15|bt>>>17,bt=bt*gt&c|bt*yt&h,nt^=bt,nt=nt<<13|nt>>>19,nt=nt*5+3864292196);switch(vt=0,ut){case 3:vt^=$[rt*4+2]<<16;case 2:vt^=$[rt*4+1]<<8;case 1:vt^=$[rt*4],vt=vt*st&c|vt*lt&h,vt=vt<<15|vt>>>17,vt=vt*gt&c|vt*yt&h,rt&1?et^=vt:nt^=vt}this.h1=et,this.h2=nt}hexdigest(){let _=this.h1,$=this.h2;return _^=$>>>1,_=_*3981806797&c|_*36045&h,$=$*4283543511&c|(($<<16|_>>>16)*2950163797&c)>>>16,_^=$>>>1,_=_*444984403&c|_*60499&h,$=$*3301882366&c|(($<<16|_>>>16)*3120437893&c)>>>16,_^=$>>>1,(_>>>0).toString(16).padStart(8,"0")+($>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=j},(e,s,i)=>{var h;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var a=i(1);class o{constructor({ownerDocument:b=globalThis.document,styleElement:_=null}){cn(this,h,new Set);this._document=b,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(b){this.nativeFontFaces.add(b),this._document.fonts.add(b)}removeNativeFontFace(b){this.nativeFontFaces.delete(b),this._document.fonts.delete(b)}insertRule(b){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _=this.styleElement.sheet;_.insertRule(b,_.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.clear(),tt(this,h).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(b){if(!(!b||tt(this,h).has(b.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:$,style:at}=b,rt=new FontFace(_,$,at);this.addNativeFontFace(rt);try{await rt.load(),tt(this,h).add(_)}catch{(0,a.warn)(`Cannot load system font: ${b.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(rt)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(b){if(b.attached||b.missingFile&&!b.systemFontInfo)return;if(b.attached=!0,b.systemFontInfo){await this.loadSystemFont(b.systemFontInfo);return}if(this.isFontLoadingAPISupported){const $=b.createNativeFontFace();if($){this.addNativeFontFace($);try{await $.loaded}catch(at){throw(0,a.warn)(`Failed to load font '${$.family}': '${at}'.`),b.disableFontFace=!0,at}}return}const _=b.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise($=>{const at=this._queueLoadingCallback($);this._prepareFontLoadEvent(b,at)})}}get isFontLoadingAPISupported(){var _;const b=!!((_=this._document)!=null&&_.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){let b=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(b=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function _(){for((0,a.assert)(!at.done,"completeRequest() cannot be called twice."),at.done=!0;$.length>0&&$[0].done;){const rt=$.shift();setTimeout(rt.callback,0)}}const{loadingRequests:$}=this,at={done:!1,complete:_,callback:b};return $.push(at),at}get _loadTestFont(){const b=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",b)}_prepareFontLoadEvent(b,_){function $(ht,wt){return ht.charCodeAt(wt)<<24|ht.charCodeAt(wt+1)<<16|ht.charCodeAt(wt+2)<<8|ht.charCodeAt(wt+3)&255}function at(ht,wt,jt,Xt){const Bt=ht.substring(0,wt),Wt=ht.substring(wt+jt);return Bt+Xt+Wt}let rt,ut;const ot=this._document.createElement("canvas");ot.width=1,ot.height=1;const vt=ot.getContext("2d");let bt=0;function et(ht,wt){if(++bt>30){(0,a.warn)("Load test font never loaded."),wt();return}if(vt.font="30px "+ht,vt.fillText(".",0,20),vt.getImageData(0,0,1,1).data[3]>0){wt();return}setTimeout(et.bind(null,ht,wt))}const nt=`lt${Date.now()}${this.loadTestFontId++}`;let st=this._loadTestFont;st=at(st,976,nt.length,nt);const lt=16,yt=1482184792;let ct=$(st,lt);for(rt=0,ut=nt.length-3;rt<ut;rt+=4)ct=ct-yt+$(nt,rt)|0;rt<nt.length&&(ct=ct-yt+$(nt+"XXX",rt)|0),st=at(st,lt,4,(0,a.string32)(ct));const mt=`url(data:font/opentype;base64,${btoa(st)});`,xt=`@font-face {font-family:"${nt}";src:${mt}}`;this.insertRule(xt);const Ct=this._document.createElement("div");Ct.style.visibility="hidden",Ct.style.width=Ct.style.height="10px",Ct.style.position="absolute",Ct.style.top=Ct.style.left="0px";for(const ht of[b.loadedName,nt]){const wt=this._document.createElement("span");wt.textContent="Hi",wt.style.fontFamily=ht,Ct.append(wt)}this._document.body.append(Ct),et(nt,()=>{Ct.remove(),_.complete()})}}h=new WeakMap,s.FontLoader=o;class c{constructor(b,{isEvalSupported:_=!0,disableFontFace:$=!1,ignoreErrors:at=!1,inspectFont:rt=null}){this.compiledGlyphs=Object.create(null);for(const ut in b)this[ut]=b[ut];this.isEvalSupported=_!==!1,this.disableFontFace=$===!0,this.ignoreErrors=at===!0,this._inspectFont=rt}createNativeFontFace(){var _;if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const $={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&($.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,$)}return(_=this._inspectFont)==null||_.call(this,this),b}createFontFaceRule(){var at;if(!this.data||this.disableFontFace)return null;const b=(0,a.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(b)});`;let $;if(!this.cssFontInfo)$=`@font-face {font-family:"${this.loadedName}";src:${_}}`;else{let rt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(rt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),$=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${rt}src:${_}}`}return(at=this._inspectFont)==null||at.call(this,this,_),$}getPathGenerator(b,_){if(this.compiledGlyphs[_]!==void 0)return this.compiledGlyphs[_];let $;try{$=b.get(this.loadedName+"_path_"+_)}catch(at){if(!this.ignoreErrors)throw at;return(0,a.warn)(`getPathGenerator - ignoring character: "${at}".`),this.compiledGlyphs[_]=function(rt,ut){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const at=[];for(const rt of $){const ut=rt.args!==void 0?rt.args.join(","):"";at.push("c.",rt.cmd,"(",ut,`);
`)}return this.compiledGlyphs[_]=new Function("c","size",at.join(""))}return this.compiledGlyphs[_]=function(at,rt){for(const ut of $)ut.cmd==="scale"&&(ut.args=[rt,-rt]),at[ut.cmd].apply(at,ut.args)}}}s.FontFaceObject=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var a=i(7);i(1);const o=function(_){return new Promise(($,at)=>{require$$5.readFile(_,(ut,ot)=>{if(ut||!ot){at(new Error(ut));return}$(new Uint8Array(ot))})})};class c extends a.BaseFilterFactory{}s.NodeFilterFactory=c;class h extends a.BaseCanvasFactory{_createCanvas($,at){return require$$5.createCanvas($,at)}}s.NodeCanvasFactory=h;class j extends a.BaseCMapReaderFactory{_fetchData($,at){return o($).then(rt=>({cMapData:rt,compressionType:at}))}}s.NodeCMapReaderFactory=j;class b extends a.BaseStandardFontDataFactory{_fetchData($){return o($)}}s.NodeStandardFontDataFactory=b},(e,s,i)=>{var $t,Fo,Mo;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var a=i(1),o=i(6),c=i(12),h=i(13);const j=16,b=100,_=4096,$=15,at=10,rt=1e3,ut=16;function ot(At,it){if(At._removeMirroring)throw new Error("Context is already forwarding operations.");At.__originalSave=At.save,At.__originalRestore=At.restore,At.__originalRotate=At.rotate,At.__originalScale=At.scale,At.__originalTranslate=At.translate,At.__originalTransform=At.transform,At.__originalSetTransform=At.setTransform,At.__originalResetTransform=At.resetTransform,At.__originalClip=At.clip,At.__originalMoveTo=At.moveTo,At.__originalLineTo=At.lineTo,At.__originalBezierCurveTo=At.bezierCurveTo,At.__originalRect=At.rect,At.__originalClosePath=At.closePath,At.__originalBeginPath=At.beginPath,At._removeMirroring=()=>{At.save=At.__originalSave,At.restore=At.__originalRestore,At.rotate=At.__originalRotate,At.scale=At.__originalScale,At.translate=At.__originalTranslate,At.transform=At.__originalTransform,At.setTransform=At.__originalSetTransform,At.resetTransform=At.__originalResetTransform,At.clip=At.__originalClip,At.moveTo=At.__originalMoveTo,At.lineTo=At.__originalLineTo,At.bezierCurveTo=At.__originalBezierCurveTo,At.rect=At.__originalRect,At.closePath=At.__originalClosePath,At.beginPath=At.__originalBeginPath,delete At._removeMirroring},At.save=function(){it.save(),this.__originalSave()},At.restore=function(){it.restore(),this.__originalRestore()},At.translate=function(_t,Tt){it.translate(_t,Tt),this.__originalTranslate(_t,Tt)},At.scale=function(_t,Tt){it.scale(_t,Tt),this.__originalScale(_t,Tt)},At.transform=function(_t,Tt,Dt,It,Lt,on){it.transform(_t,Tt,Dt,It,Lt,on),this.__originalTransform(_t,Tt,Dt,It,Lt,on)},At.setTransform=function(_t,Tt,Dt,It,Lt,on){it.setTransform(_t,Tt,Dt,It,Lt,on),this.__originalSetTransform(_t,Tt,Dt,It,Lt,on)},At.resetTransform=function(){it.resetTransform(),this.__originalResetTransform()},At.rotate=function(_t){it.rotate(_t),this.__originalRotate(_t)},At.clip=function(_t){it.clip(_t),this.__originalClip(_t)},At.moveTo=function(dt,_t){it.moveTo(dt,_t),this.__originalMoveTo(dt,_t)},At.lineTo=function(dt,_t){it.lineTo(dt,_t),this.__originalLineTo(dt,_t)},At.bezierCurveTo=function(dt,_t,Tt,Dt,It,Lt){it.bezierCurveTo(dt,_t,Tt,Dt,It,Lt),this.__originalBezierCurveTo(dt,_t,Tt,Dt,It,Lt)},At.rect=function(dt,_t,Tt,Dt){it.rect(dt,_t,Tt,Dt),this.__originalRect(dt,_t,Tt,Dt)},At.closePath=function(){it.closePath(),this.__originalClosePath()},At.beginPath=function(){it.beginPath(),this.__originalBeginPath()}}class vt{constructor(it){this.canvasFactory=it,this.cache=Object.create(null)}getCanvas(it,dt,_t){let Tt;return this.cache[it]!==void 0?(Tt=this.cache[it],this.canvasFactory.reset(Tt,dt,_t)):(Tt=this.canvasFactory.create(dt,_t),this.cache[it]=Tt),Tt}delete(it){delete this.cache[it]}clear(){for(const it in this.cache){const dt=this.cache[it];this.canvasFactory.destroy(dt),delete this.cache[it]}}}function bt(At,it,dt,_t,Tt,Dt,It,Lt,on,vn){const[un,kn,jn,Rn,nn,rn]=(0,o.getCurrentTransform)(At);if(kn===0&&jn===0){const zt=It*un+nn,Kt=Math.round(zt),hn=Lt*Rn+rn,Sn=Math.round(hn),En=(It+on)*un+nn,Qt=Math.abs(Math.round(En)-Kt)||1,In=(Lt+vn)*Rn+rn,Dn=Math.abs(Math.round(In)-Sn)||1;return At.setTransform(Math.sign(un),0,0,Math.sign(Rn),Kt,Sn),At.drawImage(it,dt,_t,Tt,Dt,0,0,Qt,Dn),At.setTransform(un,kn,jn,Rn,nn,rn),[Qt,Dn]}if(un===0&&Rn===0){const zt=Lt*jn+nn,Kt=Math.round(zt),hn=It*kn+rn,Sn=Math.round(hn),En=(Lt+vn)*jn+nn,Qt=Math.abs(Math.round(En)-Kt)||1,In=(It+on)*kn+rn,Dn=Math.abs(Math.round(In)-Sn)||1;return At.setTransform(0,Math.sign(kn),Math.sign(jn),0,Kt,Sn),At.drawImage(it,dt,_t,Tt,Dt,0,0,Dn,Qt),At.setTransform(un,kn,jn,Rn,nn,rn),[Dn,Qt]}At.drawImage(it,dt,_t,Tt,Dt,It,Lt,on,vn);const pt=Math.hypot(un,kn),Rt=Math.hypot(jn,Rn);return[pt*on,Rt*vn]}function et(At){const{width:it,height:dt}=At;if(it>rt||dt>rt)return null;const _t=1e3,Tt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Dt=it+1;let It=new Uint8Array(Dt*(dt+1)),Lt,on,vn;const un=it+7&-8;let kn=new Uint8Array(un*dt),jn=0;for(const Rt of At.data){let zt=128;for(;zt>0;)kn[jn++]=Rt&zt?0:255,zt>>=1}let Rn=0;for(jn=0,kn[jn]!==0&&(It[0]=1,++Rn),on=1;on<it;on++)kn[jn]!==kn[jn+1]&&(It[on]=kn[jn]?2:1,++Rn),jn++;for(kn[jn]!==0&&(It[on]=2,++Rn),Lt=1;Lt<dt;Lt++){jn=Lt*un,vn=Lt*Dt,kn[jn-un]!==kn[jn]&&(It[vn]=kn[jn]?1:8,++Rn);let Rt=(kn[jn]?4:0)+(kn[jn-un]?8:0);for(on=1;on<it;on++)Rt=(Rt>>2)+(kn[jn+1]?4:0)+(kn[jn-un+1]?8:0),Tt[Rt]&&(It[vn+on]=Tt[Rt],++Rn),jn++;if(kn[jn-un]!==kn[jn]&&(It[vn+on]=kn[jn]?2:4,++Rn),Rn>_t)return null}for(jn=un*(dt-1),vn=Lt*Dt,kn[jn]!==0&&(It[vn]=8,++Rn),on=1;on<it;on++)kn[jn]!==kn[jn+1]&&(It[vn+on]=kn[jn]?4:8,++Rn),jn++;if(kn[jn]!==0&&(It[vn+on]=4,++Rn),Rn>_t)return null;const nn=new Int32Array([0,Dt,-1,0,-Dt,0,0,0,1]),rn=new Path2D;for(Lt=0;Rn&&Lt<=dt;Lt++){let Rt=Lt*Dt;const zt=Rt+it;for(;Rt<zt&&!It[Rt];)Rt++;if(Rt===zt)continue;rn.moveTo(Rt%Dt,Lt);const Kt=Rt;let hn=It[Rt];do{const Sn=nn[hn];do Rt+=Sn;while(!It[Rt]);const En=It[Rt];En!==5&&En!==10?(hn=En,It[Rt]=0):(hn=En&51*hn>>4,It[Rt]&=hn>>2|hn<<2),rn.lineTo(Rt%Dt,Rt/Dt|0),It[Rt]||--Rn}while(Kt!==Rt);--Lt}return kn=null,It=null,function(Rt){Rt.save(),Rt.scale(1/it,-1/dt),Rt.translate(0,-dt),Rt.fill(rn),Rt.beginPath(),Rt.restore()}}class nt{constructor(it,dt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,it,dt])}clone(){const it=Object.create(this);return it.clipBox=this.clipBox.slice(),it}setCurrentPoint(it,dt){this.x=it,this.y=dt}updatePathMinMax(it,dt,_t){[dt,_t]=a.Util.applyTransform([dt,_t],it),this.minX=Math.min(this.minX,dt),this.minY=Math.min(this.minY,_t),this.maxX=Math.max(this.maxX,dt),this.maxY=Math.max(this.maxY,_t)}updateRectMinMax(it,dt){const _t=a.Util.applyTransform(dt,it),Tt=a.Util.applyTransform(dt.slice(2),it);this.minX=Math.min(this.minX,_t[0],Tt[0]),this.minY=Math.min(this.minY,_t[1],Tt[1]),this.maxX=Math.max(this.maxX,_t[0],Tt[0]),this.maxY=Math.max(this.maxY,_t[1],Tt[1])}updateScalingPathMinMax(it,dt){a.Util.scaleMinMax(it,dt),this.minX=Math.min(this.minX,dt[0]),this.maxX=Math.max(this.maxX,dt[1]),this.minY=Math.min(this.minY,dt[2]),this.maxY=Math.max(this.maxY,dt[3])}updateCurvePathMinMax(it,dt,_t,Tt,Dt,It,Lt,on,vn,un){const kn=a.Util.bezierBoundingBox(dt,_t,Tt,Dt,It,Lt,on,vn);if(un){un[0]=Math.min(un[0],kn[0],kn[2]),un[1]=Math.max(un[1],kn[0],kn[2]),un[2]=Math.min(un[2],kn[1],kn[3]),un[3]=Math.max(un[3],kn[1],kn[3]);return}this.updateRectMinMax(it,kn)}getPathBoundingBox(it=c.PathType.FILL,dt=null){const _t=[this.minX,this.minY,this.maxX,this.maxY];if(it===c.PathType.STROKE){dt||(0,a.unreachable)("Stroke bounding box must include transform.");const Tt=a.Util.singularValueDecompose2dScale(dt),Dt=Tt[0]*this.lineWidth/2,It=Tt[1]*this.lineWidth/2;_t[0]-=Dt,_t[1]-=It,_t[2]+=Dt,_t[3]+=It}return _t}updateClipFromPath(){const it=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(it||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(it){this.clipBox=it,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(it=c.PathType.FILL,dt=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(it,dt))}}function st(At,it){if(typeof ImageData<"u"&&it instanceof ImageData){At.putImageData(it,0,0);return}const dt=it.height,_t=it.width,Tt=dt%ut,Dt=(dt-Tt)/ut,It=Tt===0?Dt:Dt+1,Lt=At.createImageData(_t,ut);let on=0,vn;const un=it.data,kn=Lt.data;let jn,Rn,nn,rn;if(it.kind===a.ImageKind.GRAYSCALE_1BPP){const pt=un.byteLength,Rt=new Uint32Array(kn.buffer,0,kn.byteLength>>2),zt=Rt.length,Kt=_t+7>>3,hn=4294967295,Sn=a.FeatureTest.isLittleEndian?4278190080:255;for(jn=0;jn<It;jn++){for(nn=jn<Dt?ut:Tt,vn=0,Rn=0;Rn<nn;Rn++){const En=pt-on;let Qt=0;const In=En>Kt?_t:En*8-7,Dn=In&-8;let nr=0,Jn=0;for(;Qt<Dn;Qt+=8)Jn=un[on++],Rt[vn++]=Jn&128?hn:Sn,Rt[vn++]=Jn&64?hn:Sn,Rt[vn++]=Jn&32?hn:Sn,Rt[vn++]=Jn&16?hn:Sn,Rt[vn++]=Jn&8?hn:Sn,Rt[vn++]=Jn&4?hn:Sn,Rt[vn++]=Jn&2?hn:Sn,Rt[vn++]=Jn&1?hn:Sn;for(;Qt<In;Qt++)nr===0&&(Jn=un[on++],nr=128),Rt[vn++]=Jn&nr?hn:Sn,nr>>=1}for(;vn<zt;)Rt[vn++]=0;At.putImageData(Lt,0,jn*ut)}}else if(it.kind===a.ImageKind.RGBA_32BPP){for(Rn=0,rn=_t*ut*4,jn=0;jn<Dt;jn++)kn.set(un.subarray(on,on+rn)),on+=rn,At.putImageData(Lt,0,Rn),Rn+=ut;jn<It&&(rn=_t*Tt*4,kn.set(un.subarray(on,on+rn)),At.putImageData(Lt,0,Rn))}else if(it.kind===a.ImageKind.RGB_24BPP)for(nn=ut,rn=_t*nn,jn=0;jn<It;jn++){for(jn>=Dt&&(nn=Tt,rn=_t*nn),vn=0,Rn=rn;Rn--;)kn[vn++]=un[on++],kn[vn++]=un[on++],kn[vn++]=un[on++],kn[vn++]=255;At.putImageData(Lt,0,jn*ut)}else throw new Error(`bad image kind: ${it.kind}`)}function gt(At,it){if(it.bitmap){At.drawImage(it.bitmap,0,0);return}const dt=it.height,_t=it.width,Tt=dt%ut,Dt=(dt-Tt)/ut,It=Tt===0?Dt:Dt+1,Lt=At.createImageData(_t,ut);let on=0;const vn=it.data,un=Lt.data;for(let kn=0;kn<It;kn++){const jn=kn<Dt?ut:Tt;({srcPos:on}=(0,h.convertBlackAndWhiteToRGBA)({src:vn,srcPos:on,dest:un,width:_t,height:jn,nonBlackColor:0})),At.putImageData(Lt,0,kn*ut)}}function lt(At,it){const dt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const _t of dt)At[_t]!==void 0&&(it[_t]=At[_t]);At.setLineDash!==void 0&&(it.setLineDash(At.getLineDash()),it.lineDashOffset=At.lineDashOffset)}function yt(At){if(At.strokeStyle=At.fillStyle="#000000",At.fillRule="nonzero",At.globalAlpha=1,At.lineWidth=1,At.lineCap="butt",At.lineJoin="miter",At.miterLimit=10,At.globalCompositeOperation="source-over",At.font="10px sans-serif",At.setLineDash!==void 0&&(At.setLineDash([]),At.lineDashOffset=0),!a.isNodeJS){const{filter:it}=At;it!=="none"&&it!==""&&(At.filter="none")}}function ct(At,it,dt,_t){const Tt=At.length;for(let Dt=3;Dt<Tt;Dt+=4){const It=At[Dt];if(It===0)At[Dt-3]=it,At[Dt-2]=dt,At[Dt-1]=_t;else if(It<255){const Lt=255-It;At[Dt-3]=At[Dt-3]*It+it*Lt>>8,At[Dt-2]=At[Dt-2]*It+dt*Lt>>8,At[Dt-1]=At[Dt-1]*It+_t*Lt>>8}}}function mt(At,it,dt){const _t=At.length,Tt=1/255;for(let Dt=3;Dt<_t;Dt+=4){const It=dt?dt[At[Dt]]:At[Dt];it[Dt]=it[Dt]*It*Tt|0}}function xt(At,it,dt){const _t=At.length;for(let Tt=3;Tt<_t;Tt+=4){const Dt=At[Tt-3]*77+At[Tt-2]*152+At[Tt-1]*28;it[Tt]=dt?it[Tt]*dt[Dt>>8]>>8:it[Tt]*Dt>>16}}function Ct(At,it,dt,_t,Tt,Dt,It,Lt,on,vn,un){const kn=!!Dt,jn=kn?Dt[0]:0,Rn=kn?Dt[1]:0,nn=kn?Dt[2]:0,rn=Tt==="Luminosity"?xt:mt,Rt=Math.min(_t,Math.ceil(1048576/dt));for(let zt=0;zt<_t;zt+=Rt){const Kt=Math.min(Rt,_t-zt),hn=At.getImageData(Lt-vn,zt+(on-un),dt,Kt),Sn=it.getImageData(Lt,zt+on,dt,Kt);kn&&ct(hn.data,jn,Rn,nn),rn(hn.data,Sn.data,It),it.putImageData(Sn,Lt,zt+on)}}function ht(At,it,dt,_t){const Tt=_t[0],Dt=_t[1],It=_t[2]-Tt,Lt=_t[3]-Dt;It===0||Lt===0||(Ct(it.context,dt,It,Lt,it.subtype,it.backdrop,it.transferMap,Tt,Dt,it.offsetX,it.offsetY),At.save(),At.globalAlpha=1,At.globalCompositeOperation="source-over",At.setTransform(1,0,0,1,0,0),At.drawImage(dt.canvas,0,0),At.restore())}function wt(At,it){const dt=a.Util.singularValueDecompose2dScale(At);dt[0]=Math.fround(dt[0]),dt[1]=Math.fround(dt[1]);const _t=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return it!==void 0?it:dt[0]<=_t||dt[1]<=_t}const jt=["butt","round","square"],Xt=["miter","round","bevel"],Bt={},Wt={},Gt=class Gt{constructor(it,dt,_t,Tt,Dt,{optionalContentConfig:It,markedContentStack:Lt=null},on,vn){cn(this,$t);this.ctx=it,this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=dt,this.objs=_t,this.canvasFactory=Tt,this.filterFactory=Dt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Lt||[],this.optionalContentConfig=It,this.cachedCanvases=new vt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=on,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=vn,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(it,dt=null){return typeof it=="string"?it.startsWith("g_")?this.commonObjs.get(it):this.objs.get(it):dt}beginDrawing({transform:it,viewport:dt,transparency:_t=!1,background:Tt=null}){const Dt=this.ctx.canvas.width,It=this.ctx.canvas.height,Lt=this.ctx.fillStyle;if(this.ctx.fillStyle=Tt||"#ffffff",this.ctx.fillRect(0,0,Dt,It),this.ctx.fillStyle=Lt,_t){const on=this.cachedCanvases.getCanvas("transparent",Dt,It);this.compositeCtx=this.ctx,this.transparentCanvas=on.canvas,this.ctx=on.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),yt(this.ctx),it&&(this.ctx.transform(...it),this.outputScaleX=it[0],this.outputScaleY=it[0]),this.ctx.transform(...dt.transform),this.viewportScale=dt.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(it,dt,_t,Tt){const Dt=it.argsArray,It=it.fnArray;let Lt=dt||0;const on=Dt.length;if(on===Lt)return Lt;const vn=on-Lt>at&&typeof _t=="function",un=vn?Date.now()+$:0;let kn=0;const jn=this.commonObjs,Rn=this.objs;let nn;for(;;){if(Tt!==void 0&&Lt===Tt.nextBreakPoint)return Tt.breakIt(Lt,_t),Lt;if(nn=It[Lt],nn!==a.OPS.dependency)this[nn].apply(this,Dt[Lt]);else for(const rn of Dt[Lt]){const pt=rn.startsWith("g_")?jn:Rn;if(!pt.has(rn))return pt.get(rn,_t),Lt}if(Lt++,Lt===on)return Lt;if(vn&&++kn>at){if(Date.now()>un)return _t(),Lt;kn=0}}}endDrawing(){Yt(this,$t,Fo).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const it of this._cachedBitmapsMap.values()){for(const dt of it.values())typeof HTMLCanvasElement<"u"&&dt instanceof HTMLCanvasElement&&(dt.width=dt.height=0);it.clear()}this._cachedBitmapsMap.clear(),Yt(this,$t,Mo).call(this)}_scaleImage(it,dt){const _t=it.width,Tt=it.height;let Dt=Math.max(Math.hypot(dt[0],dt[1]),1),It=Math.max(Math.hypot(dt[2],dt[3]),1),Lt=_t,on=Tt,vn="prescale1",un,kn;for(;Dt>2&&Lt>1||It>2&&on>1;){let jn=Lt,Rn=on;Dt>2&&Lt>1&&(jn=Lt>=16384?Math.floor(Lt/2)-1||1:Math.ceil(Lt/2),Dt/=Lt/jn),It>2&&on>1&&(Rn=on>=16384?Math.floor(on/2)-1||1:Math.ceil(on)/2,It/=on/Rn),un=this.cachedCanvases.getCanvas(vn,jn,Rn),kn=un.context,kn.clearRect(0,0,jn,Rn),kn.drawImage(it,0,0,Lt,on,0,0,jn,Rn),it=un.canvas,Lt=jn,on=Rn,vn=vn==="prescale1"?"prescale2":"prescale1"}return{img:it,paintWidth:Lt,paintHeight:on}}_createMaskCanvas(it){const dt=this.ctx,{width:_t,height:Tt}=it,Dt=this.current.fillColor,It=this.current.patternFill,Lt=(0,o.getCurrentTransform)(dt);let on,vn,un,kn;if((it.bitmap||it.data)&&it.count>1){const Qt=it.bitmap||it.data.buffer;vn=JSON.stringify(It?Lt:[Lt.slice(0,4),Dt]),on=this._cachedBitmapsMap.get(Qt),on||(on=new Map,this._cachedBitmapsMap.set(Qt,on));const In=on.get(vn);if(In&&!It){const Dn=Math.round(Math.min(Lt[0],Lt[2])+Lt[4]),nr=Math.round(Math.min(Lt[1],Lt[3])+Lt[5]);return{canvas:In,offsetX:Dn,offsetY:nr}}un=In}un||(kn=this.cachedCanvases.getCanvas("maskCanvas",_t,Tt),gt(kn.context,it));let jn=a.Util.transform(Lt,[1/_t,0,0,-1/Tt,0,0]);jn=a.Util.transform(jn,[1,0,0,1,0,-Tt]);const Rn=a.Util.applyTransform([0,0],jn),nn=a.Util.applyTransform([_t,Tt],jn),rn=a.Util.normalizeRect([Rn[0],Rn[1],nn[0],nn[1]]),pt=Math.round(rn[2]-rn[0])||1,Rt=Math.round(rn[3]-rn[1])||1,zt=this.cachedCanvases.getCanvas("fillCanvas",pt,Rt),Kt=zt.context,hn=Math.min(Rn[0],nn[0]),Sn=Math.min(Rn[1],nn[1]);Kt.translate(-hn,-Sn),Kt.transform(...jn),un||(un=this._scaleImage(kn.canvas,(0,o.getCurrentTransformInverse)(Kt)),un=un.img,on&&It&&on.set(vn,un)),Kt.imageSmoothingEnabled=wt((0,o.getCurrentTransform)(Kt),it.interpolate),bt(Kt,un,0,0,un.width,un.height,0,0,_t,Tt),Kt.globalCompositeOperation="source-in";const En=a.Util.transform((0,o.getCurrentTransformInverse)(Kt),[1,0,0,1,-hn,-Sn]);return Kt.fillStyle=It?Dt.getPattern(dt,this,En,c.PathType.FILL):Dt,Kt.fillRect(0,0,_t,Tt),on&&!It&&(this.cachedCanvases.delete("fillCanvas"),on.set(vn,zt.canvas)),{canvas:zt.canvas,offsetX:Math.round(hn),offsetY:Math.round(Sn)}}setLineWidth(it){it!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=it,this.ctx.lineWidth=it}setLineCap(it){this.ctx.lineCap=jt[it]}setLineJoin(it){this.ctx.lineJoin=Xt[it]}setMiterLimit(it){this.ctx.miterLimit=it}setDash(it,dt){const _t=this.ctx;_t.setLineDash!==void 0&&(_t.setLineDash(it),_t.lineDashOffset=dt)}setRenderingIntent(it){}setFlatness(it){}setGState(it){for(const[dt,_t]of it)switch(dt){case"LW":this.setLineWidth(_t);break;case"LC":this.setLineCap(_t);break;case"LJ":this.setLineJoin(_t);break;case"ML":this.setMiterLimit(_t);break;case"D":this.setDash(_t[0],_t[1]);break;case"RI":this.setRenderingIntent(_t);break;case"FL":this.setFlatness(_t);break;case"Font":this.setFont(_t[0],_t[1]);break;case"CA":this.current.strokeAlpha=_t;break;case"ca":this.current.fillAlpha=_t,this.ctx.globalAlpha=_t;break;case"BM":this.ctx.globalCompositeOperation=_t;break;case"SMask":this.current.activeSMask=_t?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(_t);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const it=this.inSMaskMode;this.current.activeSMask&&!it?this.beginSMaskMode():!this.current.activeSMask&&it&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const it=this.ctx.canvas.width,dt=this.ctx.canvas.height,_t="smaskGroupAt"+this.groupLevel,Tt=this.cachedCanvases.getCanvas(_t,it,dt);this.suspendedCtx=this.ctx,this.ctx=Tt.context;const Dt=this.ctx;Dt.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),lt(this.suspendedCtx,Dt),ot(Dt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(it){if(!this.current.activeSMask)return;it?(it[0]=Math.floor(it[0]),it[1]=Math.floor(it[1]),it[2]=Math.ceil(it[2]),it[3]=Math.ceil(it[3])):it=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const dt=this.current.activeSMask,_t=this.suspendedCtx;ht(_t,dt,this.ctx,it),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(lt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const it=this.current;this.stateStack.push(it),this.current=it.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),lt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(it,dt,_t,Tt,Dt,It){this.ctx.transform(it,dt,_t,Tt,Dt,It),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(it,dt,_t){const Tt=this.ctx,Dt=this.current;let It=Dt.x,Lt=Dt.y,on,vn;const un=(0,o.getCurrentTransform)(Tt),kn=un[0]===0&&un[3]===0||un[1]===0&&un[2]===0,jn=kn?_t.slice(0):null;for(let Rn=0,nn=0,rn=it.length;Rn<rn;Rn++)switch(it[Rn]|0){case a.OPS.rectangle:It=dt[nn++],Lt=dt[nn++];const pt=dt[nn++],Rt=dt[nn++],zt=It+pt,Kt=Lt+Rt;Tt.moveTo(It,Lt),pt===0||Rt===0?Tt.lineTo(zt,Kt):(Tt.lineTo(zt,Lt),Tt.lineTo(zt,Kt),Tt.lineTo(It,Kt)),kn||Dt.updateRectMinMax(un,[It,Lt,zt,Kt]),Tt.closePath();break;case a.OPS.moveTo:It=dt[nn++],Lt=dt[nn++],Tt.moveTo(It,Lt),kn||Dt.updatePathMinMax(un,It,Lt);break;case a.OPS.lineTo:It=dt[nn++],Lt=dt[nn++],Tt.lineTo(It,Lt),kn||Dt.updatePathMinMax(un,It,Lt);break;case a.OPS.curveTo:on=It,vn=Lt,It=dt[nn+4],Lt=dt[nn+5],Tt.bezierCurveTo(dt[nn],dt[nn+1],dt[nn+2],dt[nn+3],It,Lt),Dt.updateCurvePathMinMax(un,on,vn,dt[nn],dt[nn+1],dt[nn+2],dt[nn+3],It,Lt,jn),nn+=6;break;case a.OPS.curveTo2:on=It,vn=Lt,Tt.bezierCurveTo(It,Lt,dt[nn],dt[nn+1],dt[nn+2],dt[nn+3]),Dt.updateCurvePathMinMax(un,on,vn,It,Lt,dt[nn],dt[nn+1],dt[nn+2],dt[nn+3],jn),It=dt[nn+2],Lt=dt[nn+3],nn+=4;break;case a.OPS.curveTo3:on=It,vn=Lt,It=dt[nn+2],Lt=dt[nn+3],Tt.bezierCurveTo(dt[nn],dt[nn+1],It,Lt,It,Lt),Dt.updateCurvePathMinMax(un,on,vn,dt[nn],dt[nn+1],It,Lt,It,Lt,jn),nn+=4;break;case a.OPS.closePath:Tt.closePath();break}kn&&Dt.updateScalingPathMinMax(un,jn),Dt.setCurrentPoint(It,Lt)}closePath(){this.ctx.closePath()}stroke(it=!0){const dt=this.ctx,_t=this.current.strokeColor;dt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof _t=="object"&&(_t!=null&&_t.getPattern)?(dt.save(),dt.strokeStyle=_t.getPattern(dt,this,(0,o.getCurrentTransformInverse)(dt),c.PathType.STROKE),this.rescaleAndStroke(!1),dt.restore()):this.rescaleAndStroke(!0)),it&&this.consumePath(this.current.getClippedPathBoundingBox()),dt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(it=!0){const dt=this.ctx,_t=this.current.fillColor,Tt=this.current.patternFill;let Dt=!1;Tt&&(dt.save(),dt.fillStyle=_t.getPattern(dt,this,(0,o.getCurrentTransformInverse)(dt),c.PathType.FILL),Dt=!0);const It=this.current.getClippedPathBoundingBox();this.contentVisible&&It!==null&&(this.pendingEOFill?(dt.fill("evenodd"),this.pendingEOFill=!1):dt.fill()),Dt&&dt.restore(),it&&this.consumePath(It)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Bt}eoClip(){this.pendingClip=Wt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const it=this.pendingTextPaths,dt=this.ctx;if(it===void 0){dt.beginPath();return}dt.save(),dt.beginPath();for(const _t of it)dt.setTransform(..._t.transform),dt.translate(_t.x,_t.y),_t.addToPath(dt,_t.fontSize);dt.restore(),dt.clip(),dt.beginPath(),delete this.pendingTextPaths}setCharSpacing(it){this.current.charSpacing=it}setWordSpacing(it){this.current.wordSpacing=it}setHScale(it){this.current.textHScale=it/100}setLeading(it){this.current.leading=-it}setFont(it,dt){var un;const _t=this.commonObjs.get(it),Tt=this.current;if(!_t)throw new Error(`Can't find font for ${it}`);if(Tt.fontMatrix=_t.fontMatrix||a.FONT_IDENTITY_MATRIX,(Tt.fontMatrix[0]===0||Tt.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+it),dt<0?(dt=-dt,Tt.fontDirection=-1):Tt.fontDirection=1,this.current.font=_t,this.current.fontSize=dt,_t.isType3Font)return;const Dt=_t.loadedName||"sans-serif",It=((un=_t.systemFontInfo)==null?void 0:un.css)||`"${Dt}", ${_t.fallbackName}`;let Lt="normal";_t.black?Lt="900":_t.bold&&(Lt="bold");const on=_t.italic?"italic":"normal";let vn=dt;dt<j?vn=j:dt>b&&(vn=b),this.current.fontSizeScale=dt/vn,this.ctx.font=`${on} ${Lt} ${vn}px ${It}`}setTextRenderingMode(it){this.current.textRenderingMode=it}setTextRise(it){this.current.textRise=it}moveText(it,dt){this.current.x=this.current.lineX+=it,this.current.y=this.current.lineY+=dt}setLeadingMoveText(it,dt){this.setLeading(-dt),this.moveText(it,dt)}setTextMatrix(it,dt,_t,Tt,Dt,It){this.current.textMatrix=[it,dt,_t,Tt,Dt,It],this.current.textMatrixScale=Math.hypot(it,dt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(it,dt,_t,Tt){const Dt=this.ctx,It=this.current,Lt=It.font,on=It.textRenderingMode,vn=It.fontSize/It.fontSizeScale,un=on&a.TextRenderingMode.FILL_STROKE_MASK,kn=!!(on&a.TextRenderingMode.ADD_TO_PATH_FLAG),jn=It.patternFill&&!Lt.missingFile;let Rn;(Lt.disableFontFace||kn||jn)&&(Rn=Lt.getPathGenerator(this.commonObjs,it)),Lt.disableFontFace||jn?(Dt.save(),Dt.translate(dt,_t),Dt.beginPath(),Rn(Dt,vn),Tt&&Dt.setTransform(...Tt),(un===a.TextRenderingMode.FILL||un===a.TextRenderingMode.FILL_STROKE)&&Dt.fill(),(un===a.TextRenderingMode.STROKE||un===a.TextRenderingMode.FILL_STROKE)&&Dt.stroke(),Dt.restore()):((un===a.TextRenderingMode.FILL||un===a.TextRenderingMode.FILL_STROKE)&&Dt.fillText(it,dt,_t),(un===a.TextRenderingMode.STROKE||un===a.TextRenderingMode.FILL_STROKE)&&Dt.strokeText(it,dt,_t)),kn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(Dt),x:dt,y:_t,fontSize:vn,addToPath:Rn})}get isFontSubpixelAAEnabled(){const{context:it}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);it.scale(1.5,1),it.fillText("I",0,10);const dt=it.getImageData(0,0,10,10).data;let _t=!1;for(let Tt=3;Tt<dt.length;Tt+=4)if(dt[Tt]>0&&dt[Tt]<255){_t=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",_t)}showText(it){const dt=this.current,_t=dt.font;if(_t.isType3Font)return this.showType3Text(it);const Tt=dt.fontSize;if(Tt===0)return;const Dt=this.ctx,It=dt.fontSizeScale,Lt=dt.charSpacing,on=dt.wordSpacing,vn=dt.fontDirection,un=dt.textHScale*vn,kn=it.length,jn=_t.vertical,Rn=jn?1:-1,nn=_t.defaultVMetrics,rn=Tt*dt.fontMatrix[0],pt=dt.textRenderingMode===a.TextRenderingMode.FILL&&!_t.disableFontFace&&!dt.patternFill;Dt.save(),Dt.transform(...dt.textMatrix),Dt.translate(dt.x,dt.y+dt.textRise),vn>0?Dt.scale(un,-1):Dt.scale(un,1);let Rt;if(dt.patternFill){Dt.save();const En=dt.fillColor.getPattern(Dt,this,(0,o.getCurrentTransformInverse)(Dt),c.PathType.FILL);Rt=(0,o.getCurrentTransform)(Dt),Dt.restore(),Dt.fillStyle=En}let zt=dt.lineWidth;const Kt=dt.textMatrixScale;if(Kt===0||zt===0){const En=dt.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(En===a.TextRenderingMode.STROKE||En===a.TextRenderingMode.FILL_STROKE)&&(zt=this.getSinglePixelWidth())}else zt/=Kt;if(It!==1&&(Dt.scale(It,It),zt/=It),Dt.lineWidth=zt,_t.isInvalidPDFjsFont){const En=[];let Qt=0;for(const In of it)En.push(In.unicode),Qt+=In.width;Dt.fillText(En.join(""),0,0),dt.x+=Qt*rn*un,Dt.restore(),this.compose();return}let hn=0,Sn;for(Sn=0;Sn<kn;++Sn){const En=it[Sn];if(typeof En=="number"){hn+=Rn*En*Tt/1e3;continue}let Qt=!1;const In=(En.isSpace?on:0)+Lt,Dn=En.fontChar,nr=En.accent;let Jn,or,Bn=En.width;if(jn){const ar=En.vmetric||nn,dr=-(En.vmetric?ar[1]:Bn*.5)*rn,An=ar[2]*rn;Bn=ar?-ar[0]:Bn,Jn=dr/It,or=(hn+An)/It}else Jn=hn/It,or=0;if(_t.remeasure&&Bn>0){const ar=Dt.measureText(Dn).width*1e3/Tt*It;if(Bn<ar&&this.isFontSubpixelAAEnabled){const dr=Bn/ar;Qt=!0,Dt.save(),Dt.scale(dr,1),Jn/=dr}else Bn!==ar&&(Jn+=(Bn-ar)/2e3*Tt/It)}if(this.contentVisible&&(En.isInFont||_t.missingFile)){if(pt&&!nr)Dt.fillText(Dn,Jn,or);else if(this.paintChar(Dn,Jn,or,Rt),nr){const ar=Jn+Tt*nr.offset.x/It,dr=or-Tt*nr.offset.y/It;this.paintChar(nr.fontChar,ar,dr,Rt)}}const Yn=jn?Bn*rn-In*vn:Bn*rn+In*vn;hn+=Yn,Qt&&Dt.restore()}jn?dt.y-=hn:dt.x+=hn*un,Dt.restore(),this.compose()}showType3Text(it){const dt=this.ctx,_t=this.current,Tt=_t.font,Dt=_t.fontSize,It=_t.fontDirection,Lt=Tt.vertical?1:-1,on=_t.charSpacing,vn=_t.wordSpacing,un=_t.textHScale*It,kn=_t.fontMatrix||a.FONT_IDENTITY_MATRIX,jn=it.length,Rn=_t.textRenderingMode===a.TextRenderingMode.INVISIBLE;let nn,rn,pt,Rt;if(!(Rn||Dt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,dt.save(),dt.transform(..._t.textMatrix),dt.translate(_t.x,_t.y),dt.scale(un,It),nn=0;nn<jn;++nn){if(rn=it[nn],typeof rn=="number"){Rt=Lt*rn*Dt/1e3,this.ctx.translate(Rt,0),_t.x+=Rt*un;continue}const zt=(rn.isSpace?vn:0)+on,Kt=Tt.charProcOperatorList[rn.operatorListId];if(!Kt){(0,a.warn)(`Type3 character "${rn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=rn,this.save(),dt.scale(Dt,Dt),dt.transform(...kn),this.executeOperatorList(Kt),this.restore()),pt=a.Util.applyTransform([rn.width,0],kn)[0]*Dt+zt,dt.translate(pt,0),_t.x+=pt*un}dt.restore(),this.processingType3=null}}setCharWidth(it,dt){}setCharWidthAndBounds(it,dt,_t,Tt,Dt,It){this.ctx.rect(_t,Tt,Dt-_t,It-Tt),this.ctx.clip(),this.endPath()}getColorN_Pattern(it){let dt;if(it[0]==="TilingPattern"){const _t=it[1],Tt=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),Dt={createCanvasGraphics:It=>new Gt(It,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};dt=new c.TilingPattern(it,_t,this.ctx,Dt,Tt)}else dt=this._getPattern(it[1],it[2]);return dt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(it,dt,_t){const Tt=a.Util.makeHexColor(it,dt,_t);this.ctx.strokeStyle=Tt,this.current.strokeColor=Tt}setFillRGBColor(it,dt,_t){const Tt=a.Util.makeHexColor(it,dt,_t);this.ctx.fillStyle=Tt,this.current.fillColor=Tt,this.current.patternFill=!1}_getPattern(it,dt=null){let _t;return this.cachedPatterns.has(it)?_t=this.cachedPatterns.get(it):(_t=(0,c.getShadingPattern)(this.getObject(it)),this.cachedPatterns.set(it,_t)),dt&&(_t.matrix=dt),_t}shadingFill(it){if(!this.contentVisible)return;const dt=this.ctx;this.save();const _t=this._getPattern(it);dt.fillStyle=_t.getPattern(dt,this,(0,o.getCurrentTransformInverse)(dt),c.PathType.SHADING);const Tt=(0,o.getCurrentTransformInverse)(dt);if(Tt){const{width:Dt,height:It}=dt.canvas,[Lt,on,vn,un]=a.Util.getAxialAlignedBoundingBox([0,0,Dt,It],Tt);this.ctx.fillRect(Lt,on,vn-Lt,un-on)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(it,dt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(it)&&it.length===6&&this.transform(...it),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),dt)){const _t=dt[2]-dt[0],Tt=dt[3]-dt[1];this.ctx.rect(dt[0],dt[1],_t,Tt),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),dt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(it){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const dt=this.ctx;it.isolated||(0,a.info)("TODO: Support non-isolated groups."),it.knockout&&(0,a.warn)("Knockout groups not supported.");const _t=(0,o.getCurrentTransform)(dt);if(it.matrix&&dt.transform(...it.matrix),!it.bbox)throw new Error("Bounding box is required.");let Tt=a.Util.getAxialAlignedBoundingBox(it.bbox,(0,o.getCurrentTransform)(dt));const Dt=[0,0,dt.canvas.width,dt.canvas.height];Tt=a.Util.intersect(Tt,Dt)||[0,0,0,0];const It=Math.floor(Tt[0]),Lt=Math.floor(Tt[1]);let on=Math.max(Math.ceil(Tt[2])-It,1),vn=Math.max(Math.ceil(Tt[3])-Lt,1),un=1,kn=1;on>_&&(un=on/_,on=_),vn>_&&(kn=vn/_,vn=_),this.current.startNewPathAndClipBox([0,0,on,vn]);let jn="groupAt"+this.groupLevel;it.smask&&(jn+="_smask_"+this.smaskCounter++%2);const Rn=this.cachedCanvases.getCanvas(jn,on,vn),nn=Rn.context;nn.scale(1/un,1/kn),nn.translate(-It,-Lt),nn.transform(..._t),it.smask?this.smaskStack.push({canvas:Rn.canvas,context:nn,offsetX:It,offsetY:Lt,scaleX:un,scaleY:kn,subtype:it.smask.subtype,backdrop:it.smask.backdrop,transferMap:it.smask.transferMap||null,startTransformInverse:null}):(dt.setTransform(1,0,0,1,0,0),dt.translate(It,Lt),dt.scale(un,kn),dt.save()),lt(dt,nn),this.ctx=nn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(dt),this.groupLevel++}endGroup(it){if(!this.contentVisible)return;this.groupLevel--;const dt=this.ctx,_t=this.groupStack.pop();if(this.ctx=_t,this.ctx.imageSmoothingEnabled=!1,it.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Tt=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Tt);const Dt=a.Util.getAxialAlignedBoundingBox([0,0,dt.canvas.width,dt.canvas.height],Tt);this.ctx.drawImage(dt.canvas,0,0),this.ctx.restore(),this.compose(Dt)}}beginAnnotation(it,dt,_t,Tt,Dt){if(Yt(this,$t,Fo).call(this),yt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(dt)&&dt.length===4){const It=dt[2]-dt[0],Lt=dt[3]-dt[1];if(Dt&&this.annotationCanvasMap){_t=_t.slice(),_t[4]-=dt[0],_t[5]-=dt[1],dt=dt.slice(),dt[0]=dt[1]=0,dt[2]=It,dt[3]=Lt;const[on,vn]=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:un}=this,kn=Math.ceil(It*this.outputScaleX*un),jn=Math.ceil(Lt*this.outputScaleY*un);this.annotationCanvas=this.canvasFactory.create(kn,jn);const{canvas:Rn,context:nn}=this.annotationCanvas;this.annotationCanvasMap.set(it,Rn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=nn,this.ctx.save(),this.ctx.setTransform(on,0,0,-vn,0,Lt*vn),yt(this.ctx)}else yt(this.ctx),this.ctx.rect(dt[0],dt[1],It,Lt),this.ctx.clip(),this.endPath()}this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._t),this.transform(...Tt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Yt(this,$t,Mo).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(it){if(!this.contentVisible)return;const dt=it.count;it=this.getObject(it.data,it),it.count=dt;const _t=this.ctx,Tt=this.processingType3;if(Tt&&(Tt.compiled===void 0&&(Tt.compiled=et(it)),Tt.compiled)){Tt.compiled(_t);return}const Dt=this._createMaskCanvas(it),It=Dt.canvas;_t.save(),_t.setTransform(1,0,0,1,0,0),_t.drawImage(It,Dt.offsetX,Dt.offsetY),_t.restore(),this.compose()}paintImageMaskXObjectRepeat(it,dt,_t=0,Tt=0,Dt,It){if(!this.contentVisible)return;it=this.getObject(it.data,it);const Lt=this.ctx;Lt.save();const on=(0,o.getCurrentTransform)(Lt);Lt.transform(dt,_t,Tt,Dt,0,0);const vn=this._createMaskCanvas(it);Lt.setTransform(1,0,0,1,vn.offsetX-on[4],vn.offsetY-on[5]);for(let un=0,kn=It.length;un<kn;un+=2){const jn=a.Util.transform(on,[dt,_t,Tt,Dt,It[un],It[un+1]]),[Rn,nn]=a.Util.applyTransform([0,0],jn);Lt.drawImage(vn.canvas,Rn,nn)}Lt.restore(),this.compose()}paintImageMaskXObjectGroup(it){if(!this.contentVisible)return;const dt=this.ctx,_t=this.current.fillColor,Tt=this.current.patternFill;for(const Dt of it){const{data:It,width:Lt,height:on,transform:vn}=Dt,un=this.cachedCanvases.getCanvas("maskCanvas",Lt,on),kn=un.context;kn.save();const jn=this.getObject(It,Dt);gt(kn,jn),kn.globalCompositeOperation="source-in",kn.fillStyle=Tt?_t.getPattern(kn,this,(0,o.getCurrentTransformInverse)(dt),c.PathType.FILL):_t,kn.fillRect(0,0,Lt,on),kn.restore(),dt.save(),dt.transform(...vn),dt.scale(1,-1),bt(dt,un.canvas,0,0,Lt,on,0,-1,1,1),dt.restore()}this.compose()}paintImageXObject(it){if(!this.contentVisible)return;const dt=this.getObject(it);if(!dt){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(dt)}paintImageXObjectRepeat(it,dt,_t,Tt){if(!this.contentVisible)return;const Dt=this.getObject(it);if(!Dt){(0,a.warn)("Dependent image isn't ready yet");return}const It=Dt.width,Lt=Dt.height,on=[];for(let vn=0,un=Tt.length;vn<un;vn+=2)on.push({transform:[dt,0,0,_t,Tt[vn],Tt[vn+1]],x:0,y:0,w:It,h:Lt});this.paintInlineImageXObjectGroup(Dt,on)}applyTransferMapsToCanvas(it){return this.current.transferMaps!=="none"&&(it.filter=this.current.transferMaps,it.drawImage(it.canvas,0,0),it.filter="none"),it.canvas}applyTransferMapsToBitmap(it){if(this.current.transferMaps==="none")return it.bitmap;const{bitmap:dt,width:_t,height:Tt}=it,Dt=this.cachedCanvases.getCanvas("inlineImage",_t,Tt),It=Dt.context;return It.filter=this.current.transferMaps,It.drawImage(dt,0,0),It.filter="none",Dt.canvas}paintInlineImageXObject(it){if(!this.contentVisible)return;const dt=it.width,_t=it.height,Tt=this.ctx;if(this.save(),!a.isNodeJS){const{filter:Lt}=Tt;Lt!=="none"&&Lt!==""&&(Tt.filter="none")}Tt.scale(1/dt,-1/_t);let Dt;if(it.bitmap)Dt=this.applyTransferMapsToBitmap(it);else if(typeof HTMLElement=="function"&&it instanceof HTMLElement||!it.data)Dt=it;else{const on=this.cachedCanvases.getCanvas("inlineImage",dt,_t).context;st(on,it),Dt=this.applyTransferMapsToCanvas(on)}const It=this._scaleImage(Dt,(0,o.getCurrentTransformInverse)(Tt));Tt.imageSmoothingEnabled=wt((0,o.getCurrentTransform)(Tt),it.interpolate),bt(Tt,It.img,0,0,It.paintWidth,It.paintHeight,0,-_t,dt,_t),this.compose(),this.restore()}paintInlineImageXObjectGroup(it,dt){if(!this.contentVisible)return;const _t=this.ctx;let Tt;if(it.bitmap)Tt=it.bitmap;else{const Dt=it.width,It=it.height,on=this.cachedCanvases.getCanvas("inlineImage",Dt,It).context;st(on,it),Tt=this.applyTransferMapsToCanvas(on)}for(const Dt of dt)_t.save(),_t.transform(...Dt.transform),_t.scale(1,-1),bt(_t,Tt,Dt.x,Dt.y,Dt.w,Dt.h,0,-1,1,1),_t.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(it){}markPointProps(it,dt){}beginMarkedContent(it){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(it,dt){it==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(dt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(it){const dt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(it);const _t=this.ctx;this.pendingClip&&(dt||(this.pendingClip===Wt?_t.clip("evenodd"):_t.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_t.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const it=(0,o.getCurrentTransform)(this.ctx);if(it[1]===0&&it[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(it[0]),Math.abs(it[3]));else{const dt=Math.abs(it[0]*it[3]-it[2]*it[1]),_t=Math.hypot(it[0],it[2]),Tt=Math.hypot(it[1],it[3]);this._cachedGetSinglePixelWidth=Math.max(_t,Tt)/dt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:it}=this.current,{a:dt,b:_t,c:Tt,d:Dt}=this.ctx.getTransform();let It,Lt;if(_t===0&&Tt===0){const on=Math.abs(dt),vn=Math.abs(Dt);if(on===vn)if(it===0)It=Lt=1/on;else{const un=on*it;It=Lt=un<1?1/un:1}else if(it===0)It=1/on,Lt=1/vn;else{const un=on*it,kn=vn*it;It=un<1?1/un:1,Lt=kn<1?1/kn:1}}else{const on=Math.abs(dt*Dt-_t*Tt),vn=Math.hypot(dt,_t),un=Math.hypot(Tt,Dt);if(it===0)It=un/on,Lt=vn/on;else{const kn=it*on;It=un>kn?un/kn:1,Lt=vn>kn?vn/kn:1}}this._cachedScaleForStroking[0]=It,this._cachedScaleForStroking[1]=Lt}return this._cachedScaleForStroking}rescaleAndStroke(it){const{ctx:dt}=this,{lineWidth:_t}=this.current,[Tt,Dt]=this.getScaleForStroking();if(dt.lineWidth=_t||1,Tt===1&&Dt===1){dt.stroke();return}const It=dt.getLineDash();if(it&&dt.save(),dt.scale(Tt,Dt),It.length>0){const Lt=Math.max(Tt,Dt);dt.setLineDash(It.map(on=>on/Lt)),dt.lineDashOffset/=Lt}dt.stroke(),it&&dt.restore()}isContentVisible(){for(let it=this.markedContentStack.length-1;it>=0;it--)if(!this.markedContentStack[it].visible)return!1;return!0}};$t=new WeakSet,Fo=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Mo=function(){if(this.pageColors){const it=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(it!=="none"){const dt=this.ctx.filter;this.ctx.filter=it,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=dt}}};let Ut=Gt;s.CanvasGraphics=Ut;for(const At in a.OPS)Ut.prototype[At]!==void 0&&(Ut.prototype[a.OPS[At]]=Ut.prototype[At])},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=ut;var a=i(1),o=i(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=c;function h(et,nt){if(!nt)return;const st=nt[2]-nt[0],gt=nt[3]-nt[1],lt=new Path2D;lt.rect(nt[0],nt[1],st,gt),et.clip(lt)}class j{constructor(){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class b extends j{constructor(nt){super(),this._type=nt[1],this._bbox=nt[2],this._colorStops=nt[3],this._p0=nt[4],this._p1=nt[5],this._r0=nt[6],this._r1=nt[7],this.matrix=null}_createGradient(nt){let st;this._type==="axial"?st=nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(st=nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const gt of this._colorStops)st.addColorStop(gt[0],gt[1]);return st}getPattern(nt,st,gt,lt){let yt;if(lt===c.STROKE||lt===c.FILL){const ct=st.current.getClippedPathBoundingBox(lt,(0,o.getCurrentTransform)(nt))||[0,0,0,0],mt=Math.ceil(ct[2]-ct[0])||1,xt=Math.ceil(ct[3]-ct[1])||1,Ct=st.cachedCanvases.getCanvas("pattern",mt,xt,!0),ht=Ct.context;ht.clearRect(0,0,ht.canvas.width,ht.canvas.height),ht.beginPath(),ht.rect(0,0,ht.canvas.width,ht.canvas.height),ht.translate(-ct[0],-ct[1]),gt=a.Util.transform(gt,[1,0,0,1,ct[0],ct[1]]),ht.transform(...st.baseTransform),this.matrix&&ht.transform(...this.matrix),h(ht,this._bbox),ht.fillStyle=this._createGradient(ht),ht.fill(),yt=nt.createPattern(Ct.canvas,"no-repeat");const wt=new DOMMatrix(gt);yt.setTransform(wt)}else h(nt,this._bbox),yt=this._createGradient(nt);return yt}}function _(et,nt,st,gt,lt,yt,ct,mt){const xt=nt.coords,Ct=nt.colors,ht=et.data,wt=et.width*4;let jt;xt[st+1]>xt[gt+1]&&(jt=st,st=gt,gt=jt,jt=yt,yt=ct,ct=jt),xt[gt+1]>xt[lt+1]&&(jt=gt,gt=lt,lt=jt,jt=ct,ct=mt,mt=jt),xt[st+1]>xt[gt+1]&&(jt=st,st=gt,gt=jt,jt=yt,yt=ct,ct=jt);const Xt=(xt[st]+nt.offsetX)*nt.scaleX,Bt=(xt[st+1]+nt.offsetY)*nt.scaleY,Wt=(xt[gt]+nt.offsetX)*nt.scaleX,Ut=(xt[gt+1]+nt.offsetY)*nt.scaleY,$t=(xt[lt]+nt.offsetX)*nt.scaleX,kt=(xt[lt+1]+nt.offsetY)*nt.scaleY;if(Bt>=kt)return;const Ft=Ct[yt],Gt=Ct[yt+1],At=Ct[yt+2],it=Ct[ct],dt=Ct[ct+1],_t=Ct[ct+2],Tt=Ct[mt],Dt=Ct[mt+1],It=Ct[mt+2],Lt=Math.round(Bt),on=Math.round(kt);let vn,un,kn,jn,Rn,nn,rn,pt;for(let Rt=Lt;Rt<=on;Rt++){if(Rt<Ut){const En=Rt<Bt?0:(Bt-Rt)/(Bt-Ut);vn=Xt-(Xt-Wt)*En,un=Ft-(Ft-it)*En,kn=Gt-(Gt-dt)*En,jn=At-(At-_t)*En}else{let En;Rt>kt?En=1:Ut===kt?En=0:En=(Ut-Rt)/(Ut-kt),vn=Wt-(Wt-$t)*En,un=it-(it-Tt)*En,kn=dt-(dt-Dt)*En,jn=_t-(_t-It)*En}let zt;Rt<Bt?zt=0:Rt>kt?zt=1:zt=(Bt-Rt)/(Bt-kt),Rn=Xt-(Xt-$t)*zt,nn=Ft-(Ft-Tt)*zt,rn=Gt-(Gt-Dt)*zt,pt=At-(At-It)*zt;const Kt=Math.round(Math.min(vn,Rn)),hn=Math.round(Math.max(vn,Rn));let Sn=wt*Rt+Kt*4;for(let En=Kt;En<=hn;En++)zt=(vn-En)/(vn-Rn),zt<0?zt=0:zt>1&&(zt=1),ht[Sn++]=un-(un-nn)*zt|0,ht[Sn++]=kn-(kn-rn)*zt|0,ht[Sn++]=jn-(jn-pt)*zt|0,ht[Sn++]=255}}function $(et,nt,st){const gt=nt.coords,lt=nt.colors;let yt,ct;switch(nt.type){case"lattice":const mt=nt.verticesPerRow,xt=Math.floor(gt.length/mt)-1,Ct=mt-1;for(yt=0;yt<xt;yt++){let ht=yt*mt;for(let wt=0;wt<Ct;wt++,ht++)_(et,st,gt[ht],gt[ht+1],gt[ht+mt],lt[ht],lt[ht+1],lt[ht+mt]),_(et,st,gt[ht+mt+1],gt[ht+1],gt[ht+mt],lt[ht+mt+1],lt[ht+1],lt[ht+mt])}break;case"triangles":for(yt=0,ct=gt.length;yt<ct;yt+=3)_(et,st,gt[yt],gt[yt+1],gt[yt+2],lt[yt],lt[yt+1],lt[yt+2]);break;default:throw new Error("illegal figure")}}class at extends j{constructor(nt){super(),this._coords=nt[2],this._colors=nt[3],this._figures=nt[4],this._bounds=nt[5],this._bbox=nt[7],this._background=nt[8],this.matrix=null}_createMeshCanvas(nt,st,gt){const mt=Math.floor(this._bounds[0]),xt=Math.floor(this._bounds[1]),Ct=Math.ceil(this._bounds[2])-mt,ht=Math.ceil(this._bounds[3])-xt,wt=Math.min(Math.ceil(Math.abs(Ct*nt[0]*1.1)),3e3),jt=Math.min(Math.ceil(Math.abs(ht*nt[1]*1.1)),3e3),Xt=Ct/wt,Bt=ht/jt,Wt={coords:this._coords,colors:this._colors,offsetX:-mt,offsetY:-xt,scaleX:1/Xt,scaleY:1/Bt},Ut=wt+2*2,$t=jt+2*2,kt=gt.getCanvas("mesh",Ut,$t,!1),Ft=kt.context,Gt=Ft.createImageData(wt,jt);if(st){const it=Gt.data;for(let dt=0,_t=it.length;dt<_t;dt+=4)it[dt]=st[0],it[dt+1]=st[1],it[dt+2]=st[2],it[dt+3]=255}for(const it of this._figures)$(Gt,it,Wt);return Ft.putImageData(Gt,2,2),{canvas:kt.canvas,offsetX:mt-2*Xt,offsetY:xt-2*Bt,scaleX:Xt,scaleY:Bt}}getPattern(nt,st,gt,lt){h(nt,this._bbox);let yt;if(lt===c.SHADING)yt=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(nt));else if(yt=a.Util.singularValueDecompose2dScale(st.baseTransform),this.matrix){const mt=a.Util.singularValueDecompose2dScale(this.matrix);yt=[yt[0]*mt[0],yt[1]*mt[1]]}const ct=this._createMeshCanvas(yt,lt===c.SHADING?null:this._background,st.cachedCanvases);return lt!==c.SHADING&&(nt.setTransform(...st.baseTransform),this.matrix&&nt.transform(...this.matrix)),nt.translate(ct.offsetX,ct.offsetY),nt.scale(ct.scaleX,ct.scaleY),nt.createPattern(ct.canvas,"no-repeat")}}class rt extends j{getPattern(){return"hotpink"}}function ut(et){switch(et[0]){case"RadialAxial":return new b(et);case"Mesh":return new at(et);case"Dummy":return new rt}throw new Error(`Unknown IR type: ${et[0]}`)}const ot={COLORED:1,UNCOLORED:2},bt=class bt{constructor(nt,st,gt,lt,yt){this.operatorList=nt[2],this.matrix=nt[3]||[1,0,0,1,0,0],this.bbox=nt[4],this.xstep=nt[5],this.ystep=nt[6],this.paintType=nt[7],this.tilingType=nt[8],this.color=st,this.ctx=gt,this.canvasGraphicsFactory=lt,this.baseTransform=yt}createPatternCanvas(nt){const st=this.operatorList,gt=this.bbox,lt=this.xstep,yt=this.ystep,ct=this.paintType,mt=this.tilingType,xt=this.color,Ct=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+mt);const ht=gt[0],wt=gt[1],jt=gt[2],Xt=gt[3],Bt=a.Util.singularValueDecompose2dScale(this.matrix),Wt=a.Util.singularValueDecompose2dScale(this.baseTransform),Ut=[Bt[0]*Wt[0],Bt[1]*Wt[1]],$t=this.getSizeAndScale(lt,this.ctx.canvas.width,Ut[0]),kt=this.getSizeAndScale(yt,this.ctx.canvas.height,Ut[1]),Ft=nt.cachedCanvases.getCanvas("pattern",$t.size,kt.size,!0),Gt=Ft.context,At=Ct.createCanvasGraphics(Gt);At.groupLevel=nt.groupLevel,this.setFillAndStrokeStyleToContext(At,ct,xt);let it=ht,dt=wt,_t=jt,Tt=Xt;return ht<0&&(it=0,_t+=Math.abs(ht)),wt<0&&(dt=0,Tt+=Math.abs(wt)),Gt.translate(-($t.scale*it),-(kt.scale*dt)),At.transform($t.scale,0,0,kt.scale,0,0),Gt.save(),this.clipBbox(At,it,dt,_t,Tt),At.baseTransform=(0,o.getCurrentTransform)(At.ctx),At.executeOperatorList(st),At.endDrawing(),{canvas:Ft.canvas,scaleX:$t.scale,scaleY:kt.scale,offsetX:it,offsetY:dt}}getSizeAndScale(nt,st,gt){nt=Math.abs(nt);const lt=Math.max(bt.MAX_PATTERN_SIZE,st);let yt=Math.ceil(nt*gt);return yt>=lt?yt=lt:gt=yt/nt,{scale:gt,size:yt}}clipBbox(nt,st,gt,lt,yt){const ct=lt-st,mt=yt-gt;nt.ctx.rect(st,gt,ct,mt),nt.current.updateRectMinMax((0,o.getCurrentTransform)(nt.ctx),[st,gt,lt,yt]),nt.clip(),nt.endPath()}setFillAndStrokeStyleToContext(nt,st,gt){const lt=nt.ctx,yt=nt.current;switch(st){case ot.COLORED:const ct=this.ctx;lt.fillStyle=ct.fillStyle,lt.strokeStyle=ct.strokeStyle,yt.fillColor=ct.fillStyle,yt.strokeColor=ct.strokeStyle;break;case ot.UNCOLORED:const mt=a.Util.makeHexColor(gt[0],gt[1],gt[2]);lt.fillStyle=mt,lt.strokeStyle=mt,yt.fillColor=mt,yt.strokeColor=mt;break;default:throw new a.FormatError(`Unsupported paint type: ${st}`)}}getPattern(nt,st,gt,lt){let yt=gt;lt!==c.SHADING&&(yt=a.Util.transform(yt,st.baseTransform),this.matrix&&(yt=a.Util.transform(yt,this.matrix)));const ct=this.createPatternCanvas(st);let mt=new DOMMatrix(yt);mt=mt.translate(ct.offsetX,ct.offsetY),mt=mt.scale(1/ct.scaleX,1/ct.scaleY);const xt=nt.createPattern(ct.canvas,"repeat");return xt.setTransform(mt),xt}};xr(bt,"MAX_PATTERN_SIZE",3e3);let vt=bt;s.TilingPattern=vt},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=c,s.convertToRGBA=o,s.grayToRGBA=j;var a=i(1);function o(b){switch(b.kind){case a.ImageKind.GRAYSCALE_1BPP:return c(b);case a.ImageKind.RGB_24BPP:return h(b)}return null}function c({src:b,srcPos:_=0,dest:$,width:at,height:rt,nonBlackColor:ut=4294967295,inverseDecode:ot=!1}){const vt=a.FeatureTest.isLittleEndian?4278190080:255,[bt,et]=ot?[ut,vt]:[vt,ut],nt=at>>3,st=at&7,gt=b.length;$=new Uint32Array($.buffer);let lt=0;for(let yt=0;yt<rt;yt++){for(const mt=_+nt;_<mt;_++){const xt=_<gt?b[_]:255;$[lt++]=xt&128?et:bt,$[lt++]=xt&64?et:bt,$[lt++]=xt&32?et:bt,$[lt++]=xt&16?et:bt,$[lt++]=xt&8?et:bt,$[lt++]=xt&4?et:bt,$[lt++]=xt&2?et:bt,$[lt++]=xt&1?et:bt}if(st===0)continue;const ct=_<gt?b[_++]:255;for(let mt=0;mt<st;mt++)$[lt++]=ct&1<<7-mt?et:bt}return{srcPos:_,destPos:lt}}function h({src:b,srcPos:_=0,dest:$,destPos:at=0,width:rt,height:ut}){let ot=0;const vt=b.length>>2,bt=new Uint32Array(b.buffer,_,vt);if(a.FeatureTest.isLittleEndian){for(;ot<vt-2;ot+=3,at+=4){const et=bt[ot],nt=bt[ot+1],st=bt[ot+2];$[at]=et|4278190080,$[at+1]=et>>>24|nt<<8|4278190080,$[at+2]=nt>>>16|st<<16|4278190080,$[at+3]=st>>>8|4278190080}for(let et=ot*4,nt=b.length;et<nt;et+=3)$[at++]=b[et]|b[et+1]<<8|b[et+2]<<16|4278190080}else{for(;ot<vt-2;ot+=3,at+=4){const et=bt[ot],nt=bt[ot+1],st=bt[ot+2];$[at]=et|255,$[at+1]=et<<24|nt>>>8|255,$[at+2]=nt<<16|st>>>16|255,$[at+3]=st<<8|255}for(let et=ot*4,nt=b.length;et<nt;et+=3)$[at++]=b[et]<<24|b[et+1]<<16|b[et+2]<<8|255}return{srcPos:_,destPos:at}}function j(b,_){if(a.FeatureTest.isLittleEndian)for(let $=0,at=b.length;$<at;$++)_[$]=b[$]*65793|4278190080;else for(let $=0,at=b.length;$<at;$++)_[$]=b[$]*16843008|255}},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const i=Object.create(null);s.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(e,s,i)=>{var b,ou,lu,Hs;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var a=i(1);const o={DATA:1,ERROR:2},c={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function h(rt){switch(rt instanceof Error||typeof rt=="object"&&rt!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),rt.name){case"AbortException":return new a.AbortException(rt.message);case"MissingPDFException":return new a.MissingPDFException(rt.message);case"PasswordException":return new a.PasswordException(rt.message,rt.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(rt.message,rt.status);case"UnknownErrorException":return new a.UnknownErrorException(rt.message,rt.details);default:return new a.UnknownErrorException(rt.message,rt.toString())}}class j{constructor(ut,ot,vt){cn(this,b);this.sourceName=ut,this.targetName=ot,this.comObj=vt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=bt=>{const et=bt.data;if(et.targetName!==this.sourceName)return;if(et.stream){Yt(this,b,lu).call(this,et);return}if(et.callback){const st=et.callbackId,gt=this.callbackCapabilities[st];if(!gt)throw new Error(`Cannot resolve callback ${st}`);if(delete this.callbackCapabilities[st],et.callback===o.DATA)gt.resolve(et.data);else if(et.callback===o.ERROR)gt.reject(h(et.reason));else throw new Error("Unexpected callback case");return}const nt=this.actionHandler[et.action];if(!nt)throw new Error(`Unknown action from worker: ${et.action}`);if(et.callbackId){const st=this.sourceName,gt=et.sourceName;new Promise(function(lt){lt(nt(et.data))}).then(function(lt){vt.postMessage({sourceName:st,targetName:gt,callback:o.DATA,callbackId:et.callbackId,data:lt})},function(lt){vt.postMessage({sourceName:st,targetName:gt,callback:o.ERROR,callbackId:et.callbackId,reason:h(lt)})});return}if(et.streamId){Yt(this,b,ou).call(this,et);return}nt(et.data)},vt.addEventListener("message",this._onComObjOnMessage)}on(ut,ot){const vt=this.actionHandler;if(vt[ut])throw new Error(`There is already an actionName called "${ut}"`);vt[ut]=ot}send(ut,ot,vt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ut,data:ot},vt)}sendWithPromise(ut,ot,vt){const bt=this.callbackId++,et=new a.PromiseCapability;this.callbackCapabilities[bt]=et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ut,callbackId:bt,data:ot},vt)}catch(nt){et.reject(nt)}return et.promise}sendWithStream(ut,ot,vt,bt){const et=this.streamId++,nt=this.sourceName,st=this.targetName,gt=this.comObj;return new ReadableStream({start:lt=>{const yt=new a.PromiseCapability;return this.streamControllers[et]={controller:lt,startCall:yt,pullCall:null,cancelCall:null,isClosed:!1},gt.postMessage({sourceName:nt,targetName:st,action:ut,streamId:et,data:ot,desiredSize:lt.desiredSize},bt),yt.promise},pull:lt=>{const yt=new a.PromiseCapability;return this.streamControllers[et].pullCall=yt,gt.postMessage({sourceName:nt,targetName:st,stream:c.PULL,streamId:et,desiredSize:lt.desiredSize}),yt.promise},cancel:lt=>{(0,a.assert)(lt instanceof Error,"cancel must have a valid reason");const yt=new a.PromiseCapability;return this.streamControllers[et].cancelCall=yt,this.streamControllers[et].isClosed=!0,gt.postMessage({sourceName:nt,targetName:st,stream:c.CANCEL,streamId:et,reason:h(lt)}),yt.promise}},vt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}b=new WeakSet,ou=function(ut){const ot=ut.streamId,vt=this.sourceName,bt=ut.sourceName,et=this.comObj,nt=this,st=this.actionHandler[ut.action],gt={enqueue(lt,yt=1,ct){if(this.isCancelled)return;const mt=this.desiredSize;this.desiredSize-=yt,mt>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),et.postMessage({sourceName:vt,targetName:bt,stream:c.ENQUEUE,streamId:ot,chunk:lt},ct)},close(){this.isCancelled||(this.isCancelled=!0,et.postMessage({sourceName:vt,targetName:bt,stream:c.CLOSE,streamId:ot}),delete nt.streamSinks[ot])},error(lt){(0,a.assert)(lt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,et.postMessage({sourceName:vt,targetName:bt,stream:c.ERROR,streamId:ot,reason:h(lt)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ut.desiredSize,ready:null};gt.sinkCapability.resolve(),gt.ready=gt.sinkCapability.promise,this.streamSinks[ot]=gt,new Promise(function(lt){lt(st(ut.data,gt))}).then(function(){et.postMessage({sourceName:vt,targetName:bt,stream:c.START_COMPLETE,streamId:ot,success:!0})},function(lt){et.postMessage({sourceName:vt,targetName:bt,stream:c.START_COMPLETE,streamId:ot,reason:h(lt)})})},lu=function(ut){const ot=ut.streamId,vt=this.sourceName,bt=ut.sourceName,et=this.comObj,nt=this.streamControllers[ot],st=this.streamSinks[ot];switch(ut.stream){case c.START_COMPLETE:ut.success?nt.startCall.resolve():nt.startCall.reject(h(ut.reason));break;case c.PULL_COMPLETE:ut.success?nt.pullCall.resolve():nt.pullCall.reject(h(ut.reason));break;case c.PULL:if(!st){et.postMessage({sourceName:vt,targetName:bt,stream:c.PULL_COMPLETE,streamId:ot,success:!0});break}st.desiredSize<=0&&ut.desiredSize>0&&st.sinkCapability.resolve(),st.desiredSize=ut.desiredSize,new Promise(function(gt){var lt;gt((lt=st.onPull)==null?void 0:lt.call(st))}).then(function(){et.postMessage({sourceName:vt,targetName:bt,stream:c.PULL_COMPLETE,streamId:ot,success:!0})},function(gt){et.postMessage({sourceName:vt,targetName:bt,stream:c.PULL_COMPLETE,streamId:ot,reason:h(gt)})});break;case c.ENQUEUE:if((0,a.assert)(nt,"enqueue should have stream controller"),nt.isClosed)break;nt.controller.enqueue(ut.chunk);break;case c.CLOSE:if((0,a.assert)(nt,"close should have stream controller"),nt.isClosed)break;nt.isClosed=!0,nt.controller.close(),Yt(this,b,Hs).call(this,nt,ot);break;case c.ERROR:(0,a.assert)(nt,"error should have stream controller"),nt.controller.error(h(ut.reason)),Yt(this,b,Hs).call(this,nt,ot);break;case c.CANCEL_COMPLETE:ut.success?nt.cancelCall.resolve():nt.cancelCall.reject(h(ut.reason)),Yt(this,b,Hs).call(this,nt,ot);break;case c.CANCEL:if(!st)break;new Promise(function(gt){var lt;gt((lt=st.onCancel)==null?void 0:lt.call(st,h(ut.reason)))}).then(function(){et.postMessage({sourceName:vt,targetName:bt,stream:c.CANCEL_COMPLETE,streamId:ot,success:!0})},function(gt){et.postMessage({sourceName:vt,targetName:bt,stream:c.CANCEL_COMPLETE,streamId:ot,reason:h(gt)})}),st.sinkCapability.reject(h(ut.reason)),st.isCancelled=!0,delete this.streamSinks[ot];break;default:throw new Error("Unexpected stream case")}},Hs=async function(ut,ot){var vt,bt,et;await Promise.allSettled([(vt=ut.startCall)==null?void 0:vt.promise,(bt=ut.pullCall)==null?void 0:bt.promise,(et=ut.cancelCall)==null?void 0:et.promise]),delete this.streamControllers[ot]},s.MessageHandler=j},(e,s,i)=>{var c,h;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var a=i(1);class o{constructor({parsedData:b,rawData:_}){cn(this,c);cn(this,h);dn(this,c,b),dn(this,h,_)}getRaw(){return tt(this,h)}get(b){return tt(this,c).get(b)??null}getAll(){return(0,a.objectFromMap)(tt(this,c))}has(b){return tt(this,c).has(b)}}c=new WeakMap,h=new WeakMap,s.Metadata=o},(e,s,i)=>{var b,_,$,at,rt,ut,Oo;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var a=i(1),o=i(8);const c=Symbol("INTERNAL");class h{constructor(bt,et){cn(this,b,!0);this.name=bt,this.intent=et}get visible(){return tt(this,b)}_setVisible(bt,et){bt!==c&&(0,a.unreachable)("Internal method `_setVisible` called."),dn(this,b,et)}}b=new WeakMap;class j{constructor(bt){cn(this,ut);cn(this,_,null);cn(this,$,new Map);cn(this,at,null);cn(this,rt,null);if(this.name=null,this.creator=null,bt!==null){this.name=bt.name,this.creator=bt.creator,dn(this,rt,bt.order);for(const et of bt.groups)tt(this,$).set(et.id,new h(et.name,et.intent));if(bt.baseState==="OFF")for(const et of tt(this,$).values())et._setVisible(c,!1);for(const et of bt.on)tt(this,$).get(et)._setVisible(c,!0);for(const et of bt.off)tt(this,$).get(et)._setVisible(c,!1);dn(this,at,this.getHash())}}isVisible(bt){if(tt(this,$).size===0)return!0;if(!bt)return(0,a.warn)("Optional content group not defined."),!0;if(bt.type==="OCG")return tt(this,$).has(bt.id)?tt(this,$).get(bt.id).visible:((0,a.warn)(`Optional content group not found: ${bt.id}`),!0);if(bt.type==="OCMD"){if(bt.expression)return Yt(this,ut,Oo).call(this,bt.expression);if(!bt.policy||bt.policy==="AnyOn"){for(const et of bt.ids){if(!tt(this,$).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(tt(this,$).get(et).visible)return!0}return!1}else if(bt.policy==="AllOn"){for(const et of bt.ids){if(!tt(this,$).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(!tt(this,$).get(et).visible)return!1}return!0}else if(bt.policy==="AnyOff"){for(const et of bt.ids){if(!tt(this,$).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(!tt(this,$).get(et).visible)return!0}return!1}else if(bt.policy==="AllOff"){for(const et of bt.ids){if(!tt(this,$).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(tt(this,$).get(et).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${bt.policy}.`),!0}return(0,a.warn)(`Unknown group type ${bt.type}.`),!0}setVisibility(bt,et=!0){if(!tt(this,$).has(bt)){(0,a.warn)(`Optional content group not found: ${bt}`);return}tt(this,$).get(bt)._setVisible(c,!!et),dn(this,_,null)}get hasInitialVisibility(){return tt(this,at)===null||this.getHash()===tt(this,at)}getOrder(){return tt(this,$).size?tt(this,rt)?tt(this,rt).slice():[...tt(this,$).keys()]:null}getGroups(){return tt(this,$).size>0?(0,a.objectFromMap)(tt(this,$)):null}getGroup(bt){return tt(this,$).get(bt)||null}getHash(){if(tt(this,_)!==null)return tt(this,_);const bt=new o.MurmurHash3_64;for(const[et,nt]of tt(this,$))bt.update(`${et}:${nt.visible}`);return dn(this,_,bt.hexdigest())}}_=new WeakMap,$=new WeakMap,at=new WeakMap,rt=new WeakMap,ut=new WeakSet,Oo=function(bt){const et=bt.length;if(et<2)return!0;const nt=bt[0];for(let st=1;st<et;st++){const gt=bt[st];let lt;if(Array.isArray(gt))lt=Yt(this,ut,Oo).call(this,gt);else if(tt(this,$).has(gt))lt=tt(this,$).get(gt).visible;else return(0,a.warn)(`Optional content group not found: ${gt}`),!0;switch(nt){case"And":if(!lt)return!1;break;case"Or":if(lt)return!0;break;case"Not":return!lt;default:return!0}}return nt==="And"},s.OptionalContentConfig=j},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var a=i(1),o=i(6);class c{constructor({length:_,initialData:$,progressiveDone:at=!1,contentDispositionFilename:rt=null,disableRange:ut=!1,disableStream:ot=!1},vt){if((0,a.assert)(vt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=at,this._contentDispositionFilename=rt,($==null?void 0:$.length)>0){const bt=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;this._queuedChunks.push(bt)}this._pdfDataRangeTransport=vt,this._isStreamingSupported=!ot,this._isRangeSupported=!ut,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((bt,et)=>{this._onReceiveData({begin:bt,chunk:et})}),this._pdfDataRangeTransport.addProgressListener((bt,et)=>{this._onProgress({loaded:bt,total:et})}),this._pdfDataRangeTransport.addProgressiveReadListener(bt=>{this._onReceiveData({chunk:bt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:_,chunk:$}){const at=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(at):this._queuedChunks.push(at);else{const rt=this._rangeReaders.some(function(ut){return ut._begin!==_?!1:(ut._enqueue(at),!0)});(0,a.assert)(rt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}_onProgress(_){var $,at,rt,ut;_.total===void 0?(at=($=this._rangeReaders[0])==null?void 0:$.onProgress)==null||at.call($,{loaded:_.loaded}):(ut=(rt=this._fullRequestReader)==null?void 0:rt.onProgress)==null||ut.call(rt,{loaded:_.loaded,total:_.total})}_onProgressiveDone(){var _;(_=this._fullRequestReader)==null||_.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const $=this._rangeReaders.indexOf(_);$>=0&&this._rangeReaders.splice($,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new h(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,$){if($<=this._progressiveDataLength)return null;const at=new j(this,_,$);return this._pdfDataRangeTransport.requestDataRange(_,$),this._rangeReaders.push(at),at}cancelAllRequests(_){var $;($=this._fullRequestReader)==null||$.cancel(_);for(const at of this._rangeReaders.slice(0))at.cancel(_);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=c;class h{constructor(_,$,at=!1,rt=null){this._stream=_,this._done=at||!1,this._filename=(0,o.isPdfFile)(rt)?rt:null,this._queuedChunks=$||[],this._loaded=0;for(const ut of this._queuedChunks)this._loaded+=ut.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new a.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class j{constructor(_,$,at){this._stream=_,this._begin=$,this._end=at,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const $=this._queuedChunk;return this._queuedChunk=null,{value:$,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new a.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var a=i(1),o=i(20);function c(at,rt,ut){return{method:"GET",headers:at,signal:ut.signal,mode:"cors",credentials:rt?"include":"same-origin",redirect:"follow"}}function h(at){const rt=new Headers;for(const ut in at){const ot=at[ut];ot!==void 0&&rt.append(ut,ot)}return rt}function j(at){return at instanceof Uint8Array?at.buffer:at instanceof ArrayBuffer?at:((0,a.warn)(`getArrayBuffer - unexpected data format: ${at}`),new Uint8Array(at).buffer)}class b{constructor(rt){this.source=rt,this.isHttp=/^https?:/i.test(rt.url),this.httpHeaders=this.isHttp&&rt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var rt;return((rt=this._fullRequestReader)==null?void 0:rt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(rt,ut){if(ut<=this._progressiveDataLength)return null;const ot=new $(this,rt,ut);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(rt){var ut;(ut=this._fullRequestReader)==null||ut.cancel(rt);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(rt)}}s.PDFFetchStream=b;class _{constructor(rt){this._stream=rt,this._reader=null,this._loaded=0,this._filename=null;const ut=rt.source;this._withCredentials=ut.withCredentials||!1,this._contentLength=ut.length,this._headersCapability=new a.PromiseCapability,this._disableRange=ut.disableRange||!1,this._rangeChunkSize=ut.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ut.disableStream,this._isRangeSupported=!ut.disableRange,this._headers=h(this._stream.httpHeaders);const ot=ut.url;fetch(ot,c(this._headers,this._withCredentials,this._abortController)).then(vt=>{if(!(0,o.validateResponseStatus)(vt.status))throw(0,o.createResponseStatusError)(vt.status,ot);this._reader=vt.body.getReader(),this._headersCapability.resolve();const bt=st=>vt.headers.get(st),{allowRangeRequests:et,suggestedLength:nt}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:bt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=et,this._contentLength=nt||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(bt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:rt,done:ut}=await this._reader.read();return ut?{value:rt,done:ut}:(this._loaded+=rt.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:j(rt),done:!1})}cancel(rt){var ut;(ut=this._reader)==null||ut.cancel(rt),this._abortController.abort()}}class ${constructor(rt,ut,ot){this._stream=rt,this._reader=null,this._loaded=0;const vt=rt.source;this._withCredentials=vt.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!vt.disableStream,this._abortController=new AbortController,this._headers=h(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ut}-${ot-1}`);const bt=vt.url;fetch(bt,c(this._headers,this._withCredentials,this._abortController)).then(et=>{if(!(0,o.validateResponseStatus)(et.status))throw(0,o.createResponseStatusError)(et.status,bt);this._readCapability.resolve(),this._reader=et.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:rt,done:ut}=await this._reader.read();return ut?{value:rt,done:ut}:(this._loaded+=rt.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:j(rt),done:!1})}cancel(rt){var ut;(ut=this._reader)==null||ut.cancel(rt),this._abortController.abort()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=b,s.extractFilenameFromHeader=j,s.validateRangeRequestCapabilities=h,s.validateResponseStatus=_;var a=i(1),o=i(21),c=i(6);function h({getResponseHeader:$,isHttp:at,rangeChunkSize:rt,disableRange:ut}){const ot={allowRangeRequests:!1,suggestedLength:void 0},vt=parseInt($("Content-Length"),10);return!Number.isInteger(vt)||(ot.suggestedLength=vt,vt<=2*rt)||ut||!at||$("Accept-Ranges")!=="bytes"||($("Content-Encoding")||"identity")!=="identity"||(ot.allowRangeRequests=!0),ot}function j($){const at=$("Content-Disposition");if(at){let rt=(0,o.getFilenameFromContentDispositionHeader)(at);if(rt.includes("%"))try{rt=decodeURIComponent(rt)}catch{}if((0,c.isPdfFile)(rt))return rt}return null}function b($,at){return $===404||$===0&&at.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+at+'".'):new a.UnexpectedResponseException(`Unexpected server response (${$}) while retrieving PDF "${at}".`,$)}function _($){return $===200||$===206}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=o;var a=i(1);function o(c){let h=!0,j=b("filename\\*","i").exec(c);if(j){j=j[1];let vt=rt(j);return vt=unescape(vt),vt=ut(vt),vt=ot(vt),$(vt)}if(j=at(c),j){const vt=ot(j);return $(vt)}if(j=b("filename","i").exec(c),j){j=j[1];let vt=rt(j);return vt=ot(vt),$(vt)}function b(vt,bt){return new RegExp("(?:^|;)\\s*"+vt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',bt)}function _(vt,bt){if(vt){if(!/^[\x00-\xFF]+$/.test(bt))return bt;try{const et=new TextDecoder(vt,{fatal:!0}),nt=(0,a.stringToBytes)(bt);bt=et.decode(nt),h=!1}catch{}}return bt}function $(vt){return h&&/[\x80-\xff]/.test(vt)&&(vt=_("utf-8",vt),h&&(vt=_("iso-8859-1",vt))),vt}function at(vt){const bt=[];let et;const nt=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(et=nt.exec(vt))!==null;){let[,gt,lt,yt]=et;if(gt=parseInt(gt,10),gt in bt){if(gt===0)break;continue}bt[gt]=[lt,yt]}const st=[];for(let gt=0;gt<bt.length&&gt in bt;++gt){let[lt,yt]=bt[gt];yt=rt(yt),lt&&(yt=unescape(yt),gt===0&&(yt=ut(yt))),st.push(yt)}return st.join("")}function rt(vt){if(vt.startsWith('"')){const bt=vt.slice(1).split('\\"');for(let et=0;et<bt.length;++et){const nt=bt[et].indexOf('"');nt!==-1&&(bt[et]=bt[et].slice(0,nt),bt.length=et+1),bt[et]=bt[et].replaceAll(/\\(.)/g,"$1")}vt=bt.join('"')}return vt}function ut(vt){const bt=vt.indexOf("'");if(bt===-1)return vt;const et=vt.slice(0,bt),st=vt.slice(bt+1).replace(/^[^']*'/,"");return _(et,st)}function ot(vt){return!vt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(vt)?vt:vt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(bt,et,nt,st){if(nt==="q"||nt==="Q")return st=st.replaceAll("_"," "),st=st.replaceAll(/=([0-9a-fA-F]{2})/g,function(gt,lt){return String.fromCharCode(parseInt(lt,16))}),_(et,st);try{st=atob(st)}catch{}return _(et,st)})}return""}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var a=i(1),o=i(20);const c=200,h=206;function j(rt){const ut=rt.response;return typeof ut!="string"?ut:(0,a.stringToBytes)(ut).buffer}class b{constructor(ut,ot={}){this.url=ut,this.isHttp=/^https?:/i.test(ut),this.httpHeaders=this.isHttp&&ot.httpHeaders||Object.create(null),this.withCredentials=ot.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ut,ot,vt){const bt={begin:ut,end:ot};for(const et in vt)bt[et]=vt[et];return this.request(bt)}requestFull(ut){return this.request(ut)}request(ut){const ot=new XMLHttpRequest,vt=this.currXhrId++,bt=this.pendingRequests[vt]={xhr:ot};ot.open("GET",this.url),ot.withCredentials=this.withCredentials;for(const et in this.httpHeaders){const nt=this.httpHeaders[et];nt!==void 0&&ot.setRequestHeader(et,nt)}return this.isHttp&&"begin"in ut&&"end"in ut?(ot.setRequestHeader("Range",`bytes=${ut.begin}-${ut.end-1}`),bt.expectedStatus=h):bt.expectedStatus=c,ot.responseType="arraybuffer",ut.onError&&(ot.onerror=function(et){ut.onError(ot.status)}),ot.onreadystatechange=this.onStateChange.bind(this,vt),ot.onprogress=this.onProgress.bind(this,vt),bt.onHeadersReceived=ut.onHeadersReceived,bt.onDone=ut.onDone,bt.onError=ut.onError,bt.onProgress=ut.onProgress,ot.send(null),vt}onProgress(ut,ot){var bt;const vt=this.pendingRequests[ut];vt&&((bt=vt.onProgress)==null||bt.call(vt,ot))}onStateChange(ut,ot){var gt,lt,yt;const vt=this.pendingRequests[ut];if(!vt)return;const bt=vt.xhr;if(bt.readyState>=2&&vt.onHeadersReceived&&(vt.onHeadersReceived(),delete vt.onHeadersReceived),bt.readyState!==4||!(ut in this.pendingRequests))return;if(delete this.pendingRequests[ut],bt.status===0&&this.isHttp){(gt=vt.onError)==null||gt.call(vt,bt.status);return}const et=bt.status||c;if(!(et===c&&vt.expectedStatus===h)&&et!==vt.expectedStatus){(lt=vt.onError)==null||lt.call(vt,bt.status);return}const st=j(bt);if(et===h){const ct=bt.getResponseHeader("Content-Range"),mt=/bytes (\d+)-(\d+)\/(\d+)/.exec(ct);vt.onDone({begin:parseInt(mt[1],10),chunk:st})}else st?vt.onDone({begin:0,chunk:st}):(yt=vt.onError)==null||yt.call(vt,bt.status)}getRequestXhr(ut){return this.pendingRequests[ut].xhr}isPendingRequest(ut){return ut in this.pendingRequests}abortRequest(ut){const ot=this.pendingRequests[ut].xhr;delete this.pendingRequests[ut],ot.abort()}}class _{constructor(ut){this._source=ut,this._manager=new b(ut.url,{httpHeaders:ut.httpHeaders,withCredentials:ut.withCredentials}),this._rangeChunkSize=ut.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ut){const ot=this._rangeRequestReaders.indexOf(ut);ot>=0&&this._rangeRequestReaders.splice(ot,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $(this._manager,this._source),this._fullRequestReader}getRangeReader(ut,ot){const vt=new at(this._manager,ut,ot);return vt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(vt),vt}cancelAllRequests(ut){var ot;(ot=this._fullRequestReader)==null||ot.cancel(ut);for(const vt of this._rangeRequestReaders.slice(0))vt.cancel(ut)}}s.PDFNetworkStream=_;class ${constructor(ut,ot){this._manager=ut;const vt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ot.url,this._fullRequestId=ut.requestFull(vt),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=ot.disableRange||!1,this._contentLength=ot.length,this._rangeChunkSize=ot.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ut=this._fullRequestId,ot=this._manager.getRequestXhr(ut),vt=nt=>ot.getResponseHeader(nt),{allowRangeRequests:bt,suggestedLength:et}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:vt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});bt&&(this._isRangeSupported=!0),this._contentLength=et||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(vt),this._isRangeSupported&&this._manager.abortRequest(ut),this._headersReceivedCapability.resolve()}_onDone(ut){if(ut&&(this._requests.length>0?this._requests.shift().resolve({value:ut.chunk,done:!1}):this._cachedChunks.push(ut.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ut){this._storedError=(0,o.createResponseStatusError)(ut,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ut){var ot;(ot=this.onProgress)==null||ot.call(this,{loaded:ut.loaded,total:ut.lengthComputable?ut.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ut=new a.PromiseCapability;return this._requests.push(ut),ut.promise}cancel(ut){this._done=!0,this._headersReceivedCapability.reject(ut);for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class at{constructor(ut,ot,vt){this._manager=ut;const bt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ut.url,this._requestId=ut.requestRange(ot,vt,bt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ut;(ut=this.onClosed)==null||ut.call(this,this)}_onDone(ut){const ot=ut.chunk;this._requests.length>0?this._requests.shift().resolve({value:ot,done:!1}):this._queuedChunk=ot,this._done=!0;for(const vt of this._requests)vt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ut){this._storedError=(0,o.createResponseStatusError)(ut,this._url);for(const ot of this._requests)ot.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ut){var ot;this.isStreamingSupported||(ot=this.onProgress)==null||ot.call(this,{loaded:ut.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ot=this._queuedChunk;return this._queuedChunk=null,{value:ot,done:!1}}if(this._done)return{value:void 0,done:!0};const ut=new a.PromiseCapability;return this._requests.push(ut),ut.promise}cancel(ut){this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var a=i(1),o=i(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function h(vt){const bt=require$$5,et=bt.parse(vt);return et.protocol==="file:"||et.host?et:/^[a-z]:[/\\]/i.test(vt)?bt.parse(`file:///${vt}`):(et.host||(et.protocol="file:"),et)}class j{constructor(bt){this.source=bt,this.url=h(bt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&bt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var bt;return((bt=this._fullRequestReader)==null?void 0:bt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ut(this):new at(this),this._fullRequestReader}getRangeReader(bt,et){if(et<=this._progressiveDataLength)return null;const nt=this.isFsUrl?new ot(this,bt,et):new rt(this,bt,et);return this._rangeRequestReaders.push(nt),nt}cancelAllRequests(bt){var et;(et=this._fullRequestReader)==null||et.cancel(bt);for(const nt of this._rangeRequestReaders.slice(0))nt.cancel(bt)}}s.PDFNodeStream=j;class b{constructor(bt){this._url=bt.url,this._done=!1,this._storedError=null,this.onProgress=null;const et=bt.source;this._contentLength=et.length,this._loaded=0,this._filename=null,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const bt=this._readableStream.read();return bt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=bt.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(bt).buffer,done:!1})}cancel(bt){if(!this._readableStream){this._error(bt);return}this._readableStream.destroy(bt)}_error(bt){this._storedError=bt,this._readCapability.resolve()}_setReadableStream(bt){this._readableStream=bt,bt.on("readable",()=>{this._readCapability.resolve()}),bt.on("end",()=>{bt.destroy(),this._done=!0,this._readCapability.resolve()}),bt.on("error",et=>{this._error(et)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(bt){this._url=bt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const et=bt.source;this._isStreamingSupported=!et.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const bt=this._readableStream.read();return bt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=bt.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded}),{value:new Uint8Array(bt).buffer,done:!1})}cancel(bt){if(!this._readableStream){this._error(bt);return}this._readableStream.destroy(bt)}_error(bt){this._storedError=bt,this._readCapability.resolve()}_setReadableStream(bt){this._readableStream=bt,bt.on("readable",()=>{this._readCapability.resolve()}),bt.on("end",()=>{bt.destroy(),this._done=!0,this._readCapability.resolve()}),bt.on("error",et=>{this._error(et)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function $(vt,bt){return{protocol:vt.protocol,auth:vt.auth,host:vt.hostname,port:vt.port,path:vt.path,method:"GET",headers:bt}}class at extends b{constructor(bt){super(bt);const et=nt=>{if(nt.statusCode===404){const yt=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=yt,this._headersCapability.reject(yt);return}this._headersCapability.resolve(),this._setReadableStream(nt);const st=yt=>this._readableStream.headers[yt.toLowerCase()],{allowRangeRequests:gt,suggestedLength:lt}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:st,isHttp:bt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=gt,this._contentLength=lt||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(st)};if(this._request=null,this._url.protocol==="http:"){const nt=require$$5;this._request=nt.request($(this._url,bt.httpHeaders),et)}else{const nt=require$$5;this._request=nt.request($(this._url,bt.httpHeaders),et)}this._request.on("error",nt=>{this._storedError=nt,this._headersCapability.reject(nt)}),this._request.end()}}class rt extends _{constructor(bt,et,nt){super(bt),this._httpHeaders={};for(const gt in bt.httpHeaders){const lt=bt.httpHeaders[gt];lt!==void 0&&(this._httpHeaders[gt]=lt)}this._httpHeaders.Range=`bytes=${et}-${nt-1}`;const st=gt=>{if(gt.statusCode===404){const lt=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=lt;return}this._setReadableStream(gt)};if(this._request=null,this._url.protocol==="http:"){const gt=require$$5;this._request=gt.request($(this._url,this._httpHeaders),st)}else{const gt=require$$5;this._request=gt.request($(this._url,this._httpHeaders),st)}this._request.on("error",gt=>{this._storedError=gt}),this._request.end()}}class ut extends b{constructor(bt){super(bt);let et=decodeURIComponent(this._url.path);c.test(this._url.href)&&(et=et.replace(/^\//,""));const nt=require$$5;nt.lstat(et,(st,gt)=>{if(st){st.code==="ENOENT"&&(st=new a.MissingPDFException(`Missing PDF "${et}".`)),this._storedError=st,this._headersCapability.reject(st);return}this._contentLength=gt.size,this._setReadableStream(nt.createReadStream(et)),this._headersCapability.resolve()})}}class ot extends _{constructor(bt,et,nt){super(bt);let st=decodeURIComponent(this._url.path);c.test(this._url.href)&&(st=st.replace(/^\//,""));const gt=require$$5;this._setReadableStream(gt.createReadStream(st,{start:et,end:nt-1}))}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var a=i(6),o=i(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},h="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/1999/xlink",b=["butt","round","square"],_=["miter","round","bevel"],$=function(gt,lt="",yt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!yt)return URL.createObjectURL(new Blob([gt],{type:lt}));const ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let mt=`data:${lt};base64,`;for(let xt=0,Ct=gt.length;xt<Ct;xt+=3){const ht=gt[xt]&255,wt=gt[xt+1]&255,jt=gt[xt+2]&255,Xt=ht>>2,Bt=(ht&3)<<4|wt>>4,Wt=xt+1<Ct?(wt&15)<<2|jt>>6:64,Ut=xt+2<Ct?jt&63:64;mt+=ct[Xt]+ct[Bt]+ct[Wt]+ct[Ut]}return mt},at=function(){const gt=new Uint8Array([137,80,78,71,13,10,26,10]),lt=12,yt=new Int32Array(256);for(let jt=0;jt<256;jt++){let Xt=jt;for(let Bt=0;Bt<8;Bt++)Xt=Xt&1?3988292384^Xt>>1&2147483647:Xt>>1&2147483647;yt[jt]=Xt}function ct(jt,Xt,Bt){let Wt=-1;for(let Ut=Xt;Ut<Bt;Ut++){const $t=(Wt^jt[Ut])&255,kt=yt[$t];Wt=Wt>>>8^kt}return Wt^-1}function mt(jt,Xt,Bt,Wt){let Ut=Wt;const $t=Xt.length;Bt[Ut]=$t>>24&255,Bt[Ut+1]=$t>>16&255,Bt[Ut+2]=$t>>8&255,Bt[Ut+3]=$t&255,Ut+=4,Bt[Ut]=jt.charCodeAt(0)&255,Bt[Ut+1]=jt.charCodeAt(1)&255,Bt[Ut+2]=jt.charCodeAt(2)&255,Bt[Ut+3]=jt.charCodeAt(3)&255,Ut+=4,Bt.set(Xt,Ut),Ut+=Xt.length;const kt=ct(Bt,Wt+4,Ut);Bt[Ut]=kt>>24&255,Bt[Ut+1]=kt>>16&255,Bt[Ut+2]=kt>>8&255,Bt[Ut+3]=kt&255}function xt(jt,Xt,Bt){let Wt=1,Ut=0;for(let $t=Xt;$t<Bt;++$t)Wt=(Wt+(jt[$t]&255))%65521,Ut=(Ut+Wt)%65521;return Ut<<16|Wt}function Ct(jt){if(!o.isNodeJS)return ht(jt);try{const Xt=parseInt(process.versions.node)>=8?jt:Buffer.from(jt),Bt=require$$5.deflateSync(Xt,{level:9});return Bt instanceof Uint8Array?Bt:new Uint8Array(Bt)}catch(Xt){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Xt)}return ht(jt)}function ht(jt){let Xt=jt.length;const Bt=65535,Wt=Math.ceil(Xt/Bt),Ut=new Uint8Array(2+Xt+Wt*5+4);let $t=0;Ut[$t++]=120,Ut[$t++]=156;let kt=0;for(;Xt>Bt;)Ut[$t++]=0,Ut[$t++]=255,Ut[$t++]=255,Ut[$t++]=0,Ut[$t++]=0,Ut.set(jt.subarray(kt,kt+Bt),$t),$t+=Bt,kt+=Bt,Xt-=Bt;Ut[$t++]=1,Ut[$t++]=Xt&255,Ut[$t++]=Xt>>8&255,Ut[$t++]=~Xt&65535&255,Ut[$t++]=(~Xt&65535)>>8&255,Ut.set(jt.subarray(kt),$t),$t+=jt.length-kt;const Ft=xt(jt,0,jt.length);return Ut[$t++]=Ft>>24&255,Ut[$t++]=Ft>>16&255,Ut[$t++]=Ft>>8&255,Ut[$t++]=Ft&255,Ut}function wt(jt,Xt,Bt,Wt){const Ut=jt.width,$t=jt.height;let kt,Ft,Gt;const At=jt.data;switch(Xt){case o.ImageKind.GRAYSCALE_1BPP:Ft=0,kt=1,Gt=Ut+7>>3;break;case o.ImageKind.RGB_24BPP:Ft=2,kt=8,Gt=Ut*3;break;case o.ImageKind.RGBA_32BPP:Ft=6,kt=8,Gt=Ut*4;break;default:throw new Error("invalid format")}const it=new Uint8Array((1+Gt)*$t);let dt=0,_t=0;for(let vn=0;vn<$t;++vn)it[dt++]=0,it.set(At.subarray(_t,_t+Gt),dt),_t+=Gt,dt+=Gt;if(Xt===o.ImageKind.GRAYSCALE_1BPP&&Wt){dt=0;for(let vn=0;vn<$t;vn++){dt++;for(let un=0;un<Gt;un++)it[dt++]^=255}}const Tt=new Uint8Array([Ut>>24&255,Ut>>16&255,Ut>>8&255,Ut&255,$t>>24&255,$t>>16&255,$t>>8&255,$t&255,kt,Ft,0,0,0]),Dt=Ct(it),It=gt.length+lt*3+Tt.length+Dt.length,Lt=new Uint8Array(It);let on=0;return Lt.set(gt,on),on+=gt.length,mt("IHDR",Tt,Lt,on),on+=lt+Tt.length,mt("IDATA",Dt,Lt,on),on+=lt+Dt.length,mt("IEND",new Uint8Array(0),Lt,on),$(Lt,"image/png",Bt)}return function(Xt,Bt,Wt){const Ut=Xt.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:Xt.kind;return wt(Xt,Ut,Bt,Wt)}}();class rt{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(lt,yt){this.x=lt,this.y=yt}}function ut(gt){let lt=[];const yt=[];for(const ct of gt){if(ct.fn==="save"){lt.push({fnId:92,fn:"group",items:[]}),yt.push(lt),lt=lt.at(-1).items;continue}ct.fn==="restore"?lt=yt.pop():lt.push(ct)}return lt}function ot(gt){if(Number.isInteger(gt))return gt.toString();const lt=gt.toFixed(10);let yt=lt.length-1;if(lt[yt]!=="0")return lt;do yt--;while(lt[yt]==="0");return lt.substring(0,lt[yt]==="."?yt:yt+1)}function vt(gt){if(gt[4]===0&&gt[5]===0){if(gt[1]===0&&gt[2]===0)return gt[0]===1&&gt[3]===1?"":`scale(${ot(gt[0])} ${ot(gt[3])})`;if(gt[0]===gt[3]&&gt[1]===-gt[2]){const lt=Math.acos(gt[0])*180/Math.PI;return`rotate(${ot(lt)})`}}else if(gt[0]===1&&gt[1]===0&&gt[2]===0&&gt[3]===1)return`translate(${ot(gt[4])} ${ot(gt[5])})`;return`matrix(${ot(gt[0])} ${ot(gt[1])} ${ot(gt[2])} ${ot(gt[3])} ${ot(gt[4])} ${ot(gt[5])})`}let bt=0,et=0,nt=0;class st{constructor(lt,yt,ct=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new rt,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=lt,this.objs=yt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ct,this._operatorIdMapping=[];for(const mt in o.OPS)this._operatorIdMapping[o.OPS[mt]]=mt}getObject(lt,yt=null){return typeof lt=="string"?lt.startsWith("g_")?this.commonObjs.get(lt):this.objs.get(lt):yt}save(){this.transformStack.push(this.transformMatrix);const lt=this.current;this.extraStack.push(lt),this.current=lt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(lt){this.save(),this.executeOpTree(lt),this.restore()}loadDependencies(lt){const yt=lt.fnArray,ct=lt.argsArray;for(let mt=0,xt=yt.length;mt<xt;mt++)if(yt[mt]===o.OPS.dependency)for(const Ct of ct[mt]){const ht=Ct.startsWith("g_")?this.commonObjs:this.objs,wt=new Promise(jt=>{ht.get(Ct,jt)});this.current.dependencies.push(wt)}return Promise.all(this.current.dependencies)}transform(lt,yt,ct,mt,xt,Ct){const ht=[lt,yt,ct,mt,xt,Ct];this.transformMatrix=o.Util.transform(this.transformMatrix,ht),this.tgrp=null}getSVG(lt,yt){this.viewport=yt;const ct=this._initialize(yt);return this.loadDependencies(lt).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(lt)),ct))}convertOpList(lt){const yt=this._operatorIdMapping,ct=lt.argsArray,mt=lt.fnArray,xt=[];for(let Ct=0,ht=mt.length;Ct<ht;Ct++){const wt=mt[Ct];xt.push({fnId:wt,fn:yt[wt],args:ct[Ct]})}return ut(xt)}executeOpTree(lt){for(const yt of lt){const ct=yt.fn,mt=yt.fnId,xt=yt.args;switch(mt|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(xt);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(xt[0],xt[1]);break;case o.OPS.setFont:this.setFont(xt);break;case o.OPS.showText:this.showText(xt[0]);break;case o.OPS.showSpacedText:this.showText(xt[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(xt[0],xt[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(xt[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(xt[0]);break;case o.OPS.setHScale:this.setHScale(xt[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(xt[0],xt[1],xt[2],xt[3],xt[4],xt[5]);break;case o.OPS.setTextRise:this.setTextRise(xt[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(xt[0]);break;case o.OPS.setLineWidth:this.setLineWidth(xt[0]);break;case o.OPS.setLineJoin:this.setLineJoin(xt[0]);break;case o.OPS.setLineCap:this.setLineCap(xt[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(xt[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(xt[0],xt[1],xt[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(xt[0],xt[1],xt[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(xt);break;case o.OPS.setFillColorN:this.setFillColorN(xt);break;case o.OPS.shadingFill:this.shadingFill(xt[0]);break;case o.OPS.setDash:this.setDash(xt[0],xt[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(xt[0]);break;case o.OPS.setFlatness:this.setFlatness(xt[0]);break;case o.OPS.setGState:this.setGState(xt[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(xt[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(xt[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(xt[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(xt[0],xt[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(xt[0],xt[1],xt[2],xt[3],xt[4],xt[5]);break;case o.OPS.constructPath:this.constructPath(xt[0],xt[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(yt.items);break;default:(0,o.warn)(`Unimplemented operator ${ct}`);break}}}setWordSpacing(lt){this.current.wordSpacing=lt}setCharSpacing(lt){this.current.charSpacing=lt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(lt,yt,ct,mt,xt,Ct){const ht=this.current;ht.textMatrix=ht.lineMatrix=[lt,yt,ct,mt,xt,Ct],ht.textMatrixScale=Math.hypot(lt,yt),ht.x=ht.lineX=0,ht.y=ht.lineY=0,ht.xcoords=[],ht.ycoords=[],ht.tspan=this.svgFactory.createElement("svg:tspan"),ht.tspan.setAttributeNS(null,"font-family",ht.fontFamily),ht.tspan.setAttributeNS(null,"font-size",`${ot(ht.fontSize)}px`),ht.tspan.setAttributeNS(null,"y",ot(-ht.y)),ht.txtElement=this.svgFactory.createElement("svg:text"),ht.txtElement.append(ht.tspan)}beginText(){const lt=this.current;lt.x=lt.lineX=0,lt.y=lt.lineY=0,lt.textMatrix=o.IDENTITY_MATRIX,lt.lineMatrix=o.IDENTITY_MATRIX,lt.textMatrixScale=1,lt.tspan=this.svgFactory.createElement("svg:tspan"),lt.txtElement=this.svgFactory.createElement("svg:text"),lt.txtgrp=this.svgFactory.createElement("svg:g"),lt.xcoords=[],lt.ycoords=[]}moveText(lt,yt){const ct=this.current;ct.x=ct.lineX+=lt,ct.y=ct.lineY+=yt,ct.xcoords=[],ct.ycoords=[],ct.tspan=this.svgFactory.createElement("svg:tspan"),ct.tspan.setAttributeNS(null,"font-family",ct.fontFamily),ct.tspan.setAttributeNS(null,"font-size",`${ot(ct.fontSize)}px`),ct.tspan.setAttributeNS(null,"y",ot(-ct.y))}showText(lt){const yt=this.current,ct=yt.font,mt=yt.fontSize;if(mt===0)return;const xt=yt.fontSizeScale,Ct=yt.charSpacing,ht=yt.wordSpacing,wt=yt.fontDirection,jt=yt.textHScale*wt,Xt=ct.vertical,Bt=Xt?1:-1,Wt=ct.defaultVMetrics,Ut=mt*yt.fontMatrix[0];let $t=0;for(const Gt of lt){if(Gt===null){$t+=wt*ht;continue}else if(typeof Gt=="number"){$t+=Bt*Gt*mt/1e3;continue}const At=(Gt.isSpace?ht:0)+Ct,it=Gt.fontChar;let dt,_t,Tt=Gt.width;if(Xt){let It;const Lt=Gt.vmetric||Wt;It=Gt.vmetric?Lt[1]:Tt*.5,It=-It*Ut;const on=Lt[2]*Ut;Tt=Lt?-Lt[0]:Tt,dt=It/xt,_t=($t+on)/xt}else dt=$t/xt,_t=0;(Gt.isInFont||ct.missingFile)&&(yt.xcoords.push(yt.x+dt),Xt&&yt.ycoords.push(-yt.y+_t),yt.tspan.textContent+=it);const Dt=Xt?Tt*Ut-At*wt:Tt*Ut+At*wt;$t+=Dt}yt.tspan.setAttributeNS(null,"x",yt.xcoords.map(ot).join(" ")),Xt?yt.tspan.setAttributeNS(null,"y",yt.ycoords.map(ot).join(" ")):yt.tspan.setAttributeNS(null,"y",ot(-yt.y)),Xt?yt.y-=$t:yt.x+=$t*jt,yt.tspan.setAttributeNS(null,"font-family",yt.fontFamily),yt.tspan.setAttributeNS(null,"font-size",`${ot(yt.fontSize)}px`),yt.fontStyle!==c.fontStyle&&yt.tspan.setAttributeNS(null,"font-style",yt.fontStyle),yt.fontWeight!==c.fontWeight&&yt.tspan.setAttributeNS(null,"font-weight",yt.fontWeight);const kt=yt.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(kt===o.TextRenderingMode.FILL||kt===o.TextRenderingMode.FILL_STROKE?(yt.fillColor!==c.fillColor&&yt.tspan.setAttributeNS(null,"fill",yt.fillColor),yt.fillAlpha<1&&yt.tspan.setAttributeNS(null,"fill-opacity",yt.fillAlpha)):yt.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?yt.tspan.setAttributeNS(null,"fill","transparent"):yt.tspan.setAttributeNS(null,"fill","none"),kt===o.TextRenderingMode.STROKE||kt===o.TextRenderingMode.FILL_STROKE){const Gt=1/(yt.textMatrixScale||1);this._setStrokeAttributes(yt.tspan,Gt)}let Ft=yt.textMatrix;yt.textRise!==0&&(Ft=Ft.slice(),Ft[5]+=yt.textRise),yt.txtElement.setAttributeNS(null,"transform",`${vt(Ft)} scale(${ot(jt)}, -1)`),yt.txtElement.setAttributeNS(h,"xml:space","preserve"),yt.txtElement.append(yt.tspan),yt.txtgrp.append(yt.txtElement),this._ensureTransformGroup().append(yt.txtElement)}setLeadingMoveText(lt,yt){this.setLeading(-yt),this.moveText(lt,yt)}addFontStyle(lt){if(!lt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const yt=$(lt.data,lt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${lt.loadedName}"; src: url(${yt}); }
`}setFont(lt){const yt=this.current,ct=this.commonObjs.get(lt[0]);let mt=lt[1];yt.font=ct,this.embedFonts&&!ct.missingFile&&!this.embeddedFonts[ct.loadedName]&&(this.addFontStyle(ct),this.embeddedFonts[ct.loadedName]=ct),yt.fontMatrix=ct.fontMatrix||o.FONT_IDENTITY_MATRIX;let xt="normal";ct.black?xt="900":ct.bold&&(xt="bold");const Ct=ct.italic?"italic":"normal";mt<0?(mt=-mt,yt.fontDirection=-1):yt.fontDirection=1,yt.fontSize=mt,yt.fontFamily=ct.loadedName,yt.fontWeight=xt,yt.fontStyle=Ct,yt.tspan=this.svgFactory.createElement("svg:tspan"),yt.tspan.setAttributeNS(null,"y",ot(-yt.y)),yt.xcoords=[],yt.ycoords=[]}endText(){var yt;const lt=this.current;lt.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((yt=lt.txtElement)!=null&&yt.hasChildNodes())&&(lt.element=lt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(lt){lt>0&&(this.current.lineWidth=lt)}setLineCap(lt){this.current.lineCap=b[lt]}setLineJoin(lt){this.current.lineJoin=_[lt]}setMiterLimit(lt){this.current.miterLimit=lt}setStrokeAlpha(lt){this.current.strokeAlpha=lt}setStrokeRGBColor(lt,yt,ct){this.current.strokeColor=o.Util.makeHexColor(lt,yt,ct)}setFillAlpha(lt){this.current.fillAlpha=lt}setFillRGBColor(lt,yt,ct){this.current.fillColor=o.Util.makeHexColor(lt,yt,ct),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(lt){this.current.strokeColor=this._makeColorN_Pattern(lt)}setFillColorN(lt){this.current.fillColor=this._makeColorN_Pattern(lt)}shadingFill(lt){const{width:yt,height:ct}=this.viewport,mt=o.Util.inverseTransform(this.transformMatrix),[xt,Ct,ht,wt]=o.Util.getAxialAlignedBoundingBox([0,0,yt,ct],mt),jt=this.svgFactory.createElement("svg:rect");jt.setAttributeNS(null,"x",xt),jt.setAttributeNS(null,"y",Ct),jt.setAttributeNS(null,"width",ht-xt),jt.setAttributeNS(null,"height",wt-Ct),jt.setAttributeNS(null,"fill",this._makeShadingPattern(lt)),this.current.fillAlpha<1&&jt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(jt)}_makeColorN_Pattern(lt){return lt[0]==="TilingPattern"?this._makeTilingPattern(lt):this._makeShadingPattern(lt)}_makeTilingPattern(lt){const yt=lt[1],ct=lt[2],mt=lt[3]||o.IDENTITY_MATRIX,[xt,Ct,ht,wt]=lt[4],jt=lt[5],Xt=lt[6],Bt=lt[7],Wt=`shading${nt++}`,[Ut,$t,kt,Ft]=o.Util.normalizeRect([...o.Util.applyTransform([xt,Ct],mt),...o.Util.applyTransform([ht,wt],mt)]),[Gt,At]=o.Util.singularValueDecompose2dScale(mt),it=jt*Gt,dt=Xt*At,_t=this.svgFactory.createElement("svg:pattern");_t.setAttributeNS(null,"id",Wt),_t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_t.setAttributeNS(null,"width",it),_t.setAttributeNS(null,"height",dt),_t.setAttributeNS(null,"x",`${Ut}`),_t.setAttributeNS(null,"y",`${$t}`);const Tt=this.svg,Dt=this.transformMatrix,It=this.current.fillColor,Lt=this.current.strokeColor,on=this.svgFactory.create(kt-Ut,Ft-$t);if(this.svg=on,this.transformMatrix=mt,Bt===2){const vn=o.Util.makeHexColor(...yt);this.current.fillColor=vn,this.current.strokeColor=vn}return this.executeOpTree(this.convertOpList(ct)),this.svg=Tt,this.transformMatrix=Dt,this.current.fillColor=It,this.current.strokeColor=Lt,_t.append(on.childNodes[0]),this.defs.append(_t),`url(#${Wt})`}_makeShadingPattern(lt){switch(typeof lt=="string"&&(lt=this.objs.get(lt)),lt[0]){case"RadialAxial":const yt=`shading${nt++}`,ct=lt[3];let mt;switch(lt[1]){case"axial":const xt=lt[4],Ct=lt[5];mt=this.svgFactory.createElement("svg:linearGradient"),mt.setAttributeNS(null,"id",yt),mt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),mt.setAttributeNS(null,"x1",xt[0]),mt.setAttributeNS(null,"y1",xt[1]),mt.setAttributeNS(null,"x2",Ct[0]),mt.setAttributeNS(null,"y2",Ct[1]);break;case"radial":const ht=lt[4],wt=lt[5],jt=lt[6],Xt=lt[7];mt=this.svgFactory.createElement("svg:radialGradient"),mt.setAttributeNS(null,"id",yt),mt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),mt.setAttributeNS(null,"cx",wt[0]),mt.setAttributeNS(null,"cy",wt[1]),mt.setAttributeNS(null,"r",Xt),mt.setAttributeNS(null,"fx",ht[0]),mt.setAttributeNS(null,"fy",ht[1]),mt.setAttributeNS(null,"fr",jt);break;default:throw new Error(`Unknown RadialAxial type: ${lt[1]}`)}for(const xt of ct){const Ct=this.svgFactory.createElement("svg:stop");Ct.setAttributeNS(null,"offset",xt[0]),Ct.setAttributeNS(null,"stop-color",xt[1]),mt.append(Ct)}return this.defs.append(mt),`url(#${yt})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${lt[0]}`)}}setDash(lt,yt){this.current.dashArray=lt,this.current.dashPhase=yt}constructPath(lt,yt){const ct=this.current;let mt=ct.x,xt=ct.y,Ct=[],ht=0;for(const wt of lt)switch(wt|0){case o.OPS.rectangle:mt=yt[ht++],xt=yt[ht++];const jt=yt[ht++],Xt=yt[ht++],Bt=mt+jt,Wt=xt+Xt;Ct.push("M",ot(mt),ot(xt),"L",ot(Bt),ot(xt),"L",ot(Bt),ot(Wt),"L",ot(mt),ot(Wt),"Z");break;case o.OPS.moveTo:mt=yt[ht++],xt=yt[ht++],Ct.push("M",ot(mt),ot(xt));break;case o.OPS.lineTo:mt=yt[ht++],xt=yt[ht++],Ct.push("L",ot(mt),ot(xt));break;case o.OPS.curveTo:mt=yt[ht+4],xt=yt[ht+5],Ct.push("C",ot(yt[ht]),ot(yt[ht+1]),ot(yt[ht+2]),ot(yt[ht+3]),ot(mt),ot(xt)),ht+=6;break;case o.OPS.curveTo2:Ct.push("C",ot(mt),ot(xt),ot(yt[ht]),ot(yt[ht+1]),ot(yt[ht+2]),ot(yt[ht+3])),mt=yt[ht+2],xt=yt[ht+3],ht+=4;break;case o.OPS.curveTo3:mt=yt[ht+2],xt=yt[ht+3],Ct.push("C",ot(yt[ht]),ot(yt[ht+1]),ot(mt),ot(xt),ot(mt),ot(xt)),ht+=4;break;case o.OPS.closePath:Ct.push("Z");break}Ct=Ct.join(" "),ct.path&&lt.length>0&&lt[0]!==o.OPS.rectangle&&lt[0]!==o.OPS.moveTo?Ct=ct.path.getAttributeNS(null,"d")+Ct:(ct.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(ct.path)),ct.path.setAttributeNS(null,"d",Ct),ct.path.setAttributeNS(null,"fill","none"),ct.element=ct.path,ct.setCurrentPoint(mt,xt)}endPath(){const lt=this.current;if(lt.path=null,!this.pendingClip)return;if(!lt.element){this.pendingClip=null;return}const yt=`clippath${bt++}`,ct=this.svgFactory.createElement("svg:clipPath");ct.setAttributeNS(null,"id",yt),ct.setAttributeNS(null,"transform",vt(this.transformMatrix));const mt=lt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?mt.setAttributeNS(null,"clip-rule","evenodd"):mt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ct.append(mt),this.defs.append(ct),lt.activeClipUrl){lt.clipGroup=null;for(const xt of this.extraStack)xt.clipGroup=null;ct.setAttributeNS(null,"clip-path",lt.activeClipUrl)}lt.activeClipUrl=`url(#${yt})`,this.tgrp=null}clip(lt){this.pendingClip=lt}closePath(){const lt=this.current;if(lt.path){const yt=`${lt.path.getAttributeNS(null,"d")}Z`;lt.path.setAttributeNS(null,"d",yt)}}setLeading(lt){this.current.leading=-lt}setTextRise(lt){this.current.textRise=lt}setTextRenderingMode(lt){this.current.textRenderingMode=lt}setHScale(lt){this.current.textHScale=lt/100}setRenderingIntent(lt){}setFlatness(lt){}setGState(lt){for(const[yt,ct]of lt)switch(yt){case"LW":this.setLineWidth(ct);break;case"LC":this.setLineCap(ct);break;case"LJ":this.setLineJoin(ct);break;case"ML":this.setMiterLimit(ct);break;case"D":this.setDash(ct[0],ct[1]);break;case"RI":this.setRenderingIntent(ct);break;case"FL":this.setFlatness(ct);break;case"Font":this.setFont(ct);break;case"CA":this.setStrokeAlpha(ct);break;case"ca":this.setFillAlpha(ct);break;default:(0,o.warn)(`Unimplemented graphic state operator ${yt}`);break}}fill(){const lt=this.current;lt.element&&(lt.element.setAttributeNS(null,"fill",lt.fillColor),lt.element.setAttributeNS(null,"fill-opacity",lt.fillAlpha),this.endPath())}stroke(){const lt=this.current;lt.element&&(this._setStrokeAttributes(lt.element),lt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(lt,yt=1){const ct=this.current;let mt=ct.dashArray;yt!==1&&mt.length>0&&(mt=mt.map(function(xt){return yt*xt})),lt.setAttributeNS(null,"stroke",ct.strokeColor),lt.setAttributeNS(null,"stroke-opacity",ct.strokeAlpha),lt.setAttributeNS(null,"stroke-miterlimit",ot(ct.miterLimit)),lt.setAttributeNS(null,"stroke-linecap",ct.lineCap),lt.setAttributeNS(null,"stroke-linejoin",ct.lineJoin),lt.setAttributeNS(null,"stroke-width",ot(yt*ct.lineWidth)+"px"),lt.setAttributeNS(null,"stroke-dasharray",mt.map(ot).join(" ")),lt.setAttributeNS(null,"stroke-dashoffset",ot(yt*ct.dashPhase)+"px")}eoFill(){var lt;(lt=this.current.element)==null||lt.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var lt;(lt=this.current.element)==null||lt.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const lt=this.svgFactory.createElement("svg:rect");lt.setAttributeNS(null,"x","0"),lt.setAttributeNS(null,"y","0"),lt.setAttributeNS(null,"width","1px"),lt.setAttributeNS(null,"height","1px"),lt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(lt)}paintImageXObject(lt){const yt=this.getObject(lt);if(!yt){(0,o.warn)(`Dependent image with object ID ${lt} is not ready yet`);return}this.paintInlineImageXObject(yt)}paintInlineImageXObject(lt,yt){const ct=lt.width,mt=lt.height,xt=at(lt,this.forceDataSchema,!!yt),Ct=this.svgFactory.createElement("svg:rect");Ct.setAttributeNS(null,"x","0"),Ct.setAttributeNS(null,"y","0"),Ct.setAttributeNS(null,"width",ot(ct)),Ct.setAttributeNS(null,"height",ot(mt)),this.current.element=Ct,this.clip("nonzero");const ht=this.svgFactory.createElement("svg:image");ht.setAttributeNS(j,"xlink:href",xt),ht.setAttributeNS(null,"x","0"),ht.setAttributeNS(null,"y",ot(-mt)),ht.setAttributeNS(null,"width",ot(ct)+"px"),ht.setAttributeNS(null,"height",ot(mt)+"px"),ht.setAttributeNS(null,"transform",`scale(${ot(1/ct)} ${ot(-1/mt)})`),yt?yt.append(ht):this._ensureTransformGroup().append(ht)}paintImageMaskXObject(lt){const yt=this.getObject(lt.data,lt);if(yt.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const ct=this.current,mt=yt.width,xt=yt.height,Ct=ct.fillColor;ct.maskId=`mask${et++}`;const ht=this.svgFactory.createElement("svg:mask");ht.setAttributeNS(null,"id",ct.maskId);const wt=this.svgFactory.createElement("svg:rect");wt.setAttributeNS(null,"x","0"),wt.setAttributeNS(null,"y","0"),wt.setAttributeNS(null,"width",ot(mt)),wt.setAttributeNS(null,"height",ot(xt)),wt.setAttributeNS(null,"fill",Ct),wt.setAttributeNS(null,"mask",`url(#${ct.maskId})`),this.defs.append(ht),this._ensureTransformGroup().append(wt),this.paintInlineImageXObject(yt,ht)}paintFormXObjectBegin(lt,yt){if(Array.isArray(lt)&&lt.length===6&&this.transform(lt[0],lt[1],lt[2],lt[3],lt[4],lt[5]),yt){const ct=yt[2]-yt[0],mt=yt[3]-yt[1],xt=this.svgFactory.createElement("svg:rect");xt.setAttributeNS(null,"x",yt[0]),xt.setAttributeNS(null,"y",yt[1]),xt.setAttributeNS(null,"width",ot(ct)),xt.setAttributeNS(null,"height",ot(mt)),this.current.element=xt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(lt){const yt=this.svgFactory.create(lt.width,lt.height),ct=this.svgFactory.createElement("svg:defs");yt.append(ct),this.defs=ct;const mt=this.svgFactory.createElement("svg:g");return mt.setAttributeNS(null,"transform",vt(lt.transform)),yt.append(mt),this.svg=mt,yt}_ensureClipGroup(){if(!this.current.clipGroup){const lt=this.svgFactory.createElement("svg:g");lt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(lt),this.current.clipGroup=lt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",vt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=st},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class i{static textContent(o){const c=[],h={items:c,styles:Object.create(null)};function j(b){var at;if(!b)return;let _=null;const $=b.name;if($==="#text")_=b.value;else if(i.shouldBuildText($))(at=b==null?void 0:b.attributes)!=null&&at.textContent?_=b.attributes.textContent:b.value&&(_=b.value);else return;if(_!==null&&c.push({str:_}),!!b.children)for(const rt of b.children)j(rt)}return j(o),h}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}s.XfaText=i},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=vt,s.updateTextLayer=bt;var a=i(1),o=i(6);const c=1e5,h=30,j=.8,b=new Map;function _(et,nt){let st;if(nt&&a.FeatureTest.isOffscreenCanvasSupported)st=new OffscreenCanvas(et,et).getContext("2d",{alpha:!1});else{const gt=document.createElement("canvas");gt.width=gt.height=et,st=gt.getContext("2d",{alpha:!1})}return st}function $(et,nt){const st=b.get(et);if(st)return st;const gt=_(h,nt);gt.font=`${h}px ${et}`;const lt=gt.measureText("");let yt=lt.fontBoundingBoxAscent,ct=Math.abs(lt.fontBoundingBoxDescent);if(yt){const xt=yt/(yt+ct);return b.set(et,xt),gt.canvas.width=gt.canvas.height=0,xt}gt.strokeStyle="red",gt.clearRect(0,0,h,h),gt.strokeText("g",0,0);let mt=gt.getImageData(0,0,h,h).data;ct=0;for(let xt=mt.length-1-3;xt>=0;xt-=4)if(mt[xt]>0){ct=Math.ceil(xt/4/h);break}gt.clearRect(0,0,h,h),gt.strokeText("A",0,h),mt=gt.getImageData(0,0,h,h).data,yt=0;for(let xt=0,Ct=mt.length;xt<Ct;xt+=4)if(mt[xt]>0){yt=h-Math.floor(xt/4/h);break}if(gt.canvas.width=gt.canvas.height=0,yt){const xt=yt/(yt+ct);return b.set(et,xt),xt}return b.set(et,j),j}function at(et,nt,st){const gt=document.createElement("span"),lt={angle:0,canvasWidth:0,hasText:nt.str!=="",hasEOL:nt.hasEOL,fontSize:0};et._textDivs.push(gt);const yt=a.Util.transform(et._transform,nt.transform);let ct=Math.atan2(yt[1],yt[0]);const mt=st[nt.fontName];mt.vertical&&(ct+=Math.PI/2);const xt=Math.hypot(yt[2],yt[3]),Ct=xt*$(mt.fontFamily,et._isOffscreenCanvasSupported);let ht,wt;ct===0?(ht=yt[4],wt=yt[5]-Ct):(ht=yt[4]+Ct*Math.sin(ct),wt=yt[5]-Ct*Math.cos(ct));const jt="calc(var(--scale-factor)*",Xt=gt.style;et._container===et._rootContainer?(Xt.left=`${(100*ht/et._pageWidth).toFixed(2)}%`,Xt.top=`${(100*wt/et._pageHeight).toFixed(2)}%`):(Xt.left=`${jt}${ht.toFixed(2)}px)`,Xt.top=`${jt}${wt.toFixed(2)}px)`),Xt.fontSize=`${jt}${xt.toFixed(2)}px)`,Xt.fontFamily=mt.fontFamily,lt.fontSize=xt,gt.setAttribute("role","presentation"),gt.textContent=nt.str,gt.dir=nt.dir,et._fontInspectorEnabled&&(gt.dataset.fontName=nt.fontName),ct!==0&&(lt.angle=ct*(180/Math.PI));let Bt=!1;if(nt.str.length>1)Bt=!0;else if(nt.str!==" "&&nt.transform[0]!==nt.transform[3]){const Wt=Math.abs(nt.transform[0]),Ut=Math.abs(nt.transform[3]);Wt!==Ut&&Math.max(Wt,Ut)/Math.min(Wt,Ut)>1.5&&(Bt=!0)}Bt&&(lt.canvasWidth=mt.vertical?nt.height:nt.width),et._textDivProperties.set(gt,lt),et._isReadableStream&&et._layoutText(gt)}function rt(et){const{div:nt,scale:st,properties:gt,ctx:lt,prevFontSize:yt,prevFontFamily:ct}=et,{style:mt}=nt;let xt="";if(gt.canvasWidth!==0&&gt.hasText){const{fontFamily:Ct}=mt,{canvasWidth:ht,fontSize:wt}=gt;(yt!==wt||ct!==Ct)&&(lt.font=`${wt*st}px ${Ct}`,et.prevFontSize=wt,et.prevFontFamily=Ct);const{width:jt}=lt.measureText(nt.textContent);jt>0&&(xt=`scaleX(${ht*st/jt})`)}gt.angle!==0&&(xt=`rotate(${gt.angle}deg) ${xt}`),xt.length>0&&(mt.transform=xt)}function ut(et){if(et._canceled)return;const nt=et._textDivs,st=et._capability;if(nt.length>c){st.resolve();return}if(!et._isReadableStream)for(const lt of nt)et._layoutText(lt);st.resolve()}class ot{constructor({textContentSource:nt,container:st,viewport:gt,textDivs:lt,textDivProperties:yt,textContentItemsStr:ct,isOffscreenCanvasSupported:mt}){var jt;this._textContentSource=nt,this._isReadableStream=nt instanceof ReadableStream,this._container=this._rootContainer=st,this._textDivs=lt||[],this._textContentItemsStr=ct||[],this._isOffscreenCanvasSupported=mt,this._fontInspectorEnabled=!!((jt=globalThis.FontInspector)!=null&&jt.enabled),this._reader=null,this._textDivProperties=yt||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:gt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_(0,mt)};const{pageWidth:xt,pageHeight:Ct,pageX:ht,pageY:wt}=gt.rawDims;this._transform=[1,0,0,-1,-ht,wt+Ct],this._pageWidth=xt,this._pageHeight=Ct,(0,o.setLayerDimensions)(st,gt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(nt,st){for(const gt of nt){if(gt.str===void 0){if(gt.type==="beginMarkedContentProps"||gt.type==="beginMarkedContent"){const lt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),gt.id!==null&&this._container.setAttribute("id",`${gt.id}`),lt.append(this._container)}else gt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(gt.str),at(this,gt,st)}}_layoutText(nt){const st=this._layoutTextParams.properties=this._textDivProperties.get(nt);if(this._layoutTextParams.div=nt,rt(this._layoutTextParams),st.hasText&&this._container.append(nt),st.hasEOL){const gt=document.createElement("br");gt.setAttribute("role","presentation"),this._container.append(gt)}}_render(){const nt=new a.PromiseCapability;let st=Object.create(null);if(this._isReadableStream){const gt=()=>{this._reader.read().then(({value:lt,done:yt})=>{if(yt){nt.resolve();return}Object.assign(st,lt.styles),this._processItems(lt.items,st),gt()},nt.reject)};this._reader=this._textContentSource.getReader(),gt()}else if(this._textContentSource){const{items:gt,styles:lt}=this._textContentSource;this._processItems(gt,lt),nt.resolve()}else throw new Error('No "textContentSource" parameter specified.');nt.promise.then(()=>{st=null,ut(this)},this._capability.reject)}}s.TextLayerRenderTask=ot;function vt(et){!et.textContentSource&&(et.textContent||et.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),et.textContentSource=et.textContent||et.textContentStream);const{container:nt,viewport:st}=et,gt=getComputedStyle(nt),lt=gt.getPropertyValue("visibility"),yt=parseFloat(gt.getPropertyValue("--scale-factor"));lt==="visible"&&(!yt||Math.abs(yt-st.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const ct=new ot(et);return ct._render(),ct}function bt({container:et,viewport:nt,textDivs:st,textDivProperties:gt,isOffscreenCanvasSupported:lt,mustRotate:yt=!0,mustRescale:ct=!0}){if(yt&&(0,o.setLayerDimensions)(et,{rotation:nt.rotation}),ct){const mt=_(0,lt),Ct={prevFontSize:null,prevFontFamily:null,div:null,scale:nt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:mt};for(const ht of st)Ct.properties=gt.get(ht),Ct.div=ht,rt(Ct)}}},(e,s,i)=>{var $,at,rt,ut,ot,vt,bt,et,nt,st,gt,Lo,Zs,zo,$o;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var a=i(1),o=i(4),c=i(28),h=i(33),j=i(6),b=i(34);const xt=class xt{constructor({uiManager:ht,pageIndex:wt,div:jt,accessibilityManager:Xt,annotationLayer:Bt,viewport:Wt,l10n:Ut}){cn(this,gt);cn(this,$);cn(this,at,!1);cn(this,rt,null);cn(this,ut,this.pointerup.bind(this));cn(this,ot,this.pointerdown.bind(this));cn(this,vt,new Map);cn(this,bt,!1);cn(this,et,!1);cn(this,nt,!1);cn(this,st);const $t=[c.FreeTextEditor,h.InkEditor,b.StampEditor];if(!xt._initialized){xt._initialized=!0;for(const kt of $t)kt.initialize(Ut)}ht.registerEditorTypes($t),dn(this,st,ht),this.pageIndex=wt,this.div=jt,dn(this,$,Xt),dn(this,rt,Bt),this.viewport=Wt,tt(this,st).addLayer(this)}get isEmpty(){return tt(this,vt).size===0}updateToolbar(ht){tt(this,st).updateToolbar(ht)}updateMode(ht=tt(this,st).getMode()){Yt(this,gt,$o).call(this),ht===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ht!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",ht===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ht===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",ht===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(ht){if(!ht&&tt(this,st).getMode()!==a.AnnotationEditorType.INK)return;if(!ht){for(const jt of tt(this,vt).values())if(jt.isEmpty()){jt.setInBackground();return}}Yt(this,gt,Zs).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(ht){tt(this,st).setEditingState(ht)}addCommands(ht){tt(this,st).addCommands(ht)}enable(){this.div.style.pointerEvents="auto";const ht=new Set;for(const jt of tt(this,vt).values())jt.enableEditing(),jt.annotationElementId&&ht.add(jt.annotationElementId);if(!tt(this,rt))return;const wt=tt(this,rt).getEditableAnnotations();for(const jt of wt){if(jt.hide(),tt(this,st).isDeletedAnnotationElement(jt.data.id)||ht.has(jt.data.id))continue;const Xt=this.deserialize(jt);Xt&&(this.addOrRebuild(Xt),Xt.enableEditing())}}disable(){var wt;dn(this,nt,!0),this.div.style.pointerEvents="none";const ht=new Set;for(const jt of tt(this,vt).values()){if(jt.disableEditing(),!jt.annotationElementId||jt.serialize()!==null){ht.add(jt.annotationElementId);continue}(wt=this.getEditableAnnotation(jt.annotationElementId))==null||wt.show(),jt.remove()}if(tt(this,rt)){const jt=tt(this,rt).getEditableAnnotations();for(const Xt of jt){const{id:Bt}=Xt.data;ht.has(Bt)||tt(this,st).isDeletedAnnotationElement(Bt)||Xt.show()}}Yt(this,gt,$o).call(this),this.isEmpty&&(this.div.hidden=!0),dn(this,nt,!1)}getEditableAnnotation(ht){var wt;return((wt=tt(this,rt))==null?void 0:wt.getEditableAnnotation(ht))||null}setActiveEditor(ht){tt(this,st).getActive()!==ht&&tt(this,st).setActiveEditor(ht)}enableClick(){this.div.addEventListener("pointerdown",tt(this,ot)),this.div.addEventListener("pointerup",tt(this,ut))}disableClick(){this.div.removeEventListener("pointerdown",tt(this,ot)),this.div.removeEventListener("pointerup",tt(this,ut))}attach(ht){tt(this,vt).set(ht.id,ht);const{annotationElementId:wt}=ht;wt&&tt(this,st).isDeletedAnnotationElement(wt)&&tt(this,st).removeDeletedAnnotationElement(ht)}detach(ht){var wt;tt(this,vt).delete(ht.id),(wt=tt(this,$))==null||wt.removePointerInTextLayer(ht.contentDiv),!tt(this,nt)&&ht.annotationElementId&&tt(this,st).addDeletedAnnotationElement(ht)}remove(ht){this.detach(ht),tt(this,st).removeEditor(ht),ht.div.contains(document.activeElement)&&setTimeout(()=>{tt(this,st).focusMainContainer()},0),ht.div.remove(),ht.isAttachedToDOM=!1,tt(this,et)||this.addInkEditorIfNeeded(!1)}changeParent(ht){var wt;ht.parent!==this&&(ht.annotationElementId&&(tt(this,st).addDeletedAnnotationElement(ht.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(ht),ht.annotationElementId=null),this.attach(ht),(wt=ht.parent)==null||wt.detach(ht),ht.setParent(this),ht.div&&ht.isAttachedToDOM&&(ht.div.remove(),this.div.append(ht.div)))}add(ht){if(this.changeParent(ht),tt(this,st).addEditor(ht),this.attach(ht),!ht.isAttachedToDOM){const wt=ht.render();this.div.append(wt),ht.isAttachedToDOM=!0}ht.fixAndSetPosition(),ht.onceAdded(),tt(this,st).addToAnnotationStorage(ht)}moveEditorInDOM(ht){var jt;if(!ht.isAttachedToDOM)return;const{activeElement:wt}=document;ht.div.contains(wt)&&(ht._focusEventsAllowed=!1,setTimeout(()=>{ht.div.contains(document.activeElement)?ht._focusEventsAllowed=!0:(ht.div.addEventListener("focusin",()=>{ht._focusEventsAllowed=!0},{once:!0}),wt.focus())},0)),ht._structTreeParentId=(jt=tt(this,$))==null?void 0:jt.moveElementInDOM(this.div,ht.div,ht.contentDiv,!0)}addOrRebuild(ht){ht.needsToBeRebuilt()?ht.rebuild():this.add(ht)}addUndoableEditor(ht){const wt=()=>ht._uiManager.rebuild(ht),jt=()=>{ht.remove()};this.addCommands({cmd:wt,undo:jt,mustExec:!1})}getNextId(){return tt(this,st).getId()}pasteEditor(ht,wt){tt(this,st).updateToolbar(ht),tt(this,st).updateMode(ht);const{offsetX:jt,offsetY:Xt}=Yt(this,gt,zo).call(this),Bt=this.getNextId(),Wt=Yt(this,gt,Lo).call(this,{parent:this,id:Bt,x:jt,y:Xt,uiManager:tt(this,st),isCentered:!0,...wt});Wt&&this.add(Wt)}deserialize(ht){switch(ht.annotationType??ht.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(ht,this,tt(this,st));case a.AnnotationEditorType.INK:return h.InkEditor.deserialize(ht,this,tt(this,st));case a.AnnotationEditorType.STAMP:return b.StampEditor.deserialize(ht,this,tt(this,st))}return null}addNewEditor(){Yt(this,gt,Zs).call(this,Yt(this,gt,zo).call(this),!0)}setSelected(ht){tt(this,st).setSelected(ht)}toggleSelected(ht){tt(this,st).toggleSelected(ht)}isSelected(ht){return tt(this,st).isSelected(ht)}unselect(ht){tt(this,st).unselect(ht)}pointerup(ht){const{isMac:wt}=a.FeatureTest.platform;if(!(ht.button!==0||ht.ctrlKey&&wt)&&ht.target===this.div&&tt(this,bt)){if(dn(this,bt,!1),!tt(this,at)){dn(this,at,!0);return}if(tt(this,st).getMode()===a.AnnotationEditorType.STAMP){tt(this,st).unselectAll();return}Yt(this,gt,Zs).call(this,ht,!1)}}pointerdown(ht){if(tt(this,bt)){dn(this,bt,!1);return}const{isMac:wt}=a.FeatureTest.platform;if(ht.button!==0||ht.ctrlKey&&wt||ht.target!==this.div)return;dn(this,bt,!0);const jt=tt(this,st).getActive();dn(this,at,!jt||jt.isEmpty())}findNewParent(ht,wt,jt){const Xt=tt(this,st).findParent(wt,jt);return Xt===null||Xt===this?!1:(Xt.changeParent(ht),!0)}destroy(){var ht,wt;((ht=tt(this,st).getActive())==null?void 0:ht.parent)===this&&(tt(this,st).commitOrRemove(),tt(this,st).setActiveEditor(null));for(const jt of tt(this,vt).values())(wt=tt(this,$))==null||wt.removePointerInTextLayer(jt.contentDiv),jt.setParent(null),jt.isAttachedToDOM=!1,jt.div.remove();this.div=null,tt(this,vt).clear(),tt(this,st).removeLayer(this)}render({viewport:ht}){this.viewport=ht,(0,j.setLayerDimensions)(this.div,ht);for(const wt of tt(this,st).getEditors(this.pageIndex))this.add(wt);this.updateMode()}update({viewport:ht}){tt(this,st).commitOrRemove(),this.viewport=ht,(0,j.setLayerDimensions)(this.div,{rotation:ht.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:ht,pageHeight:wt}=this.viewport.rawDims;return[ht,wt]}};$=new WeakMap,at=new WeakMap,rt=new WeakMap,ut=new WeakMap,ot=new WeakMap,vt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,gt=new WeakSet,Lo=function(ht){switch(tt(this,st).getMode()){case a.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(ht);case a.AnnotationEditorType.INK:return new h.InkEditor(ht);case a.AnnotationEditorType.STAMP:return new b.StampEditor(ht)}return null},Zs=function(ht,wt){const jt=this.getNextId(),Xt=Yt(this,gt,Lo).call(this,{parent:this,id:jt,x:ht.offsetX,y:ht.offsetY,uiManager:tt(this,st),isCentered:wt});return Xt&&this.add(Xt),Xt},zo=function(){const{x:ht,y:wt,width:jt,height:Xt}=this.div.getBoundingClientRect(),Bt=Math.max(0,ht),Wt=Math.max(0,wt),Ut=Math.min(window.innerWidth,ht+jt),$t=Math.min(window.innerHeight,wt+Xt),kt=(Bt+Ut)/2-ht,Ft=(Wt+$t)/2-wt,[Gt,At]=this.viewport.rotation%180===0?[kt,Ft]:[Ft,kt];return{offsetX:Gt,offsetY:At}},$o=function(){dn(this,et,!0);for(const ht of tt(this,vt).values())ht.isEmpty()&&ht.remove();dn(this,et,!1)},xr(xt,"_initialized",!1);let _=xt;s.AnnotationEditorLayer=_},(e,s,i)=>{var b,_,$,at,rt,ut,ot,vt,bt,et,cu,uu,du,vs,Uo,hu,Bo;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var a=i(1),o=i(5),c=i(4),h=i(29);const xt=class xt extends c.AnnotationEditor{constructor(wt){super({...wt,name:"freeTextEditor"});cn(this,et);cn(this,b,this.editorDivBlur.bind(this));cn(this,_,this.editorDivFocus.bind(this));cn(this,$,this.editorDivInput.bind(this));cn(this,at,this.editorDivKeydown.bind(this));cn(this,rt);cn(this,ut,"");cn(this,ot,`${this.id}-editor`);cn(this,vt);cn(this,bt,null);dn(this,rt,wt.color||xt._defaultColor||c.AnnotationEditor._defaultLineColor),dn(this,vt,wt.fontSize||xt._defaultFontSize)}static get _keyboardManager(){const wt=xt.prototype,jt=Wt=>Wt.isEmpty(),Xt=o.AnnotationEditorUIManager.TRANSLATE_SMALL,Bt=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],wt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],wt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],wt._translateEmpty,{args:[-Xt,0],checker:jt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],wt._translateEmpty,{args:[-Bt,0],checker:jt}],[["ArrowRight","mac+ArrowRight"],wt._translateEmpty,{args:[Xt,0],checker:jt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],wt._translateEmpty,{args:[Bt,0],checker:jt}],[["ArrowUp","mac+ArrowUp"],wt._translateEmpty,{args:[0,-Xt],checker:jt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],wt._translateEmpty,{args:[0,-Bt],checker:jt}],[["ArrowDown","mac+ArrowDown"],wt._translateEmpty,{args:[0,Xt],checker:jt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],wt._translateEmpty,{args:[0,Bt],checker:jt}]]))}static initialize(wt){c.AnnotationEditor.initialize(wt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const jt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(jt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(wt,jt){switch(wt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:xt._defaultFontSize=jt;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:xt._defaultColor=jt;break}}updateParams(wt,jt){switch(wt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Yt(this,et,cu).call(this,jt);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Yt(this,et,uu).call(this,jt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,xt._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,xt._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,tt(this,vt)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,tt(this,rt)]]}_translateEmpty(wt,jt){this._uiManager.translateSelectedEditors(wt,jt,!0)}getInitialTranslation(){const wt=this.parentScale;return[-xt._internalPadding*wt,-(xt._internalPadding+tt(this,vt))*wt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",tt(this,at)),this.editorDiv.addEventListener("focus",tt(this,_)),this.editorDiv.addEventListener("blur",tt(this,b)),this.editorDiv.addEventListener("input",tt(this,$)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",tt(this,ot)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",tt(this,at)),this.editorDiv.removeEventListener("focus",tt(this,_)),this.editorDiv.removeEventListener("blur",tt(this,b)),this.editorDiv.removeEventListener("input",tt(this,$)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(wt){this._focusEventsAllowed&&(super.focusin(wt),wt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var wt;if(this.width){Yt(this,et,Bo).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(wt=this._initialOptions)!=null&&wt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const wt=tt(this,ut),jt=dn(this,ut,Yt(this,et,du).call(this).trimEnd());if(wt===jt)return;const Xt=Bt=>{if(dn(this,ut,Bt),!Bt){this.remove();return}Yt(this,et,Uo).call(this),this._uiManager.rebuild(this),Yt(this,et,vs).call(this)};this.addCommands({cmd:()=>{Xt(jt)},undo:()=>{Xt(wt)},mustExec:!1}),Yt(this,et,vs).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(wt){this.enterInEditMode()}keydown(wt){wt.target===this.div&&wt.key==="Enter"&&(this.enterInEditMode(),wt.preventDefault())}editorDivKeydown(wt){xt._keyboardManager.exec(this,wt)}editorDivFocus(wt){this.isEditing=!0}editorDivBlur(wt){this.isEditing=!1}editorDivInput(wt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let wt,jt;this.width&&(wt=this.x,jt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",tt(this,ot)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Bt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("aria-label",Bt)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Bt=>{var Wt;return(Wt=this.editorDiv)==null?void 0:Wt.setAttribute("default-content",Bt)}),this.editorDiv.contentEditable=!0;const{style:Xt}=this.editorDiv;if(Xt.fontSize=`calc(${tt(this,vt)}px * var(--scale-factor))`,Xt.color=tt(this,rt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Bt,Wt]=this.parentDimensions;if(this.annotationElementId){const{position:Ut}=tt(this,bt);let[$t,kt]=this.getInitialTranslation();[$t,kt]=this.pageTranslationToScreen($t,kt);const[Ft,Gt]=this.pageDimensions,[At,it]=this.pageTranslation;let dt,_t;switch(this.rotation){case 0:dt=wt+(Ut[0]-At)/Ft,_t=jt+this.height-(Ut[1]-it)/Gt;break;case 90:dt=wt+(Ut[0]-At)/Ft,_t=jt-(Ut[1]-it)/Gt,[$t,kt]=[kt,-$t];break;case 180:dt=wt-this.width+(Ut[0]-At)/Ft,_t=jt-(Ut[1]-it)/Gt,[$t,kt]=[-$t,-kt];break;case 270:dt=wt+(Ut[0]-At-this.height*Gt)/Ft,_t=jt+(Ut[1]-it-this.width*Ft)/Gt,[$t,kt]=[-kt,$t];break}this.setAt(dt*Bt,_t*Wt,$t,kt)}else this.setAt(wt*Bt,jt*Wt,this.width*Bt,this.height*Wt);Yt(this,et,Uo).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(wt,jt,Xt){let Bt=null;if(wt instanceof h.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ut,fontColor:$t},rect:kt,rotation:Ft,id:Gt},textContent:At,textPosition:it,parent:{page:{pageNumber:dt}}}=wt;if(!At||At.length===0)return null;Bt=wt={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from($t),fontSize:Ut,value:At.join(`
`),position:it,pageIndex:dt-1,rect:kt,rotation:Ft,id:Gt,deleted:!1}}const Wt=super.deserialize(wt,jt,Xt);return dn(Wt,vt,wt.fontSize),dn(Wt,rt,a.Util.makeHexColor(...wt.color)),dn(Wt,ut,wt.value),Wt.annotationElementId=wt.id||null,dn(Wt,bt,Bt),Wt}serialize(wt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const jt=xt._internalPadding*this.parentScale,Xt=this.getRect(jt,jt),Bt=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:tt(this,rt)),Wt={annotationType:a.AnnotationEditorType.FREETEXT,color:Bt,fontSize:tt(this,vt),value:tt(this,ut),pageIndex:this.pageIndex,rect:Xt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return wt?Wt:this.annotationElementId&&!Yt(this,et,hu).call(this,Wt)?null:(Wt.id=this.annotationElementId,Wt)}};b=new WeakMap,_=new WeakMap,$=new WeakMap,at=new WeakMap,rt=new WeakMap,ut=new WeakMap,ot=new WeakMap,vt=new WeakMap,bt=new WeakMap,et=new WeakSet,cu=function(wt){const jt=Bt=>{this.editorDiv.style.fontSize=`calc(${Bt}px * var(--scale-factor))`,this.translate(0,-(Bt-tt(this,vt))*this.parentScale),dn(this,vt,Bt),Yt(this,et,vs).call(this)},Xt=tt(this,vt);this.addCommands({cmd:()=>{jt(wt)},undo:()=>{jt(Xt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},uu=function(wt){const jt=tt(this,rt);this.addCommands({cmd:()=>{dn(this,rt,this.editorDiv.style.color=wt)},undo:()=>{dn(this,rt,this.editorDiv.style.color=jt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},du=function(){const wt=this.editorDiv.getElementsByTagName("div");if(wt.length===0)return this.editorDiv.innerText;const jt=[];for(const Xt of wt)jt.push(Xt.innerText.replace(/\r\n?|\n/,""));return jt.join(`
`)},vs=function(){const[wt,jt]=this.parentDimensions;let Xt;if(this.isAttachedToDOM)Xt=this.div.getBoundingClientRect();else{const{currentLayer:Bt,div:Wt}=this,Ut=Wt.style.display;Wt.style.display="hidden",Bt.div.append(this.div),Xt=Wt.getBoundingClientRect(),Wt.remove(),Wt.style.display=Ut}this.rotation%180===this.parentRotation%180?(this.width=Xt.width/wt,this.height=Xt.height/jt):(this.width=Xt.height/wt,this.height=Xt.width/jt),this.fixAndSetPosition()},Uo=function(){if(this.editorDiv.replaceChildren(),!!tt(this,ut))for(const wt of tt(this,ut).split(`
`)){const jt=document.createElement("div");jt.append(wt?document.createTextNode(wt):document.createElement("br")),this.editorDiv.append(jt)}},hu=function(wt){const{value:jt,fontSize:Xt,color:Bt,rect:Wt,pageIndex:Ut}=tt(this,bt);return wt.value!==jt||wt.fontSize!==Xt||wt.rect.some(($t,kt)=>Math.abs($t-Wt[kt])>=1)||wt.color.some(($t,kt)=>$t!==Bt[kt])||wt.pageIndex!==Ut},Bo=function(wt=!1){if(!this.annotationElementId)return;if(Yt(this,et,vs).call(this),!wt&&(this.width===0||this.height===0)){setTimeout(()=>Yt(this,et,Bo).call(this,!0),0);return}const jt=xt._internalPadding*this.parentScale;tt(this,bt).rect=this.getRect(jt,jt)},xr(xt,"_freeTextDefaultContent",""),xr(xt,"_internalPadding",0),xr(xt,"_defaultColor",null),xr(xt,"_defaultFontSize",10),xr(xt,"_type","freetext");let j=xt;s.FreeTextEditor=j},(e,s,i)=>{var _t,Dt,Gr,fu,on,vn,un,kn,jn,Rn,nn,rn,pt,Rt,zt,Kt,hn,Sn,En,Qt,In,Dn,pu,Ks,Wo,Vo,Yn,ar,dr,An,Vt,ln,Ln,Ho,Pn,Ot,_n,Fn,mu,Zo;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var a=i(1),o=i(6),c=i(3),h=i(30),j=i(31),b=i(32);const _=1e3,$=9,at=new WeakSet;function rt($n){return{width:$n[2]-$n[0],height:$n[3]-$n[1]}}class ut{static create(Nt){switch(Nt.data.annotationType){case a.AnnotationType.LINK:return new vt(Nt);case a.AnnotationType.TEXT:return new bt(Nt);case a.AnnotationType.WIDGET:switch(Nt.data.fieldType){case"Tx":return new nt(Nt);case"Btn":return Nt.data.radioButton?new lt(Nt):Nt.data.checkBox?new gt(Nt):new yt(Nt);case"Ch":return new ct(Nt);case"Sig":return new st(Nt)}return new et(Nt);case a.AnnotationType.POPUP:return new mt(Nt);case a.AnnotationType.FREETEXT:return new Ct(Nt);case a.AnnotationType.LINE:return new ht(Nt);case a.AnnotationType.SQUARE:return new wt(Nt);case a.AnnotationType.CIRCLE:return new jt(Nt);case a.AnnotationType.POLYLINE:return new Xt(Nt);case a.AnnotationType.CARET:return new Wt(Nt);case a.AnnotationType.INK:return new Ut(Nt);case a.AnnotationType.POLYGON:return new Bt(Nt);case a.AnnotationType.HIGHLIGHT:return new $t(Nt);case a.AnnotationType.UNDERLINE:return new kt(Nt);case a.AnnotationType.SQUIGGLY:return new Ft(Nt);case a.AnnotationType.STRIKEOUT:return new Gt(Nt);case a.AnnotationType.STAMP:return new At(Nt);case a.AnnotationType.FILEATTACHMENT:return new it(Nt);default:return new ot(Nt)}}}const Tt=class Tt{constructor(Nt,{isRenderable:Pt=!1,ignoreBorder:Zt=!1,createQuadrilaterals:gn=!1}={}){cn(this,_t,!1);this.isRenderable=Pt,this.data=Nt.data,this.layer=Nt.layer,this.linkService=Nt.linkService,this.downloadManager=Nt.downloadManager,this.imageResourcesPath=Nt.imageResourcesPath,this.renderForms=Nt.renderForms,this.svgFactory=Nt.svgFactory,this.annotationStorage=Nt.annotationStorage,this.enableScripting=Nt.enableScripting,this.hasJSActions=Nt.hasJSActions,this._fieldObjects=Nt.fieldObjects,this.parent=Nt.parent,Pt&&(this.container=this._createContainer(Zt)),gn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Nt,contentsObj:Pt,richText:Zt}){return!!(Nt!=null&&Nt.str||Pt!=null&&Pt.str||Zt!=null&&Zt.str)}get hasPopupData(){return Tt._hasPopupData(this.data)}_createContainer(Nt){const{data:Pt,parent:{page:Zt,viewport:gn}}=this,xn=document.createElement("section");xn.setAttribute("data-annotation-id",Pt.id),this instanceof et||(xn.tabIndex=_),xn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&xn.setAttribute("aria-haspopup","dialog"),Pt.noRotate&&xn.classList.add("norotate");const{pageWidth:bn,pageHeight:Cn,pageX:qn,pageY:Wn}=gn.rawDims;if(!Pt.rect||this instanceof mt){const{rotation:tr}=Pt;return!Pt.hasOwnCanvas&&tr!==0&&this.setRotation(tr,xn),xn}const{width:Mn,height:rr}=rt(Pt.rect),Kn=a.Util.normalizeRect([Pt.rect[0],Zt.view[3]-Pt.rect[1]+Zt.view[1],Pt.rect[2],Zt.view[3]-Pt.rect[3]+Zt.view[1]]);if(!Nt&&Pt.borderStyle.width>0){xn.style.borderWidth=`${Pt.borderStyle.width}px`;const tr=Pt.borderStyle.horizontalCornerRadius,sr=Pt.borderStyle.verticalCornerRadius;if(tr>0||sr>0){const mr=`calc(${tr}px * var(--scale-factor)) / calc(${sr}px * var(--scale-factor))`;xn.style.borderRadius=mr}else if(this instanceof lt){const mr=`calc(${Mn}px * var(--scale-factor)) / calc(${rr}px * var(--scale-factor))`;xn.style.borderRadius=mr}switch(Pt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:xn.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:xn.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:xn.style.borderBottomStyle="solid";break}const lr=Pt.borderColor||null;lr?(dn(this,_t,!0),xn.style.borderColor=a.Util.makeHexColor(lr[0]|0,lr[1]|0,lr[2]|0)):xn.style.borderWidth=0}xn.style.left=`${100*(Kn[0]-qn)/bn}%`,xn.style.top=`${100*(Kn[1]-Wn)/Cn}%`;const{rotation:Vn}=Pt;return Pt.hasOwnCanvas||Vn===0?(xn.style.width=`${100*Mn/bn}%`,xn.style.height=`${100*rr/Cn}%`):this.setRotation(Vn,xn),xn}setRotation(Nt,Pt=this.container){if(!this.data.rect)return;const{pageWidth:Zt,pageHeight:gn}=this.parent.viewport.rawDims,{width:xn,height:bn}=rt(this.data.rect);let Cn,qn;Nt%180===0?(Cn=100*xn/Zt,qn=100*bn/gn):(Cn=100*bn/Zt,qn=100*xn/gn),Pt.style.width=`${Cn}%`,Pt.style.height=`${qn}%`,Pt.setAttribute("data-main-rotation",(360-Nt)%360)}get _commonActions(){const Nt=(Pt,Zt,gn)=>{const xn=gn.detail[Pt],bn=xn[0],Cn=xn.slice(1);gn.target.style[Zt]=h.ColorConverters[`${bn}_HTML`](Cn),this.annotationStorage.setValue(this.data.id,{[Zt]:h.ColorConverters[`${bn}_rgb`](Cn)})};return(0,a.shadow)(this,"_commonActions",{display:Pt=>{const{display:Zt}=Pt.detail,gn=Zt%2===1;this.container.style.visibility=gn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:gn,noPrint:Zt===1||Zt===2})},print:Pt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Pt.detail.print})},hidden:Pt=>{const{hidden:Zt}=Pt.detail;this.container.style.visibility=Zt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Zt,noView:Zt})},focus:Pt=>{setTimeout(()=>Pt.target.focus({preventScroll:!1}),0)},userName:Pt=>{Pt.target.title=Pt.detail.userName},readonly:Pt=>{Pt.target.disabled=Pt.detail.readonly},required:Pt=>{this._setRequired(Pt.target,Pt.detail.required)},bgColor:Pt=>{Nt("bgColor","backgroundColor",Pt)},fillColor:Pt=>{Nt("fillColor","backgroundColor",Pt)},fgColor:Pt=>{Nt("fgColor","color",Pt)},textColor:Pt=>{Nt("textColor","color",Pt)},borderColor:Pt=>{Nt("borderColor","borderColor",Pt)},strokeColor:Pt=>{Nt("strokeColor","borderColor",Pt)},rotation:Pt=>{const Zt=Pt.detail.rotation;this.setRotation(Zt),this.annotationStorage.setValue(this.data.id,{rotation:Zt})}})}_dispatchEventFromSandbox(Nt,Pt){const Zt=this._commonActions;for(const gn of Object.keys(Pt.detail)){const xn=Nt[gn]||Zt[gn];xn==null||xn(Pt)}}_setDefaultPropertiesFromJS(Nt){if(!this.enableScripting)return;const Pt=this.annotationStorage.getRawValue(this.data.id);if(!Pt)return;const Zt=this._commonActions;for(const[gn,xn]of Object.entries(Pt)){const bn=Zt[gn];if(bn){const Cn={detail:{[gn]:xn},target:Nt};bn(Cn),delete Pt[gn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Nt}=this.data;if(!Nt)return;const[Pt,Zt,gn,xn]=this.data.rect;if(Nt.length===1){const[,{x:sr,y:lr},{x:mr,y:yr}]=Nt[0];if(gn===sr&&xn===lr&&Pt===mr&&Zt===yr)return}const{style:bn}=this.container;let Cn;if(tt(this,_t)){const{borderColor:sr,borderWidth:lr}=bn;bn.borderWidth=0,Cn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${sr}" stroke-width="${lr}">`],this.container.classList.add("hasBorder")}const qn=gn-Pt,Wn=xn-Zt,{svgFactory:Mn}=this,rr=Mn.createElement("svg");rr.classList.add("quadrilateralsContainer"),rr.setAttribute("width",0),rr.setAttribute("height",0);const Kn=Mn.createElement("defs");rr.append(Kn);const Vn=Mn.createElement("clipPath"),tr=`clippath_${this.data.id}`;Vn.setAttribute("id",tr),Vn.setAttribute("clipPathUnits","objectBoundingBox"),Kn.append(Vn);for(const[,{x:sr,y:lr},{x:mr,y:yr}]of Nt){const vr=Mn.createElement("rect"),Sr=(mr-Pt)/qn,Ir=(xn-lr)/Wn,Pr=(sr-mr)/qn,Er=(lr-yr)/Wn;vr.setAttribute("x",Sr),vr.setAttribute("y",Ir),vr.setAttribute("width",Pr),vr.setAttribute("height",Er),Vn.append(vr),Cn==null||Cn.push(`<rect vector-effect="non-scaling-stroke" x="${Sr}" y="${Ir}" width="${Pr}" height="${Er}"/>`)}tt(this,_t)&&(Cn.push("</g></svg>')"),bn.backgroundImage=Cn.join("")),this.container.append(rr),this.container.style.clipPath=`url(#${tr})`}_createPopup(){const{container:Nt,data:Pt}=this;Nt.setAttribute("aria-haspopup","dialog");const Zt=new mt({data:{color:Pt.color,titleObj:Pt.titleObj,modificationDate:Pt.modificationDate,contentsObj:Pt.contentsObj,richText:Pt.richText,parentRect:Pt.rect,borderStyle:0,id:`popup_${Pt.id}`,rotation:Pt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Zt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Nt,Pt=null){const Zt=[];if(this._fieldObjects){const gn=this._fieldObjects[Nt];if(gn)for(const{page:xn,id:bn,exportValues:Cn}of gn){if(xn===-1||bn===Pt)continue;const qn=typeof Cn=="string"?Cn:null,Wn=document.querySelector(`[data-element-id="${bn}"]`);if(Wn&&!at.has(Wn)){(0,a.warn)(`_getElementsByName - element not allowed: ${bn}`);continue}Zt.push({id:bn,exportValue:qn,domElement:Wn})}return Zt}for(const gn of document.getElementsByName(Nt)){const{exportValue:xn}=gn,bn=gn.getAttribute("data-element-id");bn!==Pt&&at.has(gn)&&Zt.push({id:bn,exportValue:xn,domElement:gn})}return Zt}show(){var Nt;this.container&&(this.container.hidden=!1),(Nt=this.popup)==null||Nt.maybeShow()}hide(){var Nt;this.container&&(this.container.hidden=!0),(Nt=this.popup)==null||Nt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Nt=this.getElementsToTriggerPopup();if(Array.isArray(Nt))for(const Pt of Nt)Pt.classList.add("highlightArea");else Nt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Nt,data:{id:Pt}}=this;this.container.addEventListener("dblclick",()=>{var Zt;(Zt=this.linkService.eventBus)==null||Zt.dispatch("switchannotationeditormode",{source:this,mode:Nt,editId:Pt})})}};_t=new WeakMap;let ot=Tt;class vt extends ot{constructor(Pt,Zt=null){super(Pt,{isRenderable:!0,ignoreBorder:!!(Zt!=null&&Zt.ignoreBorder),createQuadrilaterals:!0});cn(this,Dt);this.isTooltipOnly=Pt.data.isTooltipOnly}render(){const{data:Pt,linkService:Zt}=this,gn=document.createElement("a");gn.setAttribute("data-element-id",Pt.id);let xn=!1;return Pt.url?(Zt.addLinkAttributes(gn,Pt.url,Pt.newWindow),xn=!0):Pt.action?(this._bindNamedAction(gn,Pt.action),xn=!0):Pt.attachment?(this._bindAttachment(gn,Pt.attachment),xn=!0):Pt.setOCGState?(Yt(this,Dt,fu).call(this,gn,Pt.setOCGState),xn=!0):Pt.dest?(this._bindLink(gn,Pt.dest),xn=!0):(Pt.actions&&(Pt.actions.Action||Pt.actions["Mouse Up"]||Pt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(gn,Pt),xn=!0),Pt.resetForm?(this._bindResetFormAction(gn,Pt.resetForm),xn=!0):this.isTooltipOnly&&!xn&&(this._bindLink(gn,""),xn=!0)),this.container.classList.add("linkAnnotation"),xn&&this.container.append(gn),this.container}_bindLink(Pt,Zt){Pt.href=this.linkService.getDestinationHash(Zt),Pt.onclick=()=>(Zt&&this.linkService.goToDestination(Zt),!1),(Zt||Zt==="")&&Yt(this,Dt,Gr).call(this)}_bindNamedAction(Pt,Zt){Pt.href=this.linkService.getAnchorUrl(""),Pt.onclick=()=>(this.linkService.executeNamedAction(Zt),!1),Yt(this,Dt,Gr).call(this)}_bindAttachment(Pt,Zt){Pt.href=this.linkService.getAnchorUrl(""),Pt.onclick=()=>{var gn;return(gn=this.downloadManager)==null||gn.openOrDownloadData(this.container,Zt.content,Zt.filename),!1},Yt(this,Dt,Gr).call(this)}_bindJSAction(Pt,Zt){Pt.href=this.linkService.getAnchorUrl("");const gn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const xn of Object.keys(Zt.actions)){const bn=gn.get(xn);bn&&(Pt[bn]=()=>{var Cn;return(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Zt.id,name:xn}}),!1})}Pt.onclick||(Pt.onclick=()=>!1),Yt(this,Dt,Gr).call(this)}_bindResetFormAction(Pt,Zt){const gn=Pt.onclick;if(gn||(Pt.href=this.linkService.getAnchorUrl("")),Yt(this,Dt,Gr).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),gn||(Pt.onclick=()=>!1);return}Pt.onclick=()=>{var rr;gn==null||gn();const{fields:xn,refs:bn,include:Cn}=Zt,qn=[];if(xn.length!==0||bn.length!==0){const Kn=new Set(bn);for(const Vn of xn){const tr=this._fieldObjects[Vn]||[];for(const{id:sr}of tr)Kn.add(sr)}for(const Vn of Object.values(this._fieldObjects))for(const tr of Vn)Kn.has(tr.id)===Cn&&qn.push(tr)}else for(const Kn of Object.values(this._fieldObjects))qn.push(...Kn);const Wn=this.annotationStorage,Mn=[];for(const Kn of qn){const{id:Vn}=Kn;switch(Mn.push(Vn),Kn.type){case"text":{const sr=Kn.defaultValue||"";Wn.setValue(Vn,{value:sr});break}case"checkbox":case"radiobutton":{const sr=Kn.defaultValue===Kn.exportValues;Wn.setValue(Vn,{value:sr});break}case"combobox":case"listbox":{const sr=Kn.defaultValue||"";Wn.setValue(Vn,{value:sr});break}default:continue}const tr=document.querySelector(`[data-element-id="${Vn}"]`);if(tr){if(!at.has(tr)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Vn}`);continue}}else continue;tr.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((rr=this.linkService.eventBus)==null||rr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Mn,name:"ResetForm"}})),!1}}}Dt=new WeakSet,Gr=function(){this.container.setAttribute("data-internal-link","")},fu=function(Pt,Zt){Pt.href=this.linkService.getAnchorUrl(""),Pt.onclick=()=>(this.linkService.executeSetOCGState(Zt),!1),Yt(this,Dt,Gr).call(this)};class bt extends ot{constructor(Nt){super(Nt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Nt=document.createElement("img");return Nt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Nt.alt="[{{type}} Annotation]",Nt.dataset.l10nId="text_annotation_type",Nt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Nt),this.container}}class et extends ot{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Nt){var Pt;this.data.hasOwnCanvas&&(((Pt=Nt.previousSibling)==null?void 0:Pt.nodeName)==="CANVAS"&&(Nt.previousSibling.hidden=!0),Nt.hidden=!1)}_getKeyModifier(Nt){const{isWin:Pt,isMac:Zt}=a.FeatureTest.platform;return Pt&&Nt.ctrlKey||Zt&&Nt.metaKey}_setEventListener(Nt,Pt,Zt,gn,xn){Zt.includes("mouse")?Nt.addEventListener(Zt,bn=>{var Cn;(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:gn,value:xn(bn),shift:bn.shiftKey,modifier:this._getKeyModifier(bn)}})}):Nt.addEventListener(Zt,bn=>{var Cn;if(Zt==="blur"){if(!Pt.focused||!bn.relatedTarget)return;Pt.focused=!1}else if(Zt==="focus"){if(Pt.focused)return;Pt.focused=!0}xn&&((Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:gn,value:xn(bn)}}))})}_setEventListeners(Nt,Pt,Zt,gn){var xn,bn,Cn;for(const[qn,Wn]of Zt)(Wn==="Action"||(xn=this.data.actions)!=null&&xn[Wn])&&((Wn==="Focus"||Wn==="Blur")&&(Pt||(Pt={focused:!1})),this._setEventListener(Nt,Pt,qn,Wn,gn),Wn==="Focus"&&!((bn=this.data.actions)!=null&&bn.Blur)?this._setEventListener(Nt,Pt,"blur","Blur",null):Wn==="Blur"&&!((Cn=this.data.actions)!=null&&Cn.Focus)&&this._setEventListener(Nt,Pt,"focus","Focus",null))}_setBackgroundColor(Nt){const Pt=this.data.backgroundColor||null;Nt.style.backgroundColor=Pt===null?"transparent":a.Util.makeHexColor(Pt[0],Pt[1],Pt[2])}_setTextStyle(Nt){const Pt=["left","center","right"],{fontColor:Zt}=this.data.defaultAppearanceData,gn=this.data.defaultAppearanceData.fontSize||$,xn=Nt.style;let bn;const Cn=2,qn=Wn=>Math.round(10*Wn)/10;if(this.data.multiLine){const Wn=Math.abs(this.data.rect[3]-this.data.rect[1]-Cn),Mn=Math.round(Wn/(a.LINE_FACTOR*gn))||1,rr=Wn/Mn;bn=Math.min(gn,qn(rr/a.LINE_FACTOR))}else{const Wn=Math.abs(this.data.rect[3]-this.data.rect[1]-Cn);bn=Math.min(gn,qn(Wn/a.LINE_FACTOR))}xn.fontSize=`calc(${bn}px * var(--scale-factor))`,xn.color=a.Util.makeHexColor(Zt[0],Zt[1],Zt[2]),this.data.textAlignment!==null&&(xn.textAlign=Pt[this.data.textAlignment])}_setRequired(Nt,Pt){Pt?Nt.setAttribute("required",!0):Nt.removeAttribute("required"),Nt.setAttribute("aria-required",Pt)}}class nt extends et{constructor(Nt){const Pt=Nt.renderForms||!Nt.data.hasAppearance&&!!Nt.data.fieldValue;super(Nt,{isRenderable:Pt})}setPropertyOnSiblings(Nt,Pt,Zt,gn){const xn=this.annotationStorage;for(const bn of this._getElementsByName(Nt.name,Nt.id))bn.domElement&&(bn.domElement[Pt]=Zt),xn.setValue(bn.id,{[gn]:Zt})}render(){var gn,xn;const Nt=this.annotationStorage,Pt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Zt=null;if(this.renderForms){const bn=Nt.getValue(Pt,{value:this.data.fieldValue});let Cn=bn.value||"";const qn=Nt.getValue(Pt,{charLimit:this.data.maxLen}).charLimit;qn&&Cn.length>qn&&(Cn=Cn.slice(0,qn));let Wn=bn.formattedValue||((gn=this.data.textContent)==null?void 0:gn.join(`
`))||null;Wn&&this.data.comb&&(Wn=Wn.replaceAll(/\s+/g,""));const Mn={userValue:Cn,formattedValue:Wn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Zt=document.createElement("textarea"),Zt.textContent=Wn??Cn,this.data.doNotScroll&&(Zt.style.overflowY="hidden")):(Zt=document.createElement("input"),Zt.type="text",Zt.setAttribute("value",Wn??Cn),this.data.doNotScroll&&(Zt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Zt.hidden=!0),at.add(Zt),Zt.setAttribute("data-element-id",Pt),Zt.disabled=this.data.readOnly,Zt.name=this.data.fieldName,Zt.tabIndex=_,this._setRequired(Zt,this.data.required),qn&&(Zt.maxLength=qn),Zt.addEventListener("input",Kn=>{Nt.setValue(Pt,{value:Kn.target.value}),this.setPropertyOnSiblings(Zt,"value",Kn.target.value,"value"),Mn.formattedValue=null}),Zt.addEventListener("resetform",Kn=>{const Vn=this.data.defaultFieldValue??"";Zt.value=Mn.userValue=Vn,Mn.formattedValue=null});let rr=Kn=>{const{formattedValue:Vn}=Mn;Vn!=null&&(Kn.target.value=Vn),Kn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Zt.addEventListener("focus",Vn=>{if(Mn.focused)return;const{target:tr}=Vn;Mn.userValue&&(tr.value=Mn.userValue),Mn.lastCommittedValue=tr.value,Mn.commitKey=1,Mn.focused=!0}),Zt.addEventListener("updatefromsandbox",Vn=>{this.showElementAndHideCanvas(Vn.target);const tr={value(sr){Mn.userValue=sr.detail.value??"",Nt.setValue(Pt,{value:Mn.userValue.toString()}),sr.target.value=Mn.userValue},formattedValue(sr){const{formattedValue:lr}=sr.detail;Mn.formattedValue=lr,lr!=null&&sr.target!==document.activeElement&&(sr.target.value=lr),Nt.setValue(Pt,{formattedValue:lr})},selRange(sr){sr.target.setSelectionRange(...sr.detail.selRange)},charLimit:sr=>{var vr;const{charLimit:lr}=sr.detail,{target:mr}=sr;if(lr===0){mr.removeAttribute("maxLength");return}mr.setAttribute("maxLength",lr);let yr=Mn.userValue;!yr||yr.length<=lr||(yr=yr.slice(0,lr),mr.value=Mn.userValue=yr,Nt.setValue(Pt,{value:yr}),(vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Pt,name:"Keystroke",value:yr,willCommit:!0,commitKey:1,selStart:mr.selectionStart,selEnd:mr.selectionEnd}}))}};this._dispatchEventFromSandbox(tr,Vn)}),Zt.addEventListener("keydown",Vn=>{var lr;Mn.commitKey=1;let tr=-1;if(Vn.key==="Escape"?tr=0:Vn.key==="Enter"&&!this.data.multiLine?tr=2:Vn.key==="Tab"&&(Mn.commitKey=3),tr===-1)return;const{value:sr}=Vn.target;Mn.lastCommittedValue!==sr&&(Mn.lastCommittedValue=sr,Mn.userValue=sr,(lr=this.linkService.eventBus)==null||lr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Pt,name:"Keystroke",value:sr,willCommit:!0,commitKey:tr,selStart:Vn.target.selectionStart,selEnd:Vn.target.selectionEnd}}))});const Kn=rr;rr=null,Zt.addEventListener("blur",Vn=>{var sr;if(!Mn.focused||!Vn.relatedTarget)return;Mn.focused=!1;const{value:tr}=Vn.target;Mn.userValue=tr,Mn.lastCommittedValue!==tr&&((sr=this.linkService.eventBus)==null||sr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Pt,name:"Keystroke",value:tr,willCommit:!0,commitKey:Mn.commitKey,selStart:Vn.target.selectionStart,selEnd:Vn.target.selectionEnd}})),Kn(Vn)}),(xn=this.data.actions)!=null&&xn.Keystroke&&Zt.addEventListener("beforeinput",Vn=>{var Ir;Mn.lastCommittedValue=null;const{data:tr,target:sr}=Vn,{value:lr,selectionStart:mr,selectionEnd:yr}=sr;let vr=mr,Sr=yr;switch(Vn.inputType){case"deleteWordBackward":{const Pr=lr.substring(0,mr).match(/\w*[^\w]*$/);Pr&&(vr-=Pr[0].length);break}case"deleteWordForward":{const Pr=lr.substring(mr).match(/^[^\w]*\w*/);Pr&&(Sr+=Pr[0].length);break}case"deleteContentBackward":mr===yr&&(vr-=1);break;case"deleteContentForward":mr===yr&&(Sr+=1);break}Vn.preventDefault(),(Ir=this.linkService.eventBus)==null||Ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Pt,name:"Keystroke",value:lr,change:tr||"",willCommit:!1,selStart:vr,selEnd:Sr}})}),this._setEventListeners(Zt,Mn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Vn=>Vn.target.value)}if(rr&&Zt.addEventListener("blur",rr),this.data.comb){const Vn=(this.data.rect[2]-this.data.rect[0])/qn;Zt.classList.add("comb"),Zt.style.letterSpacing=`calc(${Vn}px * var(--scale-factor) - 1ch)`}}else Zt=document.createElement("div"),Zt.textContent=this.data.fieldValue,Zt.style.verticalAlign="middle",Zt.style.display="table-cell";return this._setTextStyle(Zt),this._setBackgroundColor(Zt),this._setDefaultPropertiesFromJS(Zt),this.container.append(Zt),this.container}}class st extends et{constructor(Nt){super(Nt,{isRenderable:!!Nt.data.hasOwnCanvas})}}class gt extends et{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){const Nt=this.annotationStorage,Pt=this.data,Zt=Pt.id;let gn=Nt.getValue(Zt,{value:Pt.exportValue===Pt.fieldValue}).value;typeof gn=="string"&&(gn=gn!=="Off",Nt.setValue(Zt,{value:gn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const xn=document.createElement("input");return at.add(xn),xn.setAttribute("data-element-id",Zt),xn.disabled=Pt.readOnly,this._setRequired(xn,this.data.required),xn.type="checkbox",xn.name=Pt.fieldName,gn&&xn.setAttribute("checked",!0),xn.setAttribute("exportValue",Pt.exportValue),xn.tabIndex=_,xn.addEventListener("change",bn=>{const{name:Cn,checked:qn}=bn.target;for(const Wn of this._getElementsByName(Cn,Zt)){const Mn=qn&&Wn.exportValue===Pt.exportValue;Wn.domElement&&(Wn.domElement.checked=Mn),Nt.setValue(Wn.id,{value:Mn})}Nt.setValue(Zt,{value:qn})}),xn.addEventListener("resetform",bn=>{const Cn=Pt.defaultFieldValue||"Off";bn.target.checked=Cn===Pt.exportValue}),this.enableScripting&&this.hasJSActions&&(xn.addEventListener("updatefromsandbox",bn=>{const Cn={value(qn){qn.target.checked=qn.detail.value!=="Off",Nt.setValue(Zt,{value:qn.target.checked})}};this._dispatchEventFromSandbox(Cn,bn)}),this._setEventListeners(xn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],bn=>bn.target.checked)),this._setBackgroundColor(xn),this._setDefaultPropertiesFromJS(xn),this.container.append(xn),this.container}}class lt extends et{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Nt=this.annotationStorage,Pt=this.data,Zt=Pt.id;let gn=Nt.getValue(Zt,{value:Pt.fieldValue===Pt.buttonValue}).value;typeof gn=="string"&&(gn=gn!==Pt.buttonValue,Nt.setValue(Zt,{value:gn}));const xn=document.createElement("input");if(at.add(xn),xn.setAttribute("data-element-id",Zt),xn.disabled=Pt.readOnly,this._setRequired(xn,this.data.required),xn.type="radio",xn.name=Pt.fieldName,gn&&xn.setAttribute("checked",!0),xn.tabIndex=_,xn.addEventListener("change",bn=>{const{name:Cn,checked:qn}=bn.target;for(const Wn of this._getElementsByName(Cn,Zt))Nt.setValue(Wn.id,{value:!1});Nt.setValue(Zt,{value:qn})}),xn.addEventListener("resetform",bn=>{const Cn=Pt.defaultFieldValue;bn.target.checked=Cn!=null&&Cn===Pt.buttonValue}),this.enableScripting&&this.hasJSActions){const bn=Pt.buttonValue;xn.addEventListener("updatefromsandbox",Cn=>{const qn={value:Wn=>{const Mn=bn===Wn.detail.value;for(const rr of this._getElementsByName(Wn.target.name)){const Kn=Mn&&rr.id===Zt;rr.domElement&&(rr.domElement.checked=Kn),Nt.setValue(rr.id,{value:Kn})}}};this._dispatchEventFromSandbox(qn,Cn)}),this._setEventListeners(xn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Cn=>Cn.target.checked)}return this._setBackgroundColor(xn),this._setDefaultPropertiesFromJS(xn),this.container.append(xn),this.container}}class yt extends vt{constructor(Nt){super(Nt,{ignoreBorder:Nt.data.hasAppearance})}render(){const Nt=super.render();Nt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Nt.title=this.data.alternativeText);const Pt=Nt.lastChild;return this.enableScripting&&this.hasJSActions&&Pt&&(this._setDefaultPropertiesFromJS(Pt),Pt.addEventListener("updatefromsandbox",Zt=>{this._dispatchEventFromSandbox({},Zt)})),Nt}}class ct extends et{constructor(Nt){super(Nt,{isRenderable:Nt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Nt=this.annotationStorage,Pt=this.data.id,Zt=Nt.getValue(Pt,{value:this.data.fieldValue}),gn=document.createElement("select");at.add(gn),gn.setAttribute("data-element-id",Pt),gn.disabled=this.data.readOnly,this._setRequired(gn,this.data.required),gn.name=this.data.fieldName,gn.tabIndex=_;let xn=this.data.combo&&this.data.options.length>0;this.data.combo||(gn.size=this.data.options.length,this.data.multiSelect&&(gn.multiple=!0)),gn.addEventListener("resetform",Mn=>{const rr=this.data.defaultFieldValue;for(const Kn of gn.options)Kn.selected=Kn.value===rr});for(const Mn of this.data.options){const rr=document.createElement("option");rr.textContent=Mn.displayValue,rr.value=Mn.exportValue,Zt.value.includes(Mn.exportValue)&&(rr.setAttribute("selected",!0),xn=!1),gn.append(rr)}let bn=null;if(xn){const Mn=document.createElement("option");Mn.value=" ",Mn.setAttribute("hidden",!0),Mn.setAttribute("selected",!0),gn.prepend(Mn),bn=()=>{Mn.remove(),gn.removeEventListener("input",bn),bn=null},gn.addEventListener("input",bn)}const Cn=Mn=>{const rr=Mn?"value":"textContent",{options:Kn,multiple:Vn}=gn;return Vn?Array.prototype.filter.call(Kn,tr=>tr.selected).map(tr=>tr[rr]):Kn.selectedIndex===-1?null:Kn[Kn.selectedIndex][rr]};let qn=Cn(!1);const Wn=Mn=>{const rr=Mn.target.options;return Array.prototype.map.call(rr,Kn=>({displayValue:Kn.textContent,exportValue:Kn.value}))};return this.enableScripting&&this.hasJSActions?(gn.addEventListener("updatefromsandbox",Mn=>{const rr={value(Kn){bn==null||bn();const Vn=Kn.detail.value,tr=new Set(Array.isArray(Vn)?Vn:[Vn]);for(const sr of gn.options)sr.selected=tr.has(sr.value);Nt.setValue(Pt,{value:Cn(!0)}),qn=Cn(!1)},multipleSelection(Kn){gn.multiple=!0},remove(Kn){const Vn=gn.options,tr=Kn.detail.remove;Vn[tr].selected=!1,gn.remove(tr),Vn.length>0&&Array.prototype.findIndex.call(Vn,lr=>lr.selected)===-1&&(Vn[0].selected=!0),Nt.setValue(Pt,{value:Cn(!0),items:Wn(Kn)}),qn=Cn(!1)},clear(Kn){for(;gn.length!==0;)gn.remove(0);Nt.setValue(Pt,{value:null,items:[]}),qn=Cn(!1)},insert(Kn){const{index:Vn,displayValue:tr,exportValue:sr}=Kn.detail.insert,lr=gn.children[Vn],mr=document.createElement("option");mr.textContent=tr,mr.value=sr,lr?lr.before(mr):gn.append(mr),Nt.setValue(Pt,{value:Cn(!0),items:Wn(Kn)}),qn=Cn(!1)},items(Kn){const{items:Vn}=Kn.detail;for(;gn.length!==0;)gn.remove(0);for(const tr of Vn){const{displayValue:sr,exportValue:lr}=tr,mr=document.createElement("option");mr.textContent=sr,mr.value=lr,gn.append(mr)}gn.options.length>0&&(gn.options[0].selected=!0),Nt.setValue(Pt,{value:Cn(!0),items:Wn(Kn)}),qn=Cn(!1)},indices(Kn){const Vn=new Set(Kn.detail.indices);for(const tr of Kn.target.options)tr.selected=Vn.has(tr.index);Nt.setValue(Pt,{value:Cn(!0)}),qn=Cn(!1)},editable(Kn){Kn.target.disabled=!Kn.detail.editable}};this._dispatchEventFromSandbox(rr,Mn)}),gn.addEventListener("input",Mn=>{var Kn;const rr=Cn(!0);Nt.setValue(Pt,{value:rr}),Mn.preventDefault(),(Kn=this.linkService.eventBus)==null||Kn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Pt,name:"Keystroke",value:qn,changeEx:rr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(gn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Mn=>Mn.target.value)):gn.addEventListener("input",function(Mn){Nt.setValue(Pt,{value:Cn(!0)})}),this.data.combo&&this._setTextStyle(gn),this._setBackgroundColor(gn),this._setDefaultPropertiesFromJS(gn),this.container.append(gn),this.container}}class mt extends ot{constructor(Nt){const{data:Pt,elements:Zt}=Nt;super(Nt,{isRenderable:ot._hasPopupData(Pt)}),this.elements=Zt}render(){this.container.classList.add("popupAnnotation");const Nt=new xt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Pt=[];for(const Zt of this.elements)Zt.popup=Nt,Pt.push(Zt.data.id),Zt.addHighlightArea();return this.container.setAttribute("aria-controls",Pt.map(Zt=>`${a.AnnotationPrefix}${Zt}`).join(",")),this.container}}class xt{constructor({container:Nt,color:Pt,elements:Zt,titleObj:gn,modificationDate:xn,contentsObj:bn,richText:Cn,parent:qn,rect:Wn,parentRect:Mn,open:rr}){cn(this,Dn);cn(this,on,null);cn(this,vn,Yt(this,Dn,pu).bind(this));cn(this,un,Yt(this,Dn,Vo).bind(this));cn(this,kn,Yt(this,Dn,Wo).bind(this));cn(this,jn,Yt(this,Dn,Ks).bind(this));cn(this,Rn,null);cn(this,nn,null);cn(this,rn,null);cn(this,pt,null);cn(this,Rt,null);cn(this,zt,null);cn(this,Kt,!1);cn(this,hn,null);cn(this,Sn,null);cn(this,En,null);cn(this,Qt,null);cn(this,In,!1);var Vn;dn(this,nn,Nt),dn(this,Qt,gn),dn(this,rn,bn),dn(this,En,Cn),dn(this,Rt,qn),dn(this,Rn,Pt),dn(this,Sn,Wn),dn(this,zt,Mn),dn(this,pt,Zt);const Kn=o.PDFDateString.toDateObject(xn);Kn&&dn(this,on,qn.l10n.get("annotation_date_string",{date:Kn.toLocaleDateString(),time:Kn.toLocaleTimeString()})),this.trigger=Zt.flatMap(tr=>tr.getElementsToTriggerPopup());for(const tr of this.trigger)tr.addEventListener("click",tt(this,jn)),tr.addEventListener("mouseenter",tt(this,kn)),tr.addEventListener("mouseleave",tt(this,un)),tr.classList.add("popupTriggerArea");for(const tr of Zt)(Vn=tr.container)==null||Vn.addEventListener("keydown",tt(this,vn));tt(this,nn).hidden=!0,rr&&Yt(this,Dn,Ks).call(this)}render(){if(tt(this,hn))return;const{page:{view:Nt},viewport:{rawDims:{pageWidth:Pt,pageHeight:Zt,pageX:gn,pageY:xn}}}=tt(this,Rt),bn=dn(this,hn,document.createElement("div"));if(bn.className="popup",tt(this,Rn)){const vr=bn.style.outlineColor=a.Util.makeHexColor(...tt(this,Rn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?bn.style.backgroundColor=`color-mix(in srgb, ${vr} 30%, white)`:bn.style.backgroundColor=a.Util.makeHexColor(...tt(this,Rn).map(Ir=>Math.floor(.7*(255-Ir)+Ir)))}const Cn=document.createElement("span");Cn.className="header";const qn=document.createElement("h1");if(Cn.append(qn),{dir:qn.dir,str:qn.textContent}=tt(this,Qt),bn.append(Cn),tt(this,on)){const vr=document.createElement("span");vr.classList.add("popupDate"),tt(this,on).then(Sr=>{vr.textContent=Sr}),Cn.append(vr)}const Wn=tt(this,rn),Mn=tt(this,En);if(Mn!=null&&Mn.str&&(!(Wn!=null&&Wn.str)||Wn.str===Mn.str))b.XfaLayer.render({xfaHtml:Mn.html,intent:"richText",div:bn}),bn.lastChild.classList.add("richText","popupContent");else{const vr=this._formatContents(Wn);bn.append(vr)}let rr=!!tt(this,zt),Kn=rr?tt(this,zt):tt(this,Sn);for(const vr of tt(this,pt))if(!Kn||a.Util.intersect(vr.data.rect,Kn)!==null){Kn=vr.data.rect,rr=!0;break}const Vn=a.Util.normalizeRect([Kn[0],Nt[3]-Kn[1]+Nt[1],Kn[2],Nt[3]-Kn[3]+Nt[1]]),sr=rr?Kn[2]-Kn[0]+5:0,lr=Vn[0]+sr,mr=Vn[1],{style:yr}=tt(this,nn);yr.left=`${100*(lr-gn)/Pt}%`,yr.top=`${100*(mr-xn)/Zt}%`,tt(this,nn).append(bn)}_formatContents({str:Nt,dir:Pt}){const Zt=document.createElement("p");Zt.classList.add("popupContent"),Zt.dir=Pt;const gn=Nt.split(/(?:\r\n?|\n)/);for(let xn=0,bn=gn.length;xn<bn;++xn){const Cn=gn[xn];Zt.append(document.createTextNode(Cn)),xn<bn-1&&Zt.append(document.createElement("br"))}return Zt}forceHide(){dn(this,In,this.isVisible),tt(this,In)&&(tt(this,nn).hidden=!0)}maybeShow(){tt(this,In)&&(dn(this,In,!1),tt(this,nn).hidden=!1)}get isVisible(){return tt(this,nn).hidden===!1}}on=new WeakMap,vn=new WeakMap,un=new WeakMap,kn=new WeakMap,jn=new WeakMap,Rn=new WeakMap,nn=new WeakMap,rn=new WeakMap,pt=new WeakMap,Rt=new WeakMap,zt=new WeakMap,Kt=new WeakMap,hn=new WeakMap,Sn=new WeakMap,En=new WeakMap,Qt=new WeakMap,In=new WeakMap,Dn=new WeakSet,pu=function(Nt){Nt.altKey||Nt.shiftKey||Nt.ctrlKey||Nt.metaKey||(Nt.key==="Enter"||Nt.key==="Escape"&&tt(this,Kt))&&Yt(this,Dn,Ks).call(this)},Ks=function(){dn(this,Kt,!tt(this,Kt)),tt(this,Kt)?(Yt(this,Dn,Wo).call(this),tt(this,nn).addEventListener("click",tt(this,jn)),tt(this,nn).addEventListener("keydown",tt(this,vn))):(Yt(this,Dn,Vo).call(this),tt(this,nn).removeEventListener("click",tt(this,jn)),tt(this,nn).removeEventListener("keydown",tt(this,vn)))},Wo=function(){tt(this,hn)||this.render(),this.isVisible?tt(this,Kt)&&tt(this,nn).classList.add("focused"):(tt(this,nn).hidden=!1,tt(this,nn).style.zIndex=parseInt(tt(this,nn).style.zIndex)+1e3)},Vo=function(){tt(this,nn).classList.remove("focused"),!(tt(this,Kt)||!this.isVisible)&&(tt(this,nn).hidden=!0,tt(this,nn).style.zIndex=parseInt(tt(this,nn).style.zIndex)-1e3)};class Ct extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Nt.data.textContent,this.textPosition=Nt.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Nt=document.createElement("div");Nt.classList.add("annotationTextContent"),Nt.setAttribute("role","comment");for(const Pt of this.textContent){const Zt=document.createElement("span");Zt.textContent=Pt,Nt.append(Zt)}this.container.append(Nt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=Ct;class ht extends ot{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0});cn(this,Yn,null)}render(){this.container.classList.add("lineAnnotation");const Pt=this.data,{width:Zt,height:gn}=rt(Pt.rect),xn=this.svgFactory.create(Zt,gn,!0),bn=dn(this,Yn,this.svgFactory.createElement("svg:line"));return bn.setAttribute("x1",Pt.rect[2]-Pt.lineCoordinates[0]),bn.setAttribute("y1",Pt.rect[3]-Pt.lineCoordinates[1]),bn.setAttribute("x2",Pt.rect[2]-Pt.lineCoordinates[2]),bn.setAttribute("y2",Pt.rect[3]-Pt.lineCoordinates[3]),bn.setAttribute("stroke-width",Pt.borderStyle.width||1),bn.setAttribute("stroke","transparent"),bn.setAttribute("fill","transparent"),xn.append(bn),this.container.append(xn),!Pt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,Yn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yn=new WeakMap;class wt extends ot{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0});cn(this,ar,null)}render(){this.container.classList.add("squareAnnotation");const Pt=this.data,{width:Zt,height:gn}=rt(Pt.rect),xn=this.svgFactory.create(Zt,gn,!0),bn=Pt.borderStyle.width,Cn=dn(this,ar,this.svgFactory.createElement("svg:rect"));return Cn.setAttribute("x",bn/2),Cn.setAttribute("y",bn/2),Cn.setAttribute("width",Zt-bn),Cn.setAttribute("height",gn-bn),Cn.setAttribute("stroke-width",bn||1),Cn.setAttribute("stroke","transparent"),Cn.setAttribute("fill","transparent"),xn.append(Cn),this.container.append(xn),!Pt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,ar)}addHighlightArea(){this.container.classList.add("highlightArea")}}ar=new WeakMap;class jt extends ot{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0});cn(this,dr,null)}render(){this.container.classList.add("circleAnnotation");const Pt=this.data,{width:Zt,height:gn}=rt(Pt.rect),xn=this.svgFactory.create(Zt,gn,!0),bn=Pt.borderStyle.width,Cn=dn(this,dr,this.svgFactory.createElement("svg:ellipse"));return Cn.setAttribute("cx",Zt/2),Cn.setAttribute("cy",gn/2),Cn.setAttribute("rx",Zt/2-bn/2),Cn.setAttribute("ry",gn/2-bn/2),Cn.setAttribute("stroke-width",bn||1),Cn.setAttribute("stroke","transparent"),Cn.setAttribute("fill","transparent"),xn.append(Cn),this.container.append(xn),!Pt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,dr)}addHighlightArea(){this.container.classList.add("highlightArea")}}dr=new WeakMap;class Xt extends ot{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0});cn(this,An,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Pt=this.data,{width:Zt,height:gn}=rt(Pt.rect),xn=this.svgFactory.create(Zt,gn,!0);let bn=[];for(const qn of Pt.vertices){const Wn=qn.x-Pt.rect[0],Mn=Pt.rect[3]-qn.y;bn.push(Wn+","+Mn)}bn=bn.join(" ");const Cn=dn(this,An,this.svgFactory.createElement(this.svgElementName));return Cn.setAttribute("points",bn),Cn.setAttribute("stroke-width",Pt.borderStyle.width||1),Cn.setAttribute("stroke","transparent"),Cn.setAttribute("fill","transparent"),xn.append(Cn),this.container.append(xn),!Pt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,An)}addHighlightArea(){this.container.classList.add("highlightArea")}}An=new WeakMap;class Bt extends Xt{constructor(Nt){super(Nt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Wt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ut extends ot{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0});cn(this,Vt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Pt=this.data,{width:Zt,height:gn}=rt(Pt.rect),xn=this.svgFactory.create(Zt,gn,!0);for(const bn of Pt.inkLists){let Cn=[];for(const Wn of bn){const Mn=Wn.x-Pt.rect[0],rr=Pt.rect[3]-Wn.y;Cn.push(`${Mn},${rr}`)}Cn=Cn.join(" ");const qn=this.svgFactory.createElement(this.svgElementName);tt(this,Vt).push(qn),qn.setAttribute("points",Cn),qn.setAttribute("stroke-width",Pt.borderStyle.width||1),qn.setAttribute("stroke","transparent"),qn.setAttribute("fill","transparent"),!Pt.popupRef&&this.hasPopupData&&this._createPopup(),xn.append(qn)}return this.container.append(xn),this.container}getElementsToTriggerPopup(){return tt(this,Vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vt=new WeakMap,s.InkAnnotationElement=Ut;class $t extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class kt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ft extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Gt extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class At extends ot{constructor(Nt){super(Nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=At;class it extends ot{constructor(Pt){var xn;super(Pt,{isRenderable:!0});cn(this,Ln);cn(this,ln,null);const{filename:Zt,content:gn}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(Zt,!0),this.content=gn,(xn=this.linkService.eventBus)==null||xn.dispatch("fileattachmentannotation",{source:this,filename:Zt,content:gn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Pt,data:Zt}=this;let gn;Zt.hasAppearance||Zt.fillAlpha===0?gn=document.createElement("div"):(gn=document.createElement("img"),gn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Zt.name)?"paperclip":"pushpin"}.svg`,Zt.fillAlpha&&Zt.fillAlpha<1&&(gn.style=`filter: opacity(${Math.round(Zt.fillAlpha*100)}%);`)),gn.addEventListener("dblclick",Yt(this,Ln,Ho).bind(this)),dn(this,ln,gn);const{isMac:xn}=a.FeatureTest.platform;return Pt.addEventListener("keydown",bn=>{bn.key==="Enter"&&(xn?bn.metaKey:bn.ctrlKey)&&Yt(this,Ln,Ho).call(this)}),!Zt.popupRef&&this.hasPopupData?this._createPopup():gn.classList.add("popupTriggerArea"),Pt.append(gn),Pt}getElementsToTriggerPopup(){return tt(this,ln)}addHighlightArea(){this.container.classList.add("highlightArea")}}ln=new WeakMap,Ln=new WeakSet,Ho=function(){var Pt;(Pt=this.downloadManager)==null||Pt.openOrDownloadData(this.container,this.content,this.filename)};class dt{constructor({div:Nt,accessibilityManager:Pt,annotationCanvasMap:Zt,l10n:gn,page:xn,viewport:bn}){cn(this,Fn);cn(this,Pn,null);cn(this,Ot,null);cn(this,_n,new Map);this.div=Nt,dn(this,Pn,Pt),dn(this,Ot,Zt),this.l10n=gn,this.page=xn,this.viewport=bn,this.zIndex=0,this.l10n||(this.l10n=j.NullL10n)}async render(Nt){const{annotations:Pt}=Nt,Zt=this.div;(0,o.setLayerDimensions)(Zt,this.viewport);const gn=new Map,xn={data:null,layer:Zt,linkService:Nt.linkService,downloadManager:Nt.downloadManager,imageResourcesPath:Nt.imageResourcesPath||"",renderForms:Nt.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:Nt.annotationStorage||new c.AnnotationStorage,enableScripting:Nt.enableScripting===!0,hasJSActions:Nt.hasJSActions,fieldObjects:Nt.fieldObjects,parent:this,elements:null};for(const bn of Pt){if(bn.noHTML)continue;const Cn=bn.annotationType===a.AnnotationType.POPUP;if(Cn){const Mn=gn.get(bn.id);if(!Mn)continue;xn.elements=Mn}else{const{width:Mn,height:rr}=rt(bn.rect);if(Mn<=0||rr<=0)continue}xn.data=bn;const qn=ut.create(xn);if(!qn.isRenderable)continue;if(!Cn&&bn.popupRef){const Mn=gn.get(bn.popupRef);Mn?Mn.push(qn):gn.set(bn.popupRef,[qn])}qn.annotationEditorType>0&&tt(this,_n).set(qn.data.id,qn);const Wn=qn.render();bn.hidden&&(Wn.style.visibility="hidden"),Yt(this,Fn,mu).call(this,Wn,bn.id)}Yt(this,Fn,Zo).call(this),await this.l10n.translate(Zt)}update({viewport:Nt}){const Pt=this.div;this.viewport=Nt,(0,o.setLayerDimensions)(Pt,{rotation:Nt.rotation}),Yt(this,Fn,Zo).call(this),Pt.hidden=!1}getEditableAnnotations(){return Array.from(tt(this,_n).values())}getEditableAnnotation(Nt){return tt(this,_n).get(Nt)}}Pn=new WeakMap,Ot=new WeakMap,_n=new WeakMap,Fn=new WeakSet,mu=function(Nt,Pt){var gn;const Zt=Nt.firstChild||Nt;Zt.id=`${a.AnnotationPrefix}${Pt}`,this.div.append(Nt),(gn=tt(this,Pn))==null||gn.moveElementInDOM(this.div,Nt,Zt,!1)},Zo=function(){if(!tt(this,Ot))return;const Nt=this.div;for(const[Pt,Zt]of tt(this,Ot)){const gn=Nt.querySelector(`[data-annotation-id="${Pt}"]`);if(!gn)continue;const{firstChild:xn}=gn;xn?xn.nodeName==="CANVAS"?xn.replaceWith(Zt):xn.before(Zt):gn.append(Zt)}tt(this,Ot).clear()},s.AnnotationLayer=dt},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function i(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function a(c){return Math.max(0,Math.min(255,255*c))}class o{static CMYK_G([h,j,b,_]){return["G",1-Math.min(1,.3*h+.59*b+.11*j+_)]}static G_CMYK([h]){return["CMYK",0,0,0,1-h]}static G_RGB([h]){return["RGB",h,h,h]}static G_rgb([h]){return h=a(h),[h,h,h]}static G_HTML([h]){const j=i(h);return`#${j}${j}${j}`}static RGB_G([h,j,b]){return["G",.3*h+.59*j+.11*b]}static RGB_rgb(h){return h.map(a)}static RGB_HTML(h){return`#${h.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([h,j,b,_]){return["RGB",1-Math.min(1,h+_),1-Math.min(1,b+_),1-Math.min(1,j+_)]}static CMYK_rgb([h,j,b,_]){return[a(1-Math.min(1,h+_)),a(1-Math.min(1,b+_)),a(1-Math.min(1,j+_))]}static CMYK_HTML(h){const j=this.CMYK_RGB(h).slice(1);return this.RGB_HTML(j)}static RGB_CMYK([h,j,b]){const _=1-h,$=1-j,at=1-b,rt=Math.min(_,$,at);return["CMYK",_,$,at,rt]}}s.ColorConverters=o},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=a;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function a(h,j){switch(h){case"find_match_count":h=`find_match_count[${j.total===1?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${j.limit===1?"one":"other"}]`;break}return i[h]||""}function o(h,j){return j?h.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(b,_)=>_ in j?j[_]:"{{"+_+"}}"):h}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(h,j=null,b=a(h,j)){return o(b,j)},async translate(h){}};s.NullL10n=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var a=i(25);class o{static setupStorage(h,j,b,_,$){const at=_.getValue(j,{value:null});switch(b.name){case"textarea":if(at.value!==null&&(h.textContent=at.value),$==="print")break;h.addEventListener("input",rt=>{_.setValue(j,{value:rt.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(at.value===b.attributes.xfaOn?h.setAttribute("checked",!0):at.value===b.attributes.xfaOff&&h.removeAttribute("checked"),$==="print")break;h.addEventListener("change",rt=>{_.setValue(j,{value:rt.target.checked?rt.target.getAttribute("xfaOn"):rt.target.getAttribute("xfaOff")})})}else{if(at.value!==null&&h.setAttribute("value",at.value),$==="print")break;h.addEventListener("input",rt=>{_.setValue(j,{value:rt.target.value})})}break;case"select":if(at.value!==null){h.setAttribute("value",at.value);for(const rt of b.children)rt.attributes.value===at.value?rt.attributes.selected=!0:rt.attributes.hasOwnProperty("selected")&&delete rt.attributes.selected}h.addEventListener("input",rt=>{const ut=rt.target.options,ot=ut.selectedIndex===-1?"":ut[ut.selectedIndex].value;_.setValue(j,{value:ot})});break}}static setAttributes({html:h,element:j,storage:b=null,intent:_,linkService:$}){const{attributes:at}=j,rt=h instanceof HTMLAnchorElement;at.type==="radio"&&(at.name=`${at.name}-${_}`);for(const[ut,ot]of Object.entries(at))if(ot!=null)switch(ut){case"class":ot.length&&h.setAttribute(ut,ot.join(" "));break;case"dataId":break;case"id":h.setAttribute("data-element-id",ot);break;case"style":Object.assign(h.style,ot);break;case"textContent":h.textContent=ot;break;default:(!rt||ut!=="href"&&ut!=="newWindow")&&h.setAttribute(ut,ot)}rt&&$.addLinkAttributes(h,at.href,at.newWindow),b&&at.dataId&&this.setupStorage(h,at.dataId,j,b)}static render(h){var vt;const j=h.annotationStorage,b=h.linkService,_=h.xfaHtml,$=h.intent||"display",at=document.createElement(_.name);_.attributes&&this.setAttributes({html:at,element:_,intent:$,linkService:b});const rt=[[_,-1,at]],ut=h.div;if(ut.append(at),h.viewport){const bt=`matrix(${h.viewport.transform.join(",")})`;ut.style.transform=bt}$!=="richText"&&ut.setAttribute("class","xfaLayer xfaFont");const ot=[];for(;rt.length>0;){const[bt,et,nt]=rt.at(-1);if(et+1===bt.children.length){rt.pop();continue}const st=bt.children[++rt.at(-1)[1]];if(st===null)continue;const{name:gt}=st;if(gt==="#text"){const yt=document.createTextNode(st.value);ot.push(yt),nt.append(yt);continue}const lt=(vt=st==null?void 0:st.attributes)!=null&&vt.xmlns?document.createElementNS(st.attributes.xmlns,gt):document.createElement(gt);if(nt.append(lt),st.attributes&&this.setAttributes({html:lt,element:st,storage:j,intent:$,linkService:b}),st.children&&st.children.length>0)rt.push([st,-1,lt]);else if(st.value){const yt=document.createTextNode(st.value);a.XfaText.shouldBuildText(gt)&&ot.push(yt),lt.append(yt)}}for(const bt of ut.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))bt.setAttribute("readOnly",!0);return{textDivs:ot}}static update(h){const j=`matrix(${h.viewport.transform.join(",")})`;h.div.style.transform=j,h.div.hidden=!1}}s.XfaLayer=o},(e,s,i)=>{var _,$,at,rt,ut,ot,vt,bt,et,nt,st,gt,lt,yt,ct,gu,xu,yu,vu,Ko,bu,Go,Eu,_u,wu,Su,ku,zr,qo,Gs,qs,rs,Xo,Xs,Dt,Au,Yo,Ru,Cu,Qo,Ys,ss;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var a=i(1),o=i(4),c=i(29),h=i(6),j=i(5);const Rn=class Rn extends o.AnnotationEditor{constructor(pt){super({...pt,name:"inkEditor"});cn(this,ct);cn(this,_,0);cn(this,$,0);cn(this,at,this.canvasPointermove.bind(this));cn(this,rt,this.canvasPointerleave.bind(this));cn(this,ut,this.canvasPointerup.bind(this));cn(this,ot,this.canvasPointerdown.bind(this));cn(this,vt,new Path2D);cn(this,bt,!1);cn(this,et,!1);cn(this,nt,!1);cn(this,st,null);cn(this,gt,0);cn(this,lt,0);cn(this,yt,null);this.color=pt.color||null,this.thickness=pt.thickness||null,this.opacity=pt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(pt){o.AnnotationEditor.initialize(pt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(pt,Rt){switch(pt){case a.AnnotationEditorParamsType.INK_THICKNESS:Rn._defaultThickness=Rt;break;case a.AnnotationEditorParamsType.INK_COLOR:Rn._defaultColor=Rt;break;case a.AnnotationEditorParamsType.INK_OPACITY:Rn._defaultOpacity=Rt/100;break}}updateParams(pt,Rt){switch(pt){case a.AnnotationEditorParamsType.INK_THICKNESS:Yt(this,ct,gu).call(this,Rt);break;case a.AnnotationEditorParamsType.INK_COLOR:Yt(this,ct,xu).call(this,Rt);break;case a.AnnotationEditorParamsType.INK_OPACITY:Yt(this,ct,yu).call(this,Rt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,Rn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,Rn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(Rn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Rn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||Rn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Rn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Yt(this,ct,Gs).call(this),Yt(this,ct,qs).call(this)),this.isAttachedToDOM||(this.parent.add(this),Yt(this,ct,rs).call(this)),Yt(this,ct,ss).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,tt(this,st).disconnect(),dn(this,st,null),super.remove())}setParent(pt){!this.parent&&pt?this._uiManager.removeShouldRescale(this):this.parent&&pt===null&&this._uiManager.addShouldRescale(this),super.setParent(pt)}onScaleChanging(){const[pt,Rt]=this.parentDimensions,zt=this.width*pt,Kt=this.height*Rt;this.setDimensions(zt,Kt)}enableEditMode(){tt(this,bt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",tt(this,ot)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",tt(this,ot)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){tt(this,bt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),dn(this,bt,!0),this.div.classList.add("disabled"),Yt(this,ct,ss).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(pt){this._focusEventsAllowed&&(super.focusin(pt),this.enableEditMode())}canvasPointerdown(pt){pt.button!==0||!this.isInEditMode()||tt(this,bt)||(this.setInForeground(),pt.preventDefault(),pt.type!=="mouse"&&this.div.focus(),Yt(this,ct,bu).call(this,pt.offsetX,pt.offsetY))}canvasPointermove(pt){pt.preventDefault(),Yt(this,ct,Go).call(this,pt.offsetX,pt.offsetY)}canvasPointerup(pt){pt.preventDefault(),Yt(this,ct,qo).call(this,pt)}canvasPointerleave(pt){Yt(this,ct,qo).call(this,pt)}get isResizable(){return!this.isEmpty()&&tt(this,bt)}render(){if(this.div)return this.div;let pt,Rt;this.width&&(pt=this.x,Rt=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(En=>{var Qt;return(Qt=this.div)==null?void 0:Qt.setAttribute("aria-label",En)});const[zt,Kt,hn,Sn]=Yt(this,ct,vu).call(this);if(this.setAt(zt,Kt,0,0),this.setDims(hn,Sn),Yt(this,ct,Gs).call(this),this.width){const[En,Qt]=this.parentDimensions;this.setAspectRatio(this.width*En,this.height*Qt),this.setAt(pt*En,Rt*Qt,this.width*En,this.height*Qt),dn(this,nt,!0),Yt(this,ct,rs).call(this),this.setDims(this.width*En,this.height*Qt),Yt(this,ct,zr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Yt(this,ct,qs).call(this),this.div}setDimensions(pt,Rt){const zt=Math.round(pt),Kt=Math.round(Rt);if(tt(this,gt)===zt&&tt(this,lt)===Kt)return;dn(this,gt,zt),dn(this,lt,Kt),this.canvas.style.visibility="hidden";const[hn,Sn]=this.parentDimensions;this.width=pt/hn,this.height=Rt/Sn,this.fixAndSetPosition(),tt(this,bt)&&Yt(this,ct,Xo).call(this,pt,Rt),Yt(this,ct,rs).call(this),Yt(this,ct,zr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(pt,Rt,zt){var Yn,ar,dr;if(pt instanceof c.InkAnnotationElement)return null;const Kt=super.deserialize(pt,Rt,zt);Kt.thickness=pt.thickness,Kt.color=a.Util.makeHexColor(...pt.color),Kt.opacity=pt.opacity;const[hn,Sn]=Kt.pageDimensions,En=Kt.width*hn,Qt=Kt.height*Sn,In=Kt.parentScale,Dn=pt.thickness/2;dn(Kt,bt,!0),dn(Kt,gt,Math.round(En)),dn(Kt,lt,Math.round(Qt));const{paths:nr,rect:Jn,rotation:or}=pt;for(let{bezier:An}of nr){An=Yt(Yn=Rn,Dt,Ru).call(Yn,An,Jn,or);const Vt=[];Kt.paths.push(Vt);let ln=In*(An[0]-Dn),Ln=In*(An[1]-Dn);for(let Pn=2,Ot=An.length;Pn<Ot;Pn+=6){const _n=In*(An[Pn]-Dn),Fn=In*(An[Pn+1]-Dn),Zn=In*(An[Pn+2]-Dn),Qn=In*(An[Pn+3]-Dn),$n=In*(An[Pn+4]-Dn),Nt=In*(An[Pn+5]-Dn);Vt.push([[ln,Ln],[_n,Fn],[Zn,Qn],[$n,Nt]]),ln=$n,Ln=Nt}const ir=Yt(this,Dt,Au).call(this,Vt);Kt.bezierPath2D.push(ir)}const Bn=Yt(ar=Kt,ct,Qo).call(ar);return dn(Kt,$,Math.max(o.AnnotationEditor.MIN_SIZE,Bn[2]-Bn[0])),dn(Kt,_,Math.max(o.AnnotationEditor.MIN_SIZE,Bn[3]-Bn[1])),Yt(dr=Kt,ct,Xo).call(dr,En,Qt),Kt}serialize(){if(this.isEmpty())return null;const pt=this.getRect(0,0),Rt=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:Rt,thickness:this.thickness,opacity:this.opacity,paths:Yt(this,ct,Cu).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,pt),pageIndex:this.pageIndex,rect:pt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};_=new WeakMap,$=new WeakMap,at=new WeakMap,rt=new WeakMap,ut=new WeakMap,ot=new WeakMap,vt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,gt=new WeakMap,lt=new WeakMap,yt=new WeakMap,ct=new WeakSet,gu=function(pt){const Rt=this.thickness;this.addCommands({cmd:()=>{this.thickness=pt,Yt(this,ct,ss).call(this)},undo:()=>{this.thickness=Rt,Yt(this,ct,ss).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},xu=function(pt){const Rt=this.color;this.addCommands({cmd:()=>{this.color=pt,Yt(this,ct,zr).call(this)},undo:()=>{this.color=Rt,Yt(this,ct,zr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yu=function(pt){pt/=100;const Rt=this.opacity;this.addCommands({cmd:()=>{this.opacity=pt,Yt(this,ct,zr).call(this)},undo:()=>{this.opacity=Rt,Yt(this,ct,zr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},vu=function(){const{parentRotation:pt,parentDimensions:[Rt,zt]}=this;switch(pt){case 90:return[0,zt,zt,Rt];case 180:return[Rt,zt,Rt,zt];case 270:return[Rt,0,zt,Rt];default:return[0,0,Rt,zt]}},Ko=function(){const{ctx:pt,color:Rt,opacity:zt,thickness:Kt,parentScale:hn,scaleFactor:Sn}=this;pt.lineWidth=Kt*hn/Sn,pt.lineCap="round",pt.lineJoin="round",pt.miterLimit=10,pt.strokeStyle=`${Rt}${(0,j.opacityToHex)(zt)}`},bu=function(pt,Rt){this.canvas.addEventListener("contextmenu",h.noContextMenu),this.canvas.addEventListener("pointerleave",tt(this,rt)),this.canvas.addEventListener("pointermove",tt(this,at)),this.canvas.addEventListener("pointerup",tt(this,ut)),this.canvas.removeEventListener("pointerdown",tt(this,ot)),this.isEditing=!0,tt(this,nt)||(dn(this,nt,!0),Yt(this,ct,rs).call(this),this.thickness||(this.thickness=Rn._defaultThickness),this.color||(this.color=Rn._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Rn._defaultOpacity)),this.currentPath.push([pt,Rt]),dn(this,et,!1),Yt(this,ct,Ko).call(this),dn(this,yt,()=>{Yt(this,ct,wu).call(this),tt(this,yt)&&window.requestAnimationFrame(tt(this,yt))}),window.requestAnimationFrame(tt(this,yt))},Go=function(pt,Rt){const[zt,Kt]=this.currentPath.at(-1);if(this.currentPath.length>1&&pt===zt&&Rt===Kt)return;const hn=this.currentPath;let Sn=tt(this,vt);if(hn.push([pt,Rt]),dn(this,et,!0),hn.length<=2){Sn.moveTo(...hn[0]),Sn.lineTo(pt,Rt);return}hn.length===3&&(dn(this,vt,Sn=new Path2D),Sn.moveTo(...hn[0])),Yt(this,ct,Su).call(this,Sn,...hn.at(-3),...hn.at(-2),pt,Rt)},Eu=function(){if(this.currentPath.length===0)return;const pt=this.currentPath.at(-1);tt(this,vt).lineTo(...pt)},_u=function(pt,Rt){dn(this,yt,null),pt=Math.min(Math.max(pt,0),this.canvas.width),Rt=Math.min(Math.max(Rt,0),this.canvas.height),Yt(this,ct,Go).call(this,pt,Rt),Yt(this,ct,Eu).call(this);let zt;if(this.currentPath.length!==1)zt=Yt(this,ct,ku).call(this);else{const Qt=[pt,Rt];zt=[[Qt,Qt.slice(),Qt.slice(),Qt]]}const Kt=tt(this,vt),hn=this.currentPath;this.currentPath=[],dn(this,vt,new Path2D);const Sn=()=>{this.allRawPaths.push(hn),this.paths.push(zt),this.bezierPath2D.push(Kt),this.rebuild()},En=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Yt(this,ct,Gs).call(this),Yt(this,ct,qs).call(this)),Yt(this,ct,ss).call(this))};this.addCommands({cmd:Sn,undo:En,mustExec:!0})},wu=function(){if(!tt(this,et))return;dn(this,et,!1);const pt=Math.ceil(this.thickness*this.parentScale),Rt=this.currentPath.slice(-3),zt=Rt.map(Sn=>Sn[0]),Kt=Rt.map(Sn=>Sn[1]);Math.min(...zt)-pt,Math.max(...zt)+pt,Math.min(...Kt)-pt,Math.max(...Kt)+pt;const{ctx:hn}=this;hn.save(),hn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Sn of this.bezierPath2D)hn.stroke(Sn);hn.stroke(tt(this,vt)),hn.restore()},Su=function(pt,Rt,zt,Kt,hn,Sn,En){const Qt=(Rt+Kt)/2,In=(zt+hn)/2,Dn=(Kt+Sn)/2,nr=(hn+En)/2;pt.bezierCurveTo(Qt+2*(Kt-Qt)/3,In+2*(hn-In)/3,Dn+2*(Kt-Dn)/3,nr+2*(hn-nr)/3,Dn,nr)},ku=function(){const pt=this.currentPath;if(pt.length<=2)return[[pt[0],pt[0],pt.at(-1),pt.at(-1)]];const Rt=[];let zt,[Kt,hn]=pt[0];for(zt=1;zt<pt.length-2;zt++){const[Jn,or]=pt[zt],[Bn,Yn]=pt[zt+1],ar=(Jn+Bn)/2,dr=(or+Yn)/2,An=[Kt+2*(Jn-Kt)/3,hn+2*(or-hn)/3],Vt=[ar+2*(Jn-ar)/3,dr+2*(or-dr)/3];Rt.push([[Kt,hn],An,Vt,[ar,dr]]),[Kt,hn]=[ar,dr]}const[Sn,En]=pt[zt],[Qt,In]=pt[zt+1],Dn=[Kt+2*(Sn-Kt)/3,hn+2*(En-hn)/3],nr=[Qt+2*(Sn-Qt)/3,In+2*(En-In)/3];return Rt.push([[Kt,hn],Dn,nr,[Qt,In]]),Rt},zr=function(){if(this.isEmpty()){Yt(this,ct,Xs).call(this);return}Yt(this,ct,Ko).call(this);const{canvas:pt,ctx:Rt}=this;Rt.setTransform(1,0,0,1,0,0),Rt.clearRect(0,0,pt.width,pt.height),Yt(this,ct,Xs).call(this);for(const zt of this.bezierPath2D)Rt.stroke(zt)},qo=function(pt){this.canvas.removeEventListener("pointerleave",tt(this,rt)),this.canvas.removeEventListener("pointermove",tt(this,at)),this.canvas.removeEventListener("pointerup",tt(this,ut)),this.canvas.addEventListener("pointerdown",tt(this,ot)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",h.noContextMenu)},10),Yt(this,ct,_u).call(this,pt.offsetX,pt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Gs=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(pt=>{var Rt;return(Rt=this.canvas)==null?void 0:Rt.setAttribute("aria-label",pt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},qs=function(){dn(this,st,new ResizeObserver(pt=>{const Rt=pt[0].contentRect;Rt.width&&Rt.height&&this.setDimensions(Rt.width,Rt.height)})),tt(this,st).observe(this.div)},rs=function(){if(!tt(this,nt))return;const[pt,Rt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*pt),this.canvas.height=Math.ceil(this.height*Rt),Yt(this,ct,Xs).call(this)},Xo=function(pt,Rt){const zt=Yt(this,ct,Ys).call(this),Kt=(pt-zt)/tt(this,$),hn=(Rt-zt)/tt(this,_);this.scaleFactor=Math.min(Kt,hn)},Xs=function(){const pt=Yt(this,ct,Ys).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+pt,this.translationY*this.scaleFactor+pt)},Dt=new WeakSet,Au=function(pt){const Rt=new Path2D;for(let zt=0,Kt=pt.length;zt<Kt;zt++){const[hn,Sn,En,Qt]=pt[zt];zt===0&&Rt.moveTo(...hn),Rt.bezierCurveTo(Sn[0],Sn[1],En[0],En[1],Qt[0],Qt[1])}return Rt},Yo=function(pt,Rt,zt){const[Kt,hn,Sn,En]=Rt;switch(zt){case 0:for(let Qt=0,In=pt.length;Qt<In;Qt+=2)pt[Qt]+=Kt,pt[Qt+1]=En-pt[Qt+1];break;case 90:for(let Qt=0,In=pt.length;Qt<In;Qt+=2){const Dn=pt[Qt];pt[Qt]=pt[Qt+1]+Kt,pt[Qt+1]=Dn+hn}break;case 180:for(let Qt=0,In=pt.length;Qt<In;Qt+=2)pt[Qt]=Sn-pt[Qt],pt[Qt+1]+=hn;break;case 270:for(let Qt=0,In=pt.length;Qt<In;Qt+=2){const Dn=pt[Qt];pt[Qt]=Sn-pt[Qt+1],pt[Qt+1]=En-Dn}break;default:throw new Error("Invalid rotation")}return pt},Ru=function(pt,Rt,zt){const[Kt,hn,Sn,En]=Rt;switch(zt){case 0:for(let Qt=0,In=pt.length;Qt<In;Qt+=2)pt[Qt]-=Kt,pt[Qt+1]=En-pt[Qt+1];break;case 90:for(let Qt=0,In=pt.length;Qt<In;Qt+=2){const Dn=pt[Qt];pt[Qt]=pt[Qt+1]-hn,pt[Qt+1]=Dn-Kt}break;case 180:for(let Qt=0,In=pt.length;Qt<In;Qt+=2)pt[Qt]=Sn-pt[Qt],pt[Qt+1]-=hn;break;case 270:for(let Qt=0,In=pt.length;Qt<In;Qt+=2){const Dn=pt[Qt];pt[Qt]=En-pt[Qt+1],pt[Qt+1]=Sn-Dn}break;default:throw new Error("Invalid rotation")}return pt},Cu=function(pt,Rt,zt,Kt){var In,Dn;const hn=[],Sn=this.thickness/2,En=pt*Rt+Sn,Qt=pt*zt+Sn;for(const nr of this.paths){const Jn=[],or=[];for(let Bn=0,Yn=nr.length;Bn<Yn;Bn++){const[ar,dr,An,Vt]=nr[Bn],ln=pt*ar[0]+En,Ln=pt*ar[1]+Qt,ir=pt*dr[0]+En,Pn=pt*dr[1]+Qt,Ot=pt*An[0]+En,_n=pt*An[1]+Qt,Fn=pt*Vt[0]+En,Zn=pt*Vt[1]+Qt;Bn===0&&(Jn.push(ln,Ln),or.push(ln,Ln)),Jn.push(ir,Pn,Ot,_n,Fn,Zn),or.push(ir,Pn),Bn===Yn-1&&or.push(Fn,Zn)}hn.push({bezier:Yt(In=Rn,Dt,Yo).call(In,Jn,Kt,this.rotation),points:Yt(Dn=Rn,Dt,Yo).call(Dn,or,Kt,this.rotation)})}return hn},Qo=function(){let pt=1/0,Rt=-1/0,zt=1/0,Kt=-1/0;for(const hn of this.paths)for(const[Sn,En,Qt,In]of hn){const Dn=a.Util.bezierBoundingBox(...Sn,...En,...Qt,...In);pt=Math.min(pt,Dn[0]),zt=Math.min(zt,Dn[1]),Rt=Math.max(Rt,Dn[2]),Kt=Math.max(Kt,Dn[3])}return[pt,zt,Rt,Kt]},Ys=function(){return tt(this,bt)?Math.ceil(this.thickness*this.parentScale):0},ss=function(pt=!1){if(this.isEmpty())return;if(!tt(this,bt)){Yt(this,ct,zr).call(this);return}const Rt=Yt(this,ct,Qo).call(this),zt=Yt(this,ct,Ys).call(this);dn(this,$,Math.max(o.AnnotationEditor.MIN_SIZE,Rt[2]-Rt[0])),dn(this,_,Math.max(o.AnnotationEditor.MIN_SIZE,Rt[3]-Rt[1]));const Kt=Math.ceil(zt+tt(this,$)*this.scaleFactor),hn=Math.ceil(zt+tt(this,_)*this.scaleFactor),[Sn,En]=this.parentDimensions;this.width=Kt/Sn,this.height=hn/En,this.setAspectRatio(Kt,hn);const Qt=this.translationX,In=this.translationY;this.translationX=-Rt[0],this.translationY=-Rt[1],Yt(this,ct,rs).call(this),Yt(this,ct,zr).call(this),dn(this,gt,Kt),dn(this,lt,hn),this.setDims(Kt,hn);const Dn=pt?zt/this.scaleFactor/2:0;this.translate(Qt-this.translationX-Dn,In-this.translationY-Dn)},cn(Rn,Dt),xr(Rn,"_defaultColor",null),xr(Rn,"_defaultOpacity",1),xr(Rn,"_defaultThickness",1),xr(Rn,"_type","ink");let b=Rn;s.InkEditor=b},(e,s,i)=>{var b,_,$,at,rt,ut,ot,vt,bt,et,nt,bs,Es,Qs,Jo,ju,Tu,xl,Js,Pu;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var a=i(1),o=i(4),c=i(6),h=i(29);const wt=class wt extends o.AnnotationEditor{constructor(Bt){super({...Bt,name:"stampEditor"});cn(this,nt);cn(this,b,null);cn(this,_,null);cn(this,$,null);cn(this,at,null);cn(this,rt,null);cn(this,ut,null);cn(this,ot,null);cn(this,vt,null);cn(this,bt,!1);cn(this,et,!1);dn(this,at,Bt.bitmapUrl),dn(this,rt,Bt.bitmapFile)}static initialize(Bt){o.AnnotationEditor.initialize(Bt)}static get supportedTypes(){const Bt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",Bt.map(Wt=>`image/${Wt}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Bt){return this.supportedTypes.includes(Bt)}static paste(Bt,Wt){Wt.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:Bt.getAsFile()})}remove(){var Bt,Wt;tt(this,_)&&(dn(this,b,null),this._uiManager.imageManager.deleteId(tt(this,_)),(Bt=tt(this,ut))==null||Bt.remove(),dn(this,ut,null),(Wt=tt(this,ot))==null||Wt.disconnect(),dn(this,ot,null)),super.remove()}rebuild(){if(!this.parent){tt(this,_)&&Yt(this,nt,Qs).call(this);return}super.rebuild(),this.div!==null&&(tt(this,_)&&Yt(this,nt,Qs).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(tt(this,$)||tt(this,b)||tt(this,at)||tt(this,rt))}get isResizable(){return!0}render(){if(this.div)return this.div;let Bt,Wt;if(this.width&&(Bt=this.x,Wt=this.y),super.render(),this.div.hidden=!0,tt(this,b)?Yt(this,nt,Jo).call(this):Yt(this,nt,Qs).call(this),this.width){const[Ut,$t]=this.parentDimensions;this.setAt(Bt*Ut,Wt*$t,this.width*Ut,this.height*$t)}return this.div}static deserialize(Bt,Wt,Ut){if(Bt instanceof h.StampAnnotationElement)return null;const $t=super.deserialize(Bt,Wt,Ut),{rect:kt,bitmapUrl:Ft,bitmapId:Gt,isSvg:At,accessibilityData:it}=Bt;Gt&&Ut.imageManager.isValidId(Gt)?dn($t,_,Gt):dn($t,at,Ft),dn($t,bt,At);const[dt,_t]=$t.pageDimensions;return $t.width=(kt[2]-kt[0])/dt,$t.height=(kt[3]-kt[1])/_t,it&&($t.altTextData=it),$t}serialize(Bt=!1,Wt=null){if(this.isEmpty())return null;const Ut={annotationType:a.AnnotationEditorType.STAMP,bitmapId:tt(this,_),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:tt(this,bt),structTreeParentId:this._structTreeParentId};if(Bt)return Ut.bitmapUrl=Yt(this,nt,Js).call(this,!0),Ut.accessibilityData=this.altTextData,Ut;const{decorative:$t,altText:kt}=this.altTextData;if(!$t&&kt&&(Ut.accessibilityData={type:"Figure",alt:kt}),Wt===null)return Ut;Wt.stamps||(Wt.stamps=new Map);const Ft=tt(this,bt)?(Ut.rect[2]-Ut.rect[0])*(Ut.rect[3]-Ut.rect[1]):null;if(!Wt.stamps.has(tt(this,_)))Wt.stamps.set(tt(this,_),{area:Ft,serialized:Ut}),Ut.bitmap=Yt(this,nt,Js).call(this,!1);else if(tt(this,bt)){const Gt=Wt.stamps.get(tt(this,_));Ft>Gt.area&&(Gt.area=Ft,Gt.serialized.bitmap.close(),Gt.serialized.bitmap=Yt(this,nt,Js).call(this,!1))}return Ut}};b=new WeakMap,_=new WeakMap,$=new WeakMap,at=new WeakMap,rt=new WeakMap,ut=new WeakMap,ot=new WeakMap,vt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakSet,bs=function(Bt,Wt=!1){if(!Bt){this.remove();return}dn(this,b,Bt.bitmap),Wt||(dn(this,_,Bt.id),dn(this,bt,Bt.isSvg)),Yt(this,nt,Jo).call(this)},Es=function(){dn(this,$,null),this._uiManager.enableWaiting(!1),tt(this,ut)&&this.div.focus()},Qs=function(){if(tt(this,_)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(tt(this,_)).then(Wt=>Yt(this,nt,bs).call(this,Wt,!0)).finally(()=>Yt(this,nt,Es).call(this));return}if(tt(this,at)){const Wt=tt(this,at);dn(this,at,null),this._uiManager.enableWaiting(!0),dn(this,$,this._uiManager.imageManager.getFromUrl(Wt).then(Ut=>Yt(this,nt,bs).call(this,Ut)).finally(()=>Yt(this,nt,Es).call(this)));return}if(tt(this,rt)){const Wt=tt(this,rt);dn(this,rt,null),this._uiManager.enableWaiting(!0),dn(this,$,this._uiManager.imageManager.getFromFile(Wt).then(Ut=>Yt(this,nt,bs).call(this,Ut)).finally(()=>Yt(this,nt,Es).call(this)));return}const Bt=document.createElement("input");Bt.type="file",Bt.accept=wt.supportedTypesStr,dn(this,$,new Promise(Wt=>{Bt.addEventListener("change",async()=>{if(!Bt.files||Bt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Ut=await this._uiManager.imageManager.getFromFile(Bt.files[0]);Yt(this,nt,bs).call(this,Ut)}Wt()}),Bt.addEventListener("cancel",()=>{this.remove(),Wt()})}).finally(()=>Yt(this,nt,Es).call(this))),Bt.click()},Jo=function(){const{div:Bt}=this;let{width:Wt,height:Ut}=tt(this,b);const[$t,kt]=this.pageDimensions,Ft=.75;if(this.width)Wt=this.width*$t,Ut=this.height*kt;else if(Wt>Ft*$t||Ut>Ft*kt){const dt=Math.min(Ft*$t/Wt,Ft*kt/Ut);Wt*=dt,Ut*=dt}const[Gt,At]=this.parentDimensions;this.setDims(Wt*Gt/$t,Ut*At/kt),this._uiManager.enableWaiting(!1);const it=dn(this,ut,document.createElement("canvas"));Bt.append(it),Bt.hidden=!1,Yt(this,nt,xl).call(this,Wt,Ut),Yt(this,nt,Pu).call(this),tt(this,et)||(this.parent.addUndoableEditor(this),dn(this,et,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},ju=function(Bt,Wt){var Ft;const[Ut,$t]=this.parentDimensions;this.width=Bt/Ut,this.height=Wt/$t,this.setDims(Bt,Wt),(Ft=this._initialOptions)!=null&&Ft.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,tt(this,vt)!==null&&clearTimeout(tt(this,vt)),dn(this,vt,setTimeout(()=>{dn(this,vt,null),Yt(this,nt,xl).call(this,Bt,Wt)},200))},Tu=function(Bt,Wt){const{width:Ut,height:$t}=tt(this,b);let kt=Ut,Ft=$t,Gt=tt(this,b);for(;kt>2*Bt||Ft>2*Wt;){const At=kt,it=Ft;kt>2*Bt&&(kt=kt>=16384?Math.floor(kt/2)-1:Math.ceil(kt/2)),Ft>2*Wt&&(Ft=Ft>=16384?Math.floor(Ft/2)-1:Math.ceil(Ft/2));const dt=new OffscreenCanvas(kt,Ft);dt.getContext("2d").drawImage(Gt,0,0,At,it,0,0,kt,Ft),Gt=dt.transferToImageBitmap()}return Gt},xl=function(Bt,Wt){Bt=Math.ceil(Bt),Wt=Math.ceil(Wt);const Ut=tt(this,ut);if(!Ut||Ut.width===Bt&&Ut.height===Wt)return;Ut.width=Bt,Ut.height=Wt;const $t=tt(this,bt)?tt(this,b):Yt(this,nt,Tu).call(this,Bt,Wt),kt=Ut.getContext("2d");kt.filter=this._uiManager.hcmFilter,kt.drawImage($t,0,0,$t.width,$t.height,0,0,Bt,Wt)},Js=function(Bt){if(Bt){if(tt(this,bt)){const $t=this._uiManager.imageManager.getSvgUrl(tt(this,_));if($t)return $t}const Wt=document.createElement("canvas");return{width:Wt.width,height:Wt.height}=tt(this,b),Wt.getContext("2d").drawImage(tt(this,b),0,0),Wt.toDataURL()}if(tt(this,bt)){const[Wt,Ut]=this.pageDimensions,$t=Math.round(this.width*Wt*c.PixelsPerInch.PDF_TO_CSS_UNITS),kt=Math.round(this.height*Ut*c.PixelsPerInch.PDF_TO_CSS_UNITS),Ft=new OffscreenCanvas($t,kt);return Ft.getContext("2d").drawImage(tt(this,b),0,0,tt(this,b).width,tt(this,b).height,0,0,$t,kt),Ft.transferToImageBitmap()}return structuredClone(tt(this,b))},Pu=function(){dn(this,ot,new ResizeObserver(Bt=>{const Wt=Bt[0].contentRect;Wt.width&&Wt.height&&Yt(this,nt,ju).call(this,Wt.width,Wt.height)})),tt(this,ot).observe(this.div)},xr(wt,"_type","stamp");let j=wt;s.StampEditor=j}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var s=__webpack_module_cache__[e];if(s!==void 0)return s.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return h.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return j.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return b.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var s=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),h=__w_pdfjs_require__(5),j=__w_pdfjs_require__(29),b=__w_pdfjs_require__(14),_=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker="/estate/assets/pdf.worker-CQRGPEDQ.js";pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const MAX_FILE_SIZE=10*1024*1024,formatBytes$1=e=>{if(!e)return"0 B";const s=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1),a=e/1024**i;return`${i===0?a.toFixed(0):a.toFixed(1)} ${s[i]}`},formatDateTime=e=>e?new Date(e).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"Unknown date",parseTags=e=>e.split(",").map(s=>s.trim()).filter(Boolean),iconForDocument=e=>e.contentType.includes("pdf")?"":e.contentType.startsWith("image/")?"":e.contentType.includes("text")?"":"",DocumentPreviewModal=({doc:e,onClose:s,onDownload:i})=>{const a=reactExports.useRef(null),[o,c]=reactExports.useState(null),[h,j]=reactExports.useState(null),[b,_]=reactExports.useState(!1),[$,at]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!e)return;c(null),j(null),at(null),_(!1);let rt=null,ut=!1,ot=null;return e.contentType.startsWith("image/")?(rt=URL.createObjectURL(e.file),c(rt)):e.contentType.includes("pdf")?(async()=>{_(!0);try{const bt=await e.file.arrayBuffer();if(ut)return;ot=pdfExports.getDocument({data:bt});const et=await ot.promise;if(ut)return;const nt=await et.getPage(1);if(ut)return;const st=nt.getViewport({scale:1}),lt=Math.min(2,600/st.width),yt=nt.getViewport({scale:lt}),ct=a.current;if(!ct)return;const mt=ct.getContext("2d");if(!mt)return;ct.height=yt.height,ct.width=yt.width,await nt.render({canvasContext:mt,viewport:yt}).promise}catch(bt){console.error(bt),ut||at("Unable to render PDF preview")}finally{ut||_(!1)}})():e.contentType.includes("text")||e.contentType==="text/plain"?(async()=>{try{const bt=await e.file.text();ut||j(bt.slice(0,4e3))}catch(bt){console.error(bt),ut||at("Unable to load text preview")}})():at("Preview not available for this file type."),()=>{ut=!0,rt&&URL.revokeObjectURL(rt),ot&&ot.destroy()}},[e]),e?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-30 flex items-center justify-center bg-slate-900/60 px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-white p-6 shadow-xl",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4 flex flex-wrap items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:e.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:[e.contentType||"Unknown type","  ",formatBytes$1(e.size)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>i(e),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Download"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:s,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Close"})]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-[70vh] overflow-auto",children:e.contentType.startsWith("image/")&&o?jsxRuntimeExports.jsx("img",{src:o,alt:e.title||"Document preview",className:"mx-auto max-h-[60vh] rounded-lg object-contain"}):e.contentType.includes("pdf")?$?jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:$}):jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("canvas",{ref:a,className:"mx-auto w-full max-w-full rounded-lg border border-slate-200 bg-slate-50"}),b&&jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-slate-500",children:"Loading preview"})]}):e.contentType.includes("text")||e.contentType==="text/plain"?$?jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:$}):h!==null?jsxRuntimeExports.jsx("pre",{className:"whitespace-pre-wrap rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:h}):jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Loading preview"}):jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:$??"Preview not available for this file type."})})]})}):null},Documents=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState([]),[o,c]=reactExports.useState(null),[h,j]=reactExports.useState(""),[b,_]=reactExports.useState(""),[$,at]=reactExports.useState(""),[rt,ut]=reactExports.useState(null),[ot,vt]=reactExports.useState(null),[bt,et]=reactExports.useState(!1),[nt,st]=reactExports.useState(""),[gt,lt]=reactExports.useState("all"),[yt,ct]=reactExports.useState(null),[mt,xt]=reactExports.useState(null),[Ct,ht]=reactExports.useState(null),wt=reactExports.useRef(null),[jt]=useSearchParams(),Xt=useLocation(),Bt=useNavigate(),{activeEstateId:Wt}=useEstate();reactExports.useEffect(()=>{let it=!0;const dt=liveQuery(()=>db.documents.where("estateId").equals(Wt).toArray()).subscribe({next:_t=>{if(!it)return;const Tt=[..._t].sort((Dt,It)=>new Date(It.created_at).getTime()-new Date(Dt.created_at).getTime());s(Tt)},error:_t=>{console.error(_t),it&&vt("Unable to load documents")}});return()=>{it=!1,dt.unsubscribe()}},[Wt]),reactExports.useEffect(()=>{let it=!0;const dt=liveQuery(()=>db.tasks.where("estateId").equals(Wt).toArray()).subscribe({next:_t=>{if(!it)return;const Tt=[..._t].sort((Dt,It)=>new Date(Dt.due_date).getTime()-new Date(It.due_date).getTime());a(Tt)},error:_t=>{console.error(_t)}});return()=>{it=!1,dt.unsubscribe()}},[Wt]),reactExports.useEffect(()=>{const it=jt.get("highlight");it&&xt(it)},[jt]),reactExports.useEffect(()=>{const it=Xt.state;if(!(it!=null&&it.startUpload))return;ut(null);const dt=wt.current;if(dt){if(typeof dt.showPicker=="function")try{dt.showPicker()}catch(_t){console.error(_t),dt.click()}else dt.click();dt.focus()}Bt(Xt.pathname+Xt.search,{replace:!0})},[Xt,Bt]),reactExports.useEffect(()=>{if(!mt||typeof window>"u")return;if(!e.some(dt=>dt.id===mt)){xt(null);return}const it=document.getElementById(`doc-${mt}`);if(it){it.scrollIntoView({behavior:"smooth",block:"center"});const dt=window.setTimeout(()=>xt(null),4e3);return()=>window.clearTimeout(dt)}},[mt,e]);const Ut=reactExports.useMemo(()=>{const it=new Set;return e.forEach(dt=>dt.tags.forEach(_t=>it.add(_t))),Array.from(it).sort((dt,_t)=>dt.localeCompare(_t))},[e]),$t=reactExports.useMemo(()=>{const it=nt.toLowerCase().trim();return e.filter(dt=>{var Dt;if(gt!=="all"&&!dt.tags.includes(gt))return!1;if(!it)return!0;const _t=[dt.title,dt.contentType,...dt.tags].filter(Boolean).join(" ").toLowerCase(),Tt=(Dt=i.find(It=>It.id===dt.taskId))==null?void 0:Dt.title.toLowerCase();return _t.includes(it)||!!Tt&&Tt.includes(it)})},[e,gt,nt,i]),kt=it=>{var _t;const dt=((_t=it.target.files)==null?void 0:_t[0])??null;if(c(dt),ut(null),dt){const Tt=dt.name.replace(/\.[^.]+$/,"");j(Tt)}},Ft=async it=>{if(it.preventDefault(),!o){ut("Select a file to upload");return}if(o.size>MAX_FILE_SIZE){ut("File must be 10 MB or smaller");return}ut(null),vt(null),et(!0);try{await createDocument({file:o,title:h.trim()||o.name,tags:parseTags(b),estateId:Wt,taskId:$||null}),c(null),j(""),_(""),at(""),wt.current&&(wt.current.value="")}catch(dt){console.error(dt),ut("Unable to upload document")}finally{et(!1)}},Gt=it=>{const dt=URL.createObjectURL(it.file),_t=document.createElement("a");_t.href=dt,_t.download=it.title||"document",document.body.appendChild(_t),_t.click(),_t.remove(),URL.revokeObjectURL(dt)},At=async(it,dt)=>{vt(null),ht(it.id);try{dt?await linkDocumentToTask(it.id,dt):await unlinkDocumentFromTask(it.id)}catch(_t){console.error(_t),vt("Unable to update document link")}finally{ht(null)}};return jsxRuntimeExports.jsxs("section",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Documents"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Upload, organize, and preview estate planning documents. Files are stored locally in your browser for privacy."})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upload a document"}),jsxRuntimeExports.jsxs("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:Ft,children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-file",className:"text-sm font-medium text-slate-700",children:"File (PDF, JPG, PNG, TXT  max 10 MB)"}),jsxRuntimeExports.jsx("input",{id:"document-file",name:"document-file",type:"file",accept:".pdf,.png,.jpg,.jpeg,.txt",ref:wt,onChange:kt,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-title",className:"text-sm font-medium text-slate-700",children:"Title"}),jsxRuntimeExports.jsx("input",{id:"document-title",name:"document-title",value:h,onChange:it=>j(it.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-tags",className:"text-sm font-medium text-slate-700",children:"Tags (comma separated)"}),jsxRuntimeExports.jsx("input",{id:"document-tags",name:"document-tags",value:b,onChange:it=>_(it.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-task",className:"text-sm font-medium text-slate-700",children:"Link to task (optional)"}),jsxRuntimeExports.jsxs("select",{id:"document-task",name:"document-task",value:$,onChange:it=>at(it.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"",children:"No linked task"}),i.map(it=>jsxRuntimeExports.jsx("option",{value:it.id,children:it.title},it.id))]})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:bt,className:"rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:bt?"Uploading":"Upload document"}),rt&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:rt})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-[200px]",children:jsxRuntimeExports.jsx("input",{type:"search",value:nt,onChange:it=>st(it.target.value),placeholder:"Search by title, tags, or task",className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})}),jsxRuntimeExports.jsxs("select",{value:gt,onChange:it=>lt(it.target.value),className:"rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All tags"}),Ut.map(it=>jsxRuntimeExports.jsxs("option",{value:it,children:["#",it]},it))]})]}),ot&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:ot}),$t.length===0?jsxRuntimeExports.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white p-10 text-center text-sm text-slate-500",children:jsxRuntimeExports.jsx("p",{children:"No documents found. Upload a file or adjust your filters."})}):jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:$t.map(it=>{const dt=i.find(Tt=>Tt.id===it.taskId),_t=mt===it.id;return jsxRuntimeExports.jsxs("article",{id:`doc-${it.id}`,className:`flex h-full flex-col justify-between rounded-2xl border bg-white p-5 shadow-sm transition ${_t?"border-primary-300 ring-2 ring-primary-200":"border-slate-200 hover:border-primary-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:iconForDocument(it)}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"truncate text-base font-semibold text-slate-900",children:it.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",formatDateTime(it.created_at)]})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:[it.contentType||"Unknown type","  ",formatBytes$1(it.size)]}),it.tags.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 text-xs font-medium",children:it.tags.map(Tt=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>lt(Tt),className:"rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:["#",Tt]},`${it.id}-${Tt}`))}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Linked task"}),jsxRuntimeExports.jsxs("select",{value:it.taskId??"",onChange:Tt=>At(it,Tt.target.value),disabled:Ct===it.id,className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"",children:"No linked task"}),i.map(Tt=>jsxRuntimeExports.jsx("option",{value:Tt.id,children:Tt.title},Tt.id))]}),dt&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Linked to ",dt.title]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ct(it),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Preview"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Gt(it),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Download"})]})]},it.id)})}),jsxRuntimeExports.jsx(DocumentPreviewModal,{doc:yt,onClose:()=>ct(null),onDownload:Gt})]})},STORAGE_PREFIX="estate-buyout-worksheet",storageAvailable=()=>typeof window<"u"&&!!window.localStorage,keyFor=e=>`${STORAGE_PREFIX}-${e}`,cloneData=e=>({appraisedValue:e.appraisedValue??"",sharePercent:e.sharePercent??"50",credits:Array.isArray(e.credits)?e.credits.map(s=>({...s})):[],adjustments:Array.isArray(e.adjustments)?e.adjustments.map(s=>({...s})):[]}),loadBuyoutWorksheet=e=>{if(!storageAvailable())return cloneData({appraisedValue:"",sharePercent:"50",credits:[],adjustments:[]});const s=window.localStorage.getItem(keyFor(e));if(!s)return cloneData({appraisedValue:"",sharePercent:"50",credits:[],adjustments:[]});try{const i=JSON.parse(s);return cloneData(i)}catch(i){return console.error("Failed to parse buyout worksheet data",i),cloneData({appraisedValue:"",sharePercent:"50",credits:[],adjustments:[]})}},saveBuyoutWorksheet=(e,s)=>{if(storageAvailable())try{window.localStorage.setItem(keyFor(e),JSON.stringify(s))}catch(i){console.error("Failed to persist buyout worksheet data",i)}},currencyFormatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),formatCurrency=e=>currencyFormatter.format(Number.isFinite(e)?e:0),parseNumericInput=e=>{if(!e)return 0;const s=e.replace(/[^0-9.-]/g,""),i=Number.parseFloat(s);return Number.isFinite(i)?i:0},generateId=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2,10),createLineItem=(e="")=>({id:generateId(),description:e,amount:""}),withDefaults=e=>{const s=(Array.isArray(e.credits)?e.credits:[]).map(a=>({id:a.id||generateId(),description:a.description??"",amount:a.amount??""})),i=(Array.isArray(e.adjustments)?e.adjustments:[]).map(a=>({id:a.id||generateId(),description:a.description??"",amount:a.amount??""}));return s.length===0&&s.push(createLineItem("Funeral & administration expenses advanced")),{appraisedValue:e.appraisedValue??"",sharePercent:e.sharePercent??"50",credits:s,adjustments:i}},buildSummaryText=(e,s,i,a,o,c,h,j)=>{const b=[];return b.push(`Buyout worksheet for ${e}`),b.push(`Sister share: ${s||""}%`),b.push(`Gross due: ${formatCurrency(i)}`),h.length>0?(b.push("Credits (amounts reduce payment):"),h.forEach(_=>{if(!_.description&&!_.amount)return;const $=formatCurrency(parseNumericInput(_.amount)),at=_.description||"Credit";b.push(`   ${at}: ${$}`)}),b.push(`Total credits: ${formatCurrency(a)}`)):b.push("Credits: none"),j.length>0?(b.push("Adjustments (positive increases payment, negative reduces):"),j.forEach(_=>{if(!_.description&&!_.amount)return;const $=formatCurrency(parseNumericInput(_.amount)),at=_.description||"Adjustment";b.push(`   ${at}: ${$}`)}),b.push(`Total adjustments: ${formatCurrency(o)}`)):b.push("Adjustments: none"),b.push(`Net payment due to sister: ${formatCurrency(c)}`),b.push("Informational only; court approval or written consent may be required (20 Pa.C.S. 3356)."),b.join(`
`)},toCsv=(e,s,i,a,o,c,h,j,b)=>{const _=[];_.push(["Buyout worksheet for",e]),_.push(["Appraised value",formatCurrency(i)]),_.push(["Sister share %",s||"0"]),_.push(["Gross due",formatCurrency(a)]),_.push([]),_.push(["Credits (reduce payment)","Amount"]),o.length===0?_.push(["None",formatCurrency(0)]):o.forEach(at=>{!at.description&&!at.amount||_.push([at.description||"Credit",formatCurrency(parseNumericInput(at.amount))])}),_.push(["Total credits",formatCurrency(c)]),_.push([]),_.push(["Adjustments","Amount"]),h.length===0?_.push(["None",formatCurrency(0)]):h.forEach(at=>{!at.description&&!at.amount||_.push([at.description||"Adjustment",formatCurrency(parseNumericInput(at.amount))])}),_.push(["Total adjustments",formatCurrency(j)]),_.push([]),_.push(["Net payment due to sister",formatCurrency(b)]);const $=at=>{if(at==null)return"";const rt=/[",\n]/.test(at),ut=at.replace(/"/g,'""');return rt?`"${ut}"`:ut};return _.map(at=>at.map(rt=>$(String(rt??""))).join(",")).join(`\r
`)},Buyout=()=>{var Ct;const{activeEstateId:e,estateProfiles:s}=useEstate(),i=((Ct=s[e])==null?void 0:Ct.label)||"Selected estate",[a,o]=reactExports.useState(()=>withDefaults({appraisedValue:"",sharePercent:"50",credits:[createLineItem()],adjustments:[]})),[c,h]=reactExports.useState(!1),[j,b]=reactExports.useState(null);reactExports.useEffect(()=>{h(!1);const ht=loadBuyoutWorksheet(e);o(withDefaults(ht)),h(!0)},[e]),reactExports.useEffect(()=>{c&&saveBuyoutWorksheet(e,a)},[e,a,c]),reactExports.useEffect(()=>{if(!j)return;const ht=window.setTimeout(()=>b(null),3e3);return()=>window.clearTimeout(ht)},[j]);const _=parseNumericInput(a.appraisedValue),$=(()=>{if(!a.sharePercent)return 0;const ht=Number.parseFloat(a.sharePercent);return!Number.isFinite(ht)||ht<0?0:ht>100?100:ht})(),at=reactExports.useMemo(()=>_*($/100),[_,$]),rt=reactExports.useMemo(()=>a.credits.reduce((ht,wt)=>ht+parseNumericInput(wt.amount),0),[a.credits]),ut=reactExports.useMemo(()=>a.adjustments.reduce((ht,wt)=>ht+parseNumericInput(wt.amount),0),[a.adjustments]),ot=reactExports.useMemo(()=>at-rt+ut,[at,rt,ut]),vt=a.sharePercent,bt=ht=>{o(wt=>({...wt,appraisedValue:ht}))},et=ht=>{o(wt=>({...wt,sharePercent:ht}))},nt=(ht,wt)=>{o(jt=>({...jt,credits:jt.credits.map(Xt=>Xt.id===ht?{...Xt,...wt}:Xt)}))},st=(ht,wt)=>{o(jt=>({...jt,adjustments:jt.adjustments.map(Xt=>Xt.id===ht?{...Xt,...wt}:Xt)}))},gt=()=>{o(ht=>({...ht,credits:[...ht.credits,createLineItem("")]}))},lt=()=>{o(ht=>({...ht,adjustments:[...ht.adjustments,createLineItem("")]}))},yt=ht=>{o(wt=>wt.credits.length<=1?{...wt,credits:wt.credits.map(jt=>jt.id===ht?{...jt,description:"",amount:""}:jt)}:{...wt,credits:wt.credits.filter(jt=>jt.id!==ht)})},ct=ht=>{o(wt=>({...wt,adjustments:wt.adjustments.filter(jt=>jt.id!==ht)}))},mt=async()=>{var wt;const ht=buildSummaryText(i,vt,at,rt,ut,ot,a.credits,a.adjustments);try{if((wt=navigator.clipboard)!=null&&wt.writeText)await navigator.clipboard.writeText(ht);else throw new Error("Clipboard API unavailable");b("Summary copied to clipboard")}catch(jt){console.error(jt);try{const Xt=document.createElement("textarea");Xt.value=ht,Xt.setAttribute("readonly",""),Xt.style.position="absolute",Xt.style.left="-9999px",document.body.appendChild(Xt),Xt.select(),document.execCommand("copy"),document.body.removeChild(Xt),b("Summary copied to clipboard")}catch(Xt){console.error(Xt),b("Unable to copy summary")}}},xt=()=>{const ht=toCsv(i,vt,_,at,a.credits,rt,a.adjustments,ut,ot),wt=new Blob([ht],{type:"text/csv;charset=utf-8;"}),jt=URL.createObjectURL(wt),Xt=document.createElement("a");Xt.href=jt,Xt.setAttribute("download",`buyout-worksheet-${e}.csv`),document.body.appendChild(Xt),Xt.click(),document.body.removeChild(Xt),URL.revokeObjectURL(jt),b("CSV downloaded")};return jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-primary-500",children:"Worksheet"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Buyout worksheet"}),jsxRuntimeExports.jsx("p",{className:"max-w-2xl text-sm text-slate-600",children:"Estimate the net amount owed to a sibling when you purchase their share of the estate home. Numbers update automatically and save per estate."})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/80 p-4 text-amber-900",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide",children:"Disclaimer"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Informational only; court approval or written consent may be required (20 Pa.C.S. 3356)."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(280px,360px)]",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"1. Property value & sister's share"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Use the date-of-death appraisal or any agreed value with your sibling."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[jsxRuntimeExports.jsxs("label",{className:"space-y-1 text-sm font-medium text-slate-700",children:[jsxRuntimeExports.jsx("span",{children:"Appraised / agreed value"}),jsxRuntimeExports.jsx("input",{type:"text",inputMode:"decimal",value:a.appraisedValue,onChange:ht=>bt(ht.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-300 focus:outline-none focus:ring-2 focus:ring-primary-200/60",placeholder:"$300,000"})]}),jsxRuntimeExports.jsxs("label",{className:"space-y-1 text-sm font-medium text-slate-700",children:[jsxRuntimeExports.jsx("span",{children:"Percent owed to sister"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:a.sharePercent,onChange:ht=>et(ht.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-300 focus:outline-none focus:ring-2 focus:ring-primary-200/60",placeholder:"50"})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"2. Credits you advanced"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"List funeral, administration, utilities (to date of death), and property preservation expenses you covered."})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:gt,className:"rounded-full border border-primary-200 px-4 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50",children:"+ Add credit"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-4",children:a.credits.map((ht,wt)=>jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-slate-200/80 bg-slate-50/70 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[jsxRuntimeExports.jsxs("label",{className:"flex-1 space-y-1 text-sm font-medium text-slate-700",children:[jsxRuntimeExports.jsx("span",{children:`Description ${wt+1}`}),jsxRuntimeExports.jsx("input",{type:"text",value:ht.description,onChange:jt=>nt(ht.id,{description:jt.target.value}),className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-300 focus:outline-none focus:ring-2 focus:ring-primary-200/60",placeholder:"Funeral bill paid to ABC Funeral Home"})]}),jsxRuntimeExports.jsxs("label",{className:"w-full md:w-44 space-y-1 text-sm font-medium text-slate-700",children:[jsxRuntimeExports.jsx("span",{children:"Amount"}),jsxRuntimeExports.jsx("input",{type:"text",inputMode:"decimal",value:ht.amount,onChange:jt=>nt(ht.id,{amount:jt.target.value}),className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-300 focus:outline-none focus:ring-2 focus:ring-primary-200/60",placeholder:"$1,200"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 flex justify-end",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>yt(ht.id),className:"text-sm font-medium text-rose-600 transition hover:text-rose-500",children:"Remove"})})]},ht.id))})]}),jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"3. Agreed adjustments"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Include any other adjustments you agreed upon. Enter positive amounts to increase what you owe or negative amounts to reduce it."})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:lt,className:"rounded-full border border-primary-200 px-4 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50",children:"+ Add adjustment"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-4",children:a.adjustments.length===0?jsxRuntimeExports.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50/50 px-4 py-3 text-sm text-slate-500",children:"No adjustments added yet."}):a.adjustments.map((ht,wt)=>jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-slate-200/80 bg-slate-50/70 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[jsxRuntimeExports.jsxs("label",{className:"flex-1 space-y-1 text-sm font-medium text-slate-700",children:[jsxRuntimeExports.jsx("span",{children:`Description ${wt+1}`}),jsxRuntimeExports.jsx("input",{type:"text",value:ht.description,onChange:jt=>st(ht.id,{description:jt.target.value}),className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-300 focus:outline-none focus:ring-2 focus:ring-primary-200/60",placeholder:"Agreed credit for furniture you keep"})]}),jsxRuntimeExports.jsxs("label",{className:"w-full md:w-44 space-y-1 text-sm font-medium text-slate-700",children:[jsxRuntimeExports.jsx("span",{children:"Amount"}),jsxRuntimeExports.jsx("input",{type:"text",inputMode:"decimal",value:ht.amount,onChange:jt=>st(ht.id,{amount:jt.target.value}),className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-300 focus:outline-none focus:ring-2 focus:ring-primary-200/60",placeholder:"$500 or -$500"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 flex justify-end",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ct(ht.id),className:"text-sm font-medium text-rose-600 transition hover:text-rose-500",children:"Remove"})})]},ht.id))})]})]}),jsxRuntimeExports.jsxs("aside",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-slate-200/80 px-6 py-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Settlement summary"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Numbers recalculate instantly as you edit the worksheet."})]}),jsxRuntimeExports.jsxs("div",{className:"divide-y divide-slate-200/80",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-4 text-sm text-slate-600",children:[jsxRuntimeExports.jsx("span",{children:"Property value"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-slate-900",children:formatCurrency(_)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-4 text-sm text-slate-600",children:[jsxRuntimeExports.jsx("span",{children:`Sister share (${vt||"0"}%)`}),jsxRuntimeExports.jsx("span",{className:"font-medium text-slate-900",children:formatCurrency(at)})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 text-sm text-slate-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-baseline justify-between",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-slate-700",children:"Credits you advanced"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold text-emerald-600",children:["- ",formatCurrency(rt)]})]}),jsxRuntimeExports.jsx("ul",{className:"mt-2 space-y-1",children:a.credits.map(ht=>!ht.description&&!ht.amount?null:jsxRuntimeExports.jsxs("li",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-500",children:ht.description||"Credit"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-emerald-600",children:formatCurrency(parseNumericInput(ht.amount))})]},ht.id))})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 text-sm text-slate-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-baseline justify-between",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-slate-700",children:"Adjustments"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-slate-900",children:formatCurrency(ut)})]}),jsxRuntimeExports.jsx("ul",{className:"mt-2 space-y-1",children:a.adjustments.map(ht=>{if(!ht.description&&!ht.amount)return null;const wt=parseNumericInput(ht.amount),jt=wt>=0?"text-slate-900":"text-emerald-600";return jsxRuntimeExports.jsxs("li",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-500",children:ht.description||"Adjustment"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${jt}`,children:formatCurrency(wt)})]},ht.id)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-5 text-base font-semibold text-slate-900",children:[jsxRuntimeExports.jsx("span",{children:"Net payment due to sister"}),jsxRuntimeExports.jsx("span",{children:formatCurrency(ot)})]})]})]}),jsxRuntimeExports.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-6 py-4 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:mt,className:"inline-flex items-center gap-2 rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-500",children:"Copy summary"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:xt,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:border-primary-200 hover:text-primary-600",children:"Download CSV"}),j?jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-slate-500",children:j}):null]})})]})]})]})},isRecord=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),toStringOrUndefined=e=>typeof e=="string"&&e.trim()||void 0,slugify=e=>e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),guidanceAnchorForId=e=>`guide-${slugify(e||"guidance")}`,normalizeStep=e=>{if(typeof e=="string")return{detail:e.trim()};if(isRecord(e)){const s=toStringOrUndefined(e.title)??toStringOrUndefined(e.label),i=toStringOrUndefined(e.detail)??toStringOrUndefined(e.description)??toStringOrUndefined(e.body)??toStringOrUndefined(e.text);return!s&&!i?null:{title:s,detail:i}}return null},normalizeTemplate=(e,s)=>{if(typeof e=="string")return{id:`template-${s}`,title:`Template ${s+1}`,body:e.trim()};if(isRecord(e)){const i=toStringOrUndefined(e.body)??toStringOrUndefined(e.text)??toStringOrUndefined(e.template);if(!i)return null;const a=toStringOrUndefined(e.title)??toStringOrUndefined(e.label)??`Template ${s+1}`;return{id:toStringOrUndefined(e.id)??`template-${s}`,title:a,body:i}}return null},normalizeLink=(e,s)=>{if(!isRecord(e))return null;const i=toStringOrUndefined(e.url)??toStringOrUndefined(e.href);if(!i)return null;const a=toStringOrUndefined(e.label)??toStringOrUndefined(e.title)??i,o=toStringOrUndefined(e.description)??toStringOrUndefined(e.summary);return{id:toStringOrUndefined(e.id)??`link-${s}`,label:a,url:i,description:o}},gatherSteps=e=>{const s=["steps","instructions","checklist","items","actions"],i=[];for(const a of s){const o=e[a];if(o)if(Array.isArray(o))o.forEach(c=>{const h=normalizeStep(c);h&&i.push(h)});else{const c=normalizeStep(o);c&&i.push(c)}}return i},gatherTemplates=e=>{const s=["templates","template","prefilled","prefillTemplates"],i=[];return s.forEach(a=>{const o=e[a];if(!o)return;const c=(h,j)=>{const b=normalizeTemplate(h,i.length+j);b&&i.push(b)};Array.isArray(o)?o.forEach((h,j)=>c(h,j)):c(o,0)}),i},gatherLinks=e=>{const s=["links","resources"],i=[];return s.forEach(a=>{const o=e[a];if(!o)return;const c=(h,j)=>{const b=normalizeLink(h,i.length+j);b&&i.push(b)};Array.isArray(o)?o.forEach((h,j)=>c(h,j)):c(o,0)}),i},gatherNotes=e=>{const s=[];return Object.entries(e).forEach(([i,a])=>{if(typeof a!="string")return;const o=i.toLowerCase();if(["note","notes","deadlineNote","reminder"].some(c=>o.includes(c))){if(i==="summary"||i==="body")return;const c=a.trim();c&&s.push(c)}}),s},buildCopyText=e=>{const s=[e.title];if(e.summary&&s.push(e.summary),e.body&&s.push(e.body),e.steps.length>0){const i=e.steps.map((a,o)=>{const c=`${o+1}.`;return a.title&&a.detail?`${c} ${a.title}
   ${a.detail}`:a.title?`${c} ${a.title}`:`${c} ${a.detail??""}`.trim()}).join(`
`);s.push(i)}return e.notes.length>0&&s.push(e.notes.join(`
`)),e.templates.length>0&&e.templates.forEach(i=>{s.push(`${i.title}
${i.body}`.trim())}),s.map(i=>i.trim()).filter(Boolean).join(`

`)},normalizeGuidanceEntries=e=>e.map((s,i)=>{const a=toStringOrUndefined(s.title)??`Guidance ${i+1}`,o=toStringOrUndefined(s.id)??slugify(a),c=toStringOrUndefined(s.summary),h=toStringOrUndefined(s.body),j=gatherSteps(s),b=gatherNotes(s),_=gatherTemplates(s),$=gatherLinks(s),at=buildCopyText({title:a,summary:c,body:h,steps:j,notes:b,templates:_})||a;return{id:o,anchor:guidanceAnchorForId(o),title:a,summary:c,body:h,steps:j,notes:b,templates:_,links:$,copyText:at}}),storageEventMatchesGuidance=(e,s)=>!e.key||e.key==="seedVersion"?!0:e.key===`guidance:${s}`,Guidance=()=>{const{activeEstateId:e,estateProfiles:s}=useEstate(),[i,a]=reactExports.useState([]),[o,c]=reactExports.useState(null),h=reactExports.useRef(null),j=s[e],b=reactExports.useCallback(()=>{const rt=loadSeedGuidance(e);a(normalizeGuidanceEntries(rt))},[e]);reactExports.useEffect(()=>{b();const rt=ot=>{storageEventMatchesGuidance(ot,e)&&b()},ut=()=>{b()};return window.addEventListener("storage",rt),window.addEventListener(ESTATE_PLAN_UPDATED_EVENT,ut),()=>{window.removeEventListener("storage",rt),window.removeEventListener(ESTATE_PLAN_UPDATED_EVENT,ut)}},[e,b]),reactExports.useEffect(()=>()=>{h.current&&window.clearTimeout(h.current)},[]);const _=reactExports.useCallback(rt=>{h.current&&window.clearTimeout(h.current),c(rt),h.current=window.setTimeout(()=>{c(null),h.current=null},rt.status==="success"?1800:2600)},[]),$=reactExports.useCallback(async(rt,ut)=>{try{if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function")await navigator.clipboard.writeText(ut);else{const ot=document.createElement("textarea");ot.value=ut,ot.setAttribute("readonly",""),ot.style.position="absolute",ot.style.left="-9999px",document.body.appendChild(ot),ot.select();const vt=document.execCommand("copy");if(document.body.removeChild(ot),!vt)throw new Error("Copy command failed")}_({key:rt,status:"success",message:"Copied to clipboard"})}catch(ot){console.error(ot),_({key:rt,status:"error",message:"Unable to copy text"})}},[_]),at=reactExports.useMemo(()=>i.map(rt=>({...rt,anchor:rt.anchor||guidanceAnchorForId(rt.id)})),[i]);return jsxRuntimeExports.jsxs("section",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-primary-600",children:"Guidance"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Plan guidance & templates"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:["Step-by-step instructions, filing checklists, and ready-to-send templates tailored to the"," ",jsxRuntimeExports.jsx("span",{className:"font-medium text-slate-700",children:j.label})," estate plan."]})]}),at.length===0?jsxRuntimeExports.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-slate-50 p-6 text-sm text-slate-500",children:"Import an estate plan profile to load guidance pages, deadlines, and templates for this estate."}):jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:at.map(rt=>{const ut=o&&o.key===rt.id?o:null;return jsxRuntimeExports.jsxs("article",{id:rt.anchor,className:"card-surface flex flex-col gap-4 md:gap-5",children:[jsxRuntimeExports.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:rt.title}),rt.summary?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:rt.summary}):null]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$(rt.id,rt.copyText),className:"inline-flex items-center justify-center rounded-full border border-primary-200 bg-primary-50 px-4 py-2 text-sm font-semibold text-primary-700 shadow-sm transition hover:border-primary-300 hover:bg-primary-100",children:"Copy Text"})]}),ut?jsxRuntimeExports.jsx("p",{role:"status",className:`text-xs font-medium ${ut.status==="success"?"text-emerald-600":"text-rose-600"}`,children:ut.message}):null,rt.body?jsxRuntimeExports.jsx("div",{className:"rounded-2xl bg-slate-50 p-4 text-sm text-slate-600 shadow-inner",children:jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:rt.body})}):null,rt.steps.length>0?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Steps"}),jsxRuntimeExports.jsx("ol",{className:"space-y-3 text-sm text-slate-600",children:rt.steps.map((ot,vt)=>jsxRuntimeExports.jsx("li",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mt-1 inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full bg-primary-100 text-sm font-semibold text-primary-700",children:vt+1}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[ot.title?jsxRuntimeExports.jsx("p",{className:"font-medium text-slate-900",children:ot.title}):null,ot.detail?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-600",children:ot.detail}):null]})]})},`${rt.id}-step-${vt}`))})]}):null,rt.notes.length>0?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Notes"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:rt.notes.map((ot,vt)=>jsxRuntimeExports.jsx("li",{className:"rounded-2xl bg-amber-50/70 p-3",children:ot},`${rt.id}-note-${vt}`))})]}):null,rt.templates.length>0?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Prefilled templates"}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:rt.templates.map(ot=>{const vt=`${rt.id}-${ot.id}`,bt=o&&o.key===vt?o:null;return jsxRuntimeExports.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-slate-900",children:ot.title}),jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap text-sm text-slate-600",children:ot.body})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$(vt,ot.body),className:"inline-flex items-center justify-center rounded-full border border-slate-200 bg-slate-50 px-4 py-2 text-xs font-semibold text-slate-700 transition hover:border-primary-200 hover:bg-primary-50 hover:text-primary-700",children:"Copy template"})]}),bt?jsxRuntimeExports.jsx("p",{role:"status",className:`mt-2 text-xs font-medium ${bt.status==="success"?"text-emerald-600":"text-rose-600"}`,children:bt.message}):null]},ot.id)})})]}):null,rt.links.length>0?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Resources"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:rt.links.map(ot=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:ot.url,target:"_blank",rel:"noreferrer",className:"block rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-primary-700 shadow-sm transition hover:border-primary-300 hover:bg-primary-50",children:jsxRuntimeExports.jsxs("span",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx("span",{children:ot.label}),ot.description?jsxRuntimeExports.jsx("span",{className:"text-xs font-normal text-slate-500",children:ot.description}):null]})})},ot.id))})]}):null]},rt.id)})})]})},MAX_ENTRY_LENGTH=1e4,formatDate=e=>{const s=new Date(e);return Number.isNaN(s.valueOf())?"Unknown date":s.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},Journal=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(!0),[o,c]=reactExports.useState(""),[h,j]=reactExports.useState(""),[b,_]=reactExports.useState(null),[$,at]=reactExports.useState(null),[rt,ut]=reactExports.useState({}),ot=reactExports.useRef(null),vt=useLocation(),bt=useNavigate(),{activeEstateId:et}=useEstate(),nt=reactExports.useMemo(()=>MAX_ENTRY_LENGTH-h.length,[h.length]),st=reactExports.useCallback(async()=>{try{const xt=await getJournalEntries(et);s(xt)}catch(xt){console.error(xt)}finally{a(!1)}},[et]);reactExports.useEffect(()=>{a(!0),st()},[st]),reactExports.useEffect(()=>{var Ct;const xt=vt.state;xt!=null&&xt.focusNewEntry&&(at(null),c(""),j(""),_(null),(Ct=ot.current)==null||Ct.focus(),bt(vt.pathname+vt.search,{replace:!0}))},[vt,bt]);const gt=()=>{c(""),j(""),at(null),_(null)},lt=async xt=>{xt.preventDefault();const Ct=o.trim(),ht=h.trim();if(!Ct){_("Title is required.");return}if(!ht){_("Write something in the journal entry before saving.");return}if(ht.length>MAX_ENTRY_LENGTH){_(`Journal entries are limited to ${MAX_ENTRY_LENGTH.toLocaleString()} characters.`);return}$?await updateJournalEntry($,{title:Ct,body:ht}):await createJournalEntry({title:Ct,body:ht,estateId:et}),gt(),await st()},yt=xt=>{at(xt.id),c(xt.title),j(xt.body),_(null)},ct=async xt=>{window.confirm("Remove this journal entry? This cannot be undone.")&&(await deleteJournalEntry(xt),ut(ht=>{const wt={...ht};return delete wt[xt],wt}),await st())},mt=xt=>{ut(Ct=>({...Ct,[xt]:!Ct[xt]}))};return jsxRuntimeExports.jsxs("section",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Journal"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Chronicle milestones, conversations, and insights to keep the family aligned."})]}),jsxRuntimeExports.jsxs("form",{onSubmit:lt,className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"journal-title",className:"text-sm font-medium text-slate-700",children:"Title"}),jsxRuntimeExports.jsx("input",{id:"journal-title",type:"text",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:"Entry title",value:o,onChange:xt=>{c(xt.target.value),b&&_(null)},maxLength:160,required:!0,ref:ot})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"journal-body",className:"text-sm font-medium text-slate-700",children:"Entry"}),jsxRuntimeExports.jsx("textarea",{id:"journal-body",className:"min-h-[160px] w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:"Capture milestones, reflections, or next steps...",value:h,onChange:xt=>{j(xt.target.value.slice(0,MAX_ENTRY_LENGTH)),b&&_(null)},maxLength:MAX_ENTRY_LENGTH}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[jsxRuntimeExports.jsxs("span",{children:[nt.toLocaleString()," characters remaining"]}),$?jsxRuntimeExports.jsx("span",{children:"Editing existing entry"}):jsxRuntimeExports.jsx("span",{children:"New entry"})]})]}),b?jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600",children:b}):null,jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-lg bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700",children:$?"Update entry":"Save entry"}),$?jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm font-medium text-slate-600 hover:text-slate-900",onClick:gt,children:"Cancel"}):null]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:i?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Loading journal entries"}):e.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Start documenting the journeynew entries will appear here in newest-first order."}):e.map(xt=>{const Ct=rt[xt.id],ht=Ct?xt.body:xt.body.length>280?`${xt.body.slice(0,280)}`:xt.body;return jsxRuntimeExports.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-primary-200 hover:shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:formatDate(xt.created_at)}),jsxRuntimeExports.jsx("h2",{className:"mt-1 text-lg font-semibold text-slate-900",children:xt.title})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>yt(xt),className:"font-medium text-primary-600 hover:text-primary-700",children:"Edit"}),jsxRuntimeExports.jsx("span",{className:"text-slate-300","aria-hidden":"true",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ct(xt.id),className:"font-medium text-red-600 hover:text-red-700",children:"Delete"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed text-slate-600 whitespace-pre-wrap",children:ht}),xt.body.length>280?jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm font-medium text-primary-600 hover:text-primary-700",onClick:()=>mt(xt.id),children:Ct?"Show less":"Read more"}):null]},xt.id)})})]})};function randomBytes(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return nodeCrypto.randomBytes(e)}catch{}throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative")}function genSaltSync(e,s){if(e=e||GENSALT_DEFAULT_LOG2_ROUNDS,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof s);e<4?e=4:e>31&&(e=31);var i=[];return i.push("$2b$"),e<10&&i.push("0"),i.push(e.toString()),i.push("$"),i.push(base64_encode(randomBytes(BCRYPT_SALT_LEN),BCRYPT_SALT_LEN)),i.join("")}function hashSync(e,s){if(typeof s>"u"&&(s=GENSALT_DEFAULT_LOG2_ROUNDS),typeof s=="number"&&(s=genSaltSync(s)),typeof e!="string"||typeof s!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof s);return _hash(e,s)}function safeStringCompare(e,s){for(var i=e.length^s.length,a=0;a<e.length;++a)i|=e.charCodeAt(a)^s.charCodeAt(a);return i===0}function compareSync(e,s){if(typeof e!="string"||typeof s!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof s);return s.length!==60?!1:safeStringCompare(hashSync(e,s.substring(0,s.length-31)),s)}typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"&&scheduler.postTask.bind(scheduler);function utf8Length(e){for(var s=0,i=0,a=0;a<e.length;++a)i=e.charCodeAt(a),i<128?s+=1:i<2048?s+=2:(i&64512)===55296&&(e.charCodeAt(a+1)&64512)===56320?(++a,s+=4):s+=3;return s}function utf8Array(e){for(var s=0,i,a,o=new Array(utf8Length(e)),c=0,h=e.length;c<h;++c)i=e.charCodeAt(c),i<128?o[s++]=i:i<2048?(o[s++]=i>>6|192,o[s++]=i&63|128):(i&64512)===55296&&((a=e.charCodeAt(c+1))&64512)===56320?(i=65536+((i&1023)<<10)+(a&1023),++c,o[s++]=i>>18|240,o[s++]=i>>12&63|128,o[s++]=i>>6&63|128,o[s++]=i&63|128):(o[s++]=i>>12|224,o[s++]=i>>6&63|128,o[s++]=i&63|128);return o}var BASE64_CODE="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),BASE64_INDEX=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function base64_encode(e,s){var i=0,a=[],o,c;if(s<=0||s>e.length)throw Error("Illegal len: "+s);for(;i<s;){if(o=e[i++]&255,a.push(BASE64_CODE[o>>2&63]),o=(o&3)<<4,i>=s){a.push(BASE64_CODE[o&63]);break}if(c=e[i++]&255,o|=c>>4&15,a.push(BASE64_CODE[o&63]),o=(c&15)<<2,i>=s){a.push(BASE64_CODE[o&63]);break}c=e[i++]&255,o|=c>>6&3,a.push(BASE64_CODE[o&63]),a.push(BASE64_CODE[c&63])}return a.join("")}function base64_decode(e,s){for(var i=0,a=e.length,o=0,c=[],h,j,b,_,$,at;i<a-1&&o<s&&(at=e.charCodeAt(i++),h=at<BASE64_INDEX.length?BASE64_INDEX[at]:-1,at=e.charCodeAt(i++),j=at<BASE64_INDEX.length?BASE64_INDEX[at]:-1,!(h==-1||j==-1||($=h<<2>>>0,$|=(j&48)>>4,c.push(String.fromCharCode($)),++o>=s||i>=a)||(at=e.charCodeAt(i++),b=at<BASE64_INDEX.length?BASE64_INDEX[at]:-1,b==-1)||($=(j&15)<<4>>>0,$|=(b&60)>>2,c.push(String.fromCharCode($)),++o>=s||i>=a)));)at=e.charCodeAt(i++),_=at<BASE64_INDEX.length?BASE64_INDEX[at]:-1,$=(b&3)<<6>>>0,$|=_,c.push(String.fromCharCode($)),++o;var rt=[];for(i=0;i<o;i++)rt.push(c[i].charCodeAt(0));return rt}var BCRYPT_SALT_LEN=16,GENSALT_DEFAULT_LOG2_ROUNDS=10,BLOWFISH_NUM_ROUNDS=16,MAX_EXECUTION_TIME=100,P_ORIG=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],S_ORIG=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],C_ORIG=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function _encipher(e,s,i,a){var o,c=e[s],h=e[s+1];return c^=i[0],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[1],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[2],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[3],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[4],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[5],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[6],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[7],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[8],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[9],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[10],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[11],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[12],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[13],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[14],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[15],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[16],e[s]=h^i[BLOWFISH_NUM_ROUNDS+1],e[s+1]=c,e}function _streamtoword(e,s){for(var i=0,a=0;i<4;++i)a=a<<8|e[s]&255,s=(s+1)%e.length;return{key:a,offp:s}}function _key(e,s,i){for(var a=0,o=[0,0],c=s.length,h=i.length,j,b=0;b<c;b++)j=_streamtoword(e,a),a=j.offp,s[b]=s[b]^j.key;for(b=0;b<c;b+=2)o=_encipher(o,0,s,i),s[b]=o[0],s[b+1]=o[1];for(b=0;b<h;b+=2)o=_encipher(o,0,s,i),i[b]=o[0],i[b+1]=o[1]}function _ekskey(e,s,i,a){for(var o=0,c=[0,0],h=i.length,j=a.length,b,_=0;_<h;_++)b=_streamtoword(s,o),o=b.offp,i[_]=i[_]^b.key;for(o=0,_=0;_<h;_+=2)b=_streamtoword(e,o),o=b.offp,c[0]^=b.key,b=_streamtoword(e,o),o=b.offp,c[1]^=b.key,c=_encipher(c,0,i,a),i[_]=c[0],i[_+1]=c[1];for(_=0;_<j;_+=2)b=_streamtoword(e,o),o=b.offp,c[0]^=b.key,b=_streamtoword(e,o),o=b.offp,c[1]^=b.key,c=_encipher(c,0,i,a),a[_]=c[0],a[_+1]=c[1]}function _crypt(e,s,i,a,o){var c=C_ORIG.slice(),h=c.length,j;if(i<4||i>31)throw j=Error("Illegal number of rounds (4-31): "+i),j;if(s.length!==BCRYPT_SALT_LEN)throw j=Error("Illegal salt length: "+s.length+" != "+BCRYPT_SALT_LEN),j;i=1<<i>>>0;var b,_,$=0,at;typeof Int32Array=="function"?(b=new Int32Array(P_ORIG),_=new Int32Array(S_ORIG)):(b=P_ORIG.slice(),_=S_ORIG.slice()),_ekskey(s,e,b,_);function rt(){if($<i)for(var ot=Date.now();$<i&&($=$+1,_key(e,b,_),_key(s,b,_),!(Date.now()-ot>MAX_EXECUTION_TIME)););else{for($=0;$<64;$++)for(at=0;at<h>>1;at++)_encipher(c,at<<1,b,_);var vt=[];for($=0;$<h;$++)vt.push((c[$]>>24&255)>>>0),vt.push((c[$]>>16&255)>>>0),vt.push((c[$]>>8&255)>>>0),vt.push((c[$]&255)>>>0);return vt}}for(var ut;;)if(typeof(ut=rt())<"u")return ut||[]}function _hash(e,s,i,a){var o;if(typeof e!="string"||typeof s!="string")throw o=Error("Invalid string / salt: Not a string"),o;var c,h;if(s.charAt(0)!=="$"||s.charAt(1)!=="2")throw o=Error("Invalid salt version: "+s.substring(0,2)),o;if(s.charAt(2)==="$")c="\0",h=3;else{if(c=s.charAt(2),c!=="a"&&c!=="b"&&c!=="y"||s.charAt(3)!=="$")throw o=Error("Invalid salt revision: "+s.substring(2,4)),o;h=4}if(s.charAt(h+2)>"$")throw o=Error("Missing salt rounds"),o;var j=parseInt(s.substring(h,h+1),10)*10,b=parseInt(s.substring(h+1,h+2),10),_=j+b,$=s.substring(h+3,h+25);e+=c>="a"?"\0":"";var at=utf8Array(e),rt=base64_decode($,BCRYPT_SALT_LEN);function ut(ot){var vt=[];return vt.push("$2"),c>="a"&&vt.push(c),vt.push("$"),_<10&&vt.push("0"),vt.push(_.toString()),vt.push("$"),vt.push(base64_encode(rt,rt.length)),vt.push(base64_encode(ot,C_ORIG.length*4-1)),vt.join("")}return ut(_crypt(at,rt,_))}const VALID_USERNAME="matt",PASSWORD_HASH="$2b$12$k06H0pTAlXNVyy3DMhdPU.8tb6ZBiIPIi4iX9/9.Vdg7yQZm2cDce",SESSION_STORAGE_KEY="estate_session_token",AuthContext=reactExports.createContext(void 0),generateSessionToken=()=>{var e;return typeof window<"u"&&((e=window.crypto)!=null&&e.randomUUID)?window.crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,10)}`},AuthProvider=({children:e})=>{const[s,i]=reactExports.useState(()=>{try{return localStorage.getItem(SESSION_STORAGE_KEY)}catch(h){return console.warn("Unable to read session from storage",h),null}}),a=reactExports.useCallback((h,j)=>{if(h.trim().toLowerCase()!==VALID_USERNAME)throw new Error("Invalid credentials");if(!compareSync(j,PASSWORD_HASH))throw new Error("Invalid credentials");const $=generateSessionToken();try{localStorage.setItem(SESSION_STORAGE_KEY,$)}catch(at){console.warn("Unable to persist session token",at)}i($)},[]),o=reactExports.useCallback(()=>{try{localStorage.removeItem(SESSION_STORAGE_KEY)}catch(h){console.warn("Unable to clear session token",h)}i(null)},[]),c=reactExports.useMemo(()=>({isAuthenticated:!!s,login:a,logout:o}),[a,o,s]);return jsxRuntimeExports.jsx(AuthContext.Provider,{value:c,children:e})},useAuth=()=>{const e=reactExports.useContext(AuthContext);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Login=()=>{const e=useNavigate(),{isAuthenticated:s,login:i}=useAuth(),[a,o]=reactExports.useState(""),[c,h]=reactExports.useState(""),[j,b]=reactExports.useState(null);reactExports.useEffect(()=>{s&&e("/dashboard",{replace:!0})},[s,e]);const _=$=>{$.preventDefault();try{i(a,c),e("/dashboard",{replace:!0})}catch(at){console.error(at),b("Invalid username or password. Please try again.")}};return jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-xl space-y-6 rounded-2xl bg-white p-8 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Sign in"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Access your estate planning tools and stay on top of upcoming tasks."})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:_,children:[j?jsxRuntimeExports.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:j}):null,jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-left",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-700",htmlFor:"username",children:"Username"}),jsxRuntimeExports.jsx("input",{id:"username",name:"username",type:"text",required:!0,autoComplete:"username",value:a,onChange:$=>{o($.target.value),j&&b(null)},className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:"Enter your username"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-left",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-700",htmlFor:"password",children:"Password"}),jsxRuntimeExports.jsx("input",{id:"password",type:"password",required:!0,autoComplete:"current-password",value:c,onChange:$=>{h($.target.value),j&&b(null)},className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:""})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full rounded-lg bg-primary-500 px-4 py-2 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-200 focus:ring-offset-2",children:"Continue"})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-slate-500",children:"Demo access only. Use the provided credentials to explore the app."})]})},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-xl space-y-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-primary-600",children:"404"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Page not found"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"The page you are looking for doesn't exist or has been moved."})]}),jsxRuntimeExports.jsx(Link,{to:"/dashboard",className:"inline-flex items-center justify-center rounded-lg bg-primary-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-600",children:"Go to dashboard"})]}),STORAGE_KEY="estate_setup_v1",loadEstateSetup=()=>{if(typeof window>"u")return null;try{const e=window.localStorage.getItem(STORAGE_KEY);if(!e)return null;const s=JSON.parse(e);return{dateOfDeath:s.dateOfDeath,lettersGranted:s.lettersGranted,firstPublication:s.firstPublication||null,estate1041Required:typeof s.estate1041Required=="boolean"?s.estate1041Required:!0}}catch(e){return console.warn("Unable to parse estate setup from storage",e),null}},saveEstateSetup=e=>{if(!(typeof window>"u"))try{window.localStorage.setItem(STORAGE_KEY,JSON.stringify(e))}catch(s){console.warn("Unable to persist estate setup",s)}},clearEstateSetup=()=>{if(!(typeof window>"u"))try{window.localStorage.removeItem(STORAGE_KEY)}catch(e){console.warn("Unable to clear estate setup",e)}},parseDateInput=e=>{const[s,i,a]=e.split("-").map(Number);return new Date(Date.UTC(s,i-1,a,12))},addMonths=(e,s)=>{const i=new Date(e.getTime()),a=i.getUTCDate();i.setUTCDate(1),i.setUTCMonth(i.getUTCMonth()+s);const o=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth()+1,0)).getUTCDate();return i.setUTCDate(Math.min(a,o)),i},isSetupComplete=e=>!!(e!=null&&e.dateOfDeath&&(e!=null&&e.lettersGranted)),prepareSetupDates=e=>({dateOfDeath:parseDateInput(e.dateOfDeath),lettersGranted:parseDateInput(e.lettersGranted),firstPublication:e.firstPublication?parseDateInput(e.firstPublication):null}),nextApril15=e=>{const s=e.getUTCFullYear()+1;return new Date(Date.UTC(s,3,15,12))},computeDeadlines=e=>{const{dateOfDeath:s,lettersGranted:i,firstPublication:a}=prepareSetupDates(e),o=addMonths(s,9),c=addMonths(s,3),h=[{key:"noticeToHeirs",title:"Notice to heirs",dueDate:addMonths(i,3),tag:"Legal",description:"Serve statutory notice to heirs; file certification within 10 days after notices are sent."},{key:"inventory",title:"File estate inventory",dueDate:addMonths(s,9),tag:"Inventory"},{key:"inheritanceTax",title:"PA inheritance tax return (REV-1500)",dueDate:o,tag:"Tax",description:`Standard payment deadline. Early payment discount window ends ${c.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}.`},{key:"final1040",title:"Final Form 1040",dueDate:nextApril15(s),tag:"Tax"},{key:"estate1041",title:"Estate Form 1041",dueDate:e.estate1041Required?nextApril15(s):null,tag:"Tax",optional:!0,description:"Confirm whether an estate income tax return is required. Mark as N/A if the estate has no filing obligation."},{key:"creditorCheck",title:"Creditor claims check",dueDate:a?addMonths(a,12):null,tag:"Administrative",description:a?void 0:"Enter the first publication date to calculate the creditor claim deadline."},{key:"statusReport",title:"Status report to court",dueDate:addMonths(s,24),tag:"Administrative"}];return h.push({key:"inheritanceTaxEarlyWindow",title:"REV-1500 early payment window ends",dueDate:c,tag:"Tax",description:"Last day to submit payment for the 5% Pennsylvania discount."}),h},formatDeadlineDate=e=>e?e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"N/A",EXPORT_VERSION=2,blobToDataUrl=e=>new Promise((s,i)=>{const a=new FileReader;a.onload=()=>{typeof a.result=="string"?s(a.result):i(new Error("Unable to read file data"))},a.onerror=()=>i(a.error??new Error("Unable to read file data")),a.readAsDataURL(e)}),dataUrlToBlob=e=>{const[s,i]=e.split(",");if(!s||!i)throw new Error("Invalid file data");const a=s.indexOf(":"),o=s.indexOf(";"),c=a!==-1&&o!==-1?s.slice(a+1,o):"application/octet-stream";if(s.includes(";base64")){const h=atob(i),j=new Uint8Array(h.length);for(let b=0;b<h.length;b+=1)j[b]=h.charCodeAt(b);return new Blob([j],{type:c})}return new Blob([decodeURIComponent(i)],{type:c})},exportWorkspaceData=async()=>{const[e,s,i]=await Promise.all([db.tasks.toArray(),db.documents.toArray(),db.journalEntries.toArray()]),a=await Promise.all(s.map(async o=>({id:o.id,estateId:o.estateId,title:o.title,tags:o.tags,taskId:o.taskId,contentType:o.contentType,size:o.size,created_at:o.created_at,fileData:await blobToDataUrl(o.file)})));return{version:EXPORT_VERSION,generatedAt:new Date().toISOString(),tasks:e.map(o=>({...o})),documents:a,journalEntries:i.map(o=>({...o})),estateSetup:loadEstateSetup()}},importWorkspaceData=async e=>{if(!e||typeof e!="object")throw new Error("Invalid workspace data");if(e.version>EXPORT_VERSION)throw new Error("Unsupported export version");const s=e.documents.map(o=>{const c=dataUrlToBlob(o.fileData);return{id:o.id,estateId:o.estateId??"mother",title:o.title,tags:o.tags,taskId:o.taskId,contentType:o.contentType,size:c.size,file:c,created_at:o.created_at}}),i=e.tasks.map(o=>({...o,estateId:o.estateId??"mother"})),a=e.journalEntries.map(o=>({...o,estateId:o.estateId??"mother"}));await db.transaction("rw",db.tasks,db.documents,db.journalEntries,async()=>{await Promise.all([db.tasks.clear(),db.documents.clear(),db.journalEntries.clear()]),await db.tasks.bulkAdd(i),s.length>0&&await db.documents.bulkAdd(s),a.length>0&&await db.journalEntries.bulkAdd(a)}),e.estateSetup?saveEstateSetup(e.estateSetup):clearEstateSetup()},addDays$1=(e,s)=>{const i=new Date(e);return i.setDate(i.getDate()+s),i},createDemoDataset=()=>{const e=new Date,s=b=>b.toISOString(),i={dateOfDeath:s(addDays$1(e,-180)).slice(0,10),lettersGranted:s(addDays$1(e,-150)).slice(0,10),firstPublication:s(addDays$1(e,-140)).slice(0,10),estate1041Required:!0},a=[{id:"task-demo-letters",estateId:"mother",title:"Share letters testamentary with advisors",description:"Send certified copies of the letters testamentary to the investment advisor and accountant so they can speak with custodians on behalf of the estate.",due_date:s(addDays$1(e,3)),status:"in-progress",priority:"med",tags:["Legal","Administrative"],docIds:["doc-demo-letters"],created_at:s(addDays$1(e,-20)),updated_at:s(addDays$1(e,-2))},{id:"task-demo-inventory",estateId:"mother",title:"Compile preliminary inventory of assets",description:"Collect latest statements and valuations for cash accounts, securities, real estate, and personal property to inform the court inventory.",due_date:s(addDays$1(e,-4)),status:"not-started",priority:"high",tags:["Inventory"],docIds:["doc-demo-inventory"],created_at:s(addDays$1(e,-28)),updated_at:s(addDays$1(e,-10))},{id:"task-demo-tax",estateId:"mother",title:"Schedule estimated tax payments",description:"Coordinate with the accountant to project fiduciary income tax and ensure estimated payments are calendared ahead of Form 1041 deadlines.",due_date:s(addDays$1(e,18)),status:"not-started",priority:"med",tags:["Tax"],docIds:[],created_at:s(addDays$1(e,-16)),updated_at:s(addDays$1(e,-16))},{id:"task-demo-distributions",estateId:"mother",title:"Document interim family meeting",description:"Summarize distribution priorities, questions, and follow-ups after the latest family status meeting.",due_date:s(addDays$1(e,32)),status:"done",priority:"low",tags:["Administrative"],docIds:[],created_at:s(addDays$1(e,-8)),updated_at:s(addDays$1(e,-1))}],o=new Blob(["Accountant and investment advisor copied on letters testamentary. Include authority to transact with custodians for all brokerage accounts. Ensure copies remain on file with date stamps."],{type:"text/plain"}),c=new Blob(["Preliminary asset inventory drafted. Outstanding: December bank statements, updated valuation for lake house, personal property photo catalog."],{type:"text/plain"}),h=[{id:"doc-demo-letters",estateId:"mother",title:"Letters testamentary summary",tags:["Legal"],taskId:"task-demo-letters",contentType:"text/plain",size:o.size,file:o,created_at:s(addDays$1(e,-19))},{id:"doc-demo-inventory",estateId:"mother",title:"Inventory working notes",tags:["Inventory"],taskId:"task-demo-inventory",contentType:"text/plain",size:c.size,file:c,created_at:s(addDays$1(e,-15))}],j=[{id:"journal-demo-weekly",estateId:"mother",title:"Weekly status recap",body:"Met with the family to review creditor notices and shared the updated cash flow summary. Need to confirm outstanding medical reimbursements and finalize inventory draft next week.",created_at:s(addDays$1(e,-6))},{id:"journal-demo-notes",estateId:"mother",title:"Questions for counsel",body:"Clarify whether ancillary probate is required for the Colorado property and confirm plan for distributing specific bequests listed in the memorandum.",created_at:s(addDays$1(e,-2))}];return{estateSetup:i,tasks:a,documents:h,journalEntries:j}},resetDemoData=async()=>{const{estateSetup:e,tasks:s,documents:i,journalEntries:a}=createDemoDataset();await db.transaction("rw",db.tasks,db.documents,db.journalEntries,async()=>{await Promise.all([db.tasks.clear(),db.documents.clear(),db.journalEntries.clear()]),await db.tasks.bulkAdd(s),await db.documents.bulkAdd(i),await db.journalEntries.bulkAdd(a)}),saveEstateSetup(e),setActiveEstateId("mother")},toEstateSetup=e=>({dateOfDeath:e.dateOfDeath,lettersGranted:e.lettersGranted,firstPublication:e.firstPublication?e.firstPublication:null,estate1041Required:e.estate1041Required}),defaultFormState={dateOfDeath:"",lettersGranted:"",firstPublication:"",estate1041Required:!0},SAMPLE_PLAN=JSON.stringify({seedVersion:"v2",profiles:[{id:"mother",label:"Mother Estate",county:"Wake",decedentName:"Jane Doe",dodISO:"2024-01-01",lettersISO:null,firstPublicationISO:null}],seedTasks:[{estateId:"mother",title:"Notify heirs",description:"Contact heirs within 30 days.",tags:["communication"],dueISO:null,status:"not-started",priority:"med"}],guidance:[{estateId:"mother",title:"Get started",body:"Review the will and notify key contacts.",links:[{label:"Clerk of Court",url:"https://www.nccourts.gov/"}]}]},null,2),formatPlanDate=e=>{if(!e)return"Not set";const s=new Date(e);return Number.isNaN(s.valueOf())?e:s.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},Profile=()=>{const e=useNavigate(),[s,i]=reactExports.useState(defaultFormState),[a,o]=reactExports.useState(null),[c,h]=reactExports.useState(null),[j,b]=reactExports.useState(!1),[_,$]=reactExports.useState(!1),[at,rt]=reactExports.useState(null),[ut,ot]=reactExports.useState(null),[vt,bt]=reactExports.useState(null),[et,nt]=reactExports.useState(!1),[st,gt]=reactExports.useState(!1),[lt,yt]=reactExports.useState(!1),ct=reactExports.useRef(null),{activeEstateId:mt,estateProfiles:xt,setActiveEstateId:Ct,refreshEstateProfiles:ht}=useEstate(),[wt,jt]=reactExports.useState(!1),[Xt,Bt]=reactExports.useState(""),[Wt,Ut]=reactExports.useState(null),[$t,kt]=reactExports.useState(!1),[Ft,Gt]=reactExports.useState(null),[At,it]=reactExports.useState(()=>loadSeedVersion()),dt=reactExports.useCallback(()=>{const pt=loadEstateSetup();i(pt?{dateOfDeath:pt.dateOfDeath,lettersGranted:pt.lettersGranted,firstPublication:pt.firstPublication||"",estate1041Required:pt.estate1041Required}:defaultFormState)},[]);reactExports.useEffect(()=>{dt()},[dt]),reactExports.useEffect(()=>{if(!Ft||typeof window>"u")return;const pt=window.setTimeout(()=>Gt(null),3500);return()=>window.clearTimeout(pt)},[Ft]);const _t=reactExports.useMemo(()=>{const pt=toEstateSetup(s);return isSetupComplete(pt)?pt:null},[s]),Tt=reactExports.useMemo(()=>_t?computeDeadlines(_t):[],[_t]),Dt=pt=>{const{name:Rt,type:zt}=pt.target,Kt=zt==="checkbox"?pt.target.checked:pt.target.value;i(hn=>({...hn,[Rt]:Kt})),o(null),h(null),rt(null),ot(null),bt(null)},It=pt=>{saveEstateSetup(pt),o("Saved estate profile settings."),h(null)},Lt=pt=>{if(pt.preventDefault(),!s.dateOfDeath||!s.lettersGranted){h("Date of death and letters granted date are required.");return}b(!0);try{It(toEstateSetup(s))}finally{b(!1)}},on=async()=>{if(rt(null),!s.dateOfDeath||!s.lettersGranted){h("Provide required dates before generating the checklist.");return}const pt=toEstateSetup(s);It(pt);const Rt=computeDeadlines(pt).filter(zt=>zt.dueDate);if(Rt.length===0){rt("Nothing to create yetadd more dates above.");return}$(!0);try{const zt=await db.tasks.where("estateId").equals(mt).toArray(),Kt=new Set(zt.map(En=>En.title.toLowerCase()));let hn=0,Sn=0;for(const En of Rt){if(Kt.has(En.title.toLowerCase())){Sn+=1;continue}if(!En.dueDate){Sn+=1;continue}await createTask({estateId:mt,title:En.title,description:En.description??"",due_date:En.dueDate.toISOString(),status:"not-started",priority:"med",tags:[En.tag],docIds:[]}),hn+=1,Kt.add(En.title.toLowerCase())}rt(hn>0?`Generated ${hn} task${hn===1?"":"s"}${Sn>0?` (skipped ${Sn} existing reminder${Sn===1?"":"s"})`:""}.`:"All default tasks already exist."),h(null)}catch(zt){console.error(zt),h("Unable to generate checklist tasks.")}finally{$(!1)}},vn=async()=>{ot(null),bt(null),nt(!0);try{const pt=await exportWorkspaceData(),Rt=new Blob([JSON.stringify(pt,null,2)],{type:"application/json"}),zt=URL.createObjectURL(Rt),Kt=document.createElement("a"),hn=new Date().toISOString().replace(/[:]/g,"-").split(".")[0];Kt.href=zt,Kt.download=`estate-workspace-${hn}.json`,document.body.appendChild(Kt),Kt.click(),Kt.remove(),URL.revokeObjectURL(zt),ot("Exported workspace data. Check your downloads folder for the JSON file.")}catch(pt){console.error(pt),bt("Unable to export workspace data.")}finally{nt(!1)}},un=()=>{var pt;ot(null),bt(null),(pt=ct.current)==null||pt.click()},kn=async pt=>{var zt;const Rt=((zt=pt.target.files)==null?void 0:zt[0])??null;if(pt.target.value="",!!Rt){gt(!0),ot(null),bt(null);try{const Kt=await Rt.text(),hn=JSON.parse(Kt);await importWorkspaceData(hn),dt(),o("Loaded estate profile from imported data."),rt(null),h(null),ot("Imported workspace data successfully.")}catch(Kt){console.error(Kt),bt("Unable to import data. Confirm the file was exported from Estate.")}finally{gt(!1)}}},jn=async()=>{yt(!0),ot(null),bt(null);try{await resetDemoData(),dt(),o("Loaded demo estate profile."),rt(null),h(null),ot("Demo data restored. Sample tasks, documents, and journal entries are ready to explore.")}catch(pt){console.error(pt),bt("Unable to reset demo data.")}finally{yt(!1)}},Rn=()=>{Ut(null),Bt(""),jt(!0)},nn=()=>{$t||(jt(!1),Bt(""),Ut(null))},rn=()=>{if(!Xt.trim()){Ut("Paste the plan JSON before importing.");return}kt(!0),Ut(null);try{const pt=coercePlan(Xt),Rt=PlanV2.safeParse(pt);if(!Rt.success){const hn=Rt.error.issues.slice(0,5).map(Sn=>` ${Sn.path.join(".")||"(root)"}  ${Sn.message}`).join(`
`);throw new Error(`Invalid plan JSON:
${hn}`)}const zt=Rt.data,Kt=Object.fromEntries(zt.profiles.map(hn=>[hn.id,hn]));if(saveEstateProfiles(Kt),saveSeedVersion(zt.seedVersion),typeof window<"u"){const hn=En=>zt.guidance.filter(Qt=>Qt.estateId===En);for(const En of zt.profiles){const Qt=hn(En.id);window.localStorage.setItem(`guidance:${En.id}`,JSON.stringify(Qt));const In=zt.seedTasks.filter(Dn=>Dn.estateId===En.id).map(({estateId:Dn,...nr})=>nr);window.localStorage.setItem(`seedTasks:${En.id}`,JSON.stringify(In))}window.localStorage.getItem("estateActiveId")||window.localStorage.setItem("estateActiveId",zt.profiles[0].id)}reseedFromPlan(zt),notifyPlanUpdated(),ht(),it(zt.seedVersion),o(null),rt(null),h(null),ot(null),bt(null),Gt("Plan imported"),jt(!1),Bt(""),Ut(null),e("/tasks")}catch(pt){console.error(pt);const Rt=pt instanceof Error&&pt.message?pt.message:"Unable to import plan";Ut(Rt)}finally{kt(!1)}};return jsxRuntimeExports.jsxs("section",{className:"space-y-10",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-widest text-primary-600",children:"Workspace"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Profile & settings"}),jsxRuntimeExports.jsx("p",{className:"max-w-2xl text-sm text-slate-500",children:"Capture key docket dates to personalize reminders and manage local data for the Estate demo workspace."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-5",children:[jsxRuntimeExports.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Estate plans"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Switch between estates to view tailored tasks, documents, and guidance."})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Rn,className:"rounded-full border border-primary-200 bg-white px-4 py-2 text-sm font-semibold text-primary-700 transition hover:border-primary-300 hover:bg-primary-50",children:"Import plan"})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:ESTATE_IDS.map(pt=>{const Rt=xt[pt],zt=pt===mt;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Ct(pt),"aria-pressed":zt,className:`rounded-2xl border px-4 py-4 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-400 ${zt?"border-primary-400 bg-primary-50 shadow-sm shadow-primary-100":"border-slate-200 bg-white hover:border-primary-200 hover:bg-primary-50/70"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-slate-700",children:Rt.label}),zt?jsxRuntimeExports.jsx("span",{className:"rounded-full bg-primary-500 px-2 py-0.5 text-xs font-semibold text-white",children:"Active"}):null]}),jsxRuntimeExports.jsxs("dl",{className:"mt-3 space-y-1 text-xs text-slate-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"Decedent"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:Rt.decedentName||"Not set"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"County"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:Rt.county?`${Rt.county} County`:"Not set"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"Date of death"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:formatPlanDate(Rt.dodISO)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"Letters"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:formatPlanDate(Rt.lettersISO)})]})]})]},pt)})}),At?jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Last imported seed version"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-slate-700",children:At})]}):null]}),jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Estate timeline"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Enter milestone dates to unlock recommended reminders and populate the checklist with suggested tasks."})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-6",onSubmit:Lt,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"dateOfDeath",className:"text-sm font-semibold text-slate-700",children:"Date of death"}),jsxRuntimeExports.jsx("input",{id:"dateOfDeath",name:"dateOfDeath",type:"date",required:!0,value:s.dateOfDeath,onChange:Dt,className:"w-full rounded-2xl border border-slate-200 px-4 py-2.5 text-sm shadow-sm transition focus:border-primary-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"lettersGranted",className:"text-sm font-semibold text-slate-700",children:"Letters granted"}),jsxRuntimeExports.jsx("input",{id:"lettersGranted",name:"lettersGranted",type:"date",required:!0,value:s.lettersGranted,onChange:Dt,className:"w-full rounded-2xl border border-slate-200 px-4 py-2.5 text-sm shadow-sm transition focus:border-primary-400"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"firstPublication",className:"text-sm font-semibold text-slate-700",children:"First publication (optional)"}),jsxRuntimeExports.jsx("input",{id:"firstPublication",name:"firstPublication",type:"date",value:s.firstPublication,onChange:Dt,className:"w-full rounded-2xl border border-slate-200 px-4 py-2.5 text-sm shadow-sm transition focus:border-primary-400"})]}),jsxRuntimeExports.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/70 p-4",children:jsxRuntimeExports.jsxs("label",{htmlFor:"estate1041Required",className:"flex items-start gap-3 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{id:"estate1041Required",name:"estate1041Required",type:"checkbox",checked:s.estate1041Required,onChange:Dt,className:"mt-1 h-4 w-4 rounded border-slate-300 text-primary-600"}),jsxRuntimeExports.jsxs("span",{children:["Estate expects to file Form 1041",jsxRuntimeExports.jsx("span",{className:"mt-1 block text-xs text-slate-500",children:"Uncheck if the estate has no fiduciary income tax filing obligation."})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:j,className:"rounded-full bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:j?"Saving":"Save setup"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:on,disabled:_,className:"rounded-full border border-primary-200 bg-primary-50 px-5 py-2.5 text-sm font-semibold text-primary-700 transition hover:border-primary-300 hover:text-primary-800 disabled:cursor-not-allowed disabled:opacity-70",children:_?"Creating":"Generate default checklist"})]}),a&&jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-600",children:a}),at&&jsxRuntimeExports.jsx("p",{className:"text-sm text-primary-700",children:at}),c&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:c})]})]}),jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Workspace data"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Export your tasks, document metadata and files, journal entries, and estate profileor restore the built-in demo content."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"rounded-2xl bg-slate-50/80 p-4 text-sm text-slate-600",children:"Exports are saved as a JSON file that you can re-import later. Imports replace the data currently stored on this device."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:vn,disabled:et,className:"rounded-full bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:et?"Preparing export":"Export workspace"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:un,disabled:st,className:"rounded-full border border-primary-200 bg-white px-5 py-2.5 text-sm font-semibold text-primary-700 transition hover:border-primary-300 hover:bg-primary-50 disabled:cursor-not-allowed disabled:opacity-70",children:st?"Importing":"Import from file"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:jn,disabled:lt,className:"rounded-full border border-slate-300 bg-slate-50 px-5 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-70",children:lt?"Restoring":"Reset demo data"})]}),ut&&jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-600",children:ut}),vt&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:vt})]}),jsxRuntimeExports.jsx("input",{ref:ct,type:"file",accept:"application/json",className:"hidden",onChange:kn})]})]}),jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Suggested due dates"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Deadlines adjust automatically based on the dates provided. Generate the checklist to add them as tasks with workstream tags."})]}),Tt.length===0?jsxRuntimeExports.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50/80 p-5 text-sm text-slate-500",children:"Add the date of death and letters granted to preview recommended deadlines."}):jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:Tt.map(pt=>jsxRuntimeExports.jsxs("li",{className:"rounded-2xl border border-slate-200 p-4 text-sm shadow-sm transition hover:border-primary-200/70",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-slate-900",children:pt.title}),jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-primary-600",children:pt.tag})]}),jsxRuntimeExports.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${pt.dueDate?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-500"}`,children:formatDeadlineDate(pt.dueDate)})]}),pt.description&&jsxRuntimeExports.jsx("p",{className:"mt-3 text-xs leading-relaxed text-slate-500",children:pt.description}),pt.optional&&!pt.dueDate&&jsxRuntimeExports.jsx("p",{className:"mt-3 text-xs font-medium text-amber-600",children:"Marked as not applicable."})]},pt.key))})]})]}),wt?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-slate-900/60 px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-6 shadow-xl",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4 space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Import estate plan"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Paste the JSON configuration to load profiles, seeded tasks, documents, and guidance into this device."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-xs font-semibold text-primary-600 transition hover:text-primary-700",onClick:()=>{Bt(SAMPLE_PLAN),Ut(null)},disabled:$t,children:"Show sample JSON"})}),jsxRuntimeExports.jsx("textarea",{value:Xt,onChange:pt=>{Bt(pt.target.value),Ut(null)},rows:10,className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 shadow-inner focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:'{"seedVersion":"v2","estateProfiles":{...}}'}),Wt?jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:Wt}):null,jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:nn,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-slate-100",disabled:$t,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:rn,disabled:$t,className:"rounded-full bg-primary-600 px-5 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:$t?"Importing":"Import"})]})]})]})}):null,Ft?jsxRuntimeExports.jsx("div",{className:"fixed bottom-24 left-1/2 z-30 -translate-x-1/2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg",children:Ft}):null]})},priorityStyles={low:"bg-emerald-100 text-emerald-700",med:"bg-amber-100 text-amber-700",high:"bg-rose-100 text-rose-700"},statusLabels={"not-started":"Not started","in-progress":"In progress",done:"Completed"},startOfToday=()=>{const e=new Date;return e.setHours(0,0,0,0),e},addDays=(e,s)=>{const i=new Date(e);return i.setDate(i.getDate()+s),i},toLocalDateInput=e=>{if(!e)return"";const s=new Date(e),i=s.getFullYear(),a=`${s.getMonth()+1}`.padStart(2,"0"),o=`${s.getDate()}`.padStart(2,"0");return`${i}-${a}-${o}`},parseList=e=>e.split(",").map(s=>s.trim()).filter(Boolean),formatDueDate=e=>e?new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"No due date",formatBytes=e=>{if(!e)return"0 B";const s=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1),a=e/1024**i;return`${i===0?a.toFixed(0):a.toFixed(1)} ${s[i]}`},toDateOnly=e=>{if(!e)return null;const s=new Date(e);return Number.isNaN(s.valueOf())?null:s.toISOString().split("T")[0]},emptyFormState={title:"",description:"",due_date:"",status:"not-started",priority:"med",tags:""},createFormState=e=>e?{title:e.title,description:e.description,due_date:toLocalDateInput(e.due_date),status:e.status,priority:e.priority,tags:e.tags.join(", ")}:{...emptyFormState},Tasks=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(!0),[o,c]=reactExports.useState(null),[h,j]=reactExports.useState(!1),[b,_]=reactExports.useState("all"),[$,at]=reactExports.useState(!1),[rt,ut]=reactExports.useState({...emptyFormState}),[ot,vt]=reactExports.useState(!1),[bt,et]=reactExports.useState([]),[nt,st]=reactExports.useState(""),[gt,lt]=reactExports.useState(!1),[yt,ct]=reactExports.useState(null),[mt,xt]=reactExports.useState([]),[Ct,ht]=reactExports.useState([]),wt=useNavigate(),jt=useLocation(),{taskId:Xt}=useParams(),{activeEstateId:Bt}=useEstate(),Wt=e.find(pt=>pt.id===Xt)||null,Ut=reactExports.useCallback(()=>{xt(loadSeedTasks(Bt)),ht(normalizeGuidanceEntries(loadSeedGuidance(Bt)))},[Bt]);reactExports.useEffect(()=>{Ut();const pt=zt=>{if(!zt.key){Ut();return}(zt.key==="seedVersion"||zt.key.startsWith("seedTasks:")||zt.key.startsWith("tasks:")||zt.key.startsWith("guidance:"))&&Ut()},Rt=()=>{Ut()};return window.addEventListener("storage",pt),window.addEventListener(ESTATE_PLAN_UPDATED_EVENT,Rt),()=>{window.removeEventListener("storage",pt),window.removeEventListener(ESTATE_PLAN_UPDATED_EVENT,Rt)}},[Ut]),reactExports.useEffect(()=>{let pt=!0;(async()=>{try{await seedTasksIfEmpty()}catch(Kt){if(console.error(Kt),!pt)return;c("Unable to load tasks"),a(!1)}})();const zt=liveQuery(()=>db.tasks.where("estateId").equals(Bt).toArray()).subscribe({next:Kt=>{if(!pt)return;const hn=[...Kt].sort((Sn,En)=>new Date(Sn.due_date).getTime()-new Date(En.due_date).getTime());s(hn),a(!1)},error:Kt=>{console.error(Kt),pt&&(c("Unable to load tasks"),a(!1))}});return()=>{pt=!1,zt.unsubscribe()}},[Bt]),reactExports.useEffect(()=>{let pt=!0;const Rt=liveQuery(()=>db.documents.where("estateId").equals(Bt).toArray()).subscribe({next:zt=>{if(!pt)return;const Kt=[...zt].sort((hn,Sn)=>new Date(Sn.created_at).getTime()-new Date(hn.created_at).getTime());et(Kt)},error:zt=>{console.error(zt),pt&&c("Unable to load documents")}});return()=>{pt=!1,Rt.unsubscribe()}},[Bt]),reactExports.useEffect(()=>{!Xt||e.some(pt=>pt.id===Xt)||wt("/tasks",{replace:!0})},[Xt,e,wt]),reactExports.useEffect(()=>{const pt=jt.state;pt!=null&&pt.startCreate&&(c(null),ut({...emptyFormState}),at(!0),wt(jt.pathname+jt.search,{replace:!0}))},[jt,wt]);const $t=reactExports.useMemo(()=>{const pt=new Set;return e.forEach(Rt=>Rt.tags.forEach(zt=>pt.add(zt))),Array.from(pt).sort((Rt,zt)=>Rt.localeCompare(zt))},[e]),kt=reactExports.useMemo(()=>e.filter(pt=>!(!h&&pt.status==="done"||b!=="all"&&!pt.tags.includes(b))),[e,h,b]),Ft=reactExports.useMemo(()=>{if(!Wt)return[];const pt=new Set(Wt.docIds);return bt.filter(Rt=>Rt.taskId===Wt.id||pt.has(Rt.id))},[bt,Wt]),Gt=reactExports.useMemo(()=>{const pt=new Map;return Ct.forEach(Rt=>{pt.set(Rt.id,Rt)}),pt},[Ct]),At=reactExports.useMemo(()=>{if(!Wt)return null;const pt=Wt.title.trim().toLowerCase(),Rt=mt.filter(Kt=>Kt.title.trim().toLowerCase()===pt);if(Rt.length===0)return null;const zt=toDateOnly(Wt.due_date);if(zt){const Kt=Rt.find(hn=>toDateOnly(hn.dueISO)===zt);if(Kt)return Kt}return Rt[0]},[Wt,mt]),it=reactExports.useMemo(()=>At!=null&&At.linkTo?At.linkTo.filter(pt=>pt.type==="guide").map(pt=>{const Rt=Gt.get(pt.value);return Rt?{id:pt.value,title:Rt.title,summary:Rt.summary??Rt.notes[0],anchor:Rt.anchor??guidanceAnchorForId(Rt.id)}:{id:pt.value,title:pt.value,summary:void 0,anchor:guidanceAnchorForId(pt.value)}}):[],[At,Gt]),dt=reactExports.useMemo(()=>bt.filter(pt=>!pt.taskId),[bt]),_t=pt=>{wt(`/tasks/${pt}`)},Tt=pt=>{const{name:Rt,value:zt}=pt.target;ut(Kt=>({...Kt,[Rt]:zt}))},Dt=()=>{ut({...emptyFormState}),vt(!1)},It=async pt=>{if(pt.preventDefault(),!rt.title||!rt.due_date){c("Title and due date are required");return}c(null),vt(!0);try{const Rt=await createTask({estateId:Bt,title:rt.title,description:rt.description,due_date:rt.due_date,status:rt.status,priority:rt.priority,tags:parseList(rt.tags)});Dt(),at(!1),wt(`/tasks/${Rt}`)}catch(Rt){console.error(Rt),c("Unable to save task"),vt(!1)}},Lt=async pt=>{if(pt.preventDefault(),!!Wt){if(!rt.title||!rt.due_date){c("Title and due date are required");return}c(null),vt(!0);try{await updateTask(Wt.id,{title:rt.title,description:rt.description,due_date:rt.due_date,status:rt.status,priority:rt.priority,tags:parseList(rt.tags)}),vt(!1)}catch(Rt){console.error(Rt),c("Unable to update task"),vt(!1)}}},on=async pt=>{c(null);try{await deleteTask(pt),Xt===pt&&wt("/tasks")}catch(Rt){console.error(Rt),c("Unable to delete task")}},vn=async pt=>{c(null);try{await updateTask(pt.id,{status:"done"})}catch(Rt){console.error(Rt),c("Unable to update task status")}},un=async pt=>{if(pt.preventDefault(),!(!Wt||!nt)){c(null),lt(!0);try{await linkDocumentToTask(nt,Wt.id),st("")}catch(Rt){console.error(Rt),c("Unable to link document")}finally{lt(!1)}}},kn=async pt=>{c(null),ct(pt);try{await unlinkDocumentFromTask(pt)}catch(Rt){console.error(Rt),c("Unable to unlink document")}finally{ct(null)}},jn=()=>{Dt(),at(!0),wt("/tasks")},Rn=()=>{Wt&&(ut(createFormState(Wt)),at(!1))};reactExports.useEffect(()=>{ut(Wt?createFormState(Wt):{...emptyFormState}),st("")},[Wt]);const nn=reactExports.useMemo(()=>startOfToday(),[]),rn=reactExports.useMemo(()=>addDays(nn,7),[nn]);return jsxRuntimeExports.jsxs("section",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Tasks"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Track outstanding deliverables, collaborate with your team, and keep estate planning work moving."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"lg:w-1/2",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:jn,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-500",children:"New Task"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>j(pt=>!pt),className:`rounded-full border px-4 py-2 text-sm font-medium transition ${h?"border-primary-200 bg-primary-50 text-primary-700":"border-slate-200 text-slate-600 hover:border-primary-200 hover:text-primary-600"}`,children:h?"Hide Completed":"Show Completed"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx("label",{htmlFor:"tag-filter",className:"font-medium",children:"Tag"}),jsxRuntimeExports.jsxs("select",{id:"tag-filter",value:b,onChange:pt=>_(pt.target.value),className:"rounded-full border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All"}),$t.map(pt=>jsxRuntimeExports.jsx("option",{value:pt,children:pt},pt))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[i&&jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Loading tasks"}),o&&!i&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:o}),!i&&kt.length===0&&jsxRuntimeExports.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 p-6 text-sm text-slate-500",children:"No tasks match the selected filters yet."}),kt.map(pt=>{const Rt=new Date(pt.due_date),zt=pt.status!=="done"&&Rt<nn,Kt=!zt&&pt.status!=="done"&&Rt<=rn;return jsxRuntimeExports.jsx("article",{className:`rounded-2xl border p-5 shadow-sm transition hover:border-primary-200 hover:shadow-md ${Xt===pt.id?"border-primary-300 bg-primary-50/40":"border-slate-200 bg-white"}`,children:jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>_t(pt.id),className:"flex w-full flex-col gap-3 text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:pt.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:statusLabels[pt.status]})]}),jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${priorityStyles[pt.priority]}`,children:[pt.priority==="med"?"Medium":pt.priority==="low"?"Low":"High"," priority"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium",children:[jsxRuntimeExports.jsxs("span",{className:`rounded-full px-3 py-1 ${zt?"bg-rose-100 text-rose-700":Kt?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:["Due ",formatDueDate(pt.due_date)]}),pt.tags.map(hn=>jsxRuntimeExports.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-slate-600",children:["#",hn]},hn))]})]})},pt.id)})]})]}),jsxRuntimeExports.jsx("div",{className:"lg:w-1/2",children:jsxRuntimeExports.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:$?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Create task"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Add a new deliverable to your estate planning pipeline."})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:It,children:[jsxRuntimeExports.jsx(TaskFormFields,{formState:rt,submitting:ot,onChange:Tt}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:ot,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:ot?"Saving":"Save task"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Dt(),at(!1)},className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Cancel"})]})]})]}):Wt?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:Wt.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:["Due ",formatDueDate(Wt.due_date)]})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>on(Wt.id),className:"text-sm font-medium text-rose-600 transition hover:text-rose-500",children:"Delete"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-medium",children:[jsxRuntimeExports.jsxs("span",{className:`rounded-full px-3 py-1 ${priorityStyles[Wt.priority]}`,children:[Wt.priority==="med"?"Medium":Wt.priority==="low"?"Low":"High"," ","priority"]}),jsxRuntimeExports.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-slate-600",children:statusLabels[Wt.status]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-600",children:Wt.description||"No description provided yet."}),Wt.tags.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 text-xs font-medium text-slate-500",children:Wt.tags.map(pt=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{_(pt),wt("/tasks")},className:`rounded-full border px-3 py-1 transition hover:border-primary-200 hover:text-primary-600 ${b===pt?"border-primary-300 bg-primary-50 text-primary-700":"border-slate-200"}`,children:["#",pt]},pt))}),it.length>0?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Guidance"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:it.map(pt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Link,{to:`/guidance#${pt.anchor}`,className:"flex items-center justify-between rounded-2xl border border-primary-200 bg-primary-50 px-4 py-3 text-sm font-semibold text-primary-700 transition hover:border-primary-300 hover:bg-primary-100",children:[jsxRuntimeExports.jsxs("span",{className:"flex-1 text-left",children:[pt.title,pt.summary?jsxRuntimeExports.jsx("span",{className:"mt-1 block text-xs font-normal text-primary-600/90",children:pt.summary}):null]}),jsxRuntimeExports.jsx("span",{"aria-hidden":!0,className:"ml-3 text-base",children:""})]})},pt.id))})]}):null,Ft.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Linked documents"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:Ft.map(pt=>jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-200 px-3 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx(Link,{to:`/documents?highlight=${encodeURIComponent(pt.id)}`,className:"block truncate text-sm font-medium text-primary-600 hover:underline",children:pt.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:[pt.contentType.includes("pdf")?"PDF":pt.contentType.startsWith("image/")?"Image":pt.contentType.includes("text")?"Text":"Document"," "," ",formatBytes(pt.size)]})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kn(pt.id),disabled:yt===pt.id,className:"text-xs font-medium text-rose-600 transition hover:text-rose-500 disabled:cursor-not-allowed disabled:opacity-60",children:yt===pt.id?"Unlinking":"Unlink"})]},pt.id))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Link a document"}),dt.length>0?jsxRuntimeExports.jsxs("form",{className:"flex flex-wrap items-center gap-2",onSubmit:un,children:[jsxRuntimeExports.jsxs("select",{value:nt,onChange:pt=>st(pt.target.value),disabled:gt,className:"min-w-[200px] flex-1 rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select document"}),dt.map(pt=>jsxRuntimeExports.jsxs("option",{value:pt.id,children:[pt.title||"Untitled document"," (",formatBytes(pt.size),")"]},pt.id))]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:!nt||gt,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:gt?"Linking":"Link"})]}):jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"All documents are currently linked. Manage files from the Documents page."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[Wt.status!=="done"&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>vn(Wt),className:"rounded-full bg-emerald-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-emerald-500",children:"Mark Done"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Rn,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Edit"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>wt("/tasks"),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Close"})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:Lt,children:[jsxRuntimeExports.jsx(TaskFormFields,{formState:rt,submitting:ot,onChange:Tt}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:ot,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:ot?"Saving":"Save changes"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ut(createFormState(Wt)),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Reset"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-sm text-slate-500",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Select a task"}),jsxRuntimeExports.jsx("p",{children:"Choose a task from the list to view its details, update progress, or link related documents. Create a new task to capture upcoming work for your estate plan."})]})})})]})]})},TaskFormFields=({formState:e,submitting:s,onChange:i})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"title",className:"text-sm font-medium text-slate-700",children:"Title"}),jsxRuntimeExports.jsx("input",{id:"title",name:"title",required:!0,value:e.title,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"description",className:"text-sm font-medium text-slate-700",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",name:"description",rows:4,value:e.description,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"due_date",className:"text-sm font-medium text-slate-700",children:"Due date"}),jsxRuntimeExports.jsx("input",{id:"due_date",name:"due_date",type:"date",required:!0,value:e.due_date,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"status",className:"text-sm font-medium text-slate-700",children:"Status"}),jsxRuntimeExports.jsxs("select",{id:"status",name:"status",value:e.status,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"not-started",children:"Not started"}),jsxRuntimeExports.jsx("option",{value:"in-progress",children:"In progress"}),jsxRuntimeExports.jsx("option",{value:"done",children:"Done"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"priority",className:"text-sm font-medium text-slate-700",children:"Priority"}),jsxRuntimeExports.jsxs("select",{id:"priority",name:"priority",value:e.priority,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"low",children:"Low"}),jsxRuntimeExports.jsx("option",{value:"med",children:"Medium"}),jsxRuntimeExports.jsx("option",{value:"high",children:"High"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"tags",className:"text-sm font-medium text-slate-700",children:"Tags (comma separated)"}),jsxRuntimeExports.jsx("input",{id:"tags",name:"tags",value:e.tags,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]})]})]}),Setup=()=>jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold",children:"Setup"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-600",children:"Configuration tools and onboarding steps will appear here."})]}),ROUTES=[{path:"/dashboard",label:"Dashboard",icon:"home",primary:!0},{path:"/tasks",label:"Tasks",icon:"check",primary:!0},{path:"/guidance",label:"Guidance",icon:"book",primary:!0},{path:"/documents",label:"Documents",icon:"file",primary:!0},{path:"/calendar",label:"Calendar",icon:"calendar"},{path:"/journal",label:"Journal",icon:"note"},{path:"/buyout",label:"Buyout",icon:"dollar"},{path:"/profile",label:"Profile",icon:"user"},{path:"/setup",label:"Setup",icon:"settings"}],ICONS$1={home:House,check:SquareCheckBig,book:BookOpen,file:FileText,calendar:Calendar$1,note:NotebookPen,folder:Folder,user:User,settings:Settings,dollar:DollarSign},FlyoutMenu=({open:e,onClose:s,overdueCount:i,onLogout:a})=>{const o=useNavigate(),c=useLocation(),h=reactExports.useRef(null);if(reactExports.useEffect(()=>{if(e){const _=document.activeElement;document.body.style.setProperty("overflow","hidden");const $=window.setTimeout(()=>{var at;(at=h.current)==null||at.focus({preventScroll:!0})},0);return()=>{var at;window.clearTimeout($),document.body.style.removeProperty("overflow"),(at=_==null?void 0:_.focus)==null||at.call(_)}}},[e]),reactExports.useEffect(()=>{if(!e)return;const _=$=>{$.key==="Escape"&&($.preventDefault(),s())};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[e,s]),!e)return null;const j=_=>{s(),o(_)},b=_=>{_.target===_.currentTarget&&s()};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50",role:"dialog","aria-modal":"true",children:jsxRuntimeExports.jsx("div",{className:"flyout-backdrop",onClick:b,children:jsxRuntimeExports.jsxs("div",{className:"flyout-panel shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-primary-500",children:"Navigation"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Quick access"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Close menu",ref:h,onClick:s,className:"rounded-full border border-slate-200 p-2 text-slate-600 transition-colors hover:border-slate-300 hover:text-slate-900",children:jsxRuntimeExports.jsx(X,{size:18})})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-2",children:ROUTES.map(_=>{const $=ICONS$1[_.icon],at=c.pathname.startsWith(_.path);return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>j(_.path),className:`flex items-center justify-between rounded-2xl border border-transparent px-4 py-3 text-left transition-colors focus-visible:ring-offset-0 ${at?"bg-primary-50 text-primary-700":"hover:border-slate-200 hover:bg-slate-50"}`,children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-3 text-sm font-semibold",children:[jsxRuntimeExports.jsx($,{size:18,className:"text-primary-500"}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[_.label,_.path==="/tasks"&&i>0?jsxRuntimeExports.jsx("span",{className:"inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full bg-rose-500 px-1.5 text-xs font-semibold text-white",children:i}):null]})]}),jsxRuntimeExports.jsx(Ellipsis,{size:18,className:"text-slate-400"})]},_.path)})}),jsxRuntimeExports.jsx("div",{className:"mt-6 border-t border-slate-200 pt-4",children:jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{s(),a()},className:"flex w-full items-center justify-between rounded-2xl border border-transparent px-4 py-3 text-sm font-semibold text-slate-700 transition-colors hover:border-rose-200 hover:bg-rose-50 hover:text-rose-600 focus-visible:ring-offset-0",children:[jsxRuntimeExports.jsx("span",{children:"Logout"}),jsxRuntimeExports.jsx(X,{size:16,className:"rotate-45"})]})})]})})})},ICONS={home:House,check:SquareCheckBig,book:BookOpen,file:FileText,calendar:Calendar$1,note:NotebookPen,folder:Folder,user:User,settings:Settings,dollar:DollarSign},BottomBar=({overdueCount:e,onOpenFlyout:s})=>{const i=useLocation(),a=ROUTES.filter(o=>o.primary);return jsxRuntimeExports.jsxs("nav",{className:"bottom-toolbar grid grid-cols-5 md:hidden text-xs font-medium text-slate-500",children:[a.map(o=>{const c=ICONS[o.icon];return jsxRuntimeExports.jsxs(NavLink,{to:o.path,"aria-label":o.label,className:({isActive:h})=>`flex flex-col items-center gap-1 rounded-2xl px-2 py-2 transition-colors focus-visible:ring-offset-0 ${h?"bg-primary-50 text-primary-600":"text-slate-500 hover:bg-primary-50/70 hover:text-primary-600"}`,children:[jsxRuntimeExports.jsx(c,{size:18}),jsxRuntimeExports.jsxs("span",{className:`flex items-center gap-1 text-[11px] leading-tight ${i.pathname.startsWith(o.path)?"font-semibold":""}`,children:[o.label,o.path==="/tasks"&&e>0?jsxRuntimeExports.jsx("span",{className:"inline-flex h-4 min-w-[1rem] items-center justify-center rounded-full bg-rose-500 px-1 text-[0.625rem] font-semibold text-white",children:e}):null]})]},o.path)}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:s,"aria-label":"More",className:"flex flex-col items-center gap-1 rounded-2xl px-2 py-2 text-slate-500 transition-colors hover:bg-primary-50/70 hover:text-primary-600 focus-visible:ring-offset-0",children:[jsxRuntimeExports.jsx(Ellipsis,{size:18}),jsxRuntimeExports.jsx("span",{className:"text-[11px] font-semibold leading-tight",children:"More"})]})]})},Layout=()=>{const e=useNavigate(),s=useLocation(),{logout:i}=useAuth(),{activeEstateId:a}=useEstate(),[o,c]=reactExports.useState(0),[h,j]=reactExports.useState(!1);reactExports.useEffect(()=>{let _=!0;const $=liveQuery(()=>db.tasks.where("estateId").equals(a).toArray()).subscribe({next:at=>{if(!_)return;const rt=new Date;rt.setHours(0,0,0,0);const ut=at.filter(ot=>{if(ot.status==="done")return!1;const vt=new Date(ot.due_date);return Number.isNaN(vt.valueOf())?!1:vt<rt}).length;c(ut)},error:at=>{console.error(at)}});return()=>{_=!1,$.unsubscribe()}},[a]);const b=()=>{i(),e("/login",{replace:!0})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FlyoutMenu,{open:h,onClose:()=>j(!1),overdueCount:o,onLogout:b}),jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-20 border-b border-slate-200/70 bg-white/80 backdrop-blur",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-4 py-3 md:px-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"rounded-full bg-primary-500/10 p-2 text-lg text-primary-600",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-primary-500",children:"Estate"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Administration Workspace"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("nav",{className:"hidden items-center gap-2 md:flex",children:[ROUTES.map(_=>jsxRuntimeExports.jsx(NavLink,{to:_.path,className:({isActive:$})=>`rounded-full px-4 py-2 text-sm font-medium transition-colors focus-visible:ring-offset-0 ${$?"bg-primary-50 text-primary-700 shadow-inner shadow-primary-200/40":"text-slate-600 hover:bg-primary-50/60 hover:text-primary-600"}`,children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[_.label,_.path==="/tasks"&&o>0?jsxRuntimeExports.jsx("span",{className:"inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full bg-rose-500 px-1.5 text-xs font-semibold text-white",children:o}):null]})},_.path)),jsxRuntimeExports.jsx("button",{type:"button",onClick:b,className:"rounded-full px-4 py-2 text-sm font-semibold text-slate-600 transition-colors hover:bg-rose-50 hover:text-rose-600 focus-visible:ring-offset-0",children:"Logout"})]}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Menu",onClick:()=>j(!0),className:"rounded-full border border-slate-200 p-2 text-slate-600 transition-colors hover:border-slate-300 hover:text-slate-900",children:jsxRuntimeExports.jsx(Ellipsis,{size:22})})]})]})}),jsxRuntimeExports.jsx("main",{className:"main-shell",children:jsxRuntimeExports.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8 md:px-6 lg:py-12",children:jsxRuntimeExports.jsx("div",{className:"animate-fade-in",children:jsxRuntimeExports.jsx(Outlet,{})},s.pathname)})}),jsxRuntimeExports.jsx(BottomBar,{overdueCount:o,onOpenFlyout:()=>j(!0)})]})},RequireAuth=()=>{const{isAuthenticated:e}=useAuth();return e?jsxRuntimeExports.jsx(Outlet,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})},App=()=>jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(RequireAuth,{}),children:jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Navigate,{to:"/dashboard",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsxs(Route,{path:"/tasks",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Tasks,{})}),jsxRuntimeExports.jsx(Route,{path:":taskId",element:jsxRuntimeExports.jsx(Tasks,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/guidance",element:jsxRuntimeExports.jsx(Guidance,{})}),jsxRuntimeExports.jsx(Route,{path:"/documents",element:jsxRuntimeExports.jsx(Documents,{})}),jsxRuntimeExports.jsx(Route,{path:"/buyout",element:jsxRuntimeExports.jsx(Buyout,{})}),jsxRuntimeExports.jsx(Route,{path:"/calendar",element:jsxRuntimeExports.jsx(Calendar,{})}),jsxRuntimeExports.jsx(Route,{path:"/journal",element:jsxRuntimeExports.jsx(Journal,{})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(Profile,{})}),jsxRuntimeExports.jsx(Route,{path:"/setup",element:jsxRuntimeExports.jsx(Setup,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})})]});client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/estate",children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(EstateProvider,{children:jsxRuntimeExports.jsx(App,{})})})})}));
