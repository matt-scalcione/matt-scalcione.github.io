var Zu=Object.defineProperty;var Jl=e=>{throw TypeError(e)};var _c=(e,s,i)=>s in e?Zu(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i;var xr=(e,s,i)=>_c(e,typeof s!="symbol"?s+"":s,i),bo=(e,s,i)=>s.has(e)||Jl("Cannot "+i);var tt=(e,s,i)=>(bo(e,s,"read from private field"),i?i.call(e):s.get(e)),dn=(e,s,i)=>s.has(e)?Jl("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,i),hn=(e,s,i,a)=>(bo(e,s,"write to private field"),a?a.call(e,i):s.set(e,i),i),Qt=(e,s,i)=>(bo(e,s,"access private method"),i);var ps=(e,s,i,a)=>({set _(o){hn(e,s,o,i)},get _(){return tt(e,s,a)}});(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var s=e.default;if(typeof s=="function"){var i=function a(){return this instanceof a?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,s,i){var a,o={},c=null,h=null;if(s!=null)for(a in s.ref!==void 0&&(h=s.ref),s.key!==void 0&&(c=""+s.key),s)J.call(s,a)&&!L$1.hasOwnProperty(a)&&(o[a]=s[a]);var j=arguments.length-2;if(j===1)o.children=i;else if(1<j){for(var b=Array(j),$=0;$<j;$++)b[$]=arguments[$+2];o.children=b}if(e&&e.defaultProps)for(a in j=e.defaultProps,j)o[a]===void 0&&(o[a]=j[a]);return{$$typeof:l$1,type:e,key:c,ref:h,props:o,_owner:K$1.current}}function N$1(e,s){return{$$typeof:l$1,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape$1(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return s[i]})}var P$1=/\/+/g;function Q$1(e,s){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):s.toString(36)}function R$1(e,s,i,a,o){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(c){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:h=!0}}if(h)return h=e,o=o(h),e=a===""?"."+Q$1(h,0):a,I$1(o)?(i="",e!=null&&(i=e.replace(P$1,"$&/")+"/"),R$1(o,s,i,"",function($){return $})):o!=null&&(O$1(o)&&(o=N$1(o,i+(!o.key||h&&h.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+e)),s.push(o)),1;if(h=0,a=a===""?".":a+":",I$1(e))for(var j=0;j<e.length;j++){c=e[j];var b=a+Q$1(c,j);h+=R$1(c,s,i,b,o)}else if(b=A$1(e),typeof b=="function")for(e=b.call(e),j=0;!(c=e.next()).done;)c=c.value,b=a+Q$1(c,j++),h+=R$1(c,s,i,b,o);else if(c==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return h}function S$1(e,s,i){if(e==null)return e;var a=[],o=0;return R$1(e,a,"","",function(c){return s.call(i,c,o++)}),a}function T$1(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,s,i){S$1(e,function(){s.apply(this,arguments)},i)},count:function(e){var s=0;return S$1(e,function(){s++}),s},toArray:function(e){return S$1(e,function(s){return s})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(e,s,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$1({},e.props),o=e.key,c=e.ref,h=e._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,h=K$1.current),s.key!==void 0&&(o=""+s.key),e.type&&e.type.defaultProps)var j=e.type.defaultProps;for(b in s)J.call(s,b)&&!L$1.hasOwnProperty(b)&&(a[b]=s[b]===void 0&&j!==void 0?j[b]:s[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){j=Array(b);for(var $=0;$<b;$++)j[$]=arguments[$+2];a.children=j}return{$$typeof:l$1,type:e.type,key:o,ref:c,props:a,_owner:h}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var s=M$1.bind(null,e);return s.type=e,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,s){return{$$typeof:x,type:e,compare:s===void 0?null:s}};react_production_min.startTransition=function(e){var s=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=s}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(e,s){return U$1.current.useCallback(e,s)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,s){return U$1.current.useEffect(e,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,s,i){return U$1.current.useImperativeHandle(e,s,i)};react_production_min.useInsertionEffect=function(e,s){return U$1.current.useInsertionEffect(e,s)};react_production_min.useLayoutEffect=function(e,s){return U$1.current.useLayoutEffect(e,s)};react_production_min.useMemo=function(e,s){return U$1.current.useMemo(e,s)};react_production_min.useReducer=function(e,s,i){return U$1.current.useReducer(e,s,i)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,s,i){return U$1.current.useSyncExternalStore(e,s,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,i){var a,o={},c=null,h=null;i!==void 0&&(c=""+i),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(h=s.ref);for(a in s)m$1.call(s,a)&&!p$1.hasOwnProperty(a)&&(o[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps,s)o[a]===void 0&&(o[a]=s[a]);return{$$typeof:k,type:e,key:c,ref:h,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(Ut,At){var Ft=Ut.length;Ut.push(At);e:for(;0<Ft;){var Xt=Ft-1>>>1,kt=Ut[Xt];if(0<o(kt,At))Ut[Xt]=At,Ut[Ft]=kt,Ft=Xt;else break e}}function i(Ut){return Ut.length===0?null:Ut[0]}function a(Ut){if(Ut.length===0)return null;var At=Ut[0],Ft=Ut.pop();if(Ft!==At){Ut[0]=Ft;e:for(var Xt=0,kt=Ut.length,rt=kt>>>1;Xt<rt;){var at=2*(Xt+1)-1,Et=Ut[at],Ct=at+1,Pt=Ut[Ct];if(0>o(Et,Ft))Ct<kt&&0>o(Pt,Et)?(Ut[Xt]=Pt,Ut[Ct]=Ft,Xt=Ct):(Ut[Xt]=Et,Ut[at]=Ft,Xt=at);else if(Ct<kt&&0>o(Pt,Ft))Ut[Xt]=Pt,Ut[Ct]=Ft,Xt=Ct;else break e}}return At}function o(Ut,At){var Ft=Ut.sortIndex-At.sortIndex;return Ft!==0?Ft:Ut.id-At.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var h=Date,j=h.now();e.unstable_now=function(){return h.now()-j}}var b=[],$=[],_e=1,ct=null,ut=3,ht=!1,pt=!1,yt=!1,bt=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function st(Ut){for(var At=i($);At!==null;){if(At.callback===null)a($);else if(At.startTime<=Ut)a($),At.sortIndex=At.expirationTime,s(b,At);else break;At=i($)}}function gt(Ut){if(yt=!1,st(Ut),!pt)if(i(b)!==null)pt=!0,Yt(ot);else{var At=i($);At!==null&&Ht(gt,At.startTime-Ut)}}function ot(Ut,At){pt=!1,yt&&(yt=!1,et(dt),dt=-1),ht=!0;var Ft=ut;try{for(st(At),ct=i(b);ct!==null&&(!(ct.expirationTime>At)||Ut&&!xt());){var Xt=ct.callback;if(typeof Xt=="function"){ct.callback=null,ut=ct.priorityLevel;var kt=Xt(ct.expirationTime<=At);At=e.unstable_now(),typeof kt=="function"?ct.callback=kt:ct===i(b)&&a(b),st(At)}else a(b);ct=i(b)}if(ct!==null)var rt=!0;else{var at=i($);at!==null&&Ht(gt,at.startTime-At),rt=!1}return rt}finally{ct=null,ut=Ft,ht=!1}}var mt=!1,it=null,dt=-1,ft=5,Rt=-1;function xt(){return!(e.unstable_now()-Rt<ft)}function wt(){if(it!==null){var Ut=e.unstable_now();Rt=Ut;var At=!0;try{At=it(!0,Ut)}finally{At?jt():(mt=!1,it=null)}}else mt=!1}var jt;if(typeof nt=="function")jt=function(){nt(wt)};else if(typeof MessageChannel<"u"){var sn=new MessageChannel,Kt=sn.port2;sn.port1.onmessage=wt,jt=function(){Kt.postMessage(null)}}else jt=function(){bt(wt,0)};function Yt(Ut){it=Ut,mt||(mt=!0,jt())}function Ht(Ut,At){dt=bt(function(){Ut(e.unstable_now())},At)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ut){Ut.callback=null},e.unstable_continueExecution=function(){pt||ht||(pt=!0,Yt(ot))},e.unstable_forceFrameRate=function(Ut){0>Ut||125<Ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ft=0<Ut?Math.floor(1e3/Ut):5},e.unstable_getCurrentPriorityLevel=function(){return ut},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(Ut){switch(ut){case 1:case 2:case 3:var At=3;break;default:At=ut}var Ft=ut;ut=At;try{return Ut()}finally{ut=Ft}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ut,At){switch(Ut){case 1:case 2:case 3:case 4:case 5:break;default:Ut=3}var Ft=ut;ut=Ut;try{return At()}finally{ut=Ft}},e.unstable_scheduleCallback=function(Ut,At,Ft){var Xt=e.unstable_now();switch(typeof Ft=="object"&&Ft!==null?(Ft=Ft.delay,Ft=typeof Ft=="number"&&0<Ft?Xt+Ft:Xt):Ft=Xt,Ut){case 1:var kt=-1;break;case 2:kt=250;break;case 5:kt=1073741823;break;case 4:kt=1e4;break;default:kt=5e3}return kt=Ft+kt,Ut={id:_e++,callback:At,priorityLevel:Ut,startTime:Ft,expirationTime:kt,sortIndex:-1},Ft>Xt?(Ut.sortIndex=Ft,s($,Ut),i(b)===null&&Ut===i($)&&(yt?(et(dt),dt=-1):yt=!0,Ht(gt,Ft-Xt))):(Ut.sortIndex=kt,s(b,Ut),pt||ht||(pt=!0,Yt(ot))),Ut},e.unstable_shouldYield=xt,e.unstable_wrapCallback=function(Ut){var At=ut;return function(){var Ft=ut;ut=At;try{return Ut.apply(this,arguments)}finally{ut=Ft}}}})(scheduler_production_min);scheduler$1.exports=scheduler_production_min;var schedulerExports=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,s){ha(e,s),ha(e+"Capture",s)}function ha(e,s){for(ea[e]=s,e=0;e<s.length;e++)da.add(s[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,s,i,a){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,s,i,a){if(s===null||typeof s>"u"||pa(e,s,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(e,s,i,a,o,c,h){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=s,this.sanitizeURL=c,this.removeEmptyString=h}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];z[s]=new v(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,s,i,a){var o=z.hasOwnProperty(s)?z[s]:null;(o!==null?o.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,i,o,a)&&(i=null),a||o===null?oa(s)&&(i===null?e.removeAttribute(s):e.setAttribute(s,""+i)):o.mustUseProperty?e[o.propertyName]=i===null?o.type===3?!1:"":i:(s=o.attributeName,a=o.attributeNamespace,i===null?e.removeAttribute(s):(o=o.type,i=o===3||o===4&&i===!0?"":""+i,a?e.setAttributeNS(a,s,i):e.setAttribute(s,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+e}var Na=!1;function Oa(e,s){if(!e||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var a=$}Reflect.construct(e,[],s)}else{try{s.call()}catch($){a=$}e.call(s.prototype)}else{try{throw Error()}catch($){a=$}e()}}catch($){if($&&a&&typeof $.stack=="string"){for(var o=$.stack.split(`
`),c=a.stack.split(`
`),h=o.length-1,j=c.length-1;1<=h&&0<=j&&o[h]!==c[j];)j--;for(;1<=h&&0<=j;h--,j--)if(o[h]!==c[j]){if(h!==1||j!==1)do if(h--,j--,0>j||o[h]!==c[j]){var b=`
`+o[h].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=h&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return s=e.displayName||null,s!==null?s:Qa(e.type)||"Memo";case Ha:s=e._payload,e=e._init;try{return Qa(e(s))}catch{}}return null}function Ra(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(e){var s=Ta(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),a=""+e[s];if(!e.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,c=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return o.call(this)},set:function(h){a=""+h,c.call(this,h)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),a="";return e&&(a=Ta(e)?e.checked?"true":"false":e.value),e=a,e!==i?(s.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,s){var i=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Za(e,s){var i=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;i=Sa(s.value!=null?s.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(e,s){s=s.checked,s!=null&&ta(e,"checked",s,!1)}function bb(e,s){ab(e,s);var i=Sa(s.value),a=s.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?cb(e,s.type,i):s.hasOwnProperty("defaultValue")&&cb(e,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function db$1(e,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,i||s===e.value||(e.value=s),e.defaultValue=s}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function cb(e,s,i){(s!=="number"||Xa(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var eb=Array.isArray;function fb(e,s,i,a){if(e=e.options,s){s={};for(var o=0;o<i.length;o++)s["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=s.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Sa(i),s=null,o=0;o<e.length;o++){if(e[o].value===i){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}s!==null||e[o].disabled||(s=e[o])}s!==null&&(s.selected=!0)}}function gb(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}s=i}s==null&&(s=""),i=s}e._wrapperState={initialValue:Sa(i)}}function ib(e,s){var i=Sa(s.value),a=Sa(s.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),s.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function jb(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,a,o){MSApp.execUnsafeLocalFunction(function(){return e(s,i,a,o)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ob(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),pb[s]=pb[e]})});function rb(e,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||pb.hasOwnProperty(e)&&pb[e]?(""+s).trim():s+"px"}function sb(e,s){e=e.style;for(var i in s)if(s.hasOwnProperty(i)){var a=i.indexOf("--")===0,o=rb(i,s[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,o):e[i]=o}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,s){if(s){if(tb[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function vb(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var s=e.stateNode;s&&(s=Db(s),yb(e.stateNode,e.type,s))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,s=Ab;if(Ab=zb=null,Bb(e),s)for(e=0;e<s.length;e++)Bb(s[e])}}function Gb(e,s){return e(s)}function Hb(){}var Ib=!1;function Jb(e,s,i){if(Ib)return e(s,i);Ib=!0;try{return Gb(e,s,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,s){var i=e.stateNode;if(i===null)return null;var a=Db(i);if(a===null)return null;i=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p(231,s,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,s,i,a,o,c,h,j,b){var $=Array.prototype.slice.call(arguments,3);try{s.apply(i,$)}catch(_e){this.onError(_e)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,s,i,a,o,c,h,j,b){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,s,i,a,o,c,h,j,b){if(Tb.apply(this,arguments),Ob){if(Ob){var $=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=$)}}function Vb(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function Wb(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var s=e.alternate;if(!s){if(s=Vb(e),s===null)throw Error(p(188));return s!==e?null:e}for(var i=e,a=s;;){var o=i.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){i=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===i)return Xb(o),e;if(c===a)return Xb(o),s;c=c.sibling}throw Error(p(188))}if(i.return!==a.return)i=o,a=c;else{for(var h=!1,j=o.child;j;){if(j===i){h=!0,i=o,a=c;break}if(j===a){h=!0,a=o,i=c;break}j=j.sibling}if(!h){for(j=c.child;j;){if(j===i){h=!0,i=c,a=o;break}if(j===a){h=!0,a=c,i=o;break}j=j.sibling}if(!h)throw Error(p(189))}}if(i.alternate!==a)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?e:s}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=$b(e);if(s!==null)return s;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,s){var i=e.pendingLanes;if(i===0)return 0;var a=0,o=e.suspendedLanes,c=e.pingedLanes,h=i&268435455;if(h!==0){var j=h&~o;j!==0?a=tc(j):(c&=h,c!==0&&(a=tc(c)))}else h=i&~o,h!==0?a=tc(h):c!==0&&(a=tc(c));if(a===0)return 0;if(s!==0&&s!==a&&!(s&o)&&(o=a&-a,c=s&-s,o>=c||o===16&&(c&4194240)!==0))return s;if(a&4&&(a|=i&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=a;0<s;)i=31-oc(s),o=1<<i,a|=e[i],s&=~o;return a}function vc(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,s){for(var i=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes;0<c;){var h=31-oc(c),j=1<<h,b=o[h];b===-1?(!(j&i)||j&a)&&(o[h]=vc(j,s)):b<=s&&(e.expiredLanes|=j),c&=~j}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function Ac(e,s,i){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-oc(s),e[s]=i}function Bc(e,s){var i=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var o=31-oc(i),c=1<<o;s[o]=0,a[o]=-1,e[o]=-1,i&=~c}}function Cc(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var a=31-oc(i),o=1<<a;o&s|e[a]&s&&(e[a]|=s),i&=~o}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,s){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(e,s,i,a,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:s,domEventName:i,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),e):(e.eventSystemFlags|=a,s=e.targetContainers,o!==null&&s.indexOf(o)===-1&&s.push(o),e)}function Uc(e,s,i,a,o){switch(s){case"focusin":return Lc=Tc(Lc,e,s,i,a,o),!0;case"dragenter":return Mc=Tc(Mc,e,s,i,a,o),!0;case"mouseover":return Nc=Tc(Nc,e,s,i,a,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,s,i,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,s,i,a,o)),!0}return!1}function Vc(e){var s=Wc(e.target);if(s!==null){var i=Vb(s);if(i!==null){if(s=i.tag,s===13){if(s=Wb(i),s!==null){e.blockedOn=s,Ic(e.priority,function(){Gc(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Yc(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);wb=a,i.target.dispatchEvent(a),wb=null}else return s=Cb(i),s!==null&&Fc(s),e.blockedOn=i,!1;s.shift()}return!0}function Zc(e,s,i){Xc(e)&&i.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,s){e.blockedOn===s&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function s(o){return ad(o,e)}if(0<Kc.length){ad(Kc[0],e);for(var i=1;i<Kc.length;i++){var a=Kc[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(s),Pc.forEach(s),i=0;i<Qc.length;i++)a=Qc[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,s,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,s,i,a)}finally{C=o,cd.transition=c}}function gd(e,s,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,s,i,a)}finally{C=o,cd.transition=c}}function fd(e,s,i,a){if(dd){var o=Yc(e,s,i,a);if(o===null)hd(e,s,a,id,i),Sc(e,a);else if(Uc(o,e,s,i,a))a.stopPropagation();else if(Sc(e,a),s&4&&-1<Rc.indexOf(e)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(e,s,i,a),c===null&&hd(e,s,a,id,i),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd(e,s,a,null,i)}}var id=null;function Yc(e,s,i,a){if(id=null,e=xb(a),e=Wc(e),e!==null)if(s=Vb(e),s===null)e=null;else if(i=s.tag,i===13){if(e=Wb(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,s=ld,i=s.length,a,o="value"in kd?kd.value:kd.textContent,c=o.length;for(e=0;e<i&&s[e]===o[e];e++);var h=i-e;for(a=1;a<=h&&s[i-a]===o[c-a];a++);return md=o.slice(e,1<a?1-a:void 0)}function od(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function s(i,a,o,c,h){this._reactName=i,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(i=e[j],this[j]=i?i(c):c[j]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Od[e])?!!s[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var s=Md[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,s){switch(e){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,s){switch(e){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return e=s.data,e===ee&&fe?null:e;default:return null}}function ke(e,s){if(ie)return e==="compositionend"||!ae&&ge(e,s)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!le[e.type]:s==="textarea"}function ne(e,s,i,a){Eb(a),s=oe(s,"onChange"),0<s.length&&(i=new td("onChange","change",null,i,a),e.push({event:i,listeners:s}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var s=ue(e);if(Wa(s))return e}function ve(e,s){if(e==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,e,xb(e)),Jb(re,s)}}function Ce(e,s,i){e==="focusin"?(Ae(),pe=s,qe=i,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,s){if(e==="click")return te(s)}function Fe(e,s){if(e==="input"||e==="change")return te(s)}function Ge(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,s){if(He(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),a=Object.keys(s);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var o=i[a];if(!ja.call(s,o)||!He(e[o],s[o]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,s){var i=Je(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=s&&a>=s)return{node:i,offset:s-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Le(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var e=window,s=Xa();s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)e=s.contentWindow;else break;s=Xa(e.document)}return s}function Ne(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Oe(e){var s=Me(),i=e.focusedElem,a=e.selectionRange;if(s!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(a!==null&&Ne(i)){if(s=a.start,e=a.end,e===void 0&&(e=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(e,i.value.length);else if(e=(s=i.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var o=i.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!e.extend&&c>a&&(o=a,a=c,c=o),o=Ke(i,c);var h=Ke(i,a);o&&h&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(s=s.createRange(),s.setStart(o.node,o.offset),e.removeAllRanges(),c>a?(e.addRange(s),e.extend(h.node,h.offset)):(s.setEnd(h.node,h.offset),e.addRange(s)))}}for(s=[],e=i;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)e=s[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,s,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(s=new td("onSelect","select",null,s,i),e.push({event:s,listeners:a}),s.target=Qe)))}function Ve(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var s=We[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in Ye)return Xe[e]=s[i];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,s){df.set(e,s),fa(s,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,s,i){var a=e.type||"unknown-event";e.currentTarget=i,Ub(a,s,void 0,e),e.currentTarget=null}function se(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],o=a.event;a=a.listeners;e:{var c=void 0;if(s)for(var h=a.length-1;0<=h;h--){var j=a[h],b=j.instance,$=j.currentTarget;if(j=j.listener,b!==c&&o.isPropagationStopped())break e;nf(o,j,$),c=b}else for(h=0;h<a.length;h++){if(j=a[h],b=j.instance,$=j.currentTarget,j=j.listener,b!==c&&o.isPropagationStopped())break e;nf(o,j,$),c=b}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,s){var i=s[of];i===void 0&&(i=s[of]=new Set);var a=e+"__bubble";i.has(a)||(pf(s,e,2,!1),i.add(a))}function qf(e,s,i){var a=0;s&&(a|=4),pf(i,e,a,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,e),qf(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(e,s,i,a){switch(jd(s)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}i=o.bind(null,s,i,e),o=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(s,i,{capture:!0,passive:o}):e.addEventListener(s,i,!0):o!==void 0?e.addEventListener(s,i,{passive:o}):e.addEventListener(s,i,!1)}function hd(e,s,i,a,o){var c=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var j=a.stateNode.containerInfo;if(j===o||j.nodeType===8&&j.parentNode===o)break;if(h===4)for(h=a.return;h!==null;){var b=h.tag;if((b===3||b===4)&&(b=h.stateNode.containerInfo,b===o||b.nodeType===8&&b.parentNode===o))return;h=h.return}for(;j!==null;){if(h=Wc(j),h===null)return;if(b=h.tag,b===5||b===6){a=c=h;continue e}j=j.parentNode}}a=a.return}Jb(function(){var $=c,_e=xb(i),ct=[];e:{var ut=df.get(e);if(ut!==void 0){var ht=td,pt=e;switch(e){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":ht=Rd;break;case"focusin":pt="focus",ht=Fd;break;case"focusout":pt="blur",ht=Fd;break;case"beforeblur":case"afterblur":ht=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Vd;break;case $e:case af:case bf:ht=Hd;break;case cf:ht=Xd;break;case"scroll":ht=vd;break;case"wheel":ht=Zd;break;case"copy":case"cut":case"paste":ht=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Td}var yt=(s&4)!==0,bt=!yt&&e==="scroll",et=yt?ut!==null?ut+"Capture":null:ut;yt=[];for(var nt=$,st;nt!==null;){st=nt;var gt=st.stateNode;if(st.tag===5&&gt!==null&&(st=gt,et!==null&&(gt=Kb(nt,et),gt!=null&&yt.push(tf(nt,gt,st)))),bt)break;nt=nt.return}0<yt.length&&(ut=new ht(ut,pt,null,i,_e),ct.push({event:ut,listeners:yt}))}}if(!(s&7)){e:{if(ut=e==="mouseover"||e==="pointerover",ht=e==="mouseout"||e==="pointerout",ut&&i!==wb&&(pt=i.relatedTarget||i.fromElement)&&(Wc(pt)||pt[uf]))break e;if((ht||ut)&&(ut=_e.window===_e?_e:(ut=_e.ownerDocument)?ut.defaultView||ut.parentWindow:window,ht?(pt=i.relatedTarget||i.toElement,ht=$,pt=pt?Wc(pt):null,pt!==null&&(bt=Vb(pt),pt!==bt||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(ht=null,pt=$),ht!==pt)){if(yt=Bd,gt="onMouseLeave",et="onMouseEnter",nt="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Td,gt="onPointerLeave",et="onPointerEnter",nt="pointer"),bt=ht==null?ut:ue(ht),st=pt==null?ut:ue(pt),ut=new yt(gt,nt+"leave",ht,i,_e),ut.target=bt,ut.relatedTarget=st,gt=null,Wc(_e)===$&&(yt=new yt(et,nt+"enter",pt,i,_e),yt.target=st,yt.relatedTarget=bt,gt=yt),bt=gt,ht&&pt)t:{for(yt=ht,et=pt,nt=0,st=yt;st;st=vf(st))nt++;for(st=0,gt=et;gt;gt=vf(gt))st++;for(;0<nt-st;)yt=vf(yt),nt--;for(;0<st-nt;)et=vf(et),st--;for(;nt--;){if(yt===et||et!==null&&yt===et.alternate)break t;yt=vf(yt),et=vf(et)}yt=null}else yt=null;ht!==null&&wf(ct,ut,ht,yt,!1),pt!==null&&bt!==null&&wf(ct,bt,pt,yt,!0)}}e:{if(ut=$?ue($):window,ht=ut.nodeName&&ut.nodeName.toLowerCase(),ht==="select"||ht==="input"&&ut.type==="file")var ot=ve;else if(me(ut))if(we)ot=Fe;else{ot=De;var mt=Ce}else(ht=ut.nodeName)&&ht.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(ot=Ee);if(ot&&(ot=ot(e,$))){ne(ct,ot,i,_e);break e}mt&&mt(e,ut,$),e==="focusout"&&(mt=ut._wrapperState)&&mt.controlled&&ut.type==="number"&&cb(ut,"number",ut.value)}switch(mt=$?ue($):window,e){case"focusin":(me(mt)||mt.contentEditable==="true")&&(Qe=mt,Re=$,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ct,i,_e);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ct,i,_e)}var it;if(ae)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else ie?ge(e,i)&&(dt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(dt="onCompositionStart");dt&&(de&&i.locale!=="ko"&&(ie||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&ie&&(it=nd()):(kd=_e,ld="value"in kd?kd.value:kd.textContent,ie=!0)),mt=oe($,dt),0<mt.length&&(dt=new Ld(dt,e,null,i,_e),ct.push({event:dt,listeners:mt}),it?dt.data=it:(it=he(i),it!==null&&(dt.data=it)))),(it=ce?je(e,i):ke(e,i))&&($=oe($,"onBeforeInput"),0<$.length&&(_e=new Ld("onBeforeInput","beforeinput",null,i,_e),ct.push({event:_e,listeners:$}),_e.data=it))}se(ct,s)})}function tf(e,s,i){return{instance:e,listener:s,currentTarget:i}}function oe(e,s){for(var i=s+"Capture",a=[];e!==null;){var o=e,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(e,i),c!=null&&a.unshift(tf(e,c,o)),c=Kb(e,s),c!=null&&a.push(tf(e,c,o))),e=e.return}return a}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,s,i,a,o){for(var c=s._reactName,h=[];i!==null&&i!==a;){var j=i,b=j.alternate,$=j.stateNode;if(b!==null&&b===a)break;j.tag===5&&$!==null&&(j=$,o?(b=Kb(i,c),b!=null&&h.unshift(tf(i,b,j))):o||(b=Kb(i,c),b!=null&&h.push(tf(i,b,j)))),i=i.return}h.length!==0&&e.push({event:s,listeners:h})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,s,i){if(s=zf(s),zf(e)!==s&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,s){var i=s,a=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(a===0){e.removeChild(o),bd(s);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=o}while(i);bd(s)}function Lf(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var s=e[Of];if(s)return s;for(var i=e.parentNode;i;){if(s=i[uf]||i[Of]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=Mf(e);e!==null;){if(i=e[Of])return i;e=Mf(e)}return s}e=i,i=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,s){Tf++,Sf[Tf]=e.current,e.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,s){var i=e.type.contextTypes;if(!i)return Vf;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in i)o[c]=s[c];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,s,i){if(H.current!==Vf)throw Error(p(168));G(H,s),G(Wf,i)}function bg(e,s,i){var a=e.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var o in a)if(!(o in s))throw Error(p(108,Ra(e)||"Unknown",o));return A({},i,a)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,s,i){var a=e.stateNode;if(!a)throw Error(p(169));i?(e=bg(e,s,Xf),a.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,s=C;try{var i=eg;for(C=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),o}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,s){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=s}function ug(e,s,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var a=rg;e=sg;var o=32-oc(a)-1;a&=~(1<<o),i+=1;var c=32-oc(s)+o;if(30<c){var h=o-o%5;c=(a&(1<<h)-1).toString(32),a>>=h,o-=h,rg=1<<32-oc(s)+o|i<<o|a,sg=c+e}else rg=1<<c|i<<o|a,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,s){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=e,s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)}function Cg(e,s){switch(e.tag){case 5:var i=e.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xg=e,yg=Lf(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xg=e,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=s,i.return=e,e.child=i,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var s=yg;if(s){var i=s;if(!Cg(e,s)){if(Dg(e))throw Error(p(418));s=Lf(i.nextSibling);var a=xg;s&&Cg(e,s)?Ag(a,i):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ef(e.type,e.memoizedProps)),s&&(s=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;s;)Ag(e,s),s=Lf(s.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(s===0){yg=Lf(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,s,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var a=i.stateNode}if(!a)throw Error(p(147,e));var o=a,c=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(h){var j=o.refs;h===null?delete j[c]:j[c]=h},s._stringRef=c,s)}if(typeof e!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,e))}return e}function Mg(e,s){throw e=Object.prototype.toString.call(s),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ng(e){var s=e._init;return s(e._payload)}function Og(e){function s(et,nt){if(e){var st=et.deletions;st===null?(et.deletions=[nt],et.flags|=16):st.push(nt)}}function i(et,nt){if(!e)return null;for(;nt!==null;)s(et,nt),nt=nt.sibling;return null}function a(et,nt){for(et=new Map;nt!==null;)nt.key!==null?et.set(nt.key,nt):et.set(nt.index,nt),nt=nt.sibling;return et}function o(et,nt){return et=Pg(et,nt),et.index=0,et.sibling=null,et}function c(et,nt,st){return et.index=st,e?(st=et.alternate,st!==null?(st=st.index,st<nt?(et.flags|=2,nt):st):(et.flags|=2,nt)):(et.flags|=1048576,nt)}function h(et){return e&&et.alternate===null&&(et.flags|=2),et}function j(et,nt,st,gt){return nt===null||nt.tag!==6?(nt=Qg(st,et.mode,gt),nt.return=et,nt):(nt=o(nt,st),nt.return=et,nt)}function b(et,nt,st,gt){var ot=st.type;return ot===ya?_e(et,nt,st.props.children,gt,st.key):nt!==null&&(nt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ha&&Ng(ot)===nt.type)?(gt=o(nt,st.props),gt.ref=Lg(et,nt,st),gt.return=et,gt):(gt=Rg(st.type,st.key,st.props,null,et.mode,gt),gt.ref=Lg(et,nt,st),gt.return=et,gt)}function $(et,nt,st,gt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==st.containerInfo||nt.stateNode.implementation!==st.implementation?(nt=Sg(st,et.mode,gt),nt.return=et,nt):(nt=o(nt,st.children||[]),nt.return=et,nt)}function _e(et,nt,st,gt,ot){return nt===null||nt.tag!==7?(nt=Tg(st,et.mode,gt,ot),nt.return=et,nt):(nt=o(nt,st),nt.return=et,nt)}function ct(et,nt,st){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=Qg(""+nt,et.mode,st),nt.return=et,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case va:return st=Rg(nt.type,nt.key,nt.props,null,et.mode,st),st.ref=Lg(et,null,nt),st.return=et,st;case wa:return nt=Sg(nt,et.mode,st),nt.return=et,nt;case Ha:var gt=nt._init;return ct(et,gt(nt._payload),st)}if(eb(nt)||Ka(nt))return nt=Tg(nt,et.mode,st,null),nt.return=et,nt;Mg(et,nt)}return null}function ut(et,nt,st,gt){var ot=nt!==null?nt.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return ot!==null?null:j(et,nt,""+st,gt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return st.key===ot?b(et,nt,st,gt):null;case wa:return st.key===ot?$(et,nt,st,gt):null;case Ha:return ot=st._init,ut(et,nt,ot(st._payload),gt)}if(eb(st)||Ka(st))return ot!==null?null:_e(et,nt,st,gt,null);Mg(et,st)}return null}function ht(et,nt,st,gt,ot){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return et=et.get(st)||null,j(nt,et,""+gt,ot);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case va:return et=et.get(gt.key===null?st:gt.key)||null,b(nt,et,gt,ot);case wa:return et=et.get(gt.key===null?st:gt.key)||null,$(nt,et,gt,ot);case Ha:var mt=gt._init;return ht(et,nt,st,mt(gt._payload),ot)}if(eb(gt)||Ka(gt))return et=et.get(st)||null,_e(nt,et,gt,ot,null);Mg(nt,gt)}return null}function pt(et,nt,st,gt){for(var ot=null,mt=null,it=nt,dt=nt=0,ft=null;it!==null&&dt<st.length;dt++){it.index>dt?(ft=it,it=null):ft=it.sibling;var Rt=ut(et,it,st[dt],gt);if(Rt===null){it===null&&(it=ft);break}e&&it&&Rt.alternate===null&&s(et,it),nt=c(Rt,nt,dt),mt===null?ot=Rt:mt.sibling=Rt,mt=Rt,it=ft}if(dt===st.length)return i(et,it),I&&tg(et,dt),ot;if(it===null){for(;dt<st.length;dt++)it=ct(et,st[dt],gt),it!==null&&(nt=c(it,nt,dt),mt===null?ot=it:mt.sibling=it,mt=it);return I&&tg(et,dt),ot}for(it=a(et,it);dt<st.length;dt++)ft=ht(it,et,dt,st[dt],gt),ft!==null&&(e&&ft.alternate!==null&&it.delete(ft.key===null?dt:ft.key),nt=c(ft,nt,dt),mt===null?ot=ft:mt.sibling=ft,mt=ft);return e&&it.forEach(function(xt){return s(et,xt)}),I&&tg(et,dt),ot}function yt(et,nt,st,gt){var ot=Ka(st);if(typeof ot!="function")throw Error(p(150));if(st=ot.call(st),st==null)throw Error(p(151));for(var mt=ot=null,it=nt,dt=nt=0,ft=null,Rt=st.next();it!==null&&!Rt.done;dt++,Rt=st.next()){it.index>dt?(ft=it,it=null):ft=it.sibling;var xt=ut(et,it,Rt.value,gt);if(xt===null){it===null&&(it=ft);break}e&&it&&xt.alternate===null&&s(et,it),nt=c(xt,nt,dt),mt===null?ot=xt:mt.sibling=xt,mt=xt,it=ft}if(Rt.done)return i(et,it),I&&tg(et,dt),ot;if(it===null){for(;!Rt.done;dt++,Rt=st.next())Rt=ct(et,Rt.value,gt),Rt!==null&&(nt=c(Rt,nt,dt),mt===null?ot=Rt:mt.sibling=Rt,mt=Rt);return I&&tg(et,dt),ot}for(it=a(et,it);!Rt.done;dt++,Rt=st.next())Rt=ht(it,et,dt,Rt.value,gt),Rt!==null&&(e&&Rt.alternate!==null&&it.delete(Rt.key===null?dt:Rt.key),nt=c(Rt,nt,dt),mt===null?ot=Rt:mt.sibling=Rt,mt=Rt);return e&&it.forEach(function(wt){return s(et,wt)}),I&&tg(et,dt),ot}function bt(et,nt,st,gt){if(typeof st=="object"&&st!==null&&st.type===ya&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case va:e:{for(var ot=st.key,mt=nt;mt!==null;){if(mt.key===ot){if(ot=st.type,ot===ya){if(mt.tag===7){i(et,mt.sibling),nt=o(mt,st.props.children),nt.return=et,et=nt;break e}}else if(mt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ha&&Ng(ot)===mt.type){i(et,mt.sibling),nt=o(mt,st.props),nt.ref=Lg(et,mt,st),nt.return=et,et=nt;break e}i(et,mt);break}else s(et,mt);mt=mt.sibling}st.type===ya?(nt=Tg(st.props.children,et.mode,gt,st.key),nt.return=et,et=nt):(gt=Rg(st.type,st.key,st.props,null,et.mode,gt),gt.ref=Lg(et,nt,st),gt.return=et,et=gt)}return h(et);case wa:e:{for(mt=st.key;nt!==null;){if(nt.key===mt)if(nt.tag===4&&nt.stateNode.containerInfo===st.containerInfo&&nt.stateNode.implementation===st.implementation){i(et,nt.sibling),nt=o(nt,st.children||[]),nt.return=et,et=nt;break e}else{i(et,nt);break}else s(et,nt);nt=nt.sibling}nt=Sg(st,et.mode,gt),nt.return=et,et=nt}return h(et);case Ha:return mt=st._init,bt(et,nt,mt(st._payload),gt)}if(eb(st))return pt(et,nt,st,gt);if(Ka(st))return yt(et,nt,st,gt);Mg(et,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,nt!==null&&nt.tag===6?(i(et,nt.sibling),nt=o(nt,st),nt.return=et,et=nt):(i(et,nt),nt=Qg(st,et.mode,gt),nt.return=et,et=nt),h(et)):i(et,nt)}return bt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var s=Wg.current;E(Wg),e._currentValue=s}function bh(e,s,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),e===i)break;e=e.return}}function ch(e,s){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(dh=!0),e.firstContext=null)}function eh(e){var s=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return s}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,s,i,a){var o=s.interleaved;return o===null?(i.next=i,gh(s)):(i.next=o.next,o.next=i),s.interleaved=i,ih(e,a)}function ih(e,s){e.lanes|=s;var i=e.alternate;for(i!==null&&(i.lanes|=s),i=e,e=e.return;e!==null;)e.childLanes|=s,i=e.alternate,i!==null&&(i.childLanes|=s),i=e,e=e.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(e,s,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var o=a.pending;return o===null?s.next=s:(s.next=o.next,o.next=s),a.pending=s,ih(e,i)}return o=a.interleaved,o===null?(s.next=s,gh(a)):(s.next=o.next,o.next=s),a.interleaved=s,ih(e,i)}function oh(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var a=s.lanes;a&=e.pendingLanes,i|=a,s.lanes=i,Cc(e,i)}}function ph(e,s){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var o=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var h={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?o=c=h:c=c.next=h,i=i.next}while(i!==null);c===null?o=c=s:c=c.next=s}else o=c=s;i={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}function qh(e,s,i,a){var o=e.updateQueue;jh=!1;var c=o.firstBaseUpdate,h=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var b=j,$=b.next;b.next=null,h===null?c=$:h.next=$,h=b;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,j=_e.lastBaseUpdate,j!==h&&(j===null?_e.firstBaseUpdate=$:j.next=$,_e.lastBaseUpdate=b))}if(c!==null){var ct=o.baseState;h=0,_e=$=b=null,j=c;do{var ut=j.lane,ht=j.eventTime;if((a&ut)===ut){_e!==null&&(_e=_e.next={eventTime:ht,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var pt=e,yt=j;switch(ut=s,ht=i,yt.tag){case 1:if(pt=yt.payload,typeof pt=="function"){ct=pt.call(ht,ct,ut);break e}ct=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=yt.payload,ut=typeof pt=="function"?pt.call(ht,ct,ut):pt,ut==null)break e;ct=A({},ct,ut);break e;case 2:jh=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,ut=o.effects,ut===null?o.effects=[j]:ut.push(j))}else ht={eventTime:ht,lane:ut,tag:j.tag,payload:j.payload,callback:j.callback,next:null},_e===null?($=_e=ht,b=ct):_e=_e.next=ht,h|=ut;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;ut=j,j=ut.next,ut.next=null,o.lastBaseUpdate=ut,o.shared.pending=null}}while(!0);if(_e===null&&(b=ct),o.baseState=b,o.firstBaseUpdate=$,o.lastBaseUpdate=_e,s=o.shared.interleaved,s!==null){o=s;do h|=o.lane,o=o.next;while(o!==s)}else c===null&&(o.shared.lanes=0);rh|=h,e.lanes=h,e.memoizedState=ct}}function sh(e,s,i){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var a=e[s],o=a.callback;if(o!==null){if(a.callback=null,a=i,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,s){switch(G(wh,s),G(vh,e),G(uh,th),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lb(s,e)}E(uh),G(uh,s)}function zh(){E(uh),E(vh),E(wh)}function Ah(e){xh(wh.current);var s=xh(uh.current),i=lb(s,e.type);s!==i&&(G(vh,e),G(uh,i))}function Bh(e){vh.current===e&&(E(uh),E(vh))}var L=Uf(0);function Ch(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!He(e[i],s[i]))return!1;return!0}function Nh(e,s,i,a,o,c){if(Hh=c,M=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=i(a,o),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,s.updateQueue=null,Fh.current=Qh,e=i(a,o)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,s)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var s=O===null?M.memoizedState:O.next;if(s!==null)O=s,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,s){return typeof s=="function"?s(e):s}function Wh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var a=N,o=a.baseQueue,c=i.pending;if(c!==null){if(o!==null){var h=o.next;o.next=c.next,c.next=h}a.baseQueue=o=c,i.pending=null}if(o!==null){c=o.next,a=a.baseState;var j=h=null,b=null,$=c;do{var _e=$.lane;if((Hh&_e)===_e)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),a=$.hasEagerState?$.eagerState:e(a,$.action);else{var ct={lane:_e,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(j=b=ct,h=a):b=b.next=ct,M.lanes|=_e,rh|=_e}$=$.next}while($!==null&&$!==c);b===null?h=a:b.next=j,He(a,s.memoizedState)||(dh=!0),s.memoizedState=a,s.baseState=h,s.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){o=e;do c=o.lane,M.lanes|=c,rh|=c,o=o.next;while(o!==e)}else o===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function Xh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var a=i.dispatch,o=i.pending,c=s.memoizedState;if(o!==null){i.pending=null;var h=o=o.next;do c=e(c,h.action),h=h.next;while(h!==o);He(c,s.memoizedState)||(dh=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),i.lastRenderedState=c}return[c,a]}function Yh(){}function Zh(e,s){var i=M,a=Uh(),o=s(),c=!He(a.memoizedState,o);if(c&&(a.memoizedState=o,dh=!0),a=a.queue,$h(ai.bind(null,i,a,e),[e]),a.getSnapshot!==s||c||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,a,o,s),void 0,null),Q===null)throw Error(p(349));Hh&30||di(i,s,o)}return o}function di(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function ci(e,s,i,a){s.value=i,s.getSnapshot=a,ei(s)&&fi(e)}function ai(e,s,i){return i(function(){ei(s)&&fi(e)})}function ei(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!He(e,i)}catch{return!0}}function fi(e){var s=ih(e,1);s!==null&&gi(s,e,1,-1)}function hi(e){var s=Th();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},s.queue=e,e=e.dispatch=ii.bind(null,M,e),[s.memoizedState,e]}function bi(e,s,i,a){return e={tag:e,create:s,destroy:i,deps:a,next:null},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.lastEffect=e.next=e):(i=s.lastEffect,i===null?s.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,s.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,s,i,a){var o=Th();M.flags|=e,o.memoizedState=bi(1|s,i,void 0,a===void 0?null:a)}function li(e,s,i,a){var o=Uh();a=a===void 0?null:a;var c=void 0;if(N!==null){var h=N.memoizedState;if(c=h.destroy,a!==null&&Mh(a,h.deps)){o.memoizedState=bi(s,i,c,a);return}}M.flags|=e,o.memoizedState=bi(1|s,i,c,a)}function mi(e,s){return ki(8390656,8,e,s)}function $h(e,s){return li(2048,8,e,s)}function ni(e,s){return li(4,2,e,s)}function oi(e,s){return li(4,4,e,s)}function pi(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function qi(e,s,i){return i=i!=null?i.concat([e]):null,li(4,4,pi.bind(null,s,e),i)}function ri(){}function si(e,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(i.memoizedState=[e,s],e)}function ti(e,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(e=e(),i.memoizedState=[e,s],e)}function ui(e,s,i){return Hh&21?(He(i,s)||(i=yc(),M.lanes|=i,rh|=i,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=i)}function vi(e,s){var i=C;C=i!==0&&4>i?i:4,e(!0);var a=Gh.transition;Gh.transition={};try{e(!1),s()}finally{C=i,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(e,s,i){var a=yi(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(s,i);else if(i=hh(e,s,i,a),i!==null){var o=R();gi(i,e,a,o),Bi(i,s,a)}}function ii(e,s,i){var a=yi(e),o={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(s,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var h=s.lastRenderedState,j=c(h,i);if(o.hasEagerState=!0,o.eagerState=j,He(j,h)){var b=s.interleaved;b===null?(o.next=o,gh(s)):(o.next=b.next,b.next=o),s.interleaved=o;return}}catch{}finally{}i=hh(e,s,o,a),i!==null&&(o=R(),gi(i,e,a,o),Bi(i,s,a))}}function zi(e){var s=e.alternate;return e===M||s!==null&&s===M}function Ai(e,s){Jh=Ih=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Bi(e,s,i){if(i&4194240){var a=s.lanes;a&=e.pendingLanes,i|=a,s.lanes=i,Cc(e,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,s){return Th().memoizedState=[e,s===void 0?null:s],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,s,i){return i=i!=null?i.concat([e]):null,ki(4194308,4,pi.bind(null,s,e),i)},useLayoutEffect:function(e,s){return ki(4194308,4,e,s)},useInsertionEffect:function(e,s){return ki(4,2,e,s)},useMemo:function(e,s){var i=Th();return s=s===void 0?null:s,e=e(),i.memoizedState=[e,s],e},useReducer:function(e,s,i){var a=Th();return s=i!==void 0?i(s):s,a.memoizedState=a.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=xi.bind(null,M,e),[a.memoizedState,e]},useRef:function(e){var s=Th();return e={current:e},s.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),s=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,i){var a=M,o=Th();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=s(),Q===null)throw Error(p(349));Hh&30||di(a,s,i)}o.memoizedState=i;var c={value:i,getSnapshot:s};return o.queue=c,mi(ai.bind(null,a,c,e),[e]),a.flags|=2048,bi(9,ci.bind(null,a,c,i,s),void 0,null),i},useId:function(){var e=Th(),s=Q.identifierPrefix;if(I){var i=sg,a=rg;i=(a&~(1<<32-oc(a)-1)).toString(32)+i,s=":"+s+"R"+i,i=Kh++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=Lh++,s=":"+s+"r"+i.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return ui(s,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return N===null?s.memoizedState=e:ui(s,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,s){if(e&&e.defaultProps){s=A({},s),e=e.defaultProps;for(var i in e)s[i]===void 0&&(s[i]=e[i]);return s}return s}function Di(e,s,i,a){s=e.memoizedState,i=i(a,s),i=i==null?s:A({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,s,i){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,o),s!==null&&(gi(s,e,o,a),oh(s,e,o))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.tag=1,c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,o),s!==null&&(gi(s,e,o,a),oh(s,e,o))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=R(),a=yi(e),o=mh(i,a);o.tag=2,s!=null&&(o.callback=s),s=nh(e,o,a),s!==null&&(gi(s,e,a,i),oh(s,e,a))}};function Fi(e,s,i,a,o,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,h):s.prototype&&s.prototype.isPureReactComponent?!Ie(i,a)||!Ie(o,c):!0}function Gi(e,s,i){var a=!1,o=Vf,c=s.contextType;return typeof c=="object"&&c!==null?c=eh(c):(o=Zf(s)?Xf:H.current,a=s.contextTypes,c=(a=a!=null)?Yf(e,o):Vf),s=new s(i,c),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,e.stateNode=s,s._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=c),s}function Hi(e,s,i,a){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,a),s.state!==e&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(e,s,i,a){var o=e.stateNode;o.props=i,o.state=e.memoizedState,o.refs={},kh(e);var c=s.contextType;typeof c=="object"&&c!==null?o.context=eh(c):(c=Zf(s)?Xf:H.current,o.context=Yf(e,c)),o.state=e.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Di(e,s,c,i),o.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(s=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),s!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(e,i,o,a),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,s){try{var i="",a=s;do i+=Pa(a),a=a.return;while(a);var o=i}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:s,stack:o,digest:null}}function Ki(e,s,i){return{value:e,source:null,stack:i??null,digest:s??null}}function Li(e,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,s,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var a=s.value;return i.callback=function(){Oi||(Oi=!0,Pi=a),Li(e,s)},i}function Qi(e,s,i){i=mh(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var o=s.value;i.payload=function(){return a(o)},i.callback=function(){Li(e,s)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Li(e,s),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var h=s.stack;this.componentDidCatch(s.value,{componentStack:h!==null?h:""})}),i}function Si(e,s,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Mi;var o=new Set;a.set(s,o)}else o=a.get(s),o===void 0&&(o=new Set,a.set(s,o));o.has(i)||(o.add(i),e=Ti.bind(null,e,s,i),s.then(e,e))}function Ui(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Vi(e,s,i,a,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===s?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=mh(-1,1),s.tag=2,nh(i,s,1))),i.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,s,i,a){s.child=e===null?Vg(s,null,i,a):Ug(s,e.child,i,a)}function Yi(e,s,i,a,o){i=i.render;var c=s.ref;return ch(s,o),a=Nh(e,s,i,a,c,o),i=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~o,Zi(e,s,o)):(I&&i&&vg(s),s.flags|=1,Xi(e,s,a,o),s.child)}function $i(e,s,i,a,o){if(e===null){var c=i.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=c,bj(e,s,c,a,o)):(e=Rg(i.type,null,a,s,s.mode,o),e.ref=s.ref,e.return=s,s.child=e)}if(c=e.child,!(e.lanes&o)){var h=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(h,a)&&e.ref===s.ref)return Zi(e,s,o)}return s.flags|=1,e=Pg(c,a),e.ref=s.ref,e.return=s,s.child=e}function bj(e,s,i,a,o){if(e!==null){var c=e.memoizedProps;if(Ie(c,a)&&e.ref===s.ref)if(dh=!1,s.pendingProps=a=c,(e.lanes&o)!==0)e.flags&131072&&(dh=!0);else return s.lanes=e.lanes,Zi(e,s,o)}return cj(e,s,i,a,o)}function dj(e,s,i){var a=s.pendingProps,o=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return e=c!==null?c.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:i,G(ej,fj),fj|=a}else c!==null?(a=c.baseLanes|i,s.memoizedState=null):a=i,G(ej,fj),fj|=a;return Xi(e,s,o,i),s.child}function gj(e,s){var i=s.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function cj(e,s,i,a,o){var c=Zf(i)?Xf:H.current;return c=Yf(s,c),ch(s,o),i=Nh(e,s,i,a,c,o),a=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~o,Zi(e,s,o)):(I&&a&&vg(s),s.flags|=1,Xi(e,s,i,o),s.child)}function hj(e,s,i,a,o){if(Zf(i)){var c=!0;cg(s)}else c=!1;if(ch(s,o),s.stateNode===null)ij(e,s),Gi(s,i,a),Ii(s,i,a,o),a=!0;else if(e===null){var h=s.stateNode,j=s.memoizedProps;h.props=j;var b=h.context,$=i.contextType;typeof $=="object"&&$!==null?$=eh($):($=Zf(i)?Xf:H.current,$=Yf(s,$));var _e=i.getDerivedStateFromProps,ct=typeof _e=="function"||typeof h.getSnapshotBeforeUpdate=="function";ct||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(j!==a||b!==$)&&Hi(s,h,a,$),jh=!1;var ut=s.memoizedState;h.state=ut,qh(s,a,h,o),b=s.memoizedState,j!==a||ut!==b||Wf.current||jh?(typeof _e=="function"&&(Di(s,i,_e,a),b=s.memoizedState),(j=jh||Fi(s,i,j,a,ut,b,$))?(ct||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=b),h.props=a,h.state=b,h.context=$,a=j):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{h=s.stateNode,lh(e,s),j=s.memoizedProps,$=s.type===s.elementType?j:Ci(s.type,j),h.props=$,ct=s.pendingProps,ut=h.context,b=i.contextType,typeof b=="object"&&b!==null?b=eh(b):(b=Zf(i)?Xf:H.current,b=Yf(s,b));var ht=i.getDerivedStateFromProps;(_e=typeof ht=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(j!==ct||ut!==b)&&Hi(s,h,a,b),jh=!1,ut=s.memoizedState,h.state=ut,qh(s,a,h,o);var pt=s.memoizedState;j!==ct||ut!==pt||Wf.current||jh?(typeof ht=="function"&&(Di(s,i,ht,a),pt=s.memoizedState),($=jh||Fi(s,i,$,a,ut,pt,b)||!1)?(_e||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,pt,b),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,pt,b)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=pt),h.props=a,h.state=pt,h.context=b,a=$):(typeof h.componentDidUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=1024),a=!1)}return jj(e,s,i,a,c,o)}function jj(e,s,i,a,o,c){gj(e,s);var h=(s.flags&128)!==0;if(!a&&!h)return o&&dg(s,i,!1),Zi(e,s,c);a=s.stateNode,Wi.current=s;var j=h&&typeof i.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,e!==null&&h?(s.child=Ug(s,e.child,null,c),s.child=Ug(s,null,j,c)):Xi(e,s,j,c),s.memoizedState=a.state,o&&dg(s,i,!0),s.child}function kj(e){var s=e.stateNode;s.pendingContext?ag(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(e,s.context,!1),yh(e,s.containerInfo)}function lj(e,s,i,a,o){return Ig(),Jg(o),s.flags|=256,Xi(e,s,i,a),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,s,i){var a=s.pendingProps,o=L.current,c=!1,h=(s.flags&128)!==0,j;if((j=h)||(j=e!==null&&e.memoizedState===null?!1:(o&2)!==0),j?(c=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),G(L,o&1),e===null)return Eg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(h=a.children,e=a.fallback,c?(a=s.mode,c=s.child,h={mode:"hidden",children:h},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=h):c=pj(h,a,0,null),e=Tg(e,a,i,null),c.return=s,e.return=s,c.sibling=e,s.child=c,s.child.memoizedState=nj(i),s.memoizedState=mj,e):qj(s,h));if(o=e.memoizedState,o!==null&&(j=o.dehydrated,j!==null))return rj(e,s,h,a,j,o,i);if(c){c=a.fallback,h=s.mode,o=e.child,j=o.sibling;var b={mode:"hidden",children:a.children};return!(h&1)&&s.child!==o?(a=s.child,a.childLanes=0,a.pendingProps=b,s.deletions=null):(a=Pg(o,b),a.subtreeFlags=o.subtreeFlags&14680064),j!==null?c=Pg(j,c):(c=Tg(c,h,i,null),c.flags|=2),c.return=s,a.return=s,a.sibling=c,s.child=a,a=c,c=s.child,h=e.child.memoizedState,h=h===null?nj(i):{baseLanes:h.baseLanes|i,cachePool:null,transitions:h.transitions},c.memoizedState=h,c.childLanes=e.childLanes&~i,s.memoizedState=mj,a}return c=e.child,e=c.sibling,a=Pg(c,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=i),a.return=s,a.sibling=null,e!==null&&(i=s.deletions,i===null?(s.deletions=[e],s.flags|=16):i.push(e)),s.child=a,s.memoizedState=null,a}function qj(e,s){return s=pj({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function sj(e,s,i,a){return a!==null&&Jg(a),Ug(s,e.child,null,i),e=qj(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rj(e,s,i,a,o,c,h){if(i)return s.flags&256?(s.flags&=-257,a=Ki(Error(p(422))),sj(e,s,h,a)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(c=a.fallback,o=s.mode,a=pj({mode:"visible",children:a.children},o,0,null),c=Tg(c,o,h,null),c.flags|=2,a.return=s,c.return=s,a.sibling=c,s.child=a,s.mode&1&&Ug(s,e.child,null,h),s.child.memoizedState=nj(h),s.memoizedState=mj,c);if(!(s.mode&1))return sj(e,s,h,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var j=a.dgst;return a=j,c=Error(p(419)),a=Ki(c,a,void 0),sj(e,s,h,a)}if(j=(h&e.childLanes)!==0,dh||j){if(a=Q,a!==null){switch(h&-h){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|h)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,ih(e,o),gi(a,e,o,-1))}return tj(),a=Ki(Error(p(421))),sj(e,s,h,a)}return o.data==="$?"?(s.flags|=128,s.child=e.child,s=uj.bind(null,e),o._reactRetry=s,null):(e=c.treeContext,yg=Lf(o.nextSibling),xg=s,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=s),s=qj(s,a.children),s.flags|=4096,s)}function vj(e,s,i){e.lanes|=s;var a=e.alternate;a!==null&&(a.lanes|=s),bh(e.return,s,i)}function wj(e,s,i,a,o){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:o}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=i,c.tailMode=o)}function xj(e,s,i){var a=s.pendingProps,o=a.revealOrder,c=a.tail;if(Xi(e,s,a.children,i),a=L.current,a&2)a=a&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,i,s);else if(e.tag===19)vj(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G(L,a),!(s.mode&1))s.memoizedState=null;else switch(o){case"forwards":for(i=s.child,o=null;i!==null;)e=i.alternate,e!==null&&Ch(e)===null&&(o=i),i=i.sibling;i=o,i===null?(o=s.child,s.child=null):(o=i.sibling,i.sibling=null),wj(s,!1,o,i,c);break;case"backwards":for(i=null,o=s.child,s.child=null;o!==null;){if(e=o.alternate,e!==null&&Ch(e)===null){s.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}wj(s,!0,i,null,c);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Zi(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),rh|=s.lanes,!(i&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(p(153));if(s.child!==null){for(e=s.child,i=Pg(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=Pg(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function yj(e,s,i){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,o=s.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=o;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):i&s.child.childLanes?oj(e,s,i):(G(L,L.current&1),e=Zi(e,s,i),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(a=(i&s.childLanes)!==0,e.flags&128){if(a)return xj(e,s,i);s.flags|=128}if(o=s.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return s.lanes=0,dj(e,s,i)}return Zi(e,s,i)}var zj,Aj,Bj,Cj;zj=function(e,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(e,s,i,a){var o=e.memoizedProps;if(o!==a){e=s.stateNode,xh(uh.current);var c=null;switch(i){case"input":o=Ya(e,o),a=Ya(e,a),c=[];break;case"select":o=A({},o,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":o=gb(e,o),a=gb(e,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf)}ub(i,a);var h;i=null;for($ in o)if(!a.hasOwnProperty($)&&o.hasOwnProperty($)&&o[$]!=null)if($==="style"){var j=o[$];for(h in j)j.hasOwnProperty(h)&&(i||(i={}),i[h]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea.hasOwnProperty($)?c||(c=[]):(c=c||[]).push($,null));for($ in a){var b=a[$];if(j=o!=null?o[$]:void 0,a.hasOwnProperty($)&&b!==j&&(b!=null||j!=null))if($==="style")if(j){for(h in j)!j.hasOwnProperty(h)||b&&b.hasOwnProperty(h)||(i||(i={}),i[h]="");for(h in b)b.hasOwnProperty(h)&&j[h]!==b[h]&&(i||(i={}),i[h]=b[h])}else i||(c||(c=[]),c.push($,i)),i=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,j=j?j.__html:void 0,b!=null&&j!==b&&(c=c||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(ea.hasOwnProperty($)?(b!=null&&$==="onScroll"&&D("scroll",e),c||j===b||(c=[])):(c=c||[]).push($,b))}i&&(c=c||[]).push("style",i);var $=c;(s.updateQueue=$)&&(s.flags|=4)}};Cj=function(e,s,i,a){i!==a&&(s.flags|=4)};function Dj(e,s){if(!I)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(s)for(var o=e.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=i,s}function Ej(e,s,i){var a=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return a=s.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,s),S(s),null;case 5:Bh(s);var o=xh(wh.current);if(i=s.type,e!==null&&s.stateNode!=null)Bj(e,s,i,a,o),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(p(166));return S(s),null}if(e=xh(uh.current),Gg(s)){a=s.stateNode,i=s.type;var c=s.memoizedProps;switch(a[Of]=s,a[Pf]=c,e=(s.mode&1)!==0,i){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb(a,c),D("invalid",a)}ub(i,c),o=null;for(var h in c)if(c.hasOwnProperty(h)){var j=c[h];h==="children"?typeof j=="string"?a.textContent!==j&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,j,e),o=["children",j]):typeof j=="number"&&a.textContent!==""+j&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,j,e),o=["children",""+j]):ea.hasOwnProperty(h)&&j!=null&&h==="onScroll"&&D("scroll",a)}switch(i){case"input":Va(a),db$1(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=o,s.updateQueue=a,a!==null&&(s.flags|=4)}else{h=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=h.createElement(i,{is:a.is}):(e=h.createElement(i),i==="select"&&(h=e,a.multiple?h.multiple=!0:a.size&&(h.size=a.size))):e=h.createElementNS(e,i),e[Of]=s,e[Pf]=a,zj(e,s,!1,!1),s.stateNode=e;e:{switch(h=vb(i,a),i){case"dialog":D("cancel",e),D("close",e),o=a;break;case"iframe":case"object":case"embed":D("load",e),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],e);o=a;break;case"source":D("error",e),o=a;break;case"img":case"image":case"link":D("error",e),D("load",e),o=a;break;case"details":D("toggle",e),o=a;break;case"input":Za(e,a),o=Ya(e,a),D("invalid",e);break;case"option":o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=A({},a,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,a),o=gb(e,a),D("invalid",e);break;default:o=a}ub(i,o),j=o;for(c in j)if(j.hasOwnProperty(c)){var b=j[c];c==="style"?sb(e,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&nb(e,b)):c==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&ob(e,b):typeof b=="number"&&ob(e,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?b!=null&&c==="onScroll"&&D("scroll",e):b!=null&&ta(e,c,b,h))}switch(i){case"input":Va(e),db$1(e,a,!1);break;case"textarea":Va(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa(a.value));break;case"select":e.multiple=!!a.multiple,c=a.value,c!=null?fb(e,!!a.multiple,c,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(e&&s.stateNode!=null)Cj(e,s,e.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(p(166));if(i=xh(wh.current),xh(uh.current),Gg(s)){if(a=s.stateNode,i=s.memoizedProps,a[Of]=s,(c=a.nodeValue!==i)&&(e=xg,e!==null))switch(e.tag){case 3:Af(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,i,(e.mode&1)!==0)}c&&(s.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Of]=s,s.stateNode=a}return S(s),null;case 13:if(E(L),a=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,c=!1;else if(c=Gg(s),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=i,s):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh(),Aj(e,s),e===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(L),c=s.memoizedState,c===null)return S(s),null;if(a=(s.flags&128)!==0,h=c.rendering,h===null)if(a)Dj(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(h=Ch(e),h!==null){for(s.flags|=128,Dj(c,!1),a=h.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=i,i=s.child;i!==null;)c=i,e=a,c.flags&=14680066,h=c.alternate,h===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=h.childLanes,c.lanes=h.lanes,c.child=h.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=h.memoizedProps,c.memoizedState=h.memoizedState,c.updateQueue=h.updateQueue,c.type=h.type,e=h.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return G(L,L.current&1|2),s.child}e=e.sibling}c.tail!==null&&B()>Gj&&(s.flags|=128,a=!0,Dj(c,!1),s.lanes=4194304)}else{if(!a)if(e=Ch(h),e!==null){if(s.flags|=128,a=!0,i=e.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!I)return S(s),null}else 2*B()-c.renderingStartTime>Gj&&i!==1073741824&&(s.flags|=128,a=!0,Dj(c,!1),s.lanes=4194304);c.isBackwards?(h.sibling=s.child,s.child=h):(i=c.last,i!==null?i.sibling=h:s.child=h,c.last=h)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=B(),s.sibling=null,i=L.current,G(L,a?i&1|2:i&1),s):(S(s),null);case 22:case 23:return Hj(),a=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Ij(e,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return zh(),E(Wf),E(H),Eh(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ig()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,s){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){W(e,s,a)}else i.current=null}function Mj(e,s,i){try{i()}catch(a){W(e,s,a)}}var Nj=!1;function Oj(e,s){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var h=0,j=-1,b=-1,$=0,_e=0,ct=e,ut=null;t:for(;;){for(var ht;ct!==i||o!==0&&ct.nodeType!==3||(j=h+o),ct!==c||a!==0&&ct.nodeType!==3||(b=h+a),ct.nodeType===3&&(h+=ct.nodeValue.length),(ht=ct.firstChild)!==null;)ut=ct,ct=ht;for(;;){if(ct===e)break t;if(ut===i&&++$===o&&(j=h),ut===c&&++_e===a&&(b=h),(ht=ct.nextSibling)!==null)break;ct=ut,ut=ct.parentNode}ct=ht}i=j===-1||b===-1?null:{start:j,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:e,selectionRange:i},dd=!1,V=s;V!==null;)if(s=V,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,V=e;else for(;V!==null;){s=V;try{var pt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var yt=pt.memoizedProps,bt=pt.memoizedState,et=s.stateNode,nt=et.getSnapshotBeforeUpdate(s.elementType===s.type?yt:Ci(s.type,yt),bt);et.__reactInternalSnapshotBeforeUpdate=nt}break;case 3:var st=s.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(gt){W(s,s.return,gt)}if(e=s.sibling,e!==null){e.return=s.return,V=e;break}V=s.return}return pt=Nj,Nj=!1,pt}function Pj(e,s,i){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&e)===e){var c=o.destroy;o.destroy=void 0,c!==void 0&&Mj(s,i,c)}o=o.next}while(o!==a)}}function Qj(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==s)}}function Rj(e){var s=e.ref;if(s!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof s=="function"?s(e):s.current=e}}function Sj(e){var s=e.alternate;s!==null&&(e.alternate=null,Sj(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,s,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(e,s):i.insertBefore(e,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(e,i)):(s=i,s.appendChild(e)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bf));else if(a!==4&&(e=e.child,e!==null))for(Vj(e,s,i),e=e.sibling;e!==null;)Vj(e,s,i),e=e.sibling}function Wj(e,s,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wj(e,s,i),e=e.sibling;e!==null;)Wj(e,s,i),e=e.sibling}var X=null,Xj=!1;function Yj(e,s,i){for(i=i.child;i!==null;)Zj(e,s,i),i=i.sibling}function Zj(e,s,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,s);case 6:var a=X,o=Xj;X=null,Yj(e,s,i),X=a,Xj=o,X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):X.removeChild(i.stateNode));break;case 18:X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?Kf(e.parentNode,i):e.nodeType===1&&Kf(e,i),bd(e)):Kf(X,i.stateNode));break;case 4:a=X,o=Xj,X=i.stateNode.containerInfo,Xj=!0,Yj(e,s,i),X=a,Xj=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,h=c.destroy;c=c.tag,h!==void 0&&(c&2||c&4)&&Mj(i,s,h),o=o.next}while(o!==a)}Yj(e,s,i);break;case 1:if(!U&&(Lj(i,s),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(j){W(i,s,j)}Yj(e,s,i);break;case 21:Yj(e,s,i);break;case 22:i.mode&1?(U=(a=U)||i.memoizedState!==null,Yj(e,s,i),U=a):Yj(e,s,i);break;default:Yj(e,s,i)}}function ak(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Kj),s.forEach(function(a){var o=bk.bind(null,e,a);i.has(a)||(i.add(a),a.then(o,o))})}}function ck(e,s){var i=s.deletions;if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];try{var c=e,h=s,j=h;e:for(;j!==null;){switch(j.tag){case 5:X=j.stateNode,Xj=!1;break e;case 3:X=j.stateNode.containerInfo,Xj=!0;break e;case 4:X=j.stateNode.containerInfo,Xj=!0;break e}j=j.return}if(X===null)throw Error(p(160));Zj(c,h,o),X=null,Xj=!1;var b=o.alternate;b!==null&&(b.return=null),o.return=null}catch($){W(o,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,e),s=s.sibling}function dk(e,s){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(s,e),ek(e),a&4){try{Pj(3,e,e.return),Qj(3,e)}catch(yt){W(e,e.return,yt)}try{Pj(5,e,e.return)}catch(yt){W(e,e.return,yt)}}break;case 1:ck(s,e),ek(e),a&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(s,e),ek(e),a&512&&i!==null&&Lj(i,i.return),e.flags&32){var o=e.stateNode;try{ob(o,"")}catch(yt){W(e,e.return,yt)}}if(a&4&&(o=e.stateNode,o!=null)){var c=e.memoizedProps,h=i!==null?i.memoizedProps:c,j=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{j==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(j,h);var $=vb(j,c);for(h=0;h<b.length;h+=2){var _e=b[h],ct=b[h+1];_e==="style"?sb(o,ct):_e==="dangerouslySetInnerHTML"?nb(o,ct):_e==="children"?ob(o,ct):ta(o,_e,ct,$)}switch(j){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var ut=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var ht=c.value;ht!=null?fb(o,!!c.multiple,ht,!1):ut!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(yt){W(e,e.return,yt)}}break;case 6:if(ck(s,e),ek(e),a&4){if(e.stateNode===null)throw Error(p(162));o=e.stateNode,c=e.memoizedProps;try{o.nodeValue=c}catch(yt){W(e,e.return,yt)}}break;case 3:if(ck(s,e),ek(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(yt){W(e,e.return,yt)}break;case 4:ck(s,e),ek(e);break;case 13:ck(s,e),ek(e),o=e.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B())),a&4&&ak(e);break;case 22:if(_e=i!==null&&i.memoizedState!==null,e.mode&1?(U=($=U)||_e,ck(s,e),U=$):ck(s,e),ek(e),a&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!_e&&e.mode&1)for(V=e,_e=e.child;_e!==null;){for(ct=V=_e;V!==null;){switch(ut=V,ht=ut.child,ut.tag){case 0:case 11:case 14:case 15:Pj(4,ut,ut.return);break;case 1:Lj(ut,ut.return);var pt=ut.stateNode;if(typeof pt.componentWillUnmount=="function"){a=ut,i=ut.return;try{s=a,pt.props=s.memoizedProps,pt.state=s.memoizedState,pt.componentWillUnmount()}catch(yt){W(a,i,yt)}}break;case 5:Lj(ut,ut.return);break;case 22:if(ut.memoizedState!==null){gk(ct);continue}}ht!==null?(ht.return=ut,V=ht):gk(ct)}_e=_e.sibling}e:for(_e=null,ct=e;;){if(ct.tag===5){if(_e===null){_e=ct;try{o=ct.stateNode,$?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(j=ct.stateNode,b=ct.memoizedProps.style,h=b!=null&&b.hasOwnProperty("display")?b.display:null,j.style.display=rb("display",h))}catch(yt){W(e,e.return,yt)}}}else if(ct.tag===6){if(_e===null)try{ct.stateNode.nodeValue=$?"":ct.memoizedProps}catch(yt){W(e,e.return,yt)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===e)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===e)break e;for(;ct.sibling===null;){if(ct.return===null||ct.return===e)break e;_e===ct&&(_e=null),ct=ct.return}_e===ct&&(_e=null),ct.sibling.return=ct.return,ct=ct.sibling}}break;case 19:ck(s,e),ek(e),a&4&&ak(e);break;case 21:break;default:ck(s,e),ek(e)}}function ek(e){var s=e.flags;if(s&2){try{e:{for(var i=e.return;i!==null;){if(Tj(i)){var a=i;break e}i=i.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var c=Uj(e);Wj(e,c,o);break;case 3:case 4:var h=a.stateNode.containerInfo,j=Uj(e);Vj(e,j,h);break;default:throw Error(p(161))}}catch(b){W(e,e.return,b)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hk(e,s,i){V=e,ik(e)}function ik(e,s,i){for(var a=(e.mode&1)!==0;V!==null;){var o=V,c=o.child;if(o.tag===22&&a){var h=o.memoizedState!==null||Jj;if(!h){var j=o.alternate,b=j!==null&&j.memoizedState!==null||U;j=Jj;var $=U;if(Jj=h,(U=b)&&!$)for(V=o;V!==null;)h=V,b=h.child,h.tag===22&&h.memoizedState!==null?jk(o):b!==null?(b.return=h,V=b):jk(o);for(;c!==null;)V=c,ik(c),c=c.sibling;V=o,Jj=j,U=$}kk(e)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V=c):kk(e)}}function kk(e){for(;V!==null;){var s=V;if(s.flags&8772){var i=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!U)if(i===null)a.componentDidMount();else{var o=s.elementType===s.type?i.memoizedProps:Ci(s.type,i.memoizedProps);a.componentDidUpdate(o,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&sh(s,c,a);break;case 3:var h=s.updateQueue;if(h!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}sh(s,h,i)}break;case 5:var j=s.stateNode;if(i===null&&s.flags&4){i=j;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var _e=$.memoizedState;if(_e!==null){var ct=_e.dehydrated;ct!==null&&bd(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||s.flags&512&&Rj(s)}catch(ut){W(s,s.return,ut)}}if(s===e){V=null;break}if(i=s.sibling,i!==null){i.return=s.return,V=i;break}V=s.return}}function gk(e){for(;V!==null;){var s=V;if(s===e){V=null;break}var i=s.sibling;if(i!==null){i.return=s.return,V=i;break}V=s.return}}function jk(e){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{Qj(4,s)}catch(b){W(s,i,b)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var o=s.return;try{a.componentDidMount()}catch(b){W(s,o,b)}}var c=s.return;try{Rj(s)}catch(b){W(s,c,b)}break;case 5:var h=s.return;try{Rj(s)}catch(b){W(s,h,b)}}}catch(b){W(s,s.return,b)}if(s===e){V=null;break}var j=s.sibling;if(j!==null){j.return=s.return,V=j;break}V=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,s,i,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,i,a),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(e,Z)),Dk(e,a),i===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,s){var i=e.callbackNode;wc(e,s);var a=uc(e,e===Q?Z:0);if(a===0)i!==null&&bc(i),e.callbackNode=null,e.callbackPriority=0;else if(s=a&-a,e.callbackPriority!==s){if(i!=null&&bc(i),s===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(a)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,e))}e.callbackPriority=s,e.callbackNode=i}}function Gk(e,s){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var i=e.callbackNode;if(Hk()&&e.callbackNode!==i)return null;var a=uc(e,e===Q?Z:0);if(a===0)return null;if(a&30||a&e.expiredLanes||s)s=Ik(e,a);else{s=a;var o=K;K|=2;var c=Jk();(Q!==e||Z!==s)&&(uk=null,Gj=B()+500,Kk(e,s));do try{Lk();break}catch(j){Mk(e,j)}while(!0);$g(),mk.current=c,K=o,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(o=xc(e),o!==0&&(a=o,s=Nk(e,o))),s===1)throw i=pk,Kk(e,0),Ck(e,a),Dk(e,B()),i;if(s===6)Ck(e,a);else{if(o=e.current.alternate,!(a&30)&&!Ok(o)&&(s=Ik(e,a),s===2&&(c=xc(e),c!==0&&(a=c,s=Nk(e,c))),s===1))throw i=pk,Kk(e,0),Ck(e,a),Dk(e,B()),i;switch(e.finishedWork=o,e.finishedLanes=a,s){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,a),(a&130023424)===a&&(s=fk+500-B(),10<s)){if(uc(e,0)!==0)break;if(o=e.suspendedLanes,(o&a)!==a){R(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),s);break}Pk(e,tk,uk);break;case 4:if(Ck(e,a),(a&4194240)===a)break;for(s=e.eventTimes,o=-1;0<a;){var h=31-oc(a);c=1<<h,h=s[h],h>o&&(o=h),a&=~c}if(a=o,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),a);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===i?Gk.bind(null,e):null}function Nk(e,s){var i=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,s).flags|=256),e=Ik(e,s),e!==2&&(s=tk,tk=i,s!==null&&Fj(s)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var s=e;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var o=i[a],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(e,s){for(s&=~rk,s&=~qk,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var i=31-oc(s),a=1<<i;e[i]=-1,s&=~a}}function Ek(e){if(K&6)throw Error(p(327));Hk();var s=uc(e,0);if(!(s&1))return Dk(e,B()),null;var i=Ik(e,s);if(e.tag!==0&&i===2){var a=xc(e);a!==0&&(s=a,i=Nk(e,a))}if(i===1)throw i=pk,Kk(e,0),Ck(e,s),Dk(e,B()),i;if(i===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,s){var i=K;K|=1;try{return e(s)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var i=ok.transition,a=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=a,ok.transition=i,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,s){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var a=i;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(i=fh[s],a=i.interleaved,a!==null){i.interleaved=null;var o=a.next,c=i.pending;if(c!==null){var h=c.next;c.next=o,a.next=h}i.pending=a}fh=null}return e}function Mk(e,s){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=s,Y=null;break}e:{var c=e,h=i.return,j=i,b=s;if(s=Z,j.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,_e=j,ct=_e.tag;if(!(_e.mode&1)&&(ct===0||ct===11||ct===15)){var ut=_e.alternate;ut?(_e.updateQueue=ut.updateQueue,_e.memoizedState=ut.memoizedState,_e.lanes=ut.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var ht=Ui(h);if(ht!==null){ht.flags&=-257,Vi(ht,h,j,c,s),ht.mode&1&&Si(c,$,s),s=ht,b=$;var pt=s.updateQueue;if(pt===null){var yt=new Set;yt.add(b),s.updateQueue=yt}else pt.add(b);break e}else{if(!(s&1)){Si(c,$,s),tj();break e}b=Error(p(426))}}else if(I&&j.mode&1){var bt=Ui(h);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),Vi(bt,h,j,c,s),Jg(Ji(b,j));break e}}c=b=Ji(b,j),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var et=Ni(c,b,s);ph(c,et);break e;case 1:j=b;var nt=c.type,st=c.stateNode;if(!(c.flags&128)&&(typeof nt.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Ri===null||!Ri.has(st)))){c.flags|=65536,s&=-s,c.lanes|=s;var gt=Qi(c,j,s);ph(c,gt);break e}}c=c.return}while(c!==null)}Sk(i)}catch(ot){s=ot,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,s){var i=K;K|=2;var a=Jk();(Q!==e||Z!==s)&&(uk=null,Kk(e,s));do try{Tk();break}catch(o){Mk(e,o)}while(!0);if($g(),K=i,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var s=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,s===null?Sk(e):Y=s,nk.current=null}function Sk(e){var s=e;do{var i=s.alternate;if(e=s.return,s.flags&32768){if(i=Ij(i,s),i!==null){i.flags&=32767,Y=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,s,fj),i!==null){Y=i;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=e}while(s!==null);T===0&&(T=5)}function Pk(e,s,i){var a=C,o=ok.transition;try{ok.transition=null,C=1,Wk(e,s,i,a)}finally{ok.transition=o,C=a}return null}function Wk(e,s,i,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));i=e.finishedWork;var o=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(e,c),e===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var h=C;C=1;var j=K;K|=4,nk.current=null,Oj(e,i),dk(i,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=i,hk(i),dc(),K=j,C=h,ok.transition=c}else e.current=i;if(vk&&(vk=!1,wk=e,xk=o),c=e.pendingLanes,c===0&&(Ri=null),mc(i.stateNode),Dk(e,B()),s!==null)for(a=e.onRecoverableError,i=0;i<s.length;i++)o=s[i],a(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),c=e.pendingLanes,c&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),s=ok.transition,i=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var a=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var o=K;for(K|=4,V=e.current;V!==null;){var c=V,h=c.child;if(V.flags&16){var j=c.deletions;if(j!==null){for(var b=0;b<j.length;b++){var $=j[b];for(V=$;V!==null;){var _e=V;switch(_e.tag){case 0:case 11:case 15:Pj(8,_e,c)}var ct=_e.child;if(ct!==null)ct.return=_e,V=ct;else for(;V!==null;){_e=V;var ut=_e.sibling,ht=_e.return;if(Sj(_e),_e===$){V=null;break}if(ut!==null){ut.return=ht,V=ut;break}V=ht}}}var pt=c.alternate;if(pt!==null){var yt=pt.child;if(yt!==null){pt.child=null;do{var bt=yt.sibling;yt.sibling=null,yt=bt}while(yt!==null)}}V=c}}if(c.subtreeFlags&2064&&h!==null)h.return=c,V=h;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var et=c.sibling;if(et!==null){et.return=c.return,V=et;break e}V=c.return}}var nt=e.current;for(V=nt;V!==null;){h=V;var st=h.child;if(h.subtreeFlags&2064&&st!==null)st.return=h,V=st;else e:for(h=nt;V!==null;){if(j=V,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Qj(9,j)}}catch(ot){W(j,j.return,ot)}if(j===h){V=null;break e}var gt=j.sibling;if(gt!==null){gt.return=j.return,V=gt;break e}V=j.return}}if(K=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}a=!0}return a}finally{C=i,ok.transition=s}}return!1}function Xk(e,s,i){s=Ji(i,s),s=Ni(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s))}function W(e,s,i){if(e.tag===3)Xk(e,e,i);else for(;s!==null;){if(s.tag===3){Xk(s,e,i);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){e=Ji(i,e),e=Qi(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e));break}}s=s.return}}function Ti(e,s,i){var a=e.pingCache;a!==null&&a.delete(s),s=R(),e.pingedLanes|=e.suspendedLanes&i,Q===e&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=i),Dk(e,s)}function Yk(e,s){s===0&&(e.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var i=R();e=ih(e,s),e!==null&&(Ac(e,s,i),Dk(e,i))}function uj(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Yk(e,i)}function bk(e,s){var i=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(i=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(s),Yk(e,i)}var Vk;Vk=function(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&i)&&!(s.flags&128))return dh=!1,yj(e,s,i);dh=!!(e.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;ij(e,s),e=s.pendingProps;var o=Yf(s,H.current);ch(s,i),o=Nh(null,s,a,e,o,i);var c=Sh();return s.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(a)?(c=!0,cg(s)):c=!1,s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(s),o.updater=Ei,s.stateNode=o,o._reactInternals=s,Ii(s,a,e,i),s=jj(null,s,a,!0,c,i)):(s.tag=0,I&&c&&vg(s),Xi(null,s,o,i),s=s.child),s;case 16:a=s.elementType;e:{switch(ij(e,s),e=s.pendingProps,o=a._init,a=o(a._payload),s.type=a,o=s.tag=Zk(a),e=Ci(a,e),o){case 0:s=cj(null,s,a,e,i);break e;case 1:s=hj(null,s,a,e,i);break e;case 11:s=Yi(null,s,a,e,i);break e;case 14:s=$i(null,s,a,Ci(a.type,e),i);break e}throw Error(p(306,a,""))}return s;case 0:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),cj(e,s,a,o,i);case 1:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),hj(e,s,a,o,i);case 3:e:{if(kj(s),e===null)throw Error(p(387));a=s.pendingProps,c=s.memoizedState,o=c.element,lh(e,s),qh(s,a,null,i);var h=s.memoizedState;if(a=h.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){o=Ji(Error(p(423)),s),s=lj(e,s,a,i,o);break e}else if(a!==o){o=Ji(Error(p(424)),s),s=lj(e,s,a,i,o);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,i=Vg(s,null,a,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),a===o){s=Zi(e,s,i);break e}Xi(e,s,a,i)}s=s.child}return s;case 5:return Ah(s),e===null&&Eg(s),a=s.type,o=s.pendingProps,c=e!==null?e.memoizedProps:null,h=o.children,Ef(a,o)?h=null:c!==null&&Ef(a,c)&&(s.flags|=32),gj(e,s),Xi(e,s,h,i),s.child;case 6:return e===null&&Eg(s),null;case 13:return oj(e,s,i);case 4:return yh(s,s.stateNode.containerInfo),a=s.pendingProps,e===null?s.child=Ug(s,null,a,i):Xi(e,s,a,i),s.child;case 11:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),Yi(e,s,a,o,i);case 7:return Xi(e,s,s.pendingProps,i),s.child;case 8:return Xi(e,s,s.pendingProps.children,i),s.child;case 12:return Xi(e,s,s.pendingProps.children,i),s.child;case 10:e:{if(a=s.type._context,o=s.pendingProps,c=s.memoizedProps,h=o.value,G(Wg,a._currentValue),a._currentValue=h,c!==null)if(He(c.value,h)){if(c.children===o.children&&!Wf.current){s=Zi(e,s,i);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var j=c.dependencies;if(j!==null){h=c.child;for(var b=j.firstContext;b!==null;){if(b.context===a){if(c.tag===1){b=mh(-1,i&-i),b.tag=2;var $=c.updateQueue;if($!==null){$=$.shared;var _e=$.pending;_e===null?b.next=b:(b.next=_e.next,_e.next=b),$.pending=b}}c.lanes|=i,b=c.alternate,b!==null&&(b.lanes|=i),bh(c.return,i,s),j.lanes|=i;break}b=b.next}}else if(c.tag===10)h=c.type===s.type?null:c.child;else if(c.tag===18){if(h=c.return,h===null)throw Error(p(341));h.lanes|=i,j=h.alternate,j!==null&&(j.lanes|=i),bh(h,i,s),h=c.sibling}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===s){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}Xi(e,s,o.children,i),s=s.child}return s;case 9:return o=s.type,a=s.pendingProps.children,ch(s,i),o=eh(o),a=a(o),s.flags|=1,Xi(e,s,a,i),s.child;case 14:return a=s.type,o=Ci(a,s.pendingProps),o=Ci(a.type,o),$i(e,s,a,o,i);case 15:return bj(e,s,s.type,s.pendingProps,i);case 17:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),ij(e,s),s.tag=1,Zf(a)?(e=!0,cg(s)):e=!1,ch(s,i),Gi(s,a,o),Ii(s,a,o,i),jj(null,s,a,!0,e,i);case 19:return xj(e,s,i);case 22:return dj(e,s,i)}throw Error(p(156,s.tag))};function Fk(e,s){return ac(e,s)}function $k(e,s,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,s,i,a){return new $k(e,s,i,a)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,s){var i=e.alternate;return i===null?(i=Bg(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Rg(e,s,i,a,o,c){var h=2;if(a=e,typeof e=="function")aj(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case ya:return Tg(i.children,o,c,s);case za:h=8,o|=8;break;case Aa:return e=Bg(12,i,s,o|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,i,s,o),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,i,s,o),e.elementType=Fa,e.lanes=c,e;case Ia:return pj(i,o,c,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:h=10;break e;case Ca:h=9;break e;case Da:h=11;break e;case Ga:h=14;break e;case Ha:h=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return s=Bg(h,i,s,o),s.elementType=e,s.type=a,s.lanes=c,s}function Tg(e,s,i,a){return e=Bg(7,e,a,s),e.lanes=i,e}function pj(e,s,i,a){return e=Bg(22,e,a,s),e.elementType=Ia,e.lanes=i,e.stateNode={isHidden:!1},e}function Qg(e,s,i){return e=Bg(6,e,null,s),e.lanes=i,e}function Sg(e,s,i){return s=Bg(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function al(e,s,i,a,o){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(e,s,i,a,o,c,h,j,b){return e=new al(e,s,i,j,b),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Bg(3,null,null,s),e.current=c,c.stateNode=e,c.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),e}function cl(e,s,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:e,containerInfo:s,implementation:i}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(e.tag===1){var i=e.type;if(Zf(i))return bg(e,i,s)}return s}function el(e,s,i,a,o,c,h,j,b){return e=bl(i,a,!0,e,o,c,h,j,b),e.context=dl(null),i=e.current,a=R(),o=yi(i),c=mh(a,o),c.callback=s??null,nh(i,c,o),e.current.lanes=o,Ac(e,o,a),Dk(e,a),e}function fl(e,s,i,a){var o=s.current,c=R(),h=yi(o);return i=dl(i),s.context===null?s.context=i:s.pendingContext=i,s=mh(c,h),s.payload={element:e},a=a===void 0?null:a,a!==null&&(s.callback=a),e=nh(o,s,h),e!==null&&(gi(e,o,h,c),oh(e,o,h)),h}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function il(e,s){hl(e,s),(e=e.alternate)&&hl(e,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(p(409));fl(e,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Rk(function(){fl(null,e,null,null)}),s[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var s=Hc();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Qc.length&&s!==0&&s<Qc[i].priority;i++);Qc.splice(i,0,e),i===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,s,i,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var $=gl(h);c.call($)}}var h=el(s,a,e,0,null,!1,!1,"",pl);return e._reactRootContainer=h,e[uf]=h.current,sf(e.nodeType===8?e.parentNode:e),Rk(),h}for(;o=e.lastChild;)e.removeChild(o);if(typeof a=="function"){var j=a;a=function(){var $=gl(b);j.call($)}}var b=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=b,e[uf]=b.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(s,b,i,a)}),b}function rl(e,s,i,a,o){var c=i._reactRootContainer;if(c){var h=c;if(typeof o=="function"){var j=o;o=function(){var b=gl(h);j.call(b)}}fl(s,h,e,o)}else h=ql(i,s,e,o,a);return gl(h)}Ec=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var i=tc(s.pendingLanes);i!==0&&(Cc(s,i|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(e,1);if(a!==null){var o=R();gi(a,e,1,o)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var s=ih(e,134217728);if(s!==null){var i=R();gi(s,e,134217728,i)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var s=yi(e),i=ih(e,s);if(i!==null){var a=R();gi(i,e,s,a)}il(e,s)}};Hc=function(){return C};Ic=function(e,s){var i=C;try{return C=e,s()}finally{C=i}};yb=function(e,s,i){switch(s){case"input":if(bb(e,i),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var a=i[s];if(a!==e&&a.form===e.form){var o=Db(a);if(!o)throw Error(p(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(e,i);break;case"select":s=i.value,s!=null&&fb(e,!!i.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p(200));return cl(e,s,null,i)};reactDom_production_min.createRoot=function(e,s){if(!nl(e))throw Error(p(299));var i=!1,a="",o=kl;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),s=bl(e,1,!1,null,null,i,!1,a,o),e[uf]=s.current,sf(e.nodeType===8?e.parentNode:e),new ll(s)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(s),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!0,i)};reactDom_production_min.hydrateRoot=function(e,s,i){if(!nl(e))throw Error(p(405));var a=i!=null&&i.hydratedSources||null,o=!1,c="",h=kl;if(i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),s=el(s,null,e,1,i??null,o,!1,c,h),e[uf]=s.current,sf(e),a)for(e=0;e<a.length;e++)i=a[e],o=i._getVersion,o=o(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,o]:s.mutableSourceEagerHydrationData.push(i,o);return new ml(s)};reactDom_production_min.render=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!1,i)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,s,i,a){if(!ol(i))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,s,i,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(e={}){function s(a,o){let{pathname:c,search:h,hash:j}=a.location;return createLocation("",{pathname:c,search:h,hash:j},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(a,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(s,i,null,e)}function invariant(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function warning(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,s){return{usr:e.state,key:e.key,idx:s}}function createLocation(e,s,i=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?parsePath(s):s,state:i,key:s&&s.key||a||createKey()}}function createPath({pathname:e="/",search:s="",hash:i=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function parsePath(e){let s={};if(e){let i=e.indexOf("#");i>=0&&(s.hash=e.substring(i),e=e.substring(0,i));let a=e.indexOf("?");a>=0&&(s.search=e.substring(a),e=e.substring(0,a)),e&&(s.pathname=e)}return s}function getUrlBasedHistory(e,s,i,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,h=o.history,j="POP",b=null,$=_e();$==null&&($=0,h.replaceState({...h.state,idx:$},""));function _e(){return(h.state||{idx:null}).idx}function ct(){j="POP";let bt=_e(),et=bt==null?null:bt-$;$=bt,b&&b({action:j,location:yt.location,delta:et})}function ut(bt,et){j="PUSH";let nt=createLocation(yt.location,bt,et);$=_e()+1;let st=getHistoryState(nt,$),gt=yt.createHref(nt);try{h.pushState(st,"",gt)}catch(ot){if(ot instanceof DOMException&&ot.name==="DataCloneError")throw ot;o.location.assign(gt)}c&&b&&b({action:j,location:yt.location,delta:1})}function ht(bt,et){j="REPLACE";let nt=createLocation(yt.location,bt,et);$=_e();let st=getHistoryState(nt,$),gt=yt.createHref(nt);h.replaceState(st,"",gt),c&&b&&b({action:j,location:yt.location,delta:0})}function pt(bt){return createBrowserURLImpl(bt)}let yt={get action(){return j},get location(){return e(o,h)},listen(bt){if(b)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,ct),b=bt,()=>{o.removeEventListener(PopStateEventType,ct),b=null}},createHref(bt){return s(o,bt)},createURL:pt,encodeLocation(bt){let et=pt(bt);return{pathname:et.pathname,search:et.search,hash:et.hash}},push:ut,replace:ht,go(bt){return h.go(bt)}};return yt}function createBrowserURLImpl(e,s=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(i,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:createPath(e);return a=a.replace(/ $/,"%20"),!s&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function matchRoutes(e,s,i="/"){return matchRoutesImpl(e,s,i,!1)}function matchRoutesImpl(e,s,i,a){let o=typeof s=="string"?parsePath(s):s,c=stripBasename(o.pathname||"/",i);if(c==null)return null;let h=flattenRoutes(e);rankRouteBranches(h);let j=null;for(let b=0;j==null&&b<h.length;++b){let $=decodePath(c);j=matchRouteBranch(h[b],$,a)}return j}function flattenRoutes(e,s=[],i=[],a="",o=!1){let c=(h,j,b=o,$)=>{let _e={relativePath:$===void 0?h.path||"":$,caseSensitive:h.caseSensitive===!0,childrenIndex:j,route:h};if(_e.relativePath.startsWith("/")){if(!_e.relativePath.startsWith(a)&&b)return;invariant(_e.relativePath.startsWith(a),`Absolute route path "${_e.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_e.relativePath=_e.relativePath.slice(a.length)}let ct=joinPaths([a,_e.relativePath]),ut=i.concat(_e);h.children&&h.children.length>0&&(invariant(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${ct}".`),flattenRoutes(h.children,s,ut,ct,b)),!(h.path==null&&!h.index)&&s.push({path:ct,score:computeScore(ct,h.index),routesMeta:ut})};return e.forEach((h,j)=>{var b;if(h.path===""||!((b=h.path)!=null&&b.includes("?")))c(h,j);else for(let $ of explodeOptionalSegments(h.path))c(h,j,!0,$)}),s}function explodeOptionalSegments(e){let s=e.split("/");if(s.length===0)return[];let[i,...a]=s,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let h=explodeOptionalSegments(a.join("/")),j=[];return j.push(...h.map(b=>b===""?c:[c,b].join("/"))),o&&j.push(...h),j.map(b=>e.startsWith("/")&&b===""?"/":b)}function rankRouteBranches(e){e.sort((s,i)=>s.score!==i.score?i.score-s.score:compareIndexes(s.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,s){let i=e.split("/"),a=i.length;return i.some(isSplat)&&(a+=splatPenalty),s&&(a+=indexRouteValue),i.filter(o=>!isSplat(o)).reduce((o,c)=>o+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(e,s){return e.length===s.length&&e.slice(0,-1).every((a,o)=>a===s[o])?e[e.length-1]-s[s.length-1]:0}function matchRouteBranch(e,s,i=!1){let{routesMeta:a}=e,o={},c="/",h=[];for(let j=0;j<a.length;++j){let b=a[j],$=j===a.length-1,_e=c==="/"?s:s.slice(c.length)||"/",ct=matchPath({path:b.relativePath,caseSensitive:b.caseSensitive,end:$},_e),ut=b.route;if(!ct&&$&&i&&!a[a.length-1].route.index&&(ct=matchPath({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},_e)),!ct)return null;Object.assign(o,ct.params),h.push({params:o,pathname:joinPaths([c,ct.pathname]),pathnameBase:normalizePathname(joinPaths([c,ct.pathnameBase])),route:ut}),ct.pathnameBase!=="/"&&(c=joinPaths([c,ct.pathnameBase]))}return h}function matchPath(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=compilePath(e.path,e.caseSensitive,e.end),o=s.match(i);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),j=o.slice(1);return{params:a.reduce(($,{paramName:_e,isOptional:ct},ut)=>{if(_e==="*"){let pt=j[ut]||"";h=c.slice(0,c.length-pt.length).replace(/(.)\/+$/,"$1")}const ht=j[ut];return ct&&!ht?$[_e]=void 0:$[_e]=(ht||"").replace(/%2F/g,"/"),$},{}),pathname:c,pathnameBase:h,pattern:e}}function compilePath(e,s=!1,i=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,j,b)=>(a.push({paramName:j,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,s?void 0:"i"),a]}function decodePath(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function stripBasename(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let i=s.endsWith("/")?s.length-1:s.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}function resolvePath(e,s="/"){let{pathname:i,search:a="",hash:o=""}=typeof e=="string"?parsePath(e):e;return{pathname:i?i.startsWith("/")?i:resolvePathname(i,s):s,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(e,s){let i=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function getInvalidPathError(e,s,i,a){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((s,i)=>i===0||s.route.path&&s.route.path.length>0)}function getResolveToMatches(e){let s=getPathContributingMatches(e);return s.map((i,a)=>a===s.length-1?i.pathname:i.pathnameBase)}function resolveTo(e,s,i,a=!1){let o;typeof e=="string"?o=parsePath(e):(o={...e},invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let c=e===""||o.pathname==="",h=c?"/":o.pathname,j;if(h==null)j=i;else{let ct=s.length-1;if(!a&&h.startsWith("..")){let ut=h.split("/");for(;ut[0]==="..";)ut.shift(),ct-=1;o.pathname=ut.join("/")}j=ct>=0?s[ct]:"/"}let b=resolvePath(o,j),$=h&&h!=="/"&&h.endsWith("/"),_e=(c||h===".")&&i.endsWith("/");return!b.pathname.endsWith("/")&&($||_e)&&(b.pathname+="/"),b}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(e,{relative:s}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=reactExports.useContext(NavigationContext),{hash:o,pathname:c,search:h}=useResolvedPath(e,{relative:s}),j=c;return i!=="/"&&(j=c==="/"?i:joinPaths([i,c])),a.createHref({pathname:j,search:h,hash:o})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:s,navigator:i}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),c=JSON.stringify(getResolveToMatches(a)),h=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{h.current=!0}),reactExports.useCallback((b,$={})=>{if(warning(h.current,navigateEffectWarning),!h.current)return;if(typeof b=="number"){i.go(b);return}let _e=resolveTo(b,JSON.parse(c),o,$.relative==="path");e==null&&s!=="/"&&(_e.pathname=_e.pathname==="/"?s:joinPaths([s,_e.pathname])),($.replace?i.replace:i.push)(_e,$.state,$)},[s,i,c,o,e])}var OutletContext=reactExports.createContext(null);function useOutlet(e){let s=reactExports.useContext(RouteContext).outlet;return reactExports.useMemo(()=>s&&reactExports.createElement(OutletContext.Provider,{value:e},s),[s,e])}function useParams(){let{matches:e}=reactExports.useContext(RouteContext),s=e[e.length-1];return s?s.params:{}}function useResolvedPath(e,{relative:s}={}){let{matches:i}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(i));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(o),a,s==="path"),[e,o,a,s])}function useRoutes(e,s){return useRoutesImpl(e,s)}function useRoutesImpl(e,s,i,a,o){var nt;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=reactExports.useContext(NavigationContext),{matches:h}=reactExports.useContext(RouteContext),j=h[h.length-1],b=j?j.params:{},$=j?j.pathname:"/",_e=j?j.pathnameBase:"/",ct=j&&j.route;{let st=ct&&ct.path||"";warningOnce($,!ct||st.endsWith("*")||st.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${$}" (under <Route path="${st}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${st}"> to <Route path="${st==="/"?"*":`${st}/*`}">.`)}let ut=useLocation(),ht;if(s){let st=typeof s=="string"?parsePath(s):s;invariant(_e==="/"||((nt=st.pathname)==null?void 0:nt.startsWith(_e)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_e}" but pathname "${st.pathname}" was given in the \`location\` prop.`),ht=st}else ht=ut;let pt=ht.pathname||"/",yt=pt;if(_e!=="/"){let st=_e.replace(/^\//,"").split("/");yt="/"+pt.replace(/^\//,"").split("/").slice(st.length).join("/")}let bt=matchRoutes(e,{pathname:yt});warning(ct||bt!=null,`No routes matched location "${ht.pathname}${ht.search}${ht.hash}" `),warning(bt==null||bt[bt.length-1].route.element!==void 0||bt[bt.length-1].route.Component!==void 0||bt[bt.length-1].route.lazy!==void 0,`Matched leaf route at location "${ht.pathname}${ht.search}${ht.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let et=_renderMatches(bt&&bt.map(st=>Object.assign({},st,{params:Object.assign({},b,st.params),pathname:joinPaths([_e,c.encodeLocation?c.encodeLocation(st.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:st.pathname]),pathnameBase:st.pathnameBase==="/"?_e:joinPaths([_e,c.encodeLocation?c.encodeLocation(st.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:st.pathnameBase])})),h,i,a,o);return s&&et?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...ht},navigationType:"POP"}},et):et}function DefaultErrorComponent(){let e=useRouteError(),s=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:c},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:c},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},s),i?reactExports.createElement("pre",{style:o},i):null,h)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.unstable_onError?this.props.unstable_onError(e,s):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:e,match:s,children:i}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},i)}function _renderMatches(e,s=[],i=null,a=null,o=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(s.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let c=e,h=i==null?void 0:i.errors;if(h!=null){let $=c.findIndex(_e=>_e.route.id&&(h==null?void 0:h[_e.route.id])!==void 0);invariant($>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,$+1))}let j=!1,b=-1;if(i)for(let $=0;$<c.length;$++){let _e=c[$];if((_e.route.HydrateFallback||_e.route.hydrateFallbackElement)&&(b=$),_e.route.id){let{loaderData:ct,errors:ut}=i,ht=_e.route.loader&&!ct.hasOwnProperty(_e.route.id)&&(!ut||ut[_e.route.id]===void 0);if(_e.route.lazy||ht){j=!0,b>=0?c=c.slice(0,b+1):c=[c[0]];break}}}return c.reduceRight(($,_e,ct)=>{let ut,ht=!1,pt=null,yt=null;i&&(ut=h&&_e.route.id?h[_e.route.id]:void 0,pt=_e.route.errorElement||defaultErrorElement,j&&(b<0&&ct===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ht=!0,yt=null):b===ct&&(ht=!0,yt=_e.route.hydrateFallbackElement||null)));let bt=s.concat(c.slice(0,ct+1)),et=()=>{let nt;return ut?nt=pt:ht?nt=yt:_e.route.Component?nt=reactExports.createElement(_e.route.Component,null):_e.route.element?nt=_e.route.element:nt=$,reactExports.createElement(RenderedRoute,{match:_e,routeContext:{outlet:$,matches:bt,isDataRoute:i!=null},children:nt})};return i&&(_e.route.ErrorBoundary||_e.route.errorElement||ct===0)?reactExports.createElement(RenderErrorBoundary,{location:i.location,revalidation:i.revalidation,component:pt,error:ut,children:et(),routeContext:{outlet:null,matches:bt,isDataRoute:!0},unstable_onError:a}):et()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let s=reactExports.useContext(DataRouterContext);return invariant(s,getDataRouterConsoleError(e)),s}function useDataRouterState(e){let s=reactExports.useContext(DataRouterStateContext);return invariant(s,getDataRouterConsoleError(e)),s}function useRouteContext(e){let s=reactExports.useContext(RouteContext);return invariant(s,getDataRouterConsoleError(e)),s}function useCurrentRouteId(e){let s=useRouteContext(e),i=s.matches[s.matches.length-1];return invariant(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var a;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState("useRouteError"),i=useCurrentRouteId("useRouteError");return e!==void 0?e:(a=s.errors)==null?void 0:a[i]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),s=useCurrentRouteId("useNavigate"),i=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{i.current=!0}),reactExports.useCallback(async(o,c={})=>{warning(i.current,navigateEffectWarning),i.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:s,...c}))},[e,s])}var alreadyWarned={};function warningOnce(e,s,i){!s&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,i))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:s,state:i,unstable_onError:a}){return useRoutesImpl(e,void 0,i,a,s)}function Navigate({to:e,replace:s,state:i,relative:a}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=reactExports.useContext(NavigationContext);warning(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=reactExports.useContext(RouteContext),{pathname:h}=useLocation(),j=useNavigate(),b=resolveTo(e,getResolveToMatches(c),h,a==="path"),$=JSON.stringify(b);return reactExports.useEffect(()=>{j(JSON.parse($),{replace:s,state:i,relative:a})},[j,$,a,s,i]),null}function Outlet(e){return useOutlet(e.context)}function Route(e){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:s=null,location:i,navigationType:a="POP",navigator:o,static:c=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),j=reactExports.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof i=="string"&&(i=parsePath(i));let{pathname:b="/",search:$="",hash:_e="",state:ct=null,key:ut="default"}=i,ht=reactExports.useMemo(()=>{let pt=stripBasename(b,h);return pt==null?null:{location:{pathname:pt,search:$,hash:_e,state:ct,key:ut},navigationType:a}},[h,b,$,_e,ct,ut,a]);return warning(ht!=null,`<Router basename="${h}"> is not able to match the URL "${b}${$}${_e}" because it does not start with the basename, so the <Router> won't render anything.`),ht==null?null:reactExports.createElement(NavigationContext.Provider,{value:j},reactExports.createElement(LocationContext.Provider,{children:s,value:ht}))}function Routes({children:e,location:s}){return useRoutes(createRoutesFromChildren(e),s)}function createRoutesFromChildren(e,s=[]){let i=[];return reactExports.Children.forEach(e,(a,o)=>{if(!reactExports.isValidElement(a))return;let c=[...s,o];if(a.type===reactExports.Fragment){i.push.apply(i,createRoutesFromChildren(a.props.children,c));return}invariant(a.type===Route,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=createRoutesFromChildren(a.props.children,c)),i.push(h)}),i}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return e!=null&&typeof e.tagName=="string"}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,s){return e.button===0&&(!s||s==="_self")&&!isModifiedEvent(e)}function createSearchParams(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,i)=>{let a=e[i];return s.concat(Array.isArray(a)?a.map(o=>[i,o]):[[i,a]])},[]))}function getSearchParamsForLocation(e,s){let i=createSearchParams(e);return s&&s.forEach((a,o)=>{i.has(o)||s.getAll(o).forEach(c=>{i.append(o,c)})}),i}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,s){let i,a,o,c,h;if(isFormElement(e)){let j=e.getAttribute("action");a=j?stripBasename(j,s):null,i=e.getAttribute("method")||defaultMethod,o=getFormEncType(e.getAttribute("enctype"))||defaultEncType,c=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let j=e.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=e.getAttribute("formaction")||j.getAttribute("action");if(a=b?stripBasename(b,s):null,i=e.getAttribute("formmethod")||j.getAttribute("method")||defaultMethod,o=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(j.getAttribute("enctype"))||defaultEncType,c=new FormData(j,e),!isFormDataSubmitterSupported()){let{name:$,type:_e,value:ct}=e;if(_e==="image"){let ut=$?`${$}.`:"";c.append(`${ut}x`,"0"),c.append(`${ut}y`,"0")}else $&&c.append($,ct)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=defaultMethod,a=null,o=defaultEncType,h=e}return c&&o==="text/plain"&&(h=c,c=void 0),{action:a,method:i.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function singleFetchUrl(e,s,i){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${i}`:s&&stripBasename(a.pathname,s)==="/"?a.pathname=`${s.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function loadRouteModule(e,s){if(e.id in s)return s[e.id];try{let i=await import(e.module);return s[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,s,i){let a=await Promise.all(e.map(async o=>{let c=s.routes[o.route.id];if(c){let h=await loadRouteModule(c,i);return h.links?h.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function getNewMatchesForLinks(e,s,i,a,o,c){let h=(b,$)=>i[$]?b.route.id!==i[$].route.id:!0,j=(b,$)=>{var _e;return i[$].pathname!==b.pathname||((_e=i[$].route.path)==null?void 0:_e.endsWith("*"))&&i[$].params["*"]!==b.params["*"]};return c==="assets"?s.filter((b,$)=>h(b,$)||j(b,$)):c==="data"?s.filter((b,$)=>{var ct;let _e=a.routes[b.route.id];if(!_e||!_e.hasLoader)return!1;if(h(b,$)||j(b,$))return!0;if(b.route.shouldRevalidate){let ut=b.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((ct=i[0])==null?void 0:ct.params)||{},nextUrl:new URL(e,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof ut=="boolean")return ut}return!0}):[]}function getModuleLinkHrefs(e,s,{includeHydrateFallback:i}={}){return dedupeHrefs(e.map(a=>{let o=s.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let s={},i=Object.keys(e).sort();for(let a of i)s[a]=e[a];return s}function dedupeLinkDescriptors(e,s){let i=new Set;return new Set(s),e.reduce((a,o)=>{let c=JSON.stringify(sortKeys(o));return i.has(c)||(i.add(c),a.push({key:c,link:o})),a},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,s){let i=reactExports.useContext(FrameworkContext),[a,o]=reactExports.useState(!1),[c,h]=reactExports.useState(!1),{onFocus:j,onBlur:b,onMouseEnter:$,onMouseLeave:_e,onTouchStart:ct}=s,ut=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let yt=et=>{et.forEach(nt=>{h(nt.isIntersecting)})},bt=new IntersectionObserver(yt,{threshold:.5});return ut.current&&bt.observe(ut.current),()=>{bt.disconnect()}}},[e]),reactExports.useEffect(()=>{if(a){let yt=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(yt)}}},[a]);let ht=()=>{o(!0)},pt=()=>{o(!1),h(!1)};return i?e!=="intent"?[c,ut,{}]:[c,ut,{onFocus:composeEventHandlers(j,ht),onBlur:composeEventHandlers(b,pt),onMouseEnter:composeEventHandlers($,ht),onMouseLeave:composeEventHandlers(_e,pt),onTouchStart:composeEventHandlers(ct,ht)}]:[!1,ut,{}]}function composeEventHandlers(e,s){return i=>{e&&e(i),i.defaultPrevented||s(i)}}function PrefetchPageLinks({page:e,...s}){let{router:i}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(i.routes,e,i.basename),[i.routes,e,i.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:a,...s}):null}function useKeyedPrefetchLinks(e){let{manifest:s,routeModules:i}=useFrameworkContext(),[a,o]=reactExports.useState([]);return reactExports.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(e,s,i).then(h=>{c||o(h)}),()=>{c=!0}},[e,s,i]),a}function PrefetchPageLinksImpl({page:e,matches:s,...i}){let a=useLocation(),{manifest:o,routeModules:c}=useFrameworkContext(),{basename:h}=useDataRouterContext2(),{loaderData:j,matches:b}=useDataRouterStateContext(),$=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,b,o,a,"data"),[e,s,b,o,a]),_e=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,b,o,a,"assets"),[e,s,b,o,a]),ct=reactExports.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let pt=new Set,yt=!1;if(s.forEach(et=>{var st;let nt=o.routes[et.route.id];!nt||!nt.hasLoader||(!$.some(gt=>gt.route.id===et.route.id)&&et.route.id in j&&((st=c[et.route.id])!=null&&st.shouldRevalidate)||nt.hasClientLoader?yt=!0:pt.add(et.route.id))}),pt.size===0)return[];let bt=singleFetchUrl(e,h,"data");return yt&&pt.size>0&&bt.searchParams.set("_routes",s.filter(et=>pt.has(et.route.id)).map(et=>et.route.id).join(",")),[bt.pathname+bt.search]},[h,j,a,o,$,s,e,c]),ut=reactExports.useMemo(()=>getModuleLinkHrefs(_e,o),[_e,o]),ht=useKeyedPrefetchLinks(_e);return reactExports.createElement(reactExports.Fragment,null,ct.map(pt=>reactExports.createElement("link",{key:pt,rel:"prefetch",as:"fetch",href:pt,...i})),ut.map(pt=>reactExports.createElement("link",{key:pt,rel:"modulepreload",href:pt,...i})),ht.map(({key:pt,link:yt})=>reactExports.createElement("link",{key:pt,nonce:i.nonce,...yt})))}function mergeRefs(...e){return s=>{e.forEach(i=>{typeof i=="function"?i(s):i!=null&&(i.current=s)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.5")}catch{}function BrowserRouter({basename:e,children:s,window:i}){let a=reactExports.useRef();a.current==null&&(a.current=createBrowserHistory({window:i,v5Compat:!0}));let o=a.current,[c,h]=reactExports.useState({action:o.action,location:o.location}),j=reactExports.useCallback(b=>{reactExports.startTransition(()=>h(b))},[h]);return reactExports.useLayoutEffect(()=>o.listen(j),[o,j]),reactExports.createElement(Router,{basename:e,children:s,location:c.location,navigationType:c.action,navigator:o})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:s,discover:i="render",prefetch:a="none",relative:o,reloadDocument:c,replace:h,state:j,target:b,to:$,preventScrollReset:_e,viewTransition:ct,...ut},ht){let{basename:pt}=reactExports.useContext(NavigationContext),yt=typeof $=="string"&&ABSOLUTE_URL_REGEX2.test($),bt,et=!1;if(typeof $=="string"&&yt&&(bt=$,isBrowser))try{let ft=new URL(window.location.href),Rt=$.startsWith("//")?new URL(ft.protocol+$):new URL($),xt=stripBasename(Rt.pathname,pt);Rt.origin===ft.origin&&xt!=null?$=xt+Rt.search+Rt.hash:et=!0}catch{warning(!1,`<Link to="${$}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let nt=useHref($,{relative:o}),[st,gt,ot]=usePrefetchBehavior(a,ut),mt=useLinkClickHandler($,{replace:h,state:j,target:b,preventScrollReset:_e,relative:o,viewTransition:ct});function it(ft){s&&s(ft),ft.defaultPrevented||mt(ft)}let dt=reactExports.createElement("a",{...ut,...ot,href:bt||nt,onClick:et||c?s:it,ref:mergeRefs(ht,gt),target:b,"data-discover":!yt&&i==="render"?"true":void 0});return st&&!yt?reactExports.createElement(reactExports.Fragment,null,dt,reactExports.createElement(PrefetchPageLinks,{page:nt})):dt});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":s="page",caseSensitive:i=!1,className:a="",end:o=!1,style:c,to:h,viewTransition:j,children:b,...$},_e){let ct=useResolvedPath(h,{relative:$.relative}),ut=useLocation(),ht=reactExports.useContext(DataRouterStateContext),{navigator:pt,basename:yt}=reactExports.useContext(NavigationContext),bt=ht!=null&&useViewTransitionState(ct)&&j===!0,et=pt.encodeLocation?pt.encodeLocation(ct).pathname:ct.pathname,nt=ut.pathname,st=ht&&ht.navigation&&ht.navigation.location?ht.navigation.location.pathname:null;i||(nt=nt.toLowerCase(),st=st?st.toLowerCase():null,et=et.toLowerCase()),st&&yt&&(st=stripBasename(st,yt)||st);const gt=et!=="/"&&et.endsWith("/")?et.length-1:et.length;let ot=nt===et||!o&&nt.startsWith(et)&&nt.charAt(gt)==="/",mt=st!=null&&(st===et||!o&&st.startsWith(et)&&st.charAt(et.length)==="/"),it={isActive:ot,isPending:mt,isTransitioning:bt},dt=ot?s:void 0,ft;typeof a=="function"?ft=a(it):ft=[a,ot?"active":null,mt?"pending":null,bt?"transitioning":null].filter(Boolean).join(" ");let Rt=typeof c=="function"?c(it):c;return reactExports.createElement(Link,{...$,"aria-current":dt,className:ft,ref:_e,style:Rt,to:h,viewTransition:j},typeof b=="function"?b(it):b)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:s,navigate:i,reloadDocument:a,replace:o,state:c,method:h=defaultMethod,action:j,onSubmit:b,relative:$,preventScrollReset:_e,viewTransition:ct,...ut},ht)=>{let pt=useSubmit(),yt=useFormAction(j,{relative:$}),bt=h.toLowerCase()==="get"?"get":"post",et=typeof j=="string"&&ABSOLUTE_URL_REGEX2.test(j),nt=st=>{if(b&&b(st),st.defaultPrevented)return;st.preventDefault();let gt=st.nativeEvent.submitter,ot=(gt==null?void 0:gt.getAttribute("formmethod"))||h;pt(gt||st.currentTarget,{fetcherKey:s,method:ot,navigate:i,replace:o,state:c,relative:$,preventScrollReset:_e,viewTransition:ct})};return reactExports.createElement("form",{ref:ht,method:bt,action:yt,onSubmit:a?b:nt,...ut,"data-discover":!et&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let s=reactExports.useContext(DataRouterContext);return invariant(s,getDataRouterConsoleError2(e)),s}function useLinkClickHandler(e,{target:s,replace:i,state:a,preventScrollReset:o,relative:c,viewTransition:h}={}){let j=useNavigate(),b=useLocation(),$=useResolvedPath(e,{relative:c});return reactExports.useCallback(_e=>{if(shouldProcessLinkClick(_e,s)){_e.preventDefault();let ct=i!==void 0?i:createPath(b)===createPath($);j(e,{replace:ct,state:a,preventScrollReset:o,relative:c,viewTransition:h})}},[b,j,$,i,a,s,e,o,c,h])}function useSearchParams(e){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=reactExports.useRef(createSearchParams(e)),i=reactExports.useRef(!1),a=useLocation(),o=reactExports.useMemo(()=>getSearchParamsForLocation(a.search,i.current?null:s.current),[a.search]),c=useNavigate(),h=reactExports.useCallback((j,b)=>{const $=createSearchParams(typeof j=="function"?j(new URLSearchParams(o)):j);i.current=!0,c("?"+$,b)},[c,o]);return[o,h]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:s}=reactExports.useContext(NavigationContext),i=useRouteId();return reactExports.useCallback(async(a,o={})=>{let{action:c,method:h,encType:j,formData:b,body:$}=getFormSubmissionInfo(a,s);if(o.navigate===!1){let _e=o.fetcherKey||getUniqueFetcherId();await e.fetch(_e,i,o.action||c,{preventScrollReset:o.preventScrollReset,formData:b,body:$,formMethod:o.method||h,formEncType:o.encType||j,flushSync:o.flushSync})}else await e.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:b,body:$,formMethod:o.method||h,formEncType:o.encType||j,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,s,i])}function useFormAction(e,{relative:s}={}){let{basename:i}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...useResolvedPath(e||".",{relative:s})},h=useLocation();if(e==null){c.search=h.search;let j=new URLSearchParams(c.search),b=j.getAll("index");if(b.some(_e=>_e==="")){j.delete("index"),b.filter(ct=>ct).forEach(ct=>j.append("index",ct));let _e=j.toString();c.search=_e?`?${_e}`:""}}return(!e||e===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:joinPaths([i,c.pathname])),createPath(c)}function useViewTransitionState(e,{relative:s}={}){let i=reactExports.useContext(ViewTransitionContext);invariant(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),o=useResolvedPath(e,{relative:s});if(!i.isTransitioning)return!1;let c=stripBasename(i.currentLocation.pathname,a)||i.currentLocation.pathname,h=stripBasename(i.nextLocation.pathname,a)||i.nextLocation.pathname;return matchPath(o.pathname,h)!=null||matchPath(o.pathname,c)!=null}var dexie_min={exports:{}};(function(e,s){(function(i,a){e.exports=a()})(commonjsGlobal,function(){var i=function(d,g){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,lt){_.__proto__=lt}||function(_,lt){for(var vt in lt)Object.prototype.hasOwnProperty.call(lt,vt)&&(_[vt]=lt[vt])})(d,g)},a=function(){return(a=Object.assign||function(d){for(var g,_=1,lt=arguments.length;_<lt;_++)for(var vt in g=arguments[_])Object.prototype.hasOwnProperty.call(g,vt)&&(d[vt]=g[vt]);return d}).apply(this,arguments)};function o(d,g,_){for(var lt,vt=0,_t=g.length;vt<_t;vt++)!lt&&vt in g||((lt=lt||Array.prototype.slice.call(g,0,vt))[vt]=g[vt]);return d.concat(lt||Array.prototype.slice.call(g))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,h=Object.keys,j=Array.isArray;function b(d,g){return typeof g!="object"||h(g).forEach(function(_){d[_]=g[_]}),d}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var $=Object.getPrototypeOf,_e={}.hasOwnProperty;function ct(d,g){return _e.call(d,g)}function ut(d,g){typeof g=="function"&&(g=g($(d))),(typeof Reflect>"u"?h:Reflect.ownKeys)(g).forEach(function(_){pt(d,_,g[_])})}var ht=Object.defineProperty;function pt(d,g,_,lt){ht(d,g,b(_&&ct(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},lt))}function yt(d){return{from:function(g){return d.prototype=Object.create(g.prototype),pt(d.prototype,"constructor",d),{extend:ut.bind(null,d.prototype)}}}}var bt=Object.getOwnPropertyDescriptor,et=[].slice;function nt(d,g,_){return et.call(d,g,_)}function st(d,g){return g(d)}function gt(d){if(!d)throw new Error("Assertion Failed")}function ot(d){c.setImmediate?setImmediate(d):setTimeout(d,0)}function mt(d,g){if(typeof g=="string"&&ct(d,g))return d[g];if(!g)return d;if(typeof g!="string"){for(var _=[],lt=0,vt=g.length;lt<vt;++lt){var _t=mt(d,g[lt]);_.push(_t)}return _}var Mt=g.indexOf(".");if(Mt!==-1){var Wt=d[g.substr(0,Mt)];return Wt==null?void 0:mt(Wt,g.substr(Mt+1))}}function it(d,g,_){if(d&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof g!="string"&&"length"in g){gt(typeof _!="string"&&"length"in _);for(var lt=0,vt=g.length;lt<vt;++lt)it(d,g[lt],_[lt])}else{var _t,Mt,Wt=g.indexOf(".");Wt!==-1?(_t=g.substr(0,Wt),(Mt=g.substr(Wt+1))===""?_===void 0?j(d)&&!isNaN(parseInt(_t))?d.splice(_t,1):delete d[_t]:d[_t]=_:it(Wt=!(Wt=d[_t])||!ct(d,_t)?d[_t]={}:Wt,Mt,_)):_===void 0?j(d)&&!isNaN(parseInt(g))?d.splice(g,1):delete d[g]:d[g]=_}}function dt(d){var g,_={};for(g in d)ct(d,g)&&(_[g]=d[g]);return _}var ft=[].concat;function Rt(d){return ft.apply([],d)}var In="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Rt([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(g){return g+d+"Array"})}))).filter(function(d){return c[d]}),xt=new Set(In.map(function(d){return c[d]})),wt=null;function jt(d){return wt=new WeakMap,d=function g(_){if(!_||typeof _!="object")return _;var lt=wt.get(_);if(lt)return lt;if(j(_)){lt=[],wt.set(_,lt);for(var vt=0,_t=_.length;vt<_t;++vt)lt.push(g(_[vt]))}else if(xt.has(_.constructor))lt=_;else{var Mt,Wt=$(_);for(Mt in lt=Wt===Object.prototype?{}:Object.create(Wt),wt.set(_,lt),_)ct(_,Mt)&&(lt[Mt]=g(_[Mt]))}return lt}(d),wt=null,d}var sn={}.toString;function Kt(d){return sn.call(d).slice(8,-1)}var Yt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ht=typeof Yt=="symbol"?function(d){var g;return d!=null&&(g=d[Yt])&&g.apply(d)}:function(){return null};function Ut(d,g){return g=d.indexOf(g),0<=g&&d.splice(g,1),0<=g}var At={};function Ft(d){var g,_,lt,vt;if(arguments.length===1){if(j(d))return d.slice();if(this===At&&typeof d=="string")return[d];if(vt=Ht(d)){for(_=[];!(lt=vt.next()).done;)_.push(lt.value);return _}if(d==null)return[d];if(typeof(g=d.length)!="number")return[d];for(_=new Array(g);g--;)_[g]=d[g];return _}for(g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return _}var Xt=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Dr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zt),kt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function rt(d,g){this.name=d,this.message=g}function at(d,g){return d+". Errors: "+Object.keys(g).map(function(_){return g[_].toString()}).filter(function(_,lt,vt){return vt.indexOf(_)===lt}).join(`
`)}function Et(d,g,_,lt){this.failures=g,this.failedKeys=lt,this.successCount=_,this.message=at(d,g)}function Ct(d,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_){return g[_]}),this.failuresByPos=g,this.message=at(d,this.failures)}yt(rt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),yt(Et).from(rt),yt(Ct).from(rt);var Pt=Dr.reduce(function(d,g){return d[g]=g+"Error",d},{}),It=rt,Bt=Dr.reduce(function(d,g){var _=g+"Error";function lt(vt,_t){this.name=_,vt?typeof vt=="string"?(this.message="".concat(vt).concat(_t?`
 `+_t:""),this.inner=_t||null):typeof vt=="object"&&(this.message="".concat(vt.name," ").concat(vt.message),this.inner=vt):(this.message=kt[g]||_,this.inner=null)}return yt(lt).from(It),d[g]=lt,d},{});Bt.Syntax=SyntaxError,Bt.Type=TypeError,Bt.Range=RangeError;var Lt=Zt.reduce(function(d,g){return d[g+"Error"]=Bt[g],d},{}),an=Dr.reduce(function(d,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(d[g+"Error"]=Bt[g]),d},{});function rn(){}function En(d){return d}function kn(d,g){return d==null||d===En?g:function(_){return g(d(_))}}function An(d,g){return function(){d.apply(this,arguments),g.apply(this,arguments)}}function on(d,g){return d===rn?g:function(){var _=d.apply(this,arguments);_!==void 0&&(arguments[0]=_);var lt=this.onsuccess,vt=this.onerror;this.onsuccess=null,this.onerror=null;var _t=g.apply(this,arguments);return lt&&(this.onsuccess=this.onsuccess?An(lt,this.onsuccess):lt),vt&&(this.onerror=this.onerror?An(vt,this.onerror):vt),_t!==void 0?_t:_}}function Vt(d,g){return d===rn?g:function(){d.apply(this,arguments);var _=this.onsuccess,lt=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?An(_,this.onsuccess):_),lt&&(this.onerror=this.onerror?An(lt,this.onerror):lt)}}function St(d,g){return d===rn?g:function(_){var lt=d.apply(this,arguments);b(_,lt);var vt=this.onsuccess,_t=this.onerror;return this.onsuccess=null,this.onerror=null,_=g.apply(this,arguments),vt&&(this.onsuccess=this.onsuccess?An(vt,this.onsuccess):vt),_t&&(this.onerror=this.onerror?An(_t,this.onerror):_t),lt===void 0?_===void 0?void 0:_:b(lt,_)}}function Nt(d,g){return d===rn?g:function(){return g.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function Gt(d,g){return d===rn?g:function(){var _=d.apply(this,arguments);if(_&&typeof _.then=="function"){for(var lt=this,vt=arguments.length,_t=new Array(vt);vt--;)_t[vt]=arguments[vt];return _.then(function(){return g.apply(lt,_t)})}return g.apply(this,arguments)}}an.ModifyError=Et,an.DexieError=rt,an.BulkError=Ct;var Jt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vn(d){Jt=d}var Sn={},Tn=100,In=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,$(d),d];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,$(g),d]}(),Zt=In[0],Dr=In[1],In=In[2],Dr=Dr&&Dr.then,Dn=Zt&&Zt.constructor,rr=!!In,Zn=function(d,g){cn.push([d,g]),Wn&&(queueMicrotask(Dt),Wn=!1)},or=!0,Wn=!0,Qn=[],ar=[],dr=En,Rn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:rn,pgp:!1,env:{},finalize:rn},zt=Rn,cn=[],On=0,ir=[];function jn(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=zt;if(typeof d!="function"){if(d!==Sn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Mn(this,this._value))}this._state=null,this._value=null,++g.ref,function _(lt,vt){try{vt(function(_t){if(lt._state===null){if(_t===lt)throw new TypeError("A promise cannot be resolved with itself.");var Mt=lt._lib&&Tt();_t&&typeof _t.then=="function"?_(lt,function(Wt,en){_t instanceof jn?_t._then(Wt,en):_t.then(Wt,en)}):(lt._state=!0,lt._value=_t,$n(lt)),Mt&&$t()}},Mn.bind(null,lt))}catch(_t){Mn(lt,_t)}}(this,d)}var Ot={get:function(){var d=zt,g=nr;function _(lt,vt){var _t=this,Mt=!d.global&&(d!==zt||g!==nr),Wt=Mt&&!sr(),en=new jn(function(tn,fn){Jn(_t,new _n(Ir(lt,d,Mt,Wt),Ir(vt,d,Mt,Wt),tn,fn,d))});return this._consoleTask&&(en._consoleTask=this._consoleTask),en}return _.prototype=Sn,_},set:function(d){pt(this,"then",d&&d.prototype===Sn?Ot:{get:function(){return d},set:Ot.set})}};function _n(d,g,_,lt,vt){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_,this.reject=lt,this.psd=vt}function Mn(d,g){var _,lt;ar.push(g),d._state===null&&(_=d._lib&&Tt(),g=dr(g),d._state=!1,d._value=g,lt=d,Qn.some(function(vt){return vt._value===lt._value})||Qn.push(lt),$n(d),_&&$t())}function $n(d){var g=d._listeners;d._listeners=[];for(var _=0,lt=g.length;_<lt;++_)Jn(d,g[_]);var vt=d._PSD;--vt.ref||vt.finalize(),On===0&&(++On,Zn(function(){--On==0&&gn()},[]))}function Jn(d,g){if(d._state!==null){var _=d._state?g.onFulfilled:g.onRejected;if(_===null)return(d._state?g.resolve:g.reject)(d._value);++g.psd.ref,++On,Zn(Un,[_,d,g])}else d._listeners.push(g)}function Un(d,g,_){try{var lt,vt=g._value;!g._state&&ar.length&&(ar=[]),lt=Jt&&g._consoleTask?g._consoleTask.run(function(){return d(vt)}):d(vt),g._state||ar.indexOf(vt)!==-1||function(_t){for(var Mt=Qn.length;Mt;)if(Qn[--Mt]._value===_t._value)return Qn.splice(Mt,1)}(g),_.resolve(lt)}catch(_t){_.reject(_t)}finally{--On==0&&gn(),--_.psd.ref||_.psd.finalize()}}function Dt(){Sr(Rn,function(){Tt()&&$t()})}function Tt(){var d=or;return Wn=or=!1,d}function $t(){var d,g,_;do for(;0<cn.length;)for(d=cn,cn=[],_=d.length,g=0;g<_;++g){var lt=d[g];lt[0].apply(null,lt[1])}while(0<cn.length);Wn=or=!0}function gn(){var d=Qn;Qn=[],d.forEach(function(lt){lt._PSD.onunhandled.call(null,lt._value,lt)});for(var g=ir.slice(0),_=g.length;_;)g[--_]()}function xn(d){return new jn(Sn,!1,d)}function bn(d,g){var _=zt;return function(){var lt=Tt(),vt=zt;try{return yr(_,!0),d.apply(this,arguments)}catch(_t){g&&g(_t)}finally{yr(vt,!1),lt&&$t()}}}ut(jn.prototype,{then:Ot,_then:function(d,g){Jn(this,new _n(null,null,d,g,zt))},catch:function(d){if(arguments.length===1)return this.then(null,d);var g=d,_=arguments[1];return typeof g=="function"?this.then(null,function(lt){return(lt instanceof g?_:xn)(lt)}):this.then(null,function(lt){return(lt&&lt.name===g?_:xn)(lt)})},finally:function(d){return this.then(function(g){return jn.resolve(d()).then(function(){return g})},function(g){return jn.resolve(d()).then(function(){return xn(g)})})},timeout:function(d,g){var _=this;return d<1/0?new jn(function(lt,vt){var _t=setTimeout(function(){return vt(new Bt.Timeout(g))},d);_.then(lt,vt).finally(clearTimeout.bind(null,_t))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&pt(jn.prototype,Symbol.toStringTag,"Dexie.Promise"),Rn.env=vr(),ut(jn,{all:function(){var d=Ft.apply(null,arguments).map(lr);return new jn(function(g,_){d.length===0&&g([]);var lt=d.length;d.forEach(function(vt,_t){return jn.resolve(vt).then(function(Mt){d[_t]=Mt,--lt||g(d)},_)})})},resolve:function(d){return d instanceof jn?d:d&&typeof d.then=="function"?new jn(function(g,_){d.then(g,_)}):new jn(Sn,!0,d)},reject:xn,race:function(){var d=Ft.apply(null,arguments).map(lr);return new jn(function(g,_){d.map(function(lt){return jn.resolve(lt).then(g,_)})})},PSD:{get:function(){return zt},set:function(d){return zt=d}},totalEchoes:{get:function(){return nr}},newPSD:Vn,usePSD:Sr,scheduler:{get:function(){return Zn},set:function(d){Zn=d}},rejectionMapper:{get:function(){return dr},set:function(d){dr=d}},follow:function(d,g){return new jn(function(_,lt){return Vn(function(vt,_t){var Mt=zt;Mt.unhandleds=[],Mt.onunhandled=_t,Mt.finalize=An(function(){var Wt,en=this;Wt=function(){en.unhandleds.length===0?vt():_t(en.unhandleds[0])},ir.push(function tn(){Wt(),ir.splice(ir.indexOf(tn),1)}),++On,Zn(function(){--On==0&&gn()},[])},Mt.finalize),d()},g,_,lt)})}}),Dn&&(Dn.allSettled&&pt(jn,"allSettled",function(){var d=Ft.apply(null,arguments).map(lr);return new jn(function(g){d.length===0&&g([]);var _=d.length,lt=new Array(_);d.forEach(function(vt,_t){return jn.resolve(vt).then(function(Mt){return lt[_t]={status:"fulfilled",value:Mt}},function(Mt){return lt[_t]={status:"rejected",reason:Mt}}).then(function(){return--_||g(lt)})})})}),Dn.any&&typeof AggregateError<"u"&&pt(jn,"any",function(){var d=Ft.apply(null,arguments).map(lr);return new jn(function(g,_){d.length===0&&_(new AggregateError([]));var lt=d.length,vt=new Array(lt);d.forEach(function(_t,Mt){return jn.resolve(_t).then(function(Wt){return g(Wt)},function(Wt){vt[Mt]=Wt,--lt||_(new AggregateError(vt))})})})}),Dn.withResolvers&&(jn.withResolvers=Dn.withResolvers));var Cn={awaits:0,echoes:0,id:0},Xn=0,Hn=[],Fn=0,nr=0,Gn=0;function Vn(d,g,_,lt){var vt=zt,_t=Object.create(vt);return _t.parent=vt,_t.ref=0,_t.global=!1,_t.id=++Gn,Rn.env,_t.env=rr?{Promise:jn,PromiseProp:{value:jn,configurable:!0,writable:!0},all:jn.all,race:jn.race,allSettled:jn.allSettled,any:jn.any,resolve:jn.resolve,reject:jn.reject}:{},g&&b(_t,g),++vt.ref,_t.finalize=function(){--this.parent.ref||this.parent.finalize()},lt=Sr(_t,d,_,lt),_t.ref===0&&_t.finalize(),lt}function tr(){return Cn.id||(Cn.id=++Xn),++Cn.awaits,Cn.echoes+=Tn,Cn.id}function sr(){return!!Cn.awaits&&(--Cn.awaits==0&&(Cn.id=0),Cn.echoes=Cn.awaits*Tn,!0)}function lr(d){return Cn.echoes&&d&&d.constructor===Dn?(tr(),d.then(function(g){return sr(),g},function(g){return sr(),Er(g)})):d}function mr(){var d=Hn[Hn.length-1];Hn.pop(),yr(d,!1)}function yr(d,g){var _,lt=zt;(g?!Cn.echoes||Fn++&&d===zt:!Fn||--Fn&&d===zt)||queueMicrotask(g?(function(vt){++nr,Cn.echoes&&--Cn.echoes!=0||(Cn.echoes=Cn.awaits=Cn.id=0),Hn.push(zt),yr(vt,!0)}).bind(null,d):mr),d!==zt&&(zt=d,lt===Rn&&(Rn.env=vr()),rr&&(_=Rn.env.Promise,g=d.env,(lt.global||d.global)&&(Object.defineProperty(c,"Promise",g.PromiseProp),_.all=g.all,_.race=g.race,_.resolve=g.resolve,_.reject=g.reject,g.allSettled&&(_.allSettled=g.allSettled),g.any&&(_.any=g.any))))}function vr(){var d=c.Promise;return rr?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Sr(d,g,_,lt,vt){var _t=zt;try{return yr(d,!0),g(_,lt,vt)}finally{yr(_t,!1)}}function Ir(d,g,_,lt){return typeof d!="function"?d:function(){var vt=zt;_&&tr(),yr(g,!0);try{return d.apply(this,arguments)}finally{yr(vt,!1),lt&&queueMicrotask(sr)}}}function jr(d){Promise===Dn&&Cn.echoes===0?Fn===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Dr).indexOf("[native code]")===-1&&(tr=sr=rn);var Er=jn.reject,Hr="",Lr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yl="String expected.",Xr=[],_s="__dbnames",_i="readonly",na="readwrite";function Vr(d,g){return d?g?function(){return d.apply(this,arguments)&&g.apply(this,arguments)}:d:g}var El={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ws(d){return typeof d!="string"||/\./.test(d)?function(g){return g}:function(g){return g[d]===void 0&&d in g&&delete(g=jt(g))[d],g}}function _l(){throw Bt.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function pr(d,g){try{var _=wl(d),lt=wl(g);if(_!==lt)return _==="Array"?1:lt==="Array"?-1:_==="binary"?1:lt==="binary"?-1:_==="string"?1:lt==="string"?-1:_==="Date"?1:lt!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return g<d?1:d<g?-1:0;case"binary":return function(vt,_t){for(var Mt=vt.length,Wt=_t.length,en=Mt<Wt?Mt:Wt,tn=0;tn<en;++tn)if(vt[tn]!==_t[tn])return vt[tn]<_t[tn]?-1:1;return Mt===Wt?0:Mt<Wt?-1:1}(Sl(d),Sl(g));case"Array":return function(vt,_t){for(var Mt=vt.length,Wt=_t.length,en=Mt<Wt?Mt:Wt,tn=0;tn<en;++tn){var fn=pr(vt[tn],_t[tn]);if(fn!==0)return fn}return Mt===Wt?0:Mt<Wt?-1:1}(d,g)}}catch{}return NaN}function wl(d){var g=typeof d;return g!="object"?g:ArrayBuffer.isView(d)?"binary":(d=Kt(d),d==="ArrayBuffer"?"binary":d)}function Sl(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function Ss(d,g,_){var lt=d.schema.yProps;return lt?(g&&0<_.numFailures&&(g=g.filter(function(vt,_t){return!_.failures[_t]})),Promise.all(lt.map(function(vt){return vt=vt.updatesTable,g?d.db.table(vt).where("k").anyOf(g).delete():d.db.table(vt).clear()})).then(function(){return _})):_}var is=(Al.prototype.execute=function(d){var g=this["@@propmod"];if(g.add!==void 0){var _=g.add;if(j(_))return o(o([],j(d)?d:[],!0),_).sort();if(typeof _=="number")return(Number(d)||0)+_;if(typeof _=="bigint")try{return BigInt(d)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(g.remove!==void 0){var lt=g.remove;if(j(lt))return j(d)?d.filter(function(vt){return!lt.includes(vt)}).sort():[];if(typeof lt=="number")return Number(d)-lt;if(typeof lt=="bigint")try{return BigInt(d)-lt}catch{return BigInt(0)-lt}throw new TypeError("Invalid subtrahend ".concat(lt))}return _=(_=g.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof d=="string"&&d.startsWith(_)?g.replacePrefix[1]+d.substring(_.length):d},Al);function Al(d){this["@@propmod"]=d}function Rl(d,g){for(var _=h(g),lt=_.length,vt=!1,_t=0;_t<lt;++_t){var Mt=_[_t],Wt=g[Mt],en=mt(d,Mt);Wt instanceof is?(it(d,Mt,Wt.execute(en)),vt=!0):en!==Wt&&(it(d,Mt,Wt),vt=!0)}return vt}var Cl=(br.prototype._trans=function(d,g,_){var lt=this._tx||zt.trans,vt=this.name,_t=Jt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function Mt(tn,fn,qt){if(!qt.schema[vt])throw new Bt.NotFound("Table "+vt+" not part of transaction");return g(qt.idbtrans,qt)}var Wt=Tt();try{var en=lt&&lt.db._novip===this.db._novip?lt===zt.trans?lt._promise(d,Mt,_):Vn(function(){return lt._promise(d,Mt,_)},{trans:lt,transless:zt.transless||zt}):function tn(fn,qt,mn,nn){if(fn.idbdb&&(fn._state.openComplete||zt.letThrough||fn._vip)){var ln=fn._createTransaction(qt,mn,fn._dbSchema);try{ln.create(),fn._state.PR1398_maxLoop=3}catch(un){return un.name===Pt.InvalidState&&fn.isOpen()&&0<--fn._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),fn.close({disableAutoOpen:!1}),fn.open().then(function(){return tn(fn,qt,mn,nn)})):Er(un)}return ln._promise(qt,function(un,pn){return Vn(function(){return zt.trans=ln,nn(un,pn,ln)})}).then(function(un){if(qt==="readwrite")try{ln.idbtrans.commit()}catch{}return qt==="readonly"?un:ln._completion.then(function(){return un})})}if(fn._state.openComplete)return Er(new Bt.DatabaseClosed(fn._state.dbOpenError));if(!fn._state.isBeingOpened){if(!fn._state.autoOpen)return Er(new Bt.DatabaseClosed);fn.open().catch(rn)}return fn._state.dbReadyPromise.then(function(){return tn(fn,qt,mn,nn)})}(this.db,d,[this.name],Mt);return _t&&(en._consoleTask=_t,en=en.catch(function(tn){return console.trace(tn),Er(tn)})),en}finally{Wt&&$t()}},br.prototype.get=function(d,g){var _=this;return d&&d.constructor===Object?this.where(d).first(g):d==null?Er(new Bt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(lt){return _.core.get({trans:lt,key:d}).then(function(vt){return _.hook.reading.fire(vt)})}).then(g)},br.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(j(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var g=h(d);if(g.length===1)return this.where(g[0]).equals(d[g[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(Wt){if(Wt.compound&&g.every(function(tn){return 0<=Wt.keyPath.indexOf(tn)})){for(var en=0;en<g.length;++en)if(g.indexOf(Wt.keyPath[en])===-1)return!1;return!0}return!1}).sort(function(Wt,en){return Wt.keyPath.length-en.keyPath.length})[0];if(_&&this.db._maxKey!==Hr){var _t=_.keyPath.slice(0,g.length);return this.where(_t).equals(_t.map(function(en){return d[en]}))}!_&&Jt&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var lt=this.schema.idxByName;function vt(Wt,en){return pr(Wt,en)===0}var Mt=g.reduce(function(qt,en){var tn=qt[0],fn=qt[1],qt=lt[en],mn=d[en];return[tn||qt,tn||!qt?Vr(fn,qt&&qt.multi?function(nn){return nn=mt(nn,en),j(nn)&&nn.some(function(ln){return vt(mn,ln)})}:function(nn){return vt(mn,mt(nn,en))}):fn]},[null,null]),_t=Mt[0],Mt=Mt[1];return _t?this.where(_t.name).equals(d[_t.keyPath]).filter(Mt):_?this.filter(Mt):this.where(g).equals("")},br.prototype.filter=function(d){return this.toCollection().and(d)},br.prototype.count=function(d){return this.toCollection().count(d)},br.prototype.offset=function(d){return this.toCollection().offset(d)},br.prototype.limit=function(d){return this.toCollection().limit(d)},br.prototype.each=function(d){return this.toCollection().each(d)},br.prototype.toArray=function(d){return this.toCollection().toArray(d)},br.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},br.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,j(d)?"[".concat(d.join("+"),"]"):d))},br.prototype.reverse=function(){return this.toCollection().reverse()},br.prototype.mapToClass=function(d){var g,_=this.db,lt=this.name;function vt(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof _l&&(function(en,tn){if(typeof tn!="function"&&tn!==null)throw new TypeError("Class extends value "+String(tn)+" is not a constructor or null");function fn(){this.constructor=en}i(en,tn),en.prototype=tn===null?Object.create(tn):(fn.prototype=tn.prototype,new fn)}(vt,g=d),Object.defineProperty(vt.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),vt.prototype.table=function(){return lt},d=vt);for(var _t=new Set,Mt=d.prototype;Mt;Mt=$(Mt))Object.getOwnPropertyNames(Mt).forEach(function(en){return _t.add(en)});function Wt(en){if(!en)return en;var tn,fn=Object.create(d.prototype);for(tn in en)if(!_t.has(tn))try{fn[tn]=en[tn]}catch{}return fn}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Wt,this.hook("reading",Wt),d},br.prototype.defineClass=function(){return this.mapToClass(function(d){b(this,d)})},br.prototype.add=function(d,g){var _=this,lt=this.schema.primKey,vt=lt.auto,_t=lt.keyPath,Mt=d;return _t&&vt&&(Mt=ws(_t)(d)),this._trans("readwrite",function(Wt){return _.core.mutate({trans:Wt,type:"add",keys:g!=null?[g]:null,values:[Mt]})}).then(function(Wt){return Wt.numFailures?jn.reject(Wt.failures[0]):Wt.lastResult}).then(function(Wt){if(_t)try{it(d,_t,Wt)}catch{}return Wt})},br.prototype.upsert=function(d,g){var _=this,lt=this.schema.primKey.keyPath;return this._trans("readwrite",function(vt){return _.core.get({trans:vt,key:d}).then(function(_t){var Mt=_t??{};return Rl(Mt,g),lt&&it(Mt,lt,d),_.core.mutate({trans:vt,type:"put",values:[Mt],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[g]}}).then(function(Wt){return Wt.numFailures?jn.reject(Wt.failures[0]):!!_t})})})},br.prototype.update=function(d,g){return typeof d!="object"||j(d)?this.where(":id").equals(d).modify(g):(d=mt(d,this.schema.primKey.keyPath),d===void 0?Er(new Bt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(g))},br.prototype.put=function(d,g){var _=this,lt=this.schema.primKey,vt=lt.auto,_t=lt.keyPath,Mt=d;return _t&&vt&&(Mt=ws(_t)(d)),this._trans("readwrite",function(Wt){return _.core.mutate({trans:Wt,type:"put",values:[Mt],keys:g!=null?[g]:null})}).then(function(Wt){return Wt.numFailures?jn.reject(Wt.failures[0]):Wt.lastResult}).then(function(Wt){if(_t)try{it(d,_t,Wt)}catch{}return Wt})},br.prototype.delete=function(d){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"delete",keys:[d]}).then(function(lt){return Ss(g,[d],lt)}).then(function(lt){return lt.numFailures?jn.reject(lt.failures[0]):void 0})})},br.prototype.clear=function(){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"deleteRange",range:El}).then(function(_){return Ss(d,null,_)})}).then(function(g){return g.numFailures?jn.reject(g.failures[0]):void 0})},br.prototype.bulkGet=function(d){var g=this;return this._trans("readonly",function(_){return g.core.getMany({keys:d,trans:_}).then(function(lt){return lt.map(function(vt){return g.hook.reading.fire(vt)})})})},br.prototype.bulkAdd=function(d,g,_){var lt=this,vt=Array.isArray(g)?g:void 0,_t=(_=_||(vt?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(Mt){var tn=lt.schema.primKey,Wt=tn.auto,tn=tn.keyPath;if(tn&&vt)throw new Bt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(vt&&vt.length!==d.length)throw new Bt.InvalidArgument("Arguments objects and keys must have the same length");var en=d.length,tn=tn&&Wt?d.map(ws(tn)):d;return lt.core.mutate({trans:Mt,type:"add",keys:vt,values:tn,wantResults:_t}).then(function(ln){var qt=ln.numFailures,mn=ln.results,nn=ln.lastResult,ln=ln.failures;if(qt===0)return _t?mn:nn;throw new Ct("".concat(lt.name,".bulkAdd(): ").concat(qt," of ").concat(en," operations failed"),ln)})})},br.prototype.bulkPut=function(d,g,_){var lt=this,vt=Array.isArray(g)?g:void 0,_t=(_=_||(vt?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(Mt){var tn=lt.schema.primKey,Wt=tn.auto,tn=tn.keyPath;if(tn&&vt)throw new Bt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(vt&&vt.length!==d.length)throw new Bt.InvalidArgument("Arguments objects and keys must have the same length");var en=d.length,tn=tn&&Wt?d.map(ws(tn)):d;return lt.core.mutate({trans:Mt,type:"put",keys:vt,values:tn,wantResults:_t}).then(function(ln){var qt=ln.numFailures,mn=ln.results,nn=ln.lastResult,ln=ln.failures;if(qt===0)return _t?mn:nn;throw new Ct("".concat(lt.name,".bulkPut(): ").concat(qt," of ").concat(en," operations failed"),ln)})})},br.prototype.bulkUpdate=function(d){var g=this,_=this.core,lt=d.map(function(Mt){return Mt.key}),vt=d.map(function(Mt){return Mt.changes}),_t=[];return this._trans("readwrite",function(Mt){return _.getMany({trans:Mt,keys:lt,cache:"clone"}).then(function(Wt){var en=[],tn=[];d.forEach(function(qt,mn){var nn=qt.key,ln=qt.changes,un=Wt[mn];if(un){for(var pn=0,yn=Object.keys(ln);pn<yn.length;pn++){var wn=yn[pn],Pn=ln[wn];if(wn===g.schema.primKey.keyPath){if(pr(Pn,nn)!==0)throw new Bt.Constraint("Cannot update primary key in bulkUpdate()")}else it(un,wn,Pn)}_t.push(mn),en.push(nn),tn.push(un)}});var fn=en.length;return _.mutate({trans:Mt,type:"put",keys:en,values:tn,updates:{keys:lt,changeSpecs:vt}}).then(function(qt){var mn=qt.numFailures,nn=qt.failures;if(mn===0)return fn;for(var ln=0,un=Object.keys(nn);ln<un.length;ln++){var pn,yn=un[ln],wn=_t[Number(yn)];wn!=null&&(pn=nn[yn],delete nn[yn],nn[wn]=pn)}throw new Ct("".concat(g.name,".bulkUpdate(): ").concat(mn," of ").concat(fn," operations failed"),nn)})})})},br.prototype.bulkDelete=function(d){var g=this,_=d.length;return this._trans("readwrite",function(lt){return g.core.mutate({trans:lt,type:"delete",keys:d}).then(function(vt){return Ss(g,d,vt)})}).then(function(Mt){var vt=Mt.numFailures,_t=Mt.lastResult,Mt=Mt.failures;if(vt===0)return _t;throw new Ct("".concat(g.name,".bulkDelete(): ").concat(vt," of ").concat(_," operations failed"),Mt)})},br);function br(){}function as(d){function g(Mt,Wt){if(Wt){for(var en=arguments.length,tn=new Array(en-1);--en;)tn[en-1]=arguments[en];return _[Mt].subscribe.apply(null,tn),d}if(typeof Mt=="string")return _[Mt]}var _={};g.addEventType=_t;for(var lt=1,vt=arguments.length;lt<vt;++lt)_t(arguments[lt]);return g;function _t(Mt,Wt,en){if(typeof Mt!="object"){var tn;Wt=Wt||Nt;var fn={subscribers:[],fire:en=en||rn,subscribe:function(qt){fn.subscribers.indexOf(qt)===-1&&(fn.subscribers.push(qt),fn.fire=Wt(fn.fire,qt))},unsubscribe:function(qt){fn.subscribers=fn.subscribers.filter(function(mn){return mn!==qt}),fn.fire=fn.subscribers.reduce(Wt,en)}};return _[Mt]=g[Mt]=fn}h(tn=Mt).forEach(function(qt){var mn=tn[qt];if(j(mn))_t(qt,tn[qt][0],tn[qt][1]);else{if(mn!=="asap")throw new Bt.InvalidArgument("Invalid event config");var nn=_t(qt,En,function(){for(var ln=arguments.length,un=new Array(ln);ln--;)un[ln]=arguments[ln];nn.subscribers.forEach(function(pn){ot(function(){pn.apply(null,un)})})})}})}}function os(d,g){return yt(g).from({prototype:d}),g}function Yr(d,g){return!(d.filter||d.algorithm||d.or)&&(g?d.justLimit:!d.replayFilter)}function ga(d,g){d.filter=Vr(d.filter,g)}function xa(d,g,_){var lt=d.replayFilter;d.replayFilter=lt?function(){return Vr(lt(),g())}:g,d.justLimit=_&&!lt}function As(d,g){if(d.isPrimKey)return g.primaryKey;var _=g.getIndexByKeyPath(d.index);if(!_)throw new Bt.Schema("KeyPath "+d.index+" on object store "+g.name+" is not indexed");return _}function Tl(d,g,_){var lt=As(d,g.schema);return g.openCursor({trans:_,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:lt,range:d.range}})}function ks(d,g,_,lt){var vt=d.replayFilter?Vr(d.filter,d.replayFilter()):d.filter;if(d.or){var _t={},Mt=function(Wt,en,tn){var fn,qt;vt&&!vt(en,tn,function(mn){return en.stop(mn)},function(mn){return en.fail(mn)})||((qt=""+(fn=en.primaryKey))=="[object ArrayBuffer]"&&(qt=""+new Uint8Array(fn)),ct(_t,qt)||(_t[qt]=!0,g(Wt,en,tn)))};return Promise.all([d.or._iterate(Mt,_),Pl(Tl(d,lt,_),d.algorithm,Mt,!d.keysOnly&&d.valueMapper)])}return Pl(Tl(d,lt,_),Vr(d.algorithm,vt),g,!d.keysOnly&&d.valueMapper)}function Pl(d,g,_,lt){var vt=bn(lt?function(_t,Mt,Wt){return _(lt(_t),Mt,Wt)}:_);return d.then(function(_t){if(_t)return _t.start(function(){var Mt=function(){return _t.continue()};g&&!g(_t,function(Wt){return Mt=Wt},function(Wt){_t.stop(Wt),Mt=rn},function(Wt){_t.fail(Wt),Mt=rn})||vt(_t.value,_t,function(Wt){return Mt=Wt}),Mt()})})}var Nu=(gr.prototype._read=function(d,g){var _=this._ctx;return _.error?_.table._trans(null,Er.bind(null,_.error)):_.table._trans("readonly",d).then(g)},gr.prototype._write=function(d){var g=this._ctx;return g.error?g.table._trans(null,Er.bind(null,g.error)):g.table._trans("readwrite",d,"locked")},gr.prototype._addAlgorithm=function(d){var g=this._ctx;g.algorithm=Vr(g.algorithm,d)},gr.prototype._iterate=function(d,g){return ks(this._ctx,d,g,this._ctx.table.core)},gr.prototype.clone=function(d){var g=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return d&&b(_,d),g._ctx=_,g},gr.prototype.raw=function(){return this._ctx.valueMapper=null,this},gr.prototype.each=function(d){var g=this._ctx;return this._read(function(_){return ks(g,d,_,g.table.core)})},gr.prototype.count=function(d){var g=this;return this._read(function(_){var lt=g._ctx,vt=lt.table.core;if(Yr(lt,!0))return vt.count({trans:_,query:{index:As(lt,vt.schema),range:lt.range}}).then(function(Mt){return Math.min(Mt,lt.limit)});var _t=0;return ks(lt,function(){return++_t,!1},_,vt).then(function(){return _t})}).then(d)},gr.prototype.sortBy=function(d,g){var _=d.split(".").reverse(),lt=_[0],vt=_.length-1;function _t(en,tn){return tn?_t(en[_[tn]],tn-1):en[lt]}var Mt=this._ctx.dir==="next"?1:-1;function Wt(en,tn){return pr(_t(en,vt),_t(tn,vt))*Mt}return this.toArray(function(en){return en.sort(Wt)}).then(g)},gr.prototype.toArray=function(d){var g=this;return this._read(function(_){var lt=g._ctx;if(lt.dir==="next"&&Yr(lt,!0)&&0<lt.limit){var vt=lt.valueMapper,_t=As(lt,lt.table.core.schema);return lt.table.core.query({trans:_,limit:lt.limit,values:!0,query:{index:_t,range:lt.range}}).then(function(Wt){return Wt=Wt.result,vt?Wt.map(vt):Wt})}var Mt=[];return ks(lt,function(Wt){return Mt.push(Wt)},_,lt.table.core).then(function(){return Mt})},d)},gr.prototype.offset=function(d){var g=this._ctx;return d<=0||(g.offset+=d,Yr(g)?xa(g,function(){var _=d;return function(lt,vt){return _===0||(_===1?--_:vt(function(){lt.advance(_),_=0}),!1)}}):xa(g,function(){var _=d;return function(){return--_<0}})),this},gr.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),xa(this._ctx,function(){var g=d;return function(_,lt,vt){return--g<=0&&lt(vt),0<=g}},!0),this},gr.prototype.until=function(d,g){return ga(this._ctx,function(_,lt,vt){return!d(_.value)||(lt(vt),g)}),this},gr.prototype.first=function(d){return this.limit(1).toArray(function(g){return g[0]}).then(d)},gr.prototype.last=function(d){return this.reverse().first(d)},gr.prototype.filter=function(d){var g;return ga(this._ctx,function(_){return d(_.value)}),(g=this._ctx).isMatch=Vr(g.isMatch,d),this},gr.prototype.and=function(d){return this.filter(d)},gr.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},gr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},gr.prototype.desc=function(){return this.reverse()},gr.prototype.eachKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,lt){d(lt.key,lt)})},gr.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},gr.prototype.eachPrimaryKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,lt){d(lt.primaryKey,lt)})},gr.prototype.keys=function(d){var g=this._ctx;g.keysOnly=!g.isMatch;var _=[];return this.each(function(lt,vt){_.push(vt.key)}).then(function(){return _}).then(d)},gr.prototype.primaryKeys=function(d){var g=this._ctx;if(g.dir==="next"&&Yr(g,!0)&&0<g.limit)return this._read(function(lt){var vt=As(g,g.table.core.schema);return g.table.core.query({trans:lt,values:!1,limit:g.limit,query:{index:vt,range:g.range}})}).then(function(lt){return lt.result}).then(d);g.keysOnly=!g.isMatch;var _=[];return this.each(function(lt,vt){_.push(vt.primaryKey)}).then(function(){return _}).then(d)},gr.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},gr.prototype.firstKey=function(d){return this.limit(1).keys(function(g){return g[0]}).then(d)},gr.prototype.lastKey=function(d){return this.reverse().firstKey(d)},gr.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var g={};return ga(this._ctx,function(vt){var lt=vt.primaryKey.toString(),vt=ct(g,lt);return g[lt]=!0,!vt}),this},gr.prototype.modify=function(d){var g=this,_=this._ctx;return this._write(function(lt){var vt=typeof d=="function"?d:function(un){return Rl(un,d)},_t=_.table.core,tn=_t.schema.primaryKey,Mt=tn.outbound,Wt=tn.extractKey,en=200,tn=g.db._options.modifyChunkSize;tn&&(en=typeof tn=="object"?tn[_t.name]||tn["*"]||200:tn);function fn(un,wn){var yn=wn.failures,wn=wn.numFailures;mn+=un-wn;for(var Pn=0,Nn=h(yn);Pn<Nn.length;Pn++){var Bn=Nn[Pn];qt.push(yn[Bn])}}var qt=[],mn=0,nn=[],ln=d===Dl;return g.clone().primaryKeys().then(function(un){function pn(wn){var Pn=Math.min(en,un.length-wn),Nn=un.slice(wn,wn+Pn);return(ln?Promise.resolve([]):_t.getMany({trans:lt,keys:Nn,cache:"immutable"})).then(function(Bn){var qn=[],Ln=[],zn=Mt?[]:null,Yn=ln?Nn:[];if(!ln)for(var Kn=0;Kn<Pn;++Kn){var er=Bn[Kn],cr={value:jt(er),primKey:un[wn+Kn]};vt.call(cr,cr.value,cr)!==!1&&(cr.value==null?Yn.push(un[wn+Kn]):Mt||pr(Wt(er),Wt(cr.value))===0?(Ln.push(cr.value),Mt&&zn.push(un[wn+Kn])):(Yn.push(un[wn+Kn]),qn.push(cr.value)))}return Promise.resolve(0<qn.length&&_t.mutate({trans:lt,type:"add",values:qn}).then(function(hr){for(var fr in hr.failures)Yn.splice(parseInt(fr),1);fn(qn.length,hr)})).then(function(){return(0<Ln.length||yn&&typeof d=="object")&&_t.mutate({trans:lt,type:"put",keys:zn,values:Ln,criteria:yn,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<wn}).then(function(hr){return fn(Ln.length,hr)})}).then(function(){return(0<Yn.length||yn&&ln)&&_t.mutate({trans:lt,type:"delete",keys:Yn,criteria:yn,isAdditionalChunk:0<wn}).then(function(hr){return Ss(_.table,Yn,hr)}).then(function(hr){return fn(Yn.length,hr)})}).then(function(){return un.length>wn+Pn&&pn(wn+en)})})}var yn=Yr(_)&&_.limit===1/0&&(typeof d!="function"||ln)&&{index:_.index,range:_.range};return pn(0).then(function(){if(0<qt.length)throw new Et("Error modifying one or more objects",qt,mn,nn);return un.length})})})},gr.prototype.delete=function(){var d=this._ctx,g=d.range;return!Yr(d)||d.table.schema.yProps||!d.isPrimKey&&g.type!==3?this.modify(Dl):this._write(function(_){var lt=d.table.core.schema.primaryKey,vt=g;return d.table.core.count({trans:_,query:{index:lt,range:vt}}).then(function(_t){return d.table.core.mutate({trans:_,type:"deleteRange",range:vt}).then(function(en){var Wt=en.failures,en=en.numFailures;if(en)throw new Et("Could not delete some values",Object.keys(Wt).map(function(tn){return Wt[tn]}),_t-en);return _t-en})})})},gr);function gr(){}var Dl=function(d,g){return g.value=null};function Iu(d,g){return d<g?-1:d===g?0:1}function Mu(d,g){return g<d?-1:d===g?0:1}function Tr(d,g,_){return d=d instanceof Il?new d.Collection(d):d,d._ctx.error=new(_||TypeError)(g),d}function Qr(d){return new d.Collection(d,function(){return Nl("")}).limit(0)}function Rs(d,g,_,lt){var vt,_t,Mt,Wt,en,tn,fn,qt=_.length;if(!_.every(function(ln){return typeof ln=="string"}))return Tr(d,yl);function mn(ln){vt=ln==="next"?function(pn){return pn.toUpperCase()}:function(pn){return pn.toLowerCase()},_t=ln==="next"?function(pn){return pn.toLowerCase()}:function(pn){return pn.toUpperCase()},Mt=ln==="next"?Iu:Mu;var un=_.map(function(pn){return{lower:_t(pn),upper:vt(pn)}}).sort(function(pn,yn){return Mt(pn.lower,yn.lower)});Wt=un.map(function(pn){return pn.upper}),en=un.map(function(pn){return pn.lower}),fn=(tn=ln)==="next"?"":lt}mn("next"),d=new d.Collection(d,function(){return Ur(Wt[0],en[qt-1]+lt)}),d._ondirectionchange=function(ln){mn(ln)};var nn=0;return d._addAlgorithm(function(ln,un,pn){var yn=ln.key;if(typeof yn!="string")return!1;var wn=_t(yn);if(g(wn,en,nn))return!0;for(var Pn=null,Nn=nn;Nn<qt;++Nn){var Bn=function(qn,Ln,zn,Yn,Kn,er){for(var cr=Math.min(qn.length,Yn.length),hr=-1,fr=0;fr<cr;++fr){var Pr=Ln[fr];if(Pr!==Yn[fr])return Kn(qn[fr],zn[fr])<0?qn.substr(0,fr)+zn[fr]+zn.substr(fr+1):Kn(qn[fr],Yn[fr])<0?qn.substr(0,fr)+Yn[fr]+zn.substr(fr+1):0<=hr?qn.substr(0,hr)+Ln[hr]+zn.substr(hr+1):null;Kn(qn[fr],Pr)<0&&(hr=fr)}return cr<Yn.length&&er==="next"?qn+zn.substr(qn.length):cr<qn.length&&er==="prev"?qn.substr(0,zn.length):hr<0?null:qn.substr(0,hr)+Yn[hr]+zn.substr(hr+1)}(yn,wn,Wt[Nn],en[Nn],Mt,tn);Bn===null&&Pn===null?nn=Nn+1:(Pn===null||0<Mt(Pn,Bn))&&(Pn=Bn)}return un(Pn!==null?function(){ln.continue(Pn+fn)}:pn),!1}),d}function Ur(d,g,_,lt){return{type:2,lower:d,upper:g,lowerOpen:_,upperOpen:lt}}function Nl(d){return{type:1,lower:d,upper:d}}var Il=(Object.defineProperty(wr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),wr.prototype.between=function(d,g,_,lt){_=_!==!1,lt=lt===!0;try{return 0<this._cmp(d,g)||this._cmp(d,g)===0&&(_||lt)&&(!_||!lt)?Qr(this):new this.Collection(this,function(){return Ur(d,g,!_,!lt)})}catch{return Tr(this,Lr)}},wr.prototype.equals=function(d){return d==null?Tr(this,Lr):new this.Collection(this,function(){return Nl(d)})},wr.prototype.above=function(d){return d==null?Tr(this,Lr):new this.Collection(this,function(){return Ur(d,void 0,!0)})},wr.prototype.aboveOrEqual=function(d){return d==null?Tr(this,Lr):new this.Collection(this,function(){return Ur(d,void 0,!1)})},wr.prototype.below=function(d){return d==null?Tr(this,Lr):new this.Collection(this,function(){return Ur(void 0,d,!1,!0)})},wr.prototype.belowOrEqual=function(d){return d==null?Tr(this,Lr):new this.Collection(this,function(){return Ur(void 0,d)})},wr.prototype.startsWith=function(d){return typeof d!="string"?Tr(this,yl):this.between(d,d+Hr,!0,!0)},wr.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):Rs(this,function(g,_){return g.indexOf(_[0])===0},[d],Hr)},wr.prototype.equalsIgnoreCase=function(d){return Rs(this,function(g,_){return g===_[0]},[d],"")},wr.prototype.anyOfIgnoreCase=function(){var d=Ft.apply(At,arguments);return d.length===0?Qr(this):Rs(this,function(g,_){return _.indexOf(g)!==-1},d,"")},wr.prototype.startsWithAnyOfIgnoreCase=function(){var d=Ft.apply(At,arguments);return d.length===0?Qr(this):Rs(this,function(g,_){return _.some(function(lt){return g.indexOf(lt)===0})},d,Hr)},wr.prototype.anyOf=function(){var d=this,g=Ft.apply(At,arguments),_=this._cmp;try{g.sort(_)}catch{return Tr(this,Lr)}if(g.length===0)return Qr(this);var lt=new this.Collection(this,function(){return Ur(g[0],g[g.length-1])});lt._ondirectionchange=function(_t){_=_t==="next"?d._ascending:d._descending,g.sort(_)};var vt=0;return lt._addAlgorithm(function(_t,Mt,Wt){for(var en=_t.key;0<_(en,g[vt]);)if(++vt===g.length)return Mt(Wt),!1;return _(en,g[vt])===0||(Mt(function(){_t.continue(g[vt])}),!1)}),lt},wr.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},wr.prototype.noneOf=function(){var d=Ft.apply(At,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Tr(this,Lr)}var g=d.reduce(function(_,lt){return _?_.concat([[_[_.length-1][1],lt]]):[[-1/0,lt]]},null);return g.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},wr.prototype.inAnyRange=function(yn,g){var _=this,lt=this._cmp,vt=this._ascending,_t=this._descending,Mt=this._min,Wt=this._max;if(yn.length===0)return Qr(this);if(!yn.every(function(wn){return wn[0]!==void 0&&wn[1]!==void 0&&vt(wn[0],wn[1])<=0}))return Tr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Bt.InvalidArgument);var en=!g||g.includeLowers!==!1,tn=g&&g.includeUppers===!0,fn,qt=vt;function mn(wn,Pn){return qt(wn[0],Pn[0])}try{(fn=yn.reduce(function(wn,Pn){for(var Nn=0,Bn=wn.length;Nn<Bn;++Nn){var qn=wn[Nn];if(lt(Pn[0],qn[1])<0&&0<lt(Pn[1],qn[0])){qn[0]=Mt(qn[0],Pn[0]),qn[1]=Wt(qn[1],Pn[1]);break}}return Nn===Bn&&wn.push(Pn),wn},[])).sort(mn)}catch{return Tr(this,Lr)}var nn=0,ln=tn?function(wn){return 0<vt(wn,fn[nn][1])}:function(wn){return 0<=vt(wn,fn[nn][1])},un=en?function(wn){return 0<_t(wn,fn[nn][0])}:function(wn){return 0<=_t(wn,fn[nn][0])},pn=ln,yn=new this.Collection(this,function(){return Ur(fn[0][0],fn[fn.length-1][1],!en,!tn)});return yn._ondirectionchange=function(wn){qt=wn==="next"?(pn=ln,vt):(pn=un,_t),fn.sort(mn)},yn._addAlgorithm(function(wn,Pn,Nn){for(var Bn,qn=wn.key;pn(qn);)if(++nn===fn.length)return Pn(Nn),!1;return!ln(Bn=qn)&&!un(Bn)||(_._cmp(qn,fn[nn][1])===0||_._cmp(qn,fn[nn][0])===0||Pn(function(){qt===vt?wn.continue(fn[nn][0]):wn.continue(fn[nn][1])}),!1)}),yn},wr.prototype.startsWithAnyOf=function(){var d=Ft.apply(At,arguments);return d.every(function(g){return typeof g=="string"})?d.length===0?Qr(this):this.inAnyRange(d.map(function(g){return[g,g+Hr]})):Tr(this,"startsWithAnyOf() only works with strings")},wr);function wr(){}function Mr(d){return bn(function(g){return ls(g),d(g.target.error),!1})}function ls(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var us="storagemutated",ba="x-storagemutated-1",zr=as(null,us),Fu=(Fr.prototype._lock=function(){return gt(!zt.global),++this._reculock,this._reculock!==1||zt.global||(zt.lockOwnerFor=this),this},Fr.prototype._unlock=function(){if(gt(!zt.global),--this._reculock==0)for(zt.global||(zt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Sr(d[1],d[0])}catch{}}return this},Fr.prototype._locked=function(){return this._reculock&&zt.lockOwnerFor!==this},Fr.prototype.create=function(d){var g=this;if(!this.mode)return this;var _=this.db.idbdb,lt=this.db._state.dbOpenError;if(gt(!this.idbtrans),!d&&!_)switch(lt&&lt.name){case"DatabaseClosedError":throw new Bt.DatabaseClosed(lt);case"MissingAPIError":throw new Bt.MissingAPI(lt.message,lt);default:throw new Bt.OpenFailed(lt)}if(!this.active)throw new Bt.TransactionInactive;return gt(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=bn(function(vt){ls(vt),g._reject(d.error)}),d.onabort=bn(function(vt){ls(vt),g.active&&g._reject(new Bt.Abort(d.error)),g.active=!1,g.on("abort").fire(vt)}),d.oncomplete=bn(function(){g.active=!1,g._resolve(),"mutatedParts"in d&&zr.storagemutated.fire(d.mutatedParts)}),this},Fr.prototype._promise=function(d,g,_){var lt=this;if(d==="readwrite"&&this.mode!=="readwrite")return Er(new Bt.ReadOnly("Transaction is readonly"));if(!this.active)return Er(new Bt.TransactionInactive);if(this._locked())return new jn(function(_t,Mt){lt._blockedFuncs.push([function(){lt._promise(d,g,_).then(_t,Mt)},zt])});if(_)return Vn(function(){var _t=new jn(function(Mt,Wt){lt._lock();var en=g(Mt,Wt,lt);en&&en.then&&en.then(Mt,Wt)});return _t.finally(function(){return lt._unlock()}),_t._lib=!0,_t});var vt=new jn(function(_t,Mt){var Wt=g(_t,Mt,lt);Wt&&Wt.then&&Wt.then(_t,Mt)});return vt._lib=!0,vt},Fr.prototype._root=function(){return this.parent?this.parent._root():this},Fr.prototype.waitFor=function(d){var g,_=this._root(),lt=jn.resolve(d);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return lt}):(_._waitingFor=lt,_._waitingQueue=[],g=_.idbtrans.objectStore(_.storeNames[0]),function _t(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(g.get(-1/0).onsuccess=_t)}());var vt=_._waitingFor;return new jn(function(_t,Mt){lt.then(function(Wt){return _._waitingQueue.push(bn(_t.bind(null,Wt)))},function(Wt){return _._waitingQueue.push(bn(Mt.bind(null,Wt)))}).finally(function(){_._waitingFor===vt&&(_._waitingFor=null)})})},Fr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Bt.Abort))},Fr.prototype.table=function(d){var g=this._memoizedTables||(this._memoizedTables={});if(ct(g,d))return g[d];var _=this.schema[d];if(!_)throw new Bt.NotFound("Table "+d+" not part of transaction");return _=new this.db.Table(d,_,this),_.core=this.db.core.table(d),g[d]=_},Fr);function Fr(){}function _a(d,g,_,lt,vt,_t,Mt,Wt){return{name:d,keyPath:g,unique:_,multi:lt,auto:vt,compound:_t,src:(_&&!Mt?"&":"")+(lt?"*":"")+(vt?"++":"")+Ml(g),type:Wt}}function Ml(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function $a(d,g,_){return{name:d,primKey:g,indexes:_,mappedClass:null,idxByName:(lt=function(vt){return[vt.name,vt]},_.reduce(function(vt,_t,Mt){return Mt=lt(_t,Mt),Mt&&(vt[Mt[0]]=Mt[1]),vt},{}))};var lt}var cs=function(d){try{return d.only([[]]),cs=function(){return[[]]},[[]]}catch{return cs=function(){return Hr},Hr}};function eo(d){return d==null?function(){}:typeof d=="string"?(g=d).split(".").length===1?function(_){return _[g]}:function(_){return mt(_,g)}:function(_){return mt(_,d)};var g}function Fl(d){return[].slice.call(d)}var Lu=0;function ds(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function Ou(d,g,en){function lt(pn){if(pn.type===3)return null;if(pn.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var nn=pn.lower,ln=pn.upper,un=pn.lowerOpen,pn=pn.upperOpen;return nn===void 0?ln===void 0?null:g.upperBound(ln,!!pn):ln===void 0?g.lowerBound(nn,!!un):g.bound(nn,ln,!!un,!!pn)}function vt(mn){var nn,ln=mn.name;return{name:ln,schema:mn,mutate:function(un){var pn=un.trans,yn=un.type,wn=un.keys,Pn=un.values,Nn=un.range;return new Promise(function(Bn,qn){Bn=bn(Bn);var Ln=pn.objectStore(ln),zn=Ln.keyPath==null,Yn=yn==="put"||yn==="add";if(!Yn&&yn!=="delete"&&yn!=="deleteRange")throw new Error("Invalid operation type: "+yn);var Kn,er=(wn||Pn||{length:1}).length;if(wn&&Pn&&wn.length!==Pn.length)throw new Error("Given keys array must have same length as given values array.");if(er===0)return Bn({numFailures:0,failures:{},results:[],lastResult:void 0});function cr(Cr){++Pr,ls(Cr)}var hr=[],fr=[],Pr=0;if(yn==="deleteRange"){if(Nn.type===4)return Bn({numFailures:Pr,failures:fr,results:[],lastResult:void 0});Nn.type===3?hr.push(Kn=Ln.clear()):hr.push(Kn=Ln.delete(lt(Nn)))}else{var zn=Yn?zn?[Pn,wn]:[Pn,null]:[wn,null],ur=zn[0],kr=zn[1];if(Yn)for(var Rr=0;Rr<er;++Rr)hr.push(Kn=kr&&kr[Rr]!==void 0?Ln[yn](ur[Rr],kr[Rr]):Ln[yn](ur[Rr])),Kn.onerror=cr;else for(Rr=0;Rr<er;++Rr)hr.push(Kn=Ln[yn](ur[Rr])),Kn.onerror=cr}function Bs(Cr){Cr=Cr.target.result,hr.forEach(function(Gr,vo){return Gr.error!=null&&(fr[vo]=Gr.error)}),Bn({numFailures:Pr,failures:fr,results:yn==="delete"?wn:hr.map(function(Gr){return Gr.result}),lastResult:Cr})}Kn.onerror=function(Cr){cr(Cr),Bs(Cr)},Kn.onsuccess=Bs})},getMany:function(un){var pn=un.trans,yn=un.keys;return new Promise(function(wn,Pn){wn=bn(wn);for(var Nn,Bn=pn.objectStore(ln),qn=yn.length,Ln=new Array(qn),zn=0,Yn=0,Kn=function(hr){hr=hr.target,Ln[hr._pos]=hr.result,++Yn===zn&&wn(Ln)},er=Mr(Pn),cr=0;cr<qn;++cr)yn[cr]!=null&&((Nn=Bn.get(yn[cr]))._pos=cr,Nn.onsuccess=Kn,Nn.onerror=er,++zn);zn===0&&wn(Ln)})},get:function(un){var pn=un.trans,yn=un.key;return new Promise(function(wn,Pn){wn=bn(wn);var Nn=pn.objectStore(ln).get(yn);Nn.onsuccess=function(Bn){return wn(Bn.target.result)},Nn.onerror=Mr(Pn)})},query:(nn=tn,function(un){return new Promise(function(pn,yn){pn=bn(pn);var wn,Pn,Nn,zn=un.trans,Bn=un.values,qn=un.limit,Kn=un.query,Ln=qn===1/0?void 0:qn,Yn=Kn.index,Kn=Kn.range,zn=zn.objectStore(ln),Yn=Yn.isPrimaryKey?zn:zn.index(Yn.name),Kn=lt(Kn);if(qn===0)return pn({result:[]});nn?((Ln=Bn?Yn.getAll(Kn,Ln):Yn.getAllKeys(Kn,Ln)).onsuccess=function(er){return pn({result:er.target.result})},Ln.onerror=Mr(yn)):(wn=0,Pn=!Bn&&"openKeyCursor"in Yn?Yn.openKeyCursor(Kn):Yn.openCursor(Kn),Nn=[],Pn.onsuccess=function(er){var cr=Pn.result;return cr?(Nn.push(Bn?cr.value:cr.primaryKey),++wn===qn?pn({result:Nn}):void cr.continue()):pn({result:Nn})},Pn.onerror=Mr(yn))})}),openCursor:function(un){var pn=un.trans,yn=un.values,wn=un.query,Pn=un.reverse,Nn=un.unique;return new Promise(function(Bn,qn){Bn=bn(Bn);var Yn=wn.index,Ln=wn.range,zn=pn.objectStore(ln),zn=Yn.isPrimaryKey?zn:zn.index(Yn.name),Yn=Pn?Nn?"prevunique":"prev":Nn?"nextunique":"next",Kn=!yn&&"openKeyCursor"in zn?zn.openKeyCursor(lt(Ln),Yn):zn.openCursor(lt(Ln),Yn);Kn.onerror=Mr(qn),Kn.onsuccess=bn(function(er){var cr,hr,fr,Pr,ur=Kn.result;ur?(ur.___id=++Lu,ur.done=!1,cr=ur.continue.bind(ur),hr=(hr=ur.continuePrimaryKey)&&hr.bind(ur),fr=ur.advance.bind(ur),Pr=function(){throw new Error("Cursor not stopped")},ur.trans=pn,ur.stop=ur.continue=ur.continuePrimaryKey=ur.advance=function(){throw new Error("Cursor not started")},ur.fail=bn(qn),ur.next=function(){var kr=this,Rr=1;return this.start(function(){return Rr--?kr.continue():kr.stop()}).then(function(){return kr})},ur.start=function(kr){function Rr(){if(Kn.result)try{kr()}catch(Cr){ur.fail(Cr)}else ur.done=!0,ur.start=function(){throw new Error("Cursor behind last entry")},ur.stop()}var Bs=new Promise(function(Cr,Gr){Cr=bn(Cr),Kn.onerror=Mr(Gr),ur.fail=Gr,ur.stop=function(vo){ur.stop=ur.continue=ur.continuePrimaryKey=ur.advance=Pr,Cr(vo)}});return Kn.onsuccess=bn(function(Cr){Kn.onsuccess=Rr,Rr()}),ur.continue=cr,ur.continuePrimaryKey=hr,ur.advance=fr,Rr(),Bs},Bn(ur)):Bn(null)},qn)})},count:function(un){var pn=un.query,yn=un.trans,wn=pn.index,Pn=pn.range;return new Promise(function(Nn,Bn){var qn=yn.objectStore(ln),Ln=wn.isPrimaryKey?qn:qn.index(wn.name),qn=lt(Pn),Ln=qn?Ln.count(qn):Ln.count();Ln.onsuccess=bn(function(zn){return Nn(zn.target.result)}),Ln.onerror=Mr(Bn)})}}}var _t,Mt,Wt,fn=(Mt=en,Wt=Fl((_t=d).objectStoreNames),{schema:{name:_t.name,tables:Wt.map(function(mn){return Mt.objectStore(mn)}).map(function(mn){var nn=mn.keyPath,pn=mn.autoIncrement,ln=j(nn),un={},pn={name:mn.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:nn==null,compound:ln,keyPath:nn,autoIncrement:pn,unique:!0,extractKey:eo(nn)},indexes:Fl(mn.indexNames).map(function(yn){return mn.index(yn)}).map(function(Nn){var wn=Nn.name,Pn=Nn.unique,Bn=Nn.multiEntry,Nn=Nn.keyPath,Bn={name:wn,compound:j(Nn),keyPath:Nn,unique:Pn,multiEntry:Bn,extractKey:eo(Nn)};return un[ds(Nn)]=Bn}),getIndexByKeyPath:function(yn){return un[ds(yn)]}};return un[":id"]=pn.primaryKey,nn!=null&&(un[ds(nn)]=pn.primaryKey),pn})},hasGetAll:0<Wt.length&&"getAll"in Mt.objectStore(Wt[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),en=fn.schema,tn=fn.hasGetAll,fn=en.tables.map(vt),qt={};return fn.forEach(function(mn){return qt[mn.name]=mn}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(mn){if(!qt[mn])throw new Error("Table '".concat(mn,"' not found"));return qt[mn]},MIN_KEY:-1/0,MAX_KEY:cs(g),schema:en}}function Bu(d,g,_,lt){var vt=_.IDBKeyRange;return _.indexedDB,{dbcore:(lt=Ou(g,vt,lt),d.dbcore.reduce(function(_t,Mt){return Mt=Mt.create,a(a({},_t),Mt(_t))},lt))}}function Cs(d,lt){var _=lt.db,lt=Bu(d._middlewares,_,d._deps,lt);d.core=lt.dbcore,d.tables.forEach(function(vt){var _t=vt.name;d.core.schema.tables.some(function(Mt){return Mt.name===_t})&&(vt.core=d.core.table(_t),d[_t]instanceof d.Table&&(d[_t].core=vt.core))})}function Ts(d,g,_,lt){_.forEach(function(vt){var _t=lt[vt];g.forEach(function(Mt){var Wt=function en(tn,fn){return bt(tn,fn)||(tn=$(tn))&&en(tn,fn)}(Mt,vt);(!Wt||"value"in Wt&&Wt.value===void 0)&&(Mt===d.Transaction.prototype||Mt instanceof d.Transaction?pt(Mt,vt,{get:function(){return this.table(vt)},set:function(en){ht(this,vt,{value:en,writable:!0,configurable:!0,enumerable:!0})}}):Mt[vt]=new d.Table(vt,_t))})})}function to(d,g){g.forEach(function(_){for(var lt in _)_[lt]instanceof d.Table&&delete _[lt]})}function Uu(d,g){return d._cfg.version-g._cfg.version}function zu(d,g,_,lt){var vt=d._dbSchema;_.objectStoreNames.contains("$meta")&&!vt.$meta&&(vt.$meta=$a("$meta",Ol("")[0],[]),d._storeNames.push("$meta"));var _t=d._createTransaction("readwrite",d._storeNames,vt);_t.create(_),_t._completion.catch(lt);var Mt=_t._reject.bind(_t),Wt=zt.transless||zt;Vn(function(){return zt.trans=_t,zt.transless=Wt,g!==0?(Cs(d,_),tn=g,((en=_t).storeNames.includes("$meta")?en.table("$meta").get("version").then(function(fn){return fn??tn}):jn.resolve(tn)).then(function(fn){return mn=fn,nn=_t,ln=_,un=[],fn=(qt=d)._versions,pn=qt._dbSchema=js(0,qt.idbdb,ln),(fn=fn.filter(function(yn){return yn._cfg.version>=mn})).length!==0?(fn.forEach(function(yn){un.push(function(){var wn=pn,Pn=yn._cfg.dbschema;Ds(qt,wn,ln),Ds(qt,Pn,ln),pn=qt._dbSchema=Pn;var Nn=no(wn,Pn);Nn.add.forEach(function(Yn){ro(ln,Yn[0],Yn[1].primKey,Yn[1].indexes)}),Nn.change.forEach(function(Yn){if(Yn.recreate)throw new Bt.Upgrade("Not yet support for changing primary key");var Kn=ln.objectStore(Yn.name);Yn.add.forEach(function(er){return Ps(Kn,er)}),Yn.change.forEach(function(er){Kn.deleteIndex(er.name),Ps(Kn,er)}),Yn.del.forEach(function(er){return Kn.deleteIndex(er)})});var Bn=yn._cfg.contentUpgrade;if(Bn&&yn._cfg.version>mn){Cs(qt,ln),nn._memoizedTables={};var qn=dt(Pn);Nn.del.forEach(function(Yn){qn[Yn]=wn[Yn]}),to(qt,[qt.Transaction.prototype]),Ts(qt,[qt.Transaction.prototype],h(qn),qn),nn.schema=qn;var Ln,zn=Xt(Bn);return zn&&tr(),Nn=jn.follow(function(){var Yn;(Ln=Bn(nn))&&zn&&(Yn=sr.bind(null,null),Ln.then(Yn,Yn))}),Ln&&typeof Ln.then=="function"?jn.resolve(Ln):Nn.then(function(){return Ln})}}),un.push(function(wn){var Pn,Nn,Bn=yn._cfg.dbschema;Pn=Bn,Nn=wn,[].slice.call(Nn.db.objectStoreNames).forEach(function(qn){return Pn[qn]==null&&Nn.db.deleteObjectStore(qn)}),to(qt,[qt.Transaction.prototype]),Ts(qt,[qt.Transaction.prototype],qt._storeNames,qt._dbSchema),nn.schema=qt._dbSchema}),un.push(function(wn){qt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qt.idbdb.version/10)===yn._cfg.version?(qt.idbdb.deleteObjectStore("$meta"),delete qt._dbSchema.$meta,qt._storeNames=qt._storeNames.filter(function(Pn){return Pn!=="$meta"})):wn.objectStore("$meta").put(yn._cfg.version,"version"))})}),function yn(){return un.length?jn.resolve(un.shift()(nn.idbtrans)).then(yn):jn.resolve()}().then(function(){Ll(pn,ln)})):jn.resolve();var qt,mn,nn,ln,un,pn}).catch(Mt)):(h(vt).forEach(function(fn){ro(_,fn,vt[fn].primKey,vt[fn].indexes)}),Cs(d,_),void jn.follow(function(){return d.on.populate.fire(_t)}).catch(Mt));var en,tn})}function Wu(d,g){Ll(d._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _=js(0,d.idbdb,g);Ds(d,d._dbSchema,g);for(var lt=0,vt=no(_,d._dbSchema).change;lt<vt.length;lt++){var _t=function(Mt){if(Mt.change.length||Mt.recreate)return console.warn("Unable to patch indexes of table ".concat(Mt.name," because it has changes on the type of index or primary key.")),{value:void 0};var Wt=g.objectStore(Mt.name);Mt.add.forEach(function(en){Jt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Mt.name,".").concat(en.src)),Ps(Wt,en)})}(vt[lt]);if(typeof _t=="object")return _t.value}}function no(d,g){var _,lt={del:[],add:[],change:[]};for(_ in d)g[_]||lt.del.push(_);for(_ in g){var vt=d[_],_t=g[_];if(vt){var Mt={name:_,def:_t,recreate:!1,del:[],add:[],change:[]};if(""+(vt.primKey.keyPath||"")!=""+(_t.primKey.keyPath||"")||vt.primKey.auto!==_t.primKey.auto)Mt.recreate=!0,lt.change.push(Mt);else{var Wt=vt.idxByName,en=_t.idxByName,tn=void 0;for(tn in Wt)en[tn]||Mt.del.push(tn);for(tn in en){var fn=Wt[tn],qt=en[tn];fn?fn.src!==qt.src&&Mt.change.push(qt):Mt.add.push(qt)}(0<Mt.del.length||0<Mt.add.length||0<Mt.change.length)&&lt.change.push(Mt)}}else lt.add.push([_,_t])}return lt}function ro(d,g,_,lt){var vt=d.db.createObjectStore(g,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return lt.forEach(function(_t){return Ps(vt,_t)}),vt}function Ll(d,g){h(d).forEach(function(_){g.db.objectStoreNames.contains(_)||(Jt&&console.debug("Dexie: Creating missing table",_),ro(g,_,d[_].primKey,d[_].indexes))})}function Ps(d,g){d.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function js(d,g,_){var lt={};return nt(g.objectStoreNames,0).forEach(function(vt){for(var _t=_.objectStore(vt),Mt=_a(Ml(tn=_t.keyPath),tn||"",!0,!1,!!_t.autoIncrement,tn&&typeof tn!="string",!0),Wt=[],en=0;en<_t.indexNames.length;++en){var fn=_t.index(_t.indexNames[en]),tn=fn.keyPath,fn=_a(fn.name,tn,!!fn.unique,!!fn.multiEntry,!1,tn&&typeof tn!="string",!1);Wt.push(fn)}lt[vt]=$a(vt,Mt,Wt)}),lt}function Ds(d,g,_){for(var lt=_.db.objectStoreNames,vt=0;vt<lt.length;++vt){var _t=lt[vt],Mt=_.objectStore(_t);d._hasGetAll="getAll"in Mt;for(var Wt=0;Wt<Mt.indexNames.length;++Wt){var en=Mt.indexNames[Wt],tn=Mt.index(en).keyPath,fn=typeof tn=="string"?tn:"["+nt(tn).join("+")+"]";!g[_t]||(tn=g[_t].idxByName[fn])&&(tn.name=en,delete g[_t].idxByName[fn],g[_t].idxByName[en]=tn)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Ol(d){return d.split(",").map(function(g,_){var _t=g.split(":"),lt=(vt=_t[1])===null||vt===void 0?void 0:vt.trim(),vt=(g=_t[0].trim()).replace(/([&*]|\+\+)/g,""),_t=/^\[/.test(vt)?vt.match(/^\[(.*)\]$/)[1].split("+"):vt;return _a(vt,_t||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),j(_t),_===0,lt)})}var Hu=(Jr.prototype._createTableSchema=$a,Jr.prototype._parseIndexSyntax=Ol,Jr.prototype._parseStoresSpec=function(d,g){var _=this;h(d).forEach(function(lt){if(d[lt]!==null){var vt=_._parseIndexSyntax(d[lt]),_t=vt.shift();if(!_t)throw new Bt.Schema("Invalid schema for table "+lt+": "+d[lt]);if(_t.unique=!0,_t.multi)throw new Bt.Schema("Primary key cannot be multiEntry*");vt.forEach(function(Mt){if(Mt.auto)throw new Bt.Schema("Only primary key can be marked as autoIncrement (++)");if(!Mt.keyPath)throw new Bt.Schema("Index must have a name and cannot be an empty string")}),vt=_._createTableSchema(lt,_t,vt),g[lt]=vt}})},Jr.prototype.stores=function(_){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,_):_;var _=g._versions,lt={},vt={};return _.forEach(function(_t){b(lt,_t._cfg.storesSource),vt=_t._cfg.dbschema={},_t._parseStoresSpec(lt,vt)}),g._dbSchema=vt,to(g,[g._allTables,g,g.Transaction.prototype]),Ts(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],h(vt),vt),g._storeNames=h(vt),this},Jr.prototype.upgrade=function(d){return this._cfg.contentUpgrade=Gt(this._cfg.contentUpgrade||rn,d),this},Jr);function Jr(){}function so(d,g){var _=d._dbNamesDB;return _||(_=d._dbNamesDB=new Or(_s,{addons:[],indexedDB:d,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function io(d){return d&&typeof d.databases=="function"}function ao(d){return Vn(function(){return zt.letThrough=!0,d()})}function oo(d){return!("from"in d)}var Ar=function(d,g){if(!this){var _=new Ar;return d&&"d"in d&&b(_,d),_}b(this,arguments.length?{d:1,from:d,to:1<arguments.length?g:d}:{d:0})};function hs(d,g,_){var lt=pr(g,_);if(!isNaN(lt)){if(0<lt)throw RangeError();if(oo(d))return b(d,{from:g,to:_,d:1});var vt=d.l,lt=d.r;if(pr(_,d.from)<0)return vt?hs(vt,g,_):d.l={from:g,to:_,d:1,l:null,r:null},Ul(d);if(0<pr(g,d.to))return lt?hs(lt,g,_):d.r={from:g,to:_,d:1,l:null,r:null},Ul(d);pr(g,d.from)<0&&(d.from=g,d.l=null,d.d=lt?lt.d+1:1),0<pr(_,d.to)&&(d.to=_,d.r=null,d.d=d.l?d.l.d+1:1),_=!d.r,vt&&!d.l&&fs(d,vt),lt&&_&&fs(d,lt)}}function fs(d,g){oo(g)||function _(lt,en){var _t=en.from,Mt=en.to,Wt=en.l,en=en.r;hs(lt,_t,Mt),Wt&&_(lt,Wt),en&&_(lt,en)}(d,g)}function Bl(d,g){var _=Ns(g),lt=_.next();if(lt.done)return!1;for(var vt=lt.value,_t=Ns(d),Mt=_t.next(vt.from),Wt=Mt.value;!lt.done&&!Mt.done;){if(pr(Wt.from,vt.to)<=0&&0<=pr(Wt.to,vt.from))return!0;pr(vt.from,Wt.from)<0?vt=(lt=_.next(Wt.from)).value:Wt=(Mt=_t.next(vt.from)).value}return!1}function Ns(d){var g=oo(d)?null:{s:0,n:d};return{next:function(_){for(var lt=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,lt)for(;g.n.l&&pr(_,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!lt||pr(_,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Ul(d){var g,_,lt=(((g=d.r)===null||g===void 0?void 0:g.d)||0)-(((_=d.l)===null||_===void 0?void 0:_.d)||0),vt=1<lt?"r":lt<-1?"l":"";vt&&(g=vt=="r"?"l":"r",_=a({},d),lt=d[vt],d.from=lt.from,d.to=lt.to,d[vt]=lt[vt],_[vt]=lt[g],(d[g]=_).d=zl(_)),d.d=zl(d)}function zl(_){var g=_.r,_=_.l;return(g?_?Math.max(g.d,_.d):g.d:_?_.d:0)+1}function Is(d,g){return h(g).forEach(function(_){d[_]?fs(d[_],g[_]):d[_]=function lt(vt){var _t,Mt,Wt={};for(_t in vt)ct(vt,_t)&&(Mt=vt[_t],Wt[_t]=!Mt||typeof Mt!="object"||xt.has(Mt.constructor)?Mt:lt(Mt));return Wt}(g[_])}),d}function lo(d,g){return d.all||g.all||Object.keys(d).some(function(_){return g[_]&&Bl(g[_],d[_])})}ut(Ar.prototype,((Dr={add:function(d){return fs(this,d),this},addKey:function(d){return hs(this,d,d),this},addKeys:function(d){var g=this;return d.forEach(function(_){return hs(g,_,_)}),this},hasKey:function(d){var g=Ns(this).next(d).value;return g&&pr(g.from,d)<=0&&0<=pr(g.to,d)}})[Yt]=function(){return Ns(this)},Dr));var Kr={},uo={},co=!1;function Ms(d){Is(uo,d),co||(co=!0,setTimeout(function(){co=!1,ho(uo,!(uo={}))},0))}function ho(d,g){g===void 0&&(g=!1);var _=new Set;if(d.all)for(var lt=0,vt=Object.values(Kr);lt<vt.length;lt++)Wl(Mt=vt[lt],d,_,g);else for(var _t in d){var Mt,Wt=/^idb\:\/\/(.*)\/(.*)\//.exec(_t);Wt&&(_t=Wt[1],Wt=Wt[2],(Mt=Kr["idb://".concat(_t,"/").concat(Wt)])&&Wl(Mt,d,_,g))}_.forEach(function(en){return en()})}function Wl(d,g,_,lt){for(var vt=[],_t=0,Mt=Object.entries(d.queries.query);_t<Mt.length;_t++){for(var Wt=Mt[_t],en=Wt[0],tn=[],fn=0,qt=Wt[1];fn<qt.length;fn++){var mn=qt[fn];lo(g,mn.obsSet)?mn.subscribers.forEach(function(pn){return _.add(pn)}):lt&&tn.push(mn)}lt&&vt.push([en,tn])}if(lt)for(var nn=0,ln=vt;nn<ln.length;nn++){var un=ln[nn],en=un[0],tn=un[1];d.queries.query[en]=tn}}function Vu(d){var g=d._state,_=d._deps.indexedDB;if(g.isBeingOpened||d.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?Er(g.dbOpenError):d});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var lt=g.openCanceller,vt=Math.round(10*d.verno),_t=!1;function Mt(){if(g.openCanceller!==lt)throw new Bt.DatabaseClosed("db.open() was cancelled")}function Wt(){return new jn(function(mn,nn){if(Mt(),!_)throw new Bt.MissingAPI;var ln=d.name,un=g.autoSchema||!vt?_.open(ln):_.open(ln,vt);if(!un)throw new Bt.MissingAPI;un.onerror=Mr(nn),un.onblocked=bn(d._fireOnBlocked),un.onupgradeneeded=bn(function(pn){var yn;fn=un.transaction,g.autoSchema&&!d._options.allowEmptyDB?(un.onerror=ls,fn.abort(),un.result.close(),(yn=_.deleteDatabase(ln)).onsuccess=yn.onerror=bn(function(){nn(new Bt.NoSuchDatabase("Database ".concat(ln," doesnt exist")))})):(fn.onerror=Mr(nn),pn=pn.oldVersion>Math.pow(2,62)?0:pn.oldVersion,qt=pn<1,d.idbdb=un.result,_t&&Wu(d,fn),zu(d,pn/10,fn,nn))},nn),un.onsuccess=bn(function(){fn=null;var pn,yn,wn,Pn,Nn,Bn=d.idbdb=un.result,qn=nt(Bn.objectStoreNames);if(0<qn.length)try{var Ln=Bn.transaction((Pn=qn).length===1?Pn[0]:Pn,"readonly");if(g.autoSchema)yn=Bn,wn=Ln,(pn=d).verno=yn.version/10,wn=pn._dbSchema=js(0,yn,wn),pn._storeNames=nt(yn.objectStoreNames,0),Ts(pn,[pn._allTables],h(wn),wn);else if(Ds(d,d._dbSchema,Ln),((Nn=no(js(0,(Nn=d).idbdb,Ln),Nn._dbSchema)).add.length||Nn.change.some(function(zn){return zn.add.length||zn.change.length}))&&!_t)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Bn.close(),vt=Bn.version+1,_t=!0,mn(Wt());Cs(d,Ln)}catch{}Xr.push(d),Bn.onversionchange=bn(function(zn){g.vcFired=!0,d.on("versionchange").fire(zn)}),Bn.onclose=bn(function(){d.close({disableAutoOpen:!1})}),qt&&(Nn=d._deps,Ln=ln,Bn=Nn.indexedDB,Nn=Nn.IDBKeyRange,io(Bn)||Ln===_s||so(Bn,Nn).put({name:Ln}).catch(rn)),mn()},nn)}).catch(function(mn){switch(mn==null?void 0:mn.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Wt();break;case"VersionError":if(0<vt)return vt=0,Wt()}return jn.reject(mn)})}var en,tn=g.dbReadyResolve,fn=null,qt=!1;return jn.race([lt,(typeof navigator>"u"?jn.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(mn){function nn(){return indexedDB.databases().finally(mn)}en=setInterval(nn,100),nn()}).finally(function(){return clearInterval(en)}):Promise.resolve()).then(Wt)]).then(function(){return Mt(),g.onReadyBeingFired=[],jn.resolve(ao(function(){return d.on.ready.fire(d.vip)})).then(function mn(){if(0<g.onReadyBeingFired.length){var nn=g.onReadyBeingFired.reduce(Gt,rn);return g.onReadyBeingFired=[],jn.resolve(ao(function(){return nn(d.vip)})).then(mn)}})}).finally(function(){g.openCanceller===lt&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(mn){g.dbOpenError=mn;try{fn&&fn.abort()}catch{}return lt===g.openCanceller&&d._close(),Er(mn)}).finally(function(){g.openComplete=!0,tn()}).then(function(){var mn;return qt&&(mn={},d.tables.forEach(function(nn){nn.schema.indexes.forEach(function(ln){ln.name&&(mn["idb://".concat(d.name,"/").concat(nn.name,"/").concat(ln.name)]=new Ar(-1/0,[[[]]]))}),mn["idb://".concat(d.name,"/").concat(nn.name,"/")]=mn["idb://".concat(d.name,"/").concat(nn.name,"/:dels")]=new Ar(-1/0,[[[]]])}),zr(us).fire(mn),ho(mn,!0)),d})}function fo(d){function g(_t){return d.next(_t)}var _=vt(g),lt=vt(function(_t){return d.throw(_t)});function vt(_t){return function(en){var Wt=_t(en),en=Wt.value;return Wt.done?en:en&&typeof en.then=="function"?en.then(_,lt):j(en)?Promise.all(en).then(_,lt):_(en)}}return vt(g)()}function Fs(d,g,_){for(var lt=j(d)?d.slice():[d],vt=0;vt<_;++vt)lt.push(g);return lt}var Ku={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return a(a({},d),{table:function(g){var _=d.table(g),lt=_.schema,vt={},_t=[];function Mt(qt,mn,nn){var ln=ds(qt),un=vt[ln]=vt[ln]||[],pn=qt==null?0:typeof qt=="string"?1:qt.length,yn=0<mn,yn=a(a({},nn),{name:yn?"".concat(ln,"(virtual-from:").concat(nn.name,")"):nn.name,lowLevelIndex:nn,isVirtual:yn,keyTail:mn,keyLength:pn,extractKey:eo(qt),unique:!yn&&nn.unique});return un.push(yn),yn.isPrimaryKey||_t.push(yn),1<pn&&Mt(pn===2?qt[0]:qt.slice(0,pn-1),mn+1,nn),un.sort(function(wn,Pn){return wn.keyTail-Pn.keyTail}),yn}g=Mt(lt.primaryKey.keyPath,0,lt.primaryKey),vt[":id"]=[g];for(var Wt=0,en=lt.indexes;Wt<en.length;Wt++){var tn=en[Wt];Mt(tn.keyPath,0,tn)}function fn(qt){var mn,nn=qt.query.index;return nn.isVirtual?a(a({},qt),{query:{index:nn.lowLevelIndex,range:(mn=qt.query.range,nn=nn.keyTail,{type:mn.type===1?2:mn.type,lower:Fs(mn.lower,mn.lowerOpen?d.MAX_KEY:d.MIN_KEY,nn),lowerOpen:!0,upper:Fs(mn.upper,mn.upperOpen?d.MIN_KEY:d.MAX_KEY,nn),upperOpen:!0})}}):qt}return a(a({},_),{schema:a(a({},lt),{primaryKey:g,indexes:_t,getIndexByKeyPath:function(qt){return(qt=vt[ds(qt)])&&qt[0]}}),count:function(qt){return _.count(fn(qt))},query:function(qt){return _.query(fn(qt))},openCursor:function(qt){var mn=qt.query.index,nn=mn.keyTail,ln=mn.isVirtual,un=mn.keyLength;return ln?_.openCursor(fn(qt)).then(function(yn){return yn&&pn(yn)}):_.openCursor(qt);function pn(yn){return Object.create(yn,{continue:{value:function(wn){wn!=null?yn.continue(Fs(wn,qt.reverse?d.MAX_KEY:d.MIN_KEY,nn)):qt.unique?yn.continue(yn.key.slice(0,un).concat(qt.reverse?d.MIN_KEY:d.MAX_KEY,nn)):yn.continue()}},continuePrimaryKey:{value:function(wn,Pn){yn.continuePrimaryKey(Fs(wn,d.MAX_KEY,nn),Pn)}},primaryKey:{get:function(){return yn.primaryKey}},key:{get:function(){var wn=yn.key;return un===1?wn[0]:wn.slice(0,un)}},value:{get:function(){return yn.value}}})}}})}})}};function po(d,g,_,lt){return _=_||{},lt=lt||"",h(d).forEach(function(vt){var _t,Mt,Wt;ct(g,vt)?(_t=d[vt],Mt=g[vt],typeof _t=="object"&&typeof Mt=="object"&&_t&&Mt?(Wt=Kt(_t))!==Kt(Mt)?_[lt+vt]=g[vt]:Wt==="Object"?po(_t,Mt,_,lt+vt+"."):_t!==Mt&&(_[lt+vt]=g[vt]):_t!==Mt&&(_[lt+vt]=g[vt])):_[lt+vt]=void 0}),h(g).forEach(function(vt){ct(d,vt)||(_[lt+vt]=g[vt])}),_}function mo(d,g){return g.type==="delete"?g.keys:g.keys||g.values.map(d.extractKey)}var $u={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return a(a({},d),{table:function(g){var _=d.table(g),lt=_.schema.primaryKey;return a(a({},_),{mutate:function(vt){var _t=zt.trans,Mt=_t.table(g).hook,Wt=Mt.deleting,en=Mt.creating,tn=Mt.updating;switch(vt.type){case"add":if(en.fire===rn)break;return _t._promise("readwrite",function(){return fn(vt)},!0);case"put":if(en.fire===rn&&tn.fire===rn)break;return _t._promise("readwrite",function(){return fn(vt)},!0);case"delete":if(Wt.fire===rn)break;return _t._promise("readwrite",function(){return fn(vt)},!0);case"deleteRange":if(Wt.fire===rn)break;return _t._promise("readwrite",function(){return function qt(mn,nn,ln){return _.query({trans:mn,values:!1,query:{index:lt,range:nn},limit:ln}).then(function(un){var pn=un.result;return fn({type:"delete",keys:pn,trans:mn}).then(function(yn){return 0<yn.numFailures?Promise.reject(yn.failures[0]):pn.length<ln?{failures:[],numFailures:0,lastResult:void 0}:qt(mn,a(a({},nn),{lower:pn[pn.length-1],lowerOpen:!0}),ln)})})}(vt.trans,vt.range,1e4)},!0)}return _.mutate(vt);function fn(qt){var mn,nn,ln,un=zt.trans,pn=qt.keys||mo(lt,qt);if(!pn)throw new Error("Keys missing");return(qt=qt.type==="add"||qt.type==="put"?a(a({},qt),{keys:pn}):a({},qt)).type!=="delete"&&(qt.values=o([],qt.values)),qt.keys&&(qt.keys=o([],qt.keys)),mn=_,ln=pn,((nn=qt).type==="add"?Promise.resolve([]):mn.getMany({trans:nn.trans,keys:ln,cache:"immutable"})).then(function(yn){var wn=pn.map(function(Pn,Nn){var Bn,qn,Ln,zn=yn[Nn],Yn={onerror:null,onsuccess:null};return qt.type==="delete"?Wt.fire.call(Yn,Pn,zn,un):qt.type==="add"||zn===void 0?(Bn=en.fire.call(Yn,Pn,qt.values[Nn],un),Pn==null&&Bn!=null&&(qt.keys[Nn]=Pn=Bn,lt.outbound||it(qt.values[Nn],lt.keyPath,Pn))):(Bn=po(zn,qt.values[Nn]),(qn=tn.fire.call(Yn,Bn,Pn,zn,un))&&(Ln=qt.values[Nn],Object.keys(qn).forEach(function(Kn){ct(Ln,Kn)?Ln[Kn]=qn[Kn]:it(Ln,Kn,qn[Kn])}))),Yn});return _.mutate(qt).then(function(Pn){for(var Nn=Pn.failures,Bn=Pn.results,qn=Pn.numFailures,Pn=Pn.lastResult,Ln=0;Ln<pn.length;++Ln){var zn=(Bn||pn)[Ln],Yn=wn[Ln];zn==null?Yn.onerror&&Yn.onerror(Nn[Ln]):Yn.onsuccess&&Yn.onsuccess(qt.type==="put"&&yn[Ln]?qt.values[Ln]:zn)}return{failures:Nn,results:Bn,numFailures:qn,lastResult:Pn}}).catch(function(Pn){return wn.forEach(function(Nn){return Nn.onerror&&Nn.onerror(Pn)}),Promise.reject(Pn)})})}}})}})}};function Hl(d,g,_){try{if(!g||g.keys.length<d.length)return null;for(var lt=[],vt=0,_t=0;vt<g.keys.length&&_t<d.length;++vt)pr(g.keys[vt],d[_t])===0&&(lt.push(_?jt(g.values[vt]):g.values[vt]),++_t);return lt.length===d.length?lt:null}catch{return null}}var Gu={stack:"dbcore",level:-1,create:function(d){return{table:function(g){var _=d.table(g);return a(a({},_),{getMany:function(lt){if(!lt.cache)return _.getMany(lt);var vt=Hl(lt.keys,lt.trans._cache,lt.cache==="clone");return vt?jn.resolve(vt):_.getMany(lt).then(function(_t){return lt.trans._cache={keys:lt.keys,values:lt.cache==="clone"?jt(_t):_t},_t})},mutate:function(lt){return lt.type!=="add"&&(lt.trans._cache=null),_.mutate(lt)}})}}}};function Vl(d,g){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function Kl(d,g){switch(d){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qu={stack:"dbcore",level:0,name:"Observability",create:function(d){var g=d.schema.name,_=new Ar(d.MIN_KEY,d.MAX_KEY);return a(a({},d),{transaction:function(lt,vt,_t){if(zt.subscr&&vt!=="readonly")throw new Bt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(zt.querier));return d.transaction(lt,vt,_t)},table:function(lt){var vt=d.table(lt),_t=vt.schema,Mt=_t.primaryKey,qt=_t.indexes,Wt=Mt.extractKey,en=Mt.outbound,tn=Mt.autoIncrement&&qt.filter(function(nn){return nn.compound&&nn.keyPath.includes(Mt.keyPath)}),fn=a(a({},vt),{mutate:function(nn){function ln(Kn){return Kn="idb://".concat(g,"/").concat(lt,"/").concat(Kn),Pn[Kn]||(Pn[Kn]=new Ar)}var un,pn,yn,wn=nn.trans,Pn=nn.mutatedParts||(nn.mutatedParts={}),Nn=ln(""),Bn=ln(":dels"),qn=nn.type,Yn=nn.type==="deleteRange"?[nn.range]:nn.type==="delete"?[nn.keys]:nn.values.length<50?[mo(Mt,nn).filter(function(Kn){return Kn}),nn.values]:[],Ln=Yn[0],zn=Yn[1],Yn=nn.trans._cache;return j(Ln)?(Nn.addKeys(Ln),(Yn=qn==="delete"||Ln.length===zn.length?Hl(Ln,Yn):null)||Bn.addKeys(Ln),(Yn||zn)&&(un=ln,pn=Yn,yn=zn,_t.indexes.forEach(function(Kn){var er=un(Kn.name||"");function cr(fr){return fr!=null?Kn.extractKey(fr):null}function hr(fr){return Kn.multiEntry&&j(fr)?fr.forEach(function(Pr){return er.addKey(Pr)}):er.addKey(fr)}(pn||yn).forEach(function(fr,kr){var ur=pn&&cr(pn[kr]),kr=yn&&cr(yn[kr]);pr(ur,kr)!==0&&(ur!=null&&hr(ur),kr!=null&&hr(kr))})}))):Ln?(zn={from:(zn=Ln.lower)!==null&&zn!==void 0?zn:d.MIN_KEY,to:(zn=Ln.upper)!==null&&zn!==void 0?zn:d.MAX_KEY},Bn.add(zn),Nn.add(zn)):(Nn.add(_),Bn.add(_),_t.indexes.forEach(function(Kn){return ln(Kn.name).add(_)})),vt.mutate(nn).then(function(Kn){return!Ln||nn.type!=="add"&&nn.type!=="put"||(Nn.addKeys(Kn.results),tn&&tn.forEach(function(er){for(var cr=nn.values.map(function(ur){return er.extractKey(ur)}),hr=er.keyPath.findIndex(function(ur){return ur===Mt.keyPath}),fr=0,Pr=Kn.results.length;fr<Pr;++fr)cr[fr][hr]=Kn.results[fr];ln(er.name).addKeys(cr)})),wn.mutatedParts=Is(wn.mutatedParts||{},Pn),Kn})}}),qt=function(ln){var un=ln.query,ln=un.index,un=un.range;return[ln,new Ar((ln=un.lower)!==null&&ln!==void 0?ln:d.MIN_KEY,(un=un.upper)!==null&&un!==void 0?un:d.MAX_KEY)]},mn={get:function(nn){return[Mt,new Ar(nn.key)]},getMany:function(nn){return[Mt,new Ar().addKeys(nn.keys)]},count:qt,query:qt,openCursor:qt};return h(mn).forEach(function(nn){fn[nn]=function(ln){var un=zt.subscr,pn=!!un,yn=Vl(zt,vt)&&Kl(nn,ln)?ln.obsSet={}:un;if(pn){var wn=function(zn){return zn="idb://".concat(g,"/").concat(lt,"/").concat(zn),yn[zn]||(yn[zn]=new Ar)},Pn=wn(""),Nn=wn(":dels"),un=mn[nn](ln),pn=un[0],un=un[1];if((nn==="query"&&pn.isPrimaryKey&&!ln.values?Nn:wn(pn.name||"")).add(un),!pn.isPrimaryKey){if(nn!=="count"){var Bn=nn==="query"&&en&&ln.values&&vt.query(a(a({},ln),{values:!1}));return vt[nn].apply(this,arguments).then(function(zn){if(nn==="query"){if(en&&ln.values)return Bn.then(function(cr){return cr=cr.result,Pn.addKeys(cr),zn});var Yn=ln.values?zn.result.map(Wt):zn.result;(ln.values?Pn:Nn).addKeys(Yn)}else if(nn==="openCursor"){var Kn=zn,er=ln.values;return Kn&&Object.create(Kn,{key:{get:function(){return Nn.addKey(Kn.primaryKey),Kn.key}},primaryKey:{get:function(){var cr=Kn.primaryKey;return Nn.addKey(cr),cr}},value:{get:function(){return er&&Pn.addKey(Kn.primaryKey),Kn.value}}})}return zn})}Nn.add(_)}}return vt[nn].apply(this,arguments)}}),fn}})}};function $l(d,g,_){if(_.numFailures===0)return g;if(g.type==="deleteRange")return null;var lt=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _.numFailures===lt?null:(g=a({},g),j(g.keys)&&(g.keys=g.keys.filter(function(vt,_t){return!(_t in _.failures)})),"values"in g&&j(g.values)&&(g.values=g.values.filter(function(vt,_t){return!(_t in _.failures)})),g)}function go(d,g){return _=d,((lt=g).lower===void 0||(lt.lowerOpen?0<pr(_,lt.lower):0<=pr(_,lt.lower)))&&(d=d,(g=g).upper===void 0||(g.upperOpen?pr(d,g.upper)<0:pr(d,g.upper)<=0));var _,lt}function Gl(d,g,mn,lt,vt,_t){if(!mn||mn.length===0)return d;var Mt=g.query.index,Wt=Mt.multiEntry,en=g.query.range,tn=lt.schema.primaryKey.extractKey,fn=Mt.extractKey,qt=(Mt.lowLevelIndex||Mt).extractKey,mn=mn.reduce(function(nn,ln){var un=nn,pn=[];if(ln.type==="add"||ln.type==="put")for(var yn=new Ar,wn=ln.values.length-1;0<=wn;--wn){var Pn,Nn=ln.values[wn],Bn=tn(Nn);yn.hasKey(Bn)||(Pn=fn(Nn),(Wt&&j(Pn)?Pn.some(function(Kn){return go(Kn,en)}):go(Pn,en))&&(yn.addKey(Bn),pn.push(Nn)))}switch(ln.type){case"add":var qn=new Ar().addKeys(g.values?nn.map(function(er){return tn(er)}):nn),un=nn.concat(g.values?pn.filter(function(er){return er=tn(er),!qn.hasKey(er)&&(qn.addKey(er),!0)}):pn.map(function(er){return tn(er)}).filter(function(er){return!qn.hasKey(er)&&(qn.addKey(er),!0)}));break;case"put":var Ln=new Ar().addKeys(ln.values.map(function(er){return tn(er)}));un=nn.filter(function(er){return!Ln.hasKey(g.values?tn(er):er)}).concat(g.values?pn:pn.map(function(er){return tn(er)}));break;case"delete":var zn=new Ar().addKeys(ln.keys);un=nn.filter(function(er){return!zn.hasKey(g.values?tn(er):er)});break;case"deleteRange":var Yn=ln.range;un=nn.filter(function(er){return!go(tn(er),Yn)})}return un},d);return mn===d?d:(mn.sort(function(nn,ln){return pr(qt(nn),qt(ln))||pr(tn(nn),tn(ln))}),g.limit&&g.limit<1/0&&(mn.length>g.limit?mn.length=g.limit:d.length===g.limit&&mn.length<g.limit&&(vt.dirty=!0)),_t?Object.freeze(mn):mn)}function Xl(d,g){return pr(d.lower,g.lower)===0&&pr(d.upper,g.upper)===0&&!!d.lowerOpen==!!g.lowerOpen&&!!d.upperOpen==!!g.upperOpen}function Xu(d,g){return function(_,lt,vt,_t){if(_===void 0)return lt!==void 0?-1:0;if(lt===void 0)return 1;if((lt=pr(_,lt))===0){if(vt&&_t)return 0;if(vt)return 1;if(_t)return-1}return lt}(d.lower,g.lower,d.lowerOpen,g.lowerOpen)<=0&&0<=function(_,lt,vt,_t){if(_===void 0)return lt!==void 0?1:0;if(lt===void 0)return-1;if((lt=pr(_,lt))===0){if(vt&&_t)return 0;if(vt)return-1;if(_t)return 1}return lt}(d.upper,g.upper,d.upperOpen,g.upperOpen)}function Yu(d,g,_,lt){d.subscribers.add(_),lt.addEventListener("abort",function(){var vt,_t;d.subscribers.delete(_),d.subscribers.size===0&&(vt=d,_t=g,setTimeout(function(){vt.subscribers.size===0&&Ut(_t,vt)},3e3))})}var Qu={stack:"dbcore",level:0,name:"Cache",create:function(d){var g=d.schema.name;return a(a({},d),{transaction:function(_,lt,vt){var _t,Mt,Wt=d.transaction(_,lt,vt);return lt==="readwrite"&&(Mt=(_t=new AbortController).signal,vt=function(en){return function(){if(_t.abort(),lt==="readwrite"){for(var tn=new Set,fn=0,qt=_;fn<qt.length;fn++){var mn=qt[fn],nn=Kr["idb://".concat(g,"/").concat(mn)];if(nn){var ln=d.table(mn),un=nn.optimisticOps.filter(function(er){return er.trans===Wt});if(Wt._explicit&&en&&Wt.mutatedParts)for(var pn=0,yn=Object.values(nn.queries.query);pn<yn.length;pn++)for(var wn=0,Pn=(qn=yn[pn]).slice();wn<Pn.length;wn++)lo((Ln=Pn[wn]).obsSet,Wt.mutatedParts)&&(Ut(qn,Ln),Ln.subscribers.forEach(function(er){return tn.add(er)}));else if(0<un.length){nn.optimisticOps=nn.optimisticOps.filter(function(er){return er.trans!==Wt});for(var Nn=0,Bn=Object.values(nn.queries.query);Nn<Bn.length;Nn++)for(var qn,Ln,zn,Yn=0,Kn=(qn=Bn[Nn]).slice();Yn<Kn.length;Yn++)(Ln=Kn[Yn]).res!=null&&Wt.mutatedParts&&(en&&!Ln.dirty?(zn=Object.isFrozen(Ln.res),zn=Gl(Ln.res,Ln.req,un,ln,Ln,zn),Ln.dirty?(Ut(qn,Ln),Ln.subscribers.forEach(function(er){return tn.add(er)})):zn!==Ln.res&&(Ln.res=zn,Ln.promise=jn.resolve({result:zn}))):(Ln.dirty&&Ut(qn,Ln),Ln.subscribers.forEach(function(er){return tn.add(er)})))}}}tn.forEach(function(er){return er()})}}},Wt.addEventListener("abort",vt(!1),{signal:Mt}),Wt.addEventListener("error",vt(!1),{signal:Mt}),Wt.addEventListener("complete",vt(!0),{signal:Mt})),Wt},table:function(_){var lt=d.table(_),vt=lt.schema.primaryKey;return a(a({},lt),{mutate:function(_t){var Mt=zt.trans;if(vt.outbound||Mt.db._options.cache==="disabled"||Mt.explicit||Mt.idbtrans.mode!=="readwrite")return lt.mutate(_t);var Wt=Kr["idb://".concat(g,"/").concat(_)];return Wt?(Mt=lt.mutate(_t),_t.type!=="add"&&_t.type!=="put"||!(50<=_t.values.length||mo(vt,_t).some(function(en){return en==null}))?(Wt.optimisticOps.push(_t),_t.mutatedParts&&Ms(_t.mutatedParts),Mt.then(function(en){0<en.numFailures&&(Ut(Wt.optimisticOps,_t),(en=$l(0,_t,en))&&Wt.optimisticOps.push(en),_t.mutatedParts&&Ms(_t.mutatedParts))}),Mt.catch(function(){Ut(Wt.optimisticOps,_t),_t.mutatedParts&&Ms(_t.mutatedParts)})):Mt.then(function(en){var tn=$l(0,a(a({},_t),{values:_t.values.map(function(fn,qt){var mn;return en.failures[qt]?fn:(fn=(mn=vt.keyPath)!==null&&mn!==void 0&&mn.includes(".")?jt(fn):a({},fn),it(fn,vt.keyPath,en.results[qt]),fn)})}),en);Wt.optimisticOps.push(tn),queueMicrotask(function(){return _t.mutatedParts&&Ms(_t.mutatedParts)})}),Mt):lt.mutate(_t)},query:function(_t){if(!Vl(zt,lt)||!Kl("query",_t))return lt.query(_t);var Mt=((tn=zt.trans)===null||tn===void 0?void 0:tn.db._options.cache)==="immutable",qt=zt,Wt=qt.requery,en=qt.signal,tn=function(ln,un,pn,yn){var wn=Kr["idb://".concat(ln,"/").concat(un)];if(!wn)return[];if(!(un=wn.queries[pn]))return[null,!1,wn,null];var Pn=un[(yn.query?yn.query.index.name:null)||""];if(!Pn)return[null,!1,wn,null];switch(pn){case"query":var Nn=Pn.find(function(Bn){return Bn.req.limit===yn.limit&&Bn.req.values===yn.values&&Xl(Bn.req.query.range,yn.query.range)});return Nn?[Nn,!0,wn,Pn]:[Pn.find(function(Bn){return("limit"in Bn.req?Bn.req.limit:1/0)>=yn.limit&&(!yn.values||Bn.req.values)&&Xu(Bn.req.query.range,yn.query.range)}),!1,wn,Pn];case"count":return Nn=Pn.find(function(Bn){return Xl(Bn.req.query.range,yn.query.range)}),[Nn,!!Nn,wn,Pn]}}(g,_,"query",_t),fn=tn[0],qt=tn[1],mn=tn[2],nn=tn[3];return fn&&qt?fn.obsSet=_t.obsSet:(qt=lt.query(_t).then(function(ln){var un=ln.result;if(fn&&(fn.res=un),Mt){for(var pn=0,yn=un.length;pn<yn;++pn)Object.freeze(un[pn]);Object.freeze(un)}else ln.result=jt(un);return ln}).catch(function(ln){return nn&&fn&&Ut(nn,fn),Promise.reject(ln)}),fn={obsSet:_t.obsSet,promise:qt,subscribers:new Set,type:"query",req:_t,dirty:!1},nn?nn.push(fn):(nn=[fn],(mn=mn||(Kr["idb://".concat(g,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[_t.query.index.name||""]=nn)),Yu(fn,nn,Wt,en),fn.promise.then(function(ln){return{result:Gl(ln.result,_t,mn==null?void 0:mn.optimisticOps,lt,fn,Mt)}})}})}})}};function Ls(d,g){return new Proxy(d,{get:function(_,lt,vt){return lt==="db"?g:Reflect.get(_,lt,vt)}})}var Or=(_r.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Bt.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Bt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var g=this._versions,_=g.filter(function(lt){return lt._cfg.version===d})[0];return _||(_=new this.Version(d),g.push(_),g.sort(Uu),_.stores({}),this._state.autoSchema=!1,_)},_r.prototype._whenReady=function(d){var g=this;return this.idbdb&&(this._state.openComplete||zt.letThrough||this._vip)?d():new jn(function(_,lt){if(g._state.openComplete)return lt(new Bt.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void lt(new Bt.DatabaseClosed);g.open().catch(rn)}g._state.dbReadyPromise.then(_,lt)}).then(d)},_r.prototype.use=function(d){var g=d.stack,_=d.create,lt=d.level,vt=d.name;return vt&&this.unuse({stack:g,name:vt}),d=this._middlewares[g]||(this._middlewares[g]=[]),d.push({stack:g,create:_,level:lt??10,name:vt}),d.sort(function(_t,Mt){return _t.level-Mt.level}),this},_r.prototype.unuse=function(d){var g=d.stack,_=d.name,lt=d.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(vt){return lt?vt.create!==lt:!!_&&vt.name!==_})),this},_r.prototype.open=function(){var d=this;return Sr(Rn,function(){return Vu(d)})},_r.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,g=Xr.indexOf(this);if(0<=g&&Xr.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new jn(function(_){d.dbReadyResolve=_}),d.openCanceller=new jn(function(_,lt){d.cancelOpen=lt}))},_r.prototype.close=function(_){var g=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;g?(_.isBeingOpened&&_.cancelOpen(new Bt.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new Bt.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},_r.prototype.delete=function(d){var g=this;d===void 0&&(d={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",lt=this._state;return new jn(function(vt,_t){function Mt(){g.close(d);var Wt=g._deps.indexedDB.deleteDatabase(g.name);Wt.onsuccess=bn(function(){var en,tn,fn;en=g._deps,tn=g.name,fn=en.indexedDB,en=en.IDBKeyRange,io(fn)||tn===_s||so(fn,en).delete(tn).catch(rn),vt()}),Wt.onerror=Mr(_t),Wt.onblocked=g._fireOnBlocked}if(_)throw new Bt.InvalidArgument("Invalid closeOptions argument to db.delete()");lt.isBeingOpened?lt.dbReadyPromise.then(Mt):Mt()})},_r.prototype.backendDB=function(){return this.idbdb},_r.prototype.isOpen=function(){return this.idbdb!==null},_r.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},_r.prototype.hasFailed=function(){return this._state.dbOpenError!==null},_r.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(_r.prototype,"tables",{get:function(){var d=this;return h(this._allTables).map(function(g){return d._allTables[g]})},enumerable:!1,configurable:!0}),_r.prototype.transaction=function(){var d=(function(g,_,lt){var vt=arguments.length;if(vt<2)throw new Bt.InvalidArgument("Too few arguments");for(var _t=new Array(vt-1);--vt;)_t[vt-1]=arguments[vt];return lt=_t.pop(),[g,Rt(_t),lt]}).apply(this,arguments);return this._transaction.apply(this,d)},_r.prototype._transaction=function(d,g,_){var lt=this,vt=zt.trans;vt&&vt.db===this&&d.indexOf("!")===-1||(vt=null);var _t,Mt,Wt=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(Mt=g.map(function(tn){if(tn=tn instanceof lt.Table?tn.name:tn,typeof tn!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return tn}),d=="r"||d===_i)_t=_i;else{if(d!="rw"&&d!=na)throw new Bt.InvalidArgument("Invalid transaction mode: "+d);_t=na}if(vt){if(vt.mode===_i&&_t===na){if(!Wt)throw new Bt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");vt=null}vt&&Mt.forEach(function(tn){if(vt&&vt.storeNames.indexOf(tn)===-1){if(!Wt)throw new Bt.SubTransaction("Table "+tn+" not included in parent transaction.");vt=null}}),Wt&&vt&&!vt.active&&(vt=null)}}catch(tn){return vt?vt._promise(null,function(fn,qt){qt(tn)}):Er(tn)}var en=(function tn(fn,qt,mn,nn,ln){return jn.resolve().then(function(){var un=zt.transless||zt,pn=fn._createTransaction(qt,mn,fn._dbSchema,nn);if(pn.explicit=!0,un={trans:pn,transless:un},nn)pn.idbtrans=nn.idbtrans;else try{pn.create(),pn.idbtrans._explicit=!0,fn._state.PR1398_maxLoop=3}catch(Pn){return Pn.name===Pt.InvalidState&&fn.isOpen()&&0<--fn._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),fn.close({disableAutoOpen:!1}),fn.open().then(function(){return tn(fn,qt,mn,null,ln)})):Er(Pn)}var yn,wn=Xt(ln);return wn&&tr(),un=jn.follow(function(){var Pn;(yn=ln.call(pn,pn))&&(wn?(Pn=sr.bind(null,null),yn.then(Pn,Pn)):typeof yn.next=="function"&&typeof yn.throw=="function"&&(yn=fo(yn)))},un),(yn&&typeof yn.then=="function"?jn.resolve(yn).then(function(Pn){return pn.active?Pn:Er(new Bt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):un.then(function(){return yn})).then(function(Pn){return nn&&pn._resolve(),pn._completion.then(function(){return Pn})}).catch(function(Pn){return pn._reject(Pn),Er(Pn)})})}).bind(null,this,_t,Mt,vt,_);return vt?vt._promise(_t,en,"lock"):zt.trans?Sr(zt.transless,function(){return lt._whenReady(en)}):this._whenReady(en)},_r.prototype.table=function(d){if(!ct(this._allTables,d))throw new Bt.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},_r);function _r(d,g){var _=this;this._middlewares={},this.verno=0;var lt=_r.dependencies;this._options=g=a({addons:_r.addons,autoOpen:!0,indexedDB:lt.indexedDB,IDBKeyRange:lt.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},lt=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var vt,_t,Mt,Wt,en,tn={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:rn,dbReadyPromise:null,cancelOpen:rn,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};tn.dbReadyPromise=new jn(function(qt){tn.dbReadyResolve=qt}),tn.openCanceller=new jn(function(qt,mn){tn.cancelOpen=mn}),this._state=tn,this.name=d,this.on=as(this,"populate","blocked","versionchange","close",{ready:[Gt,rn]}),this.once=function(qt,mn){var nn=function(){for(var ln=[],un=0;un<arguments.length;un++)ln[un]=arguments[un];_.on(qt).unsubscribe(nn),mn.apply(_,ln)};return _.on(qt,nn)},this.on.ready.subscribe=st(this.on.ready.subscribe,function(qt){return function(mn,nn){_r.vip(function(){var ln,un=_._state;un.openComplete?(un.dbOpenError||jn.resolve().then(mn),nn&&qt(mn)):un.onReadyBeingFired?(un.onReadyBeingFired.push(mn),nn&&qt(mn)):(qt(mn),ln=_,nn||qt(function pn(){ln.on.ready.unsubscribe(mn),ln.on.ready.unsubscribe(pn)}))})}}),this.Collection=(vt=this,os(Nu.prototype,function(yn,pn){this.db=vt;var nn=El,ln=null;if(pn)try{nn=pn()}catch(wn){ln=wn}var un=yn._ctx,pn=un.table,yn=pn.hook.reading.fire;this._ctx={table:pn,index:un.index,isPrimKey:!un.index||pn.schema.primKey.keyPath&&un.index===pn.schema.primKey.name,range:nn,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ln,or:un.or,valueMapper:yn!==En?yn:null}})),this.Table=(_t=this,os(Cl.prototype,function(qt,mn,nn){this.db=_t,this._tx=nn,this.name=qt,this.schema=mn,this.hook=_t._allTables[qt]?_t._allTables[qt].hook:as(null,{creating:[on,rn],reading:[kn,En],updating:[St,rn],deleting:[Vt,rn]})})),this.Transaction=(Mt=this,os(Fu.prototype,function(qt,mn,nn,ln,un){var pn=this;qt!=="readonly"&&mn.forEach(function(yn){yn=(yn=nn[yn])===null||yn===void 0?void 0:yn.yProps,yn&&(mn=mn.concat(yn.map(function(wn){return wn.updatesTable})))}),this.db=Mt,this.mode=qt,this.storeNames=mn,this.schema=nn,this.chromeTransactionDurability=ln,this.idbtrans=null,this.on=as(this,"complete","error","abort"),this.parent=un||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new jn(function(yn,wn){pn._resolve=yn,pn._reject=wn}),this._completion.then(function(){pn.active=!1,pn.on.complete.fire()},function(yn){var wn=pn.active;return pn.active=!1,pn.on.error.fire(yn),pn.parent?pn.parent._reject(yn):wn&&pn.idbtrans&&pn.idbtrans.abort(),Er(yn)})})),this.Version=(Wt=this,os(Hu.prototype,function(qt){this.db=Wt,this._cfg={version:qt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(en=this,os(Il.prototype,function(qt,mn,nn){if(this.db=en,this._ctx={table:qt,index:mn===":id"?null:mn,or:nn},this._cmp=this._ascending=pr,this._descending=function(ln,un){return pr(un,ln)},this._max=function(ln,un){return 0<pr(ln,un)?ln:un},this._min=function(ln,un){return pr(ln,un)<0?ln:un},this._IDBKeyRange=en._deps.IDBKeyRange,!this._IDBKeyRange)throw new Bt.MissingAPI})),this.on("versionchange",function(qt){0<qt.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(qt){!qt.newVersion||qt.newVersion<qt.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(qt.oldVersion/10))}),this._maxKey=cs(g.IDBKeyRange),this._createTransaction=function(qt,mn,nn,ln){return new _.Transaction(qt,mn,nn,_._options.chromeTransactionDurability,ln)},this._fireOnBlocked=function(qt){_.on("blocked").fire(qt),Xr.filter(function(mn){return mn.name===_.name&&mn!==_&&!mn._state.vcFired}).map(function(mn){return mn.on("versionchange").fire(qt)})},this.use(Gu),this.use(Qu),this.use(qu),this.use(Ku),this.use($u);var fn=new Proxy(this,{get:function(qt,mn,nn){if(mn==="_vip")return!0;if(mn==="table")return function(un){return Ls(_.table(un),fn)};var ln=Reflect.get(qt,mn,nn);return ln instanceof Cl?Ls(ln,fn):mn==="tables"?ln.map(function(un){return Ls(un,fn)}):mn==="_createTransaction"?function(){return Ls(ln.apply(this,arguments),fn)}:ln}});this.vip=fn,lt.forEach(function(qt){return qt(_)})}var Os,Dr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ju=(xo.prototype.subscribe=function(d,g,_){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:g,complete:_})},xo.prototype[Dr]=function(){return this},xo);function xo(d){this._subscribe=d}try{Os={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Os={indexedDB:null,IDBKeyRange:null}}function Yl(d){var g,_=!1,lt=new Ju(function(vt){var _t=Xt(d),Mt,Wt=!1,en={},tn={},fn={get closed(){return Wt},unsubscribe:function(){Wt||(Wt=!0,Mt&&Mt.abort(),qt&&zr.storagemutated.unsubscribe(nn))}};vt.start&&vt.start(fn);var qt=!1,mn=function(){return jr(ln)},nn=function(un){Is(en,un),lo(tn,en)&&mn()},ln=function(){var un,pn,yn;!Wt&&Os.indexedDB&&(en={},un={},Mt&&Mt.abort(),Mt=new AbortController,yn=function(wn){var Pn=Tt();try{_t&&tr();var Nn=Vn(d,wn);return Nn=_t?Nn.finally(sr):Nn}finally{Pn&&$t()}}(pn={subscr:un,signal:Mt.signal,requery:mn,querier:d,trans:null}),Promise.resolve(yn).then(function(wn){_=!0,g=wn,Wt||pn.signal.aborted||(en={},function(Pn){for(var Nn in Pn)if(ct(Pn,Nn))return;return 1}(tn=un)||qt||(zr(us,nn),qt=!0),jr(function(){return!Wt&&vt.next&&vt.next(wn)}))},function(wn){_=!1,["DatabaseClosedError","AbortError"].includes(wn==null?void 0:wn.name)||Wt||jr(function(){Wt||vt.error&&vt.error(wn)})}))};return setTimeout(mn,0),fn});return lt.hasValue=function(){return _},lt.getValue=function(){return g},lt}var $r=Or;function yo(d){var g=Wr;try{Wr=!0,zr.storagemutated.fire(d),ho(d,!0)}finally{Wr=g}}ut($r,a(a({},an),{delete:function(d){return new $r(d,{addons:[]}).delete()},exists:function(d){return new $r(d,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return g=$r.dependencies,_=g.indexedDB,g=g.IDBKeyRange,(io(_)?Promise.resolve(_.databases()).then(function(lt){return lt.map(function(vt){return vt.name}).filter(function(vt){return vt!==_s})}):so(_,g).toCollection().primaryKeys()).then(d)}catch{return Er(new Bt.MissingAPI)}var g,_},defineClass:function(){return function(d){b(this,d)}},ignoreTransaction:function(d){return zt.trans?Sr(zt.transless,d):d()},vip:ao,async:function(d){return function(){try{var g=fo(d.apply(this,arguments));return g&&typeof g.then=="function"?g:jn.resolve(g)}catch(_){return Er(_)}}},spawn:function(d,g,_){try{var lt=fo(d.apply(_,g||[]));return lt&&typeof lt.then=="function"?lt:jn.resolve(lt)}catch(vt){return Er(vt)}},currentTransaction:{get:function(){return zt.trans||null}},waitFor:function(d,g){return g=jn.resolve(typeof d=="function"?$r.ignoreTransaction(d):d).timeout(g||6e4),zt.trans?zt.trans.waitFor(g):g},Promise:jn,debug:{get:function(){return Jt},set:function(d){vn(d)}},derive:yt,extend:b,props:ut,override:st,Events:as,on:zr,liveQuery:Yl,extendObservabilitySet:Is,getByKeyPath:mt,setByKeyPath:it,delByKeyPath:function(d,g){typeof g=="string"?it(d,g,void 0):"length"in g&&[].map.call(g,function(_){it(d,_,void 0)})},shallowClone:dt,deepClone:jt,getObjectDiff:po,cmp:pr,asap:ot,minKey:-1/0,addons:[],connections:Xr,errnames:Pt,dependencies:Os,cache:Kr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,g,_){return d+g/Math.pow(10,2*_)})})),$r.maxKey=cs($r.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zr(us,function(d){Wr||(d=new CustomEvent(ba,{detail:d}),Wr=!0,dispatchEvent(d),Wr=!1)}),addEventListener(ba,function(d){d=d.detail,Wr||yo(d)}));var Zr,Wr=!1,Ql=function(){};return typeof BroadcastChannel<"u"&&((Ql=function(){(Zr=new BroadcastChannel(ba)).onmessage=function(d){return d.data&&yo(d.data)}})(),typeof Zr.unref=="function"&&Zr.unref(),zr(us,function(d){Wr||Zr.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Or.disableBfCache&&d.persisted){Jt&&console.debug("Dexie: handling persisted pagehide"),Zr!=null&&Zr.close();for(var g=0,_=Xr;g<_.length;g++)_[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Or.disableBfCache&&d.persisted&&(Jt&&console.debug("Dexie: handling persisted pageshow"),Ql(),yo({all:new Ar(-1/0,[[]])}))})),jn.rejectionMapper=function(d,g){return!d||d instanceof rt||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Lt[d.name]?d:(g=new Lt[d.name](g||d.message,d),"stack"in d&&pt(g,"stack",{get:function(){return this.inner.stack}}),g)},vn(Jt),a(Or,Object.freeze({__proto__:null,Dexie:Or,liveQuery:Yl,Entity:_l,cmp:pr,PropModification:is,replacePrefix:function(d,g){return new is({replacePrefix:[d,g]})},add:function(d){return new is({add:d})},remove:function(d){return new is({remove:d})},default:Or,RangeSet:Ar,mergeRanges:fs,rangesOverlap:Bl}),{default:Or}),Or})})(dexie_min);var dexie_minExports=dexie_min.exports;const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie;class EstateWorkspaceDB extends Dexie{constructor(){super("estate-workspace");xr(this,"tasks");xr(this,"documents");xr(this,"journalEntries");this.version(1).stores({tasks:"id, due_date, status, priority, created_at, updated_at, *tags, *docIds"}),this.version(2).stores({tasks:"id, due_date, status, priority, created_at, updated_at, *tags, *docIds",documents:"id, title, contentType, size, created_at, taskId, *tags"}),this.version(3).stores({tasks:"id, due_date, status, priority, created_at, updated_at, *tags, *docIds",documents:"id, title, contentType, size, created_at, taskId, *tags",journalEntries:"id, created_at, title"}),this.version(4).stores({tasks:"id, estateId, due_date, status, priority, created_at, updated_at, seedVersion, *tags, *docIds",documents:"id, estateId, title, contentType, size, created_at, taskId, *tags",journalEntries:"id, estateId, created_at, title"}).upgrade(async i=>{await i.table("tasks").toCollection().modify(a=>{a.estateId||(a.estateId="mother")}),await i.table("documents").toCollection().modify(a=>{a.estateId||(a.estateId="mother")}),await i.table("journalEntries").toCollection().modify(a=>{a.estateId||(a.estateId="mother")})})}}const db=new EstateWorkspaceDB,seedTasksIfEmpty=async()=>{await db.tasks.count()},nowISO=()=>new Date().toISOString(),normalizeISODate=e=>new Date(e).toISOString(),createTask=async e=>{const s=generateId("task"),i={...e,id:s,docIds:e.docIds??[],due_date:normalizeISODate(e.due_date),created_at:nowISO(),updated_at:nowISO()};return await db.tasks.add(i),s},updateTask=async(e,s)=>{const i={...s,updated_at:nowISO()};s.due_date&&(i.due_date=normalizeISODate(s.due_date)),await db.tasks.update(e,i)},deleteTask=async e=>{await db.tasks.delete(e)},createDocument=async({file:e,title:s,tags:i,taskId:a,estateId:o})=>{const c=generateId("doc");let h=o;if(a){const b=await db.tasks.get(a);b&&(h=b.estateId)}const j={id:c,estateId:h,title:s,tags:i,taskId:null,contentType:e.type||"application/octet-stream",size:e.size,file:e,created_at:nowISO()};return await db.documents.add(j),a&&await linkDocumentToTask(c,a),c},linkDocumentToTask=async(e,s)=>{await db.transaction("rw",db.documents,db.tasks,async()=>{const[i,a]=await Promise.all([db.documents.get(e),db.tasks.get(s)]);if(!i||!a)throw new Error("Document or task not found");if(i.estateId!==a.estateId&&await db.documents.update(e,{estateId:a.estateId}),i.taskId&&i.taskId!==s){const o=await db.tasks.get(i.taskId);o&&await db.tasks.update(o.id,{docIds:o.docIds.filter(c=>c!==e),updated_at:nowISO()})}await db.documents.update(e,{taskId:s}),a.docIds.includes(e)?await db.tasks.update(s,{updated_at:nowISO()}):await db.tasks.update(s,{docIds:[...a.docIds,e],updated_at:nowISO()})})},unlinkDocumentFromTask=async e=>{await db.transaction("rw",db.documents,db.tasks,async()=>{const s=await db.documents.get(e);if(!s)return;const{taskId:i}=s;if(await db.documents.update(e,{taskId:null}),!i)return;const a=await db.tasks.get(i);a&&await db.tasks.update(i,{docIds:a.docIds.filter(o=>o!==e),updated_at:nowISO()})})},getJournalEntries=async e=>db.journalEntries.where("estateId").equals(e).sortBy("created_at").then(s=>s.reverse()),createJournalEntry=async({title:e,body:s,estateId:i})=>{const a={id:generateId("journal"),estateId:i,title:e,body:s,created_at:nowISO()};return await db.journalEntries.add(a),a.id},updateJournalEntry=async(e,s)=>{await db.journalEntries.update(e,s)},deleteJournalEntry=async e=>{await db.journalEntries.delete(e)},generateId=e=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${e}-${Math.random().toString(36).slice(2,11)}`,ESTATE_PROFILES_KEY="estateProfiles",ESTATE_ACTIVE_ID_KEY="estateActiveId",SEED_VERSION_KEY="seedVersion",TASKS_KEY_PREFIX="tasks:",DOCUMENTS_META_KEY_PREFIX="documentsMeta:",GUIDANCE_KEY_PREFIX="guidance:",ESTATE_IDS=["mother","father"],isRecord=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),isEstateId=e=>typeof e=="string"&&ESTATE_IDS.includes(e),isSeedLink=e=>isRecord(e)&&typeof e.type=="string"&&typeof e.value=="string",validateSeedTask=e=>{if(!isRecord(e))throw new Error("Invalid task entry in plan payload");const{title:s,description:i,tags:a,dueISO:o,status:c,priority:h,linkTo:j}=e;if(typeof s!="string"||!s.trim())throw new Error("Seed task requires a title");if(typeof i!="string")throw new Error(`Seed task "${s}" requires a description`);if(!Array.isArray(a)||a.some(b=>typeof b!="string"))throw new Error(`Seed task "${s}" must include an array of string tags`);if(o!==void 0&&typeof o!="string")throw new Error(`Seed task "${s}" has an invalid due date`);if(c!==void 0&&c!=="not-started"&&c!=="in-progress"&&c!=="done")throw new Error(`Seed task "${s}" has an invalid status`);if(h!==void 0&&h!=="low"&&h!=="med"&&h!=="high")throw new Error(`Seed task "${s}" has an invalid priority`);if(j!==void 0&&(!Array.isArray(j)||j.some(b=>!isSeedLink(b))))throw new Error(`Seed task "${s}" has invalid link targets`);return{title:s,description:i,tags:a.map(b=>b.trim()).filter(Boolean),dueISO:o??void 0,status:c,priority:h,linkTo:j}},validateEstateProfile=(e,s)=>{if(!isRecord(e))throw new Error(`Estate profile for ${s} is invalid`);const{label:i,county:a,decedentName:o,dodISO:c,lettersISO:h,firstPublicationISO:j,notes:b}=e;if(typeof i!="string"||!i.trim())throw new Error(`Estate profile for ${s} requires a label`);if(typeof a!="string"||!a.trim())throw new Error(`Estate profile for ${s} requires a county`);if(typeof o!="string"||!o.trim())throw new Error(`Estate profile for ${s} requires a decedent name`);if(typeof c!="string"||!c.trim())throw new Error(`Estate profile for ${s} requires a date of death`);if(h!==void 0&&typeof h!="string")throw new Error(`Estate profile for ${s} has an invalid letters date`);if(j!==void 0&&typeof j!="string")throw new Error(`Estate profile for ${s} has an invalid publication date`);if(b!==void 0&&typeof b!="string")throw new Error(`Estate profile for ${s} has invalid notes`);return{id:s,label:i,county:a,decedentName:o,dodISO:c,lettersISO:h??void 0,firstPublicationISO:j??void 0,notes:b??void 0}},normalizePlan=e=>{if(!isRecord(e))throw new Error("Plan payload must be an object");const{seedVersion:s,estateProfiles:i,tasks:a,documentsMeta:o,guidance:c}=e;if(typeof s!="string"||!s.trim())throw new Error("Plan payload requires a seedVersion string");if(!isRecord(i))throw new Error("Plan payload requires estateProfiles");const h={mother:validateEstateProfile(i.mother,"mother"),father:validateEstateProfile(i.father,"father")},j={mother:[],father:[]};if(a!==void 0){if(!isRecord(a))throw new Error("Plan payload tasks section must be an object");for(const _e of ESTATE_IDS){const ct=a[_e];if(ct===void 0){j[_e]=[];continue}if(!Array.isArray(ct))throw new Error(`Plan payload tasks for ${_e} must be an array`);j[_e]=ct.map(ut=>validateSeedTask(ut))}}const b={mother:[],father:[]};if(o!==void 0){if(!isRecord(o))throw new Error("Plan payload documentsMeta must be an object");for(const _e of ESTATE_IDS){const ct=o[_e];if(ct===void 0){b[_e]=[];continue}if(!Array.isArray(ct))throw new Error(`Plan payload documentsMeta for ${_e} must be an array`);b[_e]=ct.filter(ut=>isRecord(ut))}}const $={mother:[],father:[]};if(c!==void 0){if(!isRecord(c))throw new Error("Plan payload guidance must be an object");for(const _e of ESTATE_IDS){const ct=c[_e];if(ct===void 0){$[_e]=[];continue}if(!Array.isArray(ct))throw new Error(`Plan payload guidance for ${_e} must be an array`);$[_e]=ct.filter(ut=>isRecord(ut))}}return{seedVersion:s.trim(),estateProfiles:h,tasks:j,documentsMeta:b,guidance:$}},storageAvailable=()=>typeof window<"u"&&!!window.localStorage,writeJson=(e,s)=>{if(storageAvailable()){if(s===void 0){window.localStorage.removeItem(e);return}window.localStorage.setItem(e,JSON.stringify(s))}},tasksKeyFor=e=>`${TASKS_KEY_PREFIX}${e}`,documentsKeyFor=e=>`${DOCUMENTS_META_KEY_PREFIX}${e}`,guidanceKeyFor=e=>`${GUIDANCE_KEY_PREFIX}${e}`,loadEstateProfiles=()=>{const e={mother:{id:"mother",label:"Mother",county:"",decedentName:"",dodISO:""},father:{id:"father",label:"Father",county:"",decedentName:"",dodISO:""}};if(!storageAvailable())return e;const s=window.localStorage.getItem(ESTATE_PROFILES_KEY);if(!s)return e;try{const i=JSON.parse(s),a={...e};for(const o of ESTATE_IDS){const c=i[o];if(c)try{a[o]=validateEstateProfile(c,o)}catch(h){console.warn(`Ignoring invalid estate profile for ${o}`,h)}}return a}catch(i){return console.warn("Unable to parse estate profiles from storage",i),e}},loadSeedVersion=()=>storageAvailable()?window.localStorage.getItem(SEED_VERSION_KEY):null,getActiveEstateId=()=>{if(!storageAvailable())return"mother";const e=window.localStorage.getItem(ESTATE_ACTIVE_ID_KEY);return isEstateId(e)?e:"mother"},setActiveEstateId=e=>{storageAvailable()&&window.localStorage.setItem(ESTATE_ACTIVE_ID_KEY,e)},persistEstatePlan=e=>{const s=normalizePlan(e);if(!storageAvailable())return s;writeJson(ESTATE_PROFILES_KEY,s.estateProfiles),window.localStorage.setItem(SEED_VERSION_KEY,s.seedVersion);for(const a of ESTATE_IDS){const o=s.tasks[a];o.length===0?window.localStorage.removeItem(tasksKeyFor(a)):writeJson(tasksKeyFor(a),o);const c=s.documentsMeta[a];c.length===0?window.localStorage.removeItem(documentsKeyFor(a)):writeJson(documentsKeyFor(a),c);const h=s.guidance[a];h.length===0?window.localStorage.removeItem(guidanceKeyFor(a)):writeJson(guidanceKeyFor(a),h)}const i=getActiveEstateId();return isEstateId(i)||setActiveEstateId("mother"),s},reseedFromPlan=async(e,s)=>{for(const i of ESTATE_IDS){const a=e.tasks[i];if(!a||a.length===0)continue;const o=await db.tasks.where("estateId").equals(i).toArray(),c=new Map;o.forEach(h=>{h.seedVersion===e.seedVersion&&c.set(h.title.trim().toLowerCase(),h)});for(const h of a){const j=h.title.trim().toLowerCase(),b=c.get(j);if(b){const $={title:h.title,description:h.description,status:h.status??b.status,priority:h.priority??b.priority,tags:h.tags,seedVersion:e.seedVersion};h.dueISO&&($.due_date=h.dueISO),await updateTask(b.id,$)}else await createTask({estateId:i,title:h.title,description:h.description,due_date:h.dueISO??new Date().toISOString(),status:h.status??"not-started",priority:h.priority??"med",tags:h.tags,seedVersion:e.seedVersion})}}},EstateContext=reactExports.createContext(void 0),EstateProvider=({children:e})=>{const[s,i]=reactExports.useState(()=>getActiveEstateId()),[a,o]=reactExports.useState(()=>loadEstateProfiles()),c=reactExports.useCallback(b=>{i(b),setActiveEstateId(b)},[]),h=reactExports.useCallback(()=>{o(loadEstateProfiles())},[]),j=reactExports.useMemo(()=>({activeEstateId:s,estateProfiles:a,setActiveEstateId:c,refreshEstateProfiles:h}),[s,a,h,c]);return jsxRuntimeExports.jsx(EstateContext.Provider,{value:j,children:e})},useEstate=()=>{const e=reactExports.useContext(EstateContext);if(!e)throw new Error("useEstate must be used within an EstateProvider");return e},startOfDay=e=>{const s=new Date(e);return s.setHours(0,0,0,0),s},toDateKey=e=>{const s=e.getFullYear(),i=`${e.getMonth()+1}`.padStart(2,"0"),a=`${e.getDate()}`.padStart(2,"0");return`${s}-${i}-${a}`},fromDateKey=e=>{const[s,i,a]=e.split("-").map(Number);return new Date(s,(i??1)-1,a??1)},isSameDay=(e,s)=>toDateKey(e)===toDateKey(s),getCalendarDays=e=>{const s=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0),a=new Date(s);a.setDate(s.getDate()-s.getDay());const o=new Date(i);o.setDate(i.getDate()+(6-i.getDay()));const c=startOfDay(new Date),h=[];for(let j=a;j<=o;j.setDate(j.getDate()+1)){const b=new Date(j);h.push({date:b,key:toDateKey(b),label:`${b.getDate()}`,isCurrentMonth:b.getMonth()===e.getMonth()&&b.getFullYear()===e.getFullYear(),isToday:isSameDay(b,c)})}return h},formatDueDate$1=e=>new Date(e).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),formatSelectedDate=e=>fromDateKey(e).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"}),addDays$2=(e,s)=>{const i=new Date(e);return i.setDate(i.getDate()+s),i},Calendar=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(()=>{const st=new Date;return new Date(st.getFullYear(),st.getMonth(),1)}),[o,c]=reactExports.useState(()=>toDateKey(new Date)),{activeEstateId:h}=useEstate();reactExports.useEffect(()=>{let st=!0,gt;return(async()=>{try{await seedTasksIfEmpty(),gt=liveQuery(()=>db.tasks.where("estateId").equals(h).toArray()).subscribe({next:mt=>{if(!st)return;const it=[...mt].sort((dt,ft)=>new Date(dt.due_date).getTime()-new Date(ft.due_date).getTime());s(it)},error:mt=>{console.error(mt)}})}catch(mt){console.error(mt)}})(),()=>{st=!1,gt==null||gt.unsubscribe()}},[h]);const j=reactExports.useMemo(()=>e.filter(st=>st.due_date&&st.status!=="done"),[e]),b=reactExports.useMemo(()=>{const st=new Map;return j.forEach(gt=>{var mt;if(!gt.due_date)return;const ot=toDateKey(new Date(gt.due_date));st.has(ot)||st.set(ot,[]),(mt=st.get(ot))==null||mt.push(gt)}),st},[j]),$=reactExports.useMemo(()=>getCalendarDays(i),[i]),_e=reactExports.useMemo(()=>[...b.get(o)??[]].sort((gt,ot)=>new Date(gt.due_date).getTime()-new Date(ot.due_date).getTime()),[b,o]),ct=reactExports.useMemo(()=>startOfDay(new Date),[]),ut=reactExports.useMemo(()=>addDays$2(ct,6),[ct]),ht=reactExports.useMemo(()=>addDays$2(ct,29),[ct]),pt=reactExports.useMemo(()=>j.filter(st=>{const gt=startOfDay(new Date(st.due_date));return gt>=ct&&gt<=ut}).sort((st,gt)=>new Date(st.due_date).getTime()-new Date(gt.due_date).getTime()),[j,ut,ct]),yt=reactExports.useMemo(()=>j.filter(st=>{const gt=startOfDay(new Date(st.due_date));return gt>ut&&gt<=ht}).sort((st,gt)=>new Date(st.due_date).getTime()-new Date(gt.due_date).getTime()),[j,ut,ht]),bt=st=>{c(st)},et=()=>{a(st=>new Date(st.getFullYear(),st.getMonth()-1,1))},nt=()=>{a(st=>new Date(st.getFullYear(),st.getMonth()+1,1))};return jsxRuntimeExports.jsxs("section",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Calendar"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Monitor due dates across the family office and surface upcoming priorities."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr,1fr]",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:i.toLocaleDateString(void 0,{month:"long",year:"numeric"})})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:et,className:"rounded-full border border-slate-200 p-2 text-slate-500 transition hover:border-primary-200 hover:text-primary-600","aria-label":"Previous month",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:nt,className:"rounded-full border border-slate-200 p-2 text-slate-500 transition hover:border-primary-200 hover:text-primary-600","aria-label":"Next month",children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 grid grid-cols-7 text-center text-xs font-semibold uppercase tracking-wide text-slate-400",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(st=>jsxRuntimeExports.jsx("div",{className:"py-2",children:st},st))}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 gap-1 text-sm",children:$.map(st=>{var mt;const gt=((mt=b.get(st.key))==null?void 0:mt.length)??0,ot=o===st.key;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>bt(st.key),className:`flex h-20 flex-col justify-between rounded-xl border p-3 text-left transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 ${ot?"border-primary-400 bg-primary-50":st.isCurrentMonth?"border-transparent bg-white":"border-transparent bg-slate-50 text-slate-400"}`,children:[jsxRuntimeExports.jsx("span",{className:`text-sm font-medium ${st.isToday?"text-primary-600":""}`,children:st.label}),gt>0&&jsxRuntimeExports.jsx("span",{className:"inline-flex min-w-[2rem] justify-center rounded-full bg-primary-100 px-2 py-1 text-xs font-semibold text-primary-700",children:gt})]},st.key)})})]}),jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:formatSelectedDate(o)}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Tasks scheduled for this day."})]}),_e.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"No outstanding tasks for this date."}):jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:_e.map(st=>jsxRuntimeExports.jsxs("li",{className:"rounded-xl border border-slate-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-primary-600",children:formatDueDate$1(st.due_date)}),jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400",children:st.priority==="high"?"High priority":st.priority==="med"?"Medium priority":"Low priority"})]}),jsxRuntimeExports.jsx("h3",{className:"mt-2 text-base font-semibold text-slate-900",children:st.title}),st.description&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-slate-600",children:st.description}),st.tags.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:st.tags.map(gt=>jsxRuntimeExports.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600",children:gt},gt))})]},st.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upcoming 7 days"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Next week's deadlines at a glance."})]}),pt.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"No due tasks in the next 7 days."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:pt.map(st=>jsxRuntimeExports.jsxs("li",{className:"rounded-xl border border-slate-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:formatDueDate$1(st.due_date)}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:st.title}),st.tags.length>0&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:st.tags.join(", ")})]},st.id))})]}),jsxRuntimeExports.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upcoming 30 days"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Keep an eye on longer horizon deadlines."})]}),yt.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"No due tasks in the next 30 days."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:yt.map(st=>jsxRuntimeExports.jsxs("li",{className:"rounded-xl border border-slate-200 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:formatDueDate$1(st.due_date)}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:st.title}),st.tags.length>0&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:st.tags.join(", ")})]},st.id))})]})]})]})]})},formatDate$1=e=>{const s=new Date(e);return Number.isNaN(s.valueOf())?"No due date":s.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},formatDateTime$1=e=>{const s=new Date(e);return Number.isNaN(s.valueOf())?"Unknown date":s.toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},Dashboard=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState([]),[o,c]=reactExports.useState([]),h=useNavigate(),{activeEstateId:j}=useEstate();reactExports.useEffect(()=>{let ut=!0,ht;return ht=liveQuery(()=>db.tasks.where("estateId").equals(j).toArray()).subscribe({next:pt=>{if(!ut)return;const yt=[...pt].sort((bt,et)=>new Date(bt.due_date).getTime()-new Date(et.due_date).getTime());s(yt)},error:pt=>{console.error(pt)}}),()=>{ut=!1,ht==null||ht.unsubscribe()}},[j]),reactExports.useEffect(()=>{let ut=!0,ht;return ht=liveQuery(()=>db.documents.where("estateId").equals(j).toArray()).subscribe({next:pt=>{if(!ut)return;const yt=[...pt].sort((bt,et)=>new Date(et.created_at).getTime()-new Date(bt.created_at).getTime());a(yt)},error:pt=>{console.error(pt)}}),()=>{ut=!1,ht==null||ht.unsubscribe()}},[j]),reactExports.useEffect(()=>{let ut=!0,ht;return ht=liveQuery(()=>db.journalEntries.where("estateId").equals(j).sortBy("created_at")).subscribe({next:pt=>{ut&&c(pt.slice().reverse())},error:pt=>{console.error(pt)}}),()=>{ut=!1,ht==null||ht.unsubscribe()}},[j]);const b=reactExports.useMemo(()=>{const ut=e.length,ht=e.filter(dt=>dt.status==="done").length,pt=ut-ht,yt=ut===0?0:Math.round(ht/ut*100),bt=new Date;bt.setHours(0,0,0,0);const et=new Date(bt);et.setDate(et.getDate()+7);let nt=0,st=0;const gt=new Map,ot=[];e.forEach(dt=>{dt.tags.forEach(Rt=>{gt.set(Rt,(gt.get(Rt)??0)+1)});const ft=new Date(dt.due_date);Number.isNaN(ft.valueOf())||dt.status!=="done"&&(ft<bt?nt+=1:ft<=et&&(st+=1),ft>=bt&&ot.push(dt))});const mt=Array.from(gt.entries()).map(([dt,ft])=>({tag:dt,count:ft})).sort((dt,ft)=>ft.count-dt.count||dt.tag.localeCompare(ft.tag)).slice(0,10),it=ot.sort((dt,ft)=>new Date(dt.due_date).getTime()-new Date(ft.due_date).getTime()).slice(0,3);return{total:ut,completed:ht,open:pt,progressPercent:yt,overdue:nt,dueThisWeek:st,tagBreakdown:mt,upcomingDeadlines:it}},[e]),$=i[0]??null,_e=o[0]??null,ct=[{label:"Add task",description:"Capture a new responsibility and assign an owner and due date.",onClick:()=>h("/tasks",{state:{startCreate:!0}})},{label:"Upload document",description:"Store signed agreements, statements, and supporting files.",onClick:()=>h("/documents",{state:{startUpload:!0}})},{label:"New journal entry",description:"Record family updates or decisions for future reference.",onClick:()=>h("/journal",{state:{focusNewEntry:!0}})}];return jsxRuntimeExports.jsxs("section",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm uppercase tracking-wide text-primary-600",children:"Overview"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Your estate at a glance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Keep tabs on deadlines, documentation, and noteseverything you need to guide the estate plan forward."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Task progress"}),jsxRuntimeExports.jsxs("h2",{className:"mt-1 text-xl font-semibold text-slate-900",children:[b.total," tasks"]})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-semibold text-primary-600",children:[b.progressPercent,"% done"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[jsxRuntimeExports.jsxs("span",{children:[b.open," open"]}),jsxRuntimeExports.jsxs("span",{children:[b.completed," completed"]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-100",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full bg-primary-500 transition-all",style:{width:`${b.progressPercent}%`}})})]})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Deadlines"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Upcoming commitments"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-rose-50 px-3 py-2 text-rose-700",children:[jsxRuntimeExports.jsx("span",{children:"Overdue"}),jsxRuntimeExports.jsx("span",{className:"text-base font-semibold",children:b.overdue})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-amber-50 px-3 py-2 text-amber-700",children:[jsxRuntimeExports.jsx("span",{children:"Due this week"}),jsxRuntimeExports.jsx("span",{className:"text-base font-semibold",children:b.dueThisWeek})]})]})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Quick actions"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Jump back in"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-3",children:ct.map(ut=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:ut.onClick,className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-left text-sm font-medium text-slate-700 transition hover:border-primary-200 hover:bg-primary-50/60 hover:text-primary-700",children:[jsxRuntimeExports.jsx("span",{className:"block text-base font-semibold text-slate-900",children:ut.label}),jsxRuntimeExports.jsx("span",{className:"block text-xs text-slate-500",children:ut.description})]},ut.label))})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm lg:col-span-2",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Next deadlines"}),jsxRuntimeExports.jsx("h2",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Coming up"})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>h("/tasks"),className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:"View all tasks"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-3",children:b.upcomingDeadlines.length===0?jsxRuntimeExports.jsx("p",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-sm text-slate-500",children:"No upcoming deadlinesreview overdue items or add new tasks to see them here."}):b.upcomingDeadlines.map(ut=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 px-4 py-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-base font-semibold text-slate-900",children:ut.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:ut.tags.length?ut.tags.map(ht=>`#${ht}`).join("  "):"No tags"})]}),jsxRuntimeExports.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600",children:["Due ",formatDate$1(ut.due_date)]})]},ut.id))})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recent activity"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Latest updates"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Document"}),$?jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-base font-semibold text-slate-900",children:$.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",formatDateTime$1($.created_at)]}),$.tags.length>0?jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Tags: ",$.tags.map(ut=>`#${ut}`).join(", ")]}):null]}):jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Upload your first document to see it here."})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Journal"}),_e?jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-base font-semibold text-slate-900",children:_e.title}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Last updated ",formatDateTime$1(_e.created_at)]})]}):jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Capture your first journal entry to see it here."})]})]})]})]}),jsxRuntimeExports.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Tags"}),jsxRuntimeExports.jsx("h2",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Work by category"})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>h("/tasks"),className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:"Manage tags"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:b.tagBreakdown.length===0?jsxRuntimeExports.jsx("p",{className:"col-span-full rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-sm text-slate-500",children:"No tags yetadd labels to tasks to organize work by theme."}):b.tagBreakdown.map(ut=>jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["#",ut.tag]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:[ut.count," task",ut.count===1?"":"s"]})]},ut.tag))})]})]})};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const nodeCrypto={},__viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:nodeCrypto},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal);(function(module,exports$1){(function(s,i){module.exports=s.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,s)=>{var dr;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=At,s.bytesToString=an,s.createValidAbsoluteUrl=Xt,s.getModificationDate=Dn,s.getUuid=Qn,s.getVerbosityLevel=Kt,s.info=Yt,s.isArrayBuffer=Zt,s.isArrayEqual=In,s.isNodeJS=void 0,s.normalizeUnicode=Wn,s.objectFromMap=An,s.objectSize=kn,s.setVerbosityLevel=sn,s.shadow=kt,s.string32=En,s.stringToBytes=rn,s.stringToPDFString=vn,s.stringToUTF8String=Sn,s.unreachable=Ut,s.utf8StringToString=Tn,s.warn=Ht;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=i;const a=[1,0,0,1,0,0];s.IDENTITY_MATRIX=a;const o=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=o;const c=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=c;const h=1.35;s.LINE_FACTOR=h;const j=.35;s.LINE_DESCENT_FACTOR=j;const b=j/h;s.BASELINE_FACTOR=b;const $={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=$;const _e={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=_e;const ct="pdfjs_internal_editor_";s.AnnotationEditorPrefix=ct;const ut={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=ut;const ht={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=ht;const pt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=pt;const yt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=yt;const bt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=bt;const et={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=et;const nt={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=nt;const st={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=st;const gt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=gt;const ot={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=ot;const mt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=mt;const it={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=it;const dt={O:"PageOpen",C:"PageClose"};s.PageActionEventType=dt;const ft={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=ft;const Rt={NONE:0,BINARY:1};s.CMapCompressionType=Rt;const xt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=xt;const wt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=wt;let jt=ft.WARNINGS;function sn(Rn){Number.isInteger(Rn)&&(jt=Rn)}function Kt(){return jt}function Yt(Rn){jt>=ft.INFOS&&console.log(`Info: ${Rn}`)}function Ht(Rn){jt>=ft.WARNINGS&&console.log(`Warning: ${Rn}`)}function Ut(Rn){throw new Error(Rn)}function At(Rn,zt){Rn||Ut(zt)}function Ft(Rn){switch(Rn==null?void 0:Rn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Xt(Rn,zt=null,cn=null){if(!Rn)return null;try{if(cn&&typeof Rn=="string"){if(cn.addDefaultProtocol&&Rn.startsWith("www.")){const ir=Rn.match(/\./g);(ir==null?void 0:ir.length)>=2&&(Rn=`http://${Rn}`)}if(cn.tryConvertEncoding)try{Rn=Sn(Rn)}catch{}}const On=zt?new URL(Rn,zt):new URL(Rn);if(Ft(On))return On}catch{}return null}function kt(Rn,zt,cn,On=!1){return Object.defineProperty(Rn,zt,{value:cn,enumerable:!On,configurable:!0,writable:!1}),cn}const rt=function(){function zt(cn,On){this.constructor===zt&&Ut("Cannot initialize BaseException."),this.message=cn,this.name=On}return zt.prototype=new Error,zt.constructor=zt,zt}();s.BaseException=rt;class at extends rt{constructor(zt,cn){super(zt,"PasswordException"),this.code=cn}}s.PasswordException=at;class Et extends rt{constructor(zt,cn){super(zt,"UnknownErrorException"),this.details=cn}}s.UnknownErrorException=Et;class Ct extends rt{constructor(zt){super(zt,"InvalidPDFException")}}s.InvalidPDFException=Ct;class Pt extends rt{constructor(zt){super(zt,"MissingPDFException")}}s.MissingPDFException=Pt;class It extends rt{constructor(zt,cn){super(zt,"UnexpectedResponseException"),this.status=cn}}s.UnexpectedResponseException=It;class Bt extends rt{constructor(zt){super(zt,"FormatError")}}s.FormatError=Bt;class Lt extends rt{constructor(zt){super(zt,"AbortException")}}s.AbortException=Lt;function an(Rn){(typeof Rn!="object"||(Rn==null?void 0:Rn.length)===void 0)&&Ut("Invalid argument for bytesToString");const zt=Rn.length,cn=8192;if(zt<cn)return String.fromCharCode.apply(null,Rn);const On=[];for(let ir=0;ir<zt;ir+=cn){const jn=Math.min(ir+cn,zt),Ot=Rn.subarray(ir,jn);On.push(String.fromCharCode.apply(null,Ot))}return On.join("")}function rn(Rn){typeof Rn!="string"&&Ut("Invalid argument for stringToBytes");const zt=Rn.length,cn=new Uint8Array(zt);for(let On=0;On<zt;++On)cn[On]=Rn.charCodeAt(On)&255;return cn}function En(Rn){return String.fromCharCode(Rn>>24&255,Rn>>16&255,Rn>>8&255,Rn&255)}function kn(Rn){return Object.keys(Rn).length}function An(Rn){const zt=Object.create(null);for(const[cn,On]of Rn)zt[cn]=On;return zt}function on(){const Rn=new Uint8Array(4);return Rn[0]=1,new Uint32Array(Rn.buffer,0,1)[0]===1}function Vt(){try{return new Function(""),!0}catch{return!1}}class St{static get isLittleEndian(){return kt(this,"isLittleEndian",on())}static get isEvalSupported(){return kt(this,"isEvalSupported",Vt())}static get isOffscreenCanvasSupported(){return kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?kt(this,"platform",{isWin:!1,isMac:!1}):kt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var zt,cn;return kt(this,"isCSSRoundSupported",(cn=(zt=globalThis.CSS)==null?void 0:zt.supports)==null?void 0:cn.call(zt,"width: round(1.5px, 1px)"))}}s.FeatureTest=St;const Nt=[...Array(256).keys()].map(Rn=>Rn.toString(16).padStart(2,"0"));class Gt{static makeHexColor(zt,cn,On){return`#${Nt[zt]}${Nt[cn]}${Nt[On]}`}static scaleMinMax(zt,cn){let On;zt[0]?(zt[0]<0&&(On=cn[0],cn[0]=cn[1],cn[1]=On),cn[0]*=zt[0],cn[1]*=zt[0],zt[3]<0&&(On=cn[2],cn[2]=cn[3],cn[3]=On),cn[2]*=zt[3],cn[3]*=zt[3]):(On=cn[0],cn[0]=cn[2],cn[2]=On,On=cn[1],cn[1]=cn[3],cn[3]=On,zt[1]<0&&(On=cn[2],cn[2]=cn[3],cn[3]=On),cn[2]*=zt[1],cn[3]*=zt[1],zt[2]<0&&(On=cn[0],cn[0]=cn[1],cn[1]=On),cn[0]*=zt[2],cn[1]*=zt[2]),cn[0]+=zt[4],cn[1]+=zt[4],cn[2]+=zt[5],cn[3]+=zt[5]}static transform(zt,cn){return[zt[0]*cn[0]+zt[2]*cn[1],zt[1]*cn[0]+zt[3]*cn[1],zt[0]*cn[2]+zt[2]*cn[3],zt[1]*cn[2]+zt[3]*cn[3],zt[0]*cn[4]+zt[2]*cn[5]+zt[4],zt[1]*cn[4]+zt[3]*cn[5]+zt[5]]}static applyTransform(zt,cn){const On=zt[0]*cn[0]+zt[1]*cn[2]+cn[4],ir=zt[0]*cn[1]+zt[1]*cn[3]+cn[5];return[On,ir]}static applyInverseTransform(zt,cn){const On=cn[0]*cn[3]-cn[1]*cn[2],ir=(zt[0]*cn[3]-zt[1]*cn[2]+cn[2]*cn[5]-cn[4]*cn[3])/On,jn=(-zt[0]*cn[1]+zt[1]*cn[0]+cn[4]*cn[1]-cn[5]*cn[0])/On;return[ir,jn]}static getAxialAlignedBoundingBox(zt,cn){const On=this.applyTransform(zt,cn),ir=this.applyTransform(zt.slice(2,4),cn),jn=this.applyTransform([zt[0],zt[3]],cn),Ot=this.applyTransform([zt[2],zt[1]],cn);return[Math.min(On[0],ir[0],jn[0],Ot[0]),Math.min(On[1],ir[1],jn[1],Ot[1]),Math.max(On[0],ir[0],jn[0],Ot[0]),Math.max(On[1],ir[1],jn[1],Ot[1])]}static inverseTransform(zt){const cn=zt[0]*zt[3]-zt[1]*zt[2];return[zt[3]/cn,-zt[1]/cn,-zt[2]/cn,zt[0]/cn,(zt[2]*zt[5]-zt[4]*zt[3])/cn,(zt[4]*zt[1]-zt[5]*zt[0])/cn]}static singularValueDecompose2dScale(zt){const cn=[zt[0],zt[2],zt[1],zt[3]],On=zt[0]*cn[0]+zt[1]*cn[2],ir=zt[0]*cn[1]+zt[1]*cn[3],jn=zt[2]*cn[0]+zt[3]*cn[2],Ot=zt[2]*cn[1]+zt[3]*cn[3],_n=(On+Ot)/2,Mn=Math.sqrt((On+Ot)**2-4*(On*Ot-jn*ir))/2,$n=_n+Mn||1,Jn=_n-Mn||1;return[Math.sqrt($n),Math.sqrt(Jn)]}static normalizeRect(zt){const cn=zt.slice(0);return zt[0]>zt[2]&&(cn[0]=zt[2],cn[2]=zt[0]),zt[1]>zt[3]&&(cn[1]=zt[3],cn[3]=zt[1]),cn}static intersect(zt,cn){const On=Math.max(Math.min(zt[0],zt[2]),Math.min(cn[0],cn[2])),ir=Math.min(Math.max(zt[0],zt[2]),Math.max(cn[0],cn[2]));if(On>ir)return null;const jn=Math.max(Math.min(zt[1],zt[3]),Math.min(cn[1],cn[3])),Ot=Math.min(Math.max(zt[1],zt[3]),Math.max(cn[1],cn[3]));return jn>Ot?null:[On,jn,ir,Ot]}static bezierBoundingBox(zt,cn,On,ir,jn,Ot,_n,Mn){const $n=[],Jn=[[],[]];let Un,Dt,Tt,$t,gn,xn,bn,Cn;for(let nr=0;nr<2;++nr){if(nr===0?(Dt=6*zt-12*On+6*jn,Un=-3*zt+9*On-9*jn+3*_n,Tt=3*On-3*zt):(Dt=6*cn-12*ir+6*Ot,Un=-3*cn+9*ir-9*Ot+3*Mn,Tt=3*ir-3*cn),Math.abs(Un)<1e-12){if(Math.abs(Dt)<1e-12)continue;$t=-Tt/Dt,0<$t&&$t<1&&$n.push($t);continue}bn=Dt*Dt-4*Tt*Un,Cn=Math.sqrt(bn),!(bn<0)&&(gn=(-Dt+Cn)/(2*Un),0<gn&&gn<1&&$n.push(gn),xn=(-Dt-Cn)/(2*Un),0<xn&&xn<1&&$n.push(xn))}let Xn=$n.length,Hn;const Fn=Xn;for(;Xn--;)$t=$n[Xn],Hn=1-$t,Jn[0][Xn]=Hn*Hn*Hn*zt+3*Hn*Hn*$t*On+3*Hn*$t*$t*jn+$t*$t*$t*_n,Jn[1][Xn]=Hn*Hn*Hn*cn+3*Hn*Hn*$t*ir+3*Hn*$t*$t*Ot+$t*$t*$t*Mn;return Jn[0][Fn]=zt,Jn[1][Fn]=cn,Jn[0][Fn+1]=_n,Jn[1][Fn+1]=Mn,Jn[0].length=Jn[1].length=Fn+2,[Math.min(...Jn[0]),Math.min(...Jn[1]),Math.max(...Jn[0]),Math.max(...Jn[1])]}}s.Util=Gt;const Jt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vn(Rn){if(Rn[0]>=""){let cn;if(Rn[0]===""&&Rn[1]===""?cn="utf-16be":Rn[0]===""&&Rn[1]===""?cn="utf-16le":Rn[0]===""&&Rn[1]===""&&Rn[2]===""&&(cn="utf-8"),cn)try{const On=new TextDecoder(cn,{fatal:!0}),ir=rn(Rn);return On.decode(ir)}catch(On){Ht(`stringToPDFString: "${On}".`)}}const zt=[];for(let cn=0,On=Rn.length;cn<On;cn++){const ir=Jt[Rn.charCodeAt(cn)];zt.push(ir?String.fromCharCode(ir):Rn.charAt(cn))}return zt.join("")}function Sn(Rn){return decodeURIComponent(escape(Rn))}function Tn(Rn){return unescape(encodeURIComponent(Rn))}function Zt(Rn){return typeof Rn=="object"&&(Rn==null?void 0:Rn.byteLength)!==void 0}function In(Rn,zt){if(Rn.length!==zt.length)return!1;for(let cn=0,On=Rn.length;cn<On;cn++)if(Rn[cn]!==zt[cn])return!1;return!0}function Dn(Rn=new Date){return[Rn.getUTCFullYear().toString(),(Rn.getUTCMonth()+1).toString().padStart(2,"0"),Rn.getUTCDate().toString().padStart(2,"0"),Rn.getUTCHours().toString().padStart(2,"0"),Rn.getUTCMinutes().toString().padStart(2,"0"),Rn.getUTCSeconds().toString().padStart(2,"0")].join("")}class rr{constructor(){dn(this,dr,!1);this.promise=new Promise((zt,cn)=>{this.resolve=On=>{hn(this,dr,!0),zt(On)},this.reject=On=>{hn(this,dr,!0),cn(On)}})}get settled(){return tt(this,dr)}}dr=new WeakMap,s.PromiseCapability=rr;let Zn=null,or=null;function Wn(Rn){return Zn||(Zn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,or=new Map([["","t"]])),Rn.replaceAll(Zn,(zt,cn,On)=>cn?cn.normalize("NFKC"):or.get(On))}function Qn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Rn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Rn);else for(let zt=0;zt<32;zt++)Rn[zt]=Math.floor(Math.random()*255);return an(Rn)}const ar="pdfjs_internal_id_";s.AnnotationPrefix=ar},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var e,i,a,o,es,Us,j,b,$,_e,ct,ut,ht,pt,yt,zs,et,nt,Eo,gt,ot;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(it){if(typeof it=="string"||it instanceof URL?it={url:it}:(0,_util.isArrayBuffer)(it)&&(it={data:it}),typeof it!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!it.url&&!it.data&&!it.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const dt=new PDFDocumentLoadingTask,{docId:ft}=dt,Rt=it.url?getUrlProp(it.url):null,xt=it.data?getDataProp(it.data):null,wt=it.httpHeaders||null,jt=it.withCredentials===!0,sn=it.password??null,Kt=it.range instanceof PDFDataRangeTransport?it.range:null,Yt=Number.isInteger(it.rangeChunkSize)&&it.rangeChunkSize>0?it.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ht=it.worker instanceof PDFWorker?it.worker:null;const Ut=it.verbosity,At=typeof it.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(it.docBaseUrl)?it.docBaseUrl:null,Ft=typeof it.cMapUrl=="string"?it.cMapUrl:null,Xt=it.cMapPacked!==!1,kt=it.CMapReaderFactory||DefaultCMapReaderFactory,rt=typeof it.standardFontDataUrl=="string"?it.standardFontDataUrl:null,at=it.StandardFontDataFactory||DefaultStandardFontDataFactory,Et=it.stopAtErrors!==!0,Ct=Number.isInteger(it.maxImageSize)&&it.maxImageSize>-1?it.maxImageSize:-1,Pt=it.isEvalSupported!==!1,It=typeof it.isOffscreenCanvasSupported=="boolean"?it.isOffscreenCanvasSupported:!_util.isNodeJS,Bt=Number.isInteger(it.canvasMaxAreaInBytes)?it.canvasMaxAreaInBytes:-1,Lt=typeof it.disableFontFace=="boolean"?it.disableFontFace:_util.isNodeJS,an=it.fontExtraProperties===!0,rn=it.enableXfa===!0,En=it.ownerDocument||globalThis.document,kn=it.disableRange===!0,An=it.disableStream===!0,on=it.disableAutoFetch===!0,Vt=it.pdfBug===!0,St=Kt?Kt.length:it.length??NaN,Nt=typeof it.useSystemFonts=="boolean"?it.useSystemFonts:!_util.isNodeJS&&!Lt,Gt=typeof it.useWorkerFetch=="boolean"?it.useWorkerFetch:kt===_display_utils.DOMCMapReaderFactory&&at===_display_utils.DOMStandardFontDataFactory&&Ft&&rt&&(0,_display_utils.isValidFetchUrl)(Ft,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(rt,document.baseURI),Jt=it.canvasFactory||new DefaultCanvasFactory({ownerDocument:En}),vn=it.filterFactory||new DefaultFilterFactory({docId:ft,ownerDocument:En}),Sn=null;(0,_util.setVerbosityLevel)(Ut);const Tn={canvasFactory:Jt,filterFactory:vn};if(Gt||(Tn.cMapReaderFactory=new kt({baseUrl:Ft,isCompressed:Xt}),Tn.standardFontDataFactory=new at({baseUrl:rt})),!Ht){const Dn={verbosity:Ut,port:_worker_options.GlobalWorkerOptions.workerPort};Ht=Dn.port?PDFWorker.fromPort(Dn):new PDFWorker(Dn),dt._worker=Ht}const Zt={docId:ft,apiVersion:"3.11.174",data:xt,password:sn,disableAutoFetch:on,rangeChunkSize:Yt,length:St,docBaseUrl:At,enableXfa:rn,evaluatorOptions:{maxImageSize:Ct,disableFontFace:Lt,ignoreErrors:Et,isEvalSupported:Pt,isOffscreenCanvasSupported:It,canvasMaxAreaInBytes:Bt,fontExtraProperties:an,useSystemFonts:Nt,cMapUrl:Gt?Ft:null,standardFontDataUrl:Gt?rt:null}},In={ignoreErrors:Et,isEvalSupported:Pt,disableFontFace:Lt,fontExtraProperties:an,enableXfa:rn,ownerDocument:En,disableAutoFetch:on,pdfBug:Vt,styleElement:Sn};return Ht.promise.then(function(){if(dt.destroyed)throw new Error("Loading aborted");const Dn=_fetchDocument(Ht,Zt),rr=new Promise(function(Zn){let or;Kt?or=new _transport_stream.PDFDataTransportStream({length:St,initialData:Kt.initialData,progressiveDone:Kt.progressiveDone,contentDispositionFilename:Kt.contentDispositionFilename,disableRange:kn,disableStream:An},Kt):xt||(or=(Qn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Qn):(0,_display_utils.isValidFetchUrl)(Qn.url)?new _displayFetch_stream.PDFFetchStream(Qn):new _displayNetwork.PDFNetworkStream(Qn))({url:Rt,length:St,httpHeaders:wt,withCredentials:jt,rangeChunkSize:Yt,disableRange:kn,disableStream:An})),Zn(or)});return Promise.all([Dn,rr]).then(function([Zn,or]){if(dt.destroyed)throw new Error("Loading aborted");const Wn=new _message_handler.MessageHandler(ft,Zn,Ht.port),Qn=new WorkerTransport(Wn,dt,or,In,Tn);dt._transport=Qn,Wn.send("Ready",null)})}).catch(dt._capability.reject),dt}async function _fetchDocument(it,dt){if(it.destroyed)throw new Error("Worker was destroyed");const ft=await it.messageHandler.sendWithPromise("GetDocRequest",dt,dt.data?[dt.data.buffer]:null);if(it.destroyed)throw new Error("Worker was destroyed");return ft}function getUrlProp(it){if(it instanceof URL)return it.href;try{return new URL(it,window.location).href}catch{if(_util.isNodeJS&&typeof it=="string")return it}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(it){if(_util.isNodeJS&&typeof Buffer<"u"&&it instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength)return it;if(typeof it=="string")return(0,_util.stringToBytes)(it);if(typeof it=="object"&&!isNaN(it==null?void 0:it.length)||(0,_util.isArrayBuffer)(it))return new Uint8Array(it);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ps(s,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var dt,ft,Rt;this.destroyed=!0;try{(dt=this._worker)!=null&&dt.port&&(this._worker._pendingDestroy=!0),await((ft=this._transport)==null?void 0:ft.destroy())}catch(xt){throw(Rt=this._worker)!=null&&Rt.port&&delete this._worker._pendingDestroy,xt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,dn(s,e,0);let PDFDocumentLoadingTask=s;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(dt,ft,Rt=!1,xt=null){this.length=dt,this.initialData=ft,this.progressiveDone=Rt,this.contentDispositionFilename=xt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(dt){this._rangeListeners.push(dt)}addProgressListener(dt){this._progressListeners.push(dt)}addProgressiveReadListener(dt){this._progressiveReadListeners.push(dt)}addProgressiveDoneListener(dt){this._progressiveDoneListeners.push(dt)}onDataRange(dt,ft){for(const Rt of this._rangeListeners)Rt(dt,ft)}onDataProgress(dt,ft){this._readyCapability.promise.then(()=>{for(const Rt of this._progressListeners)Rt(dt,ft)})}onDataProgressiveRead(dt){this._readyCapability.promise.then(()=>{for(const ft of this._progressiveReadListeners)ft(dt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const dt of this._progressiveDoneListeners)dt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(dt,ft){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(dt,ft){this._pdfInfo=dt,this._transport=ft,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Rt=>{if(!Rt)return Rt;const xt=[];for(const wt in Rt)xt.push(...Rt[wt]);return xt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(dt){return this._transport.getPage(dt)}getPageIndex(dt){return this._transport.getPageIndex(dt)}getDestinations(){return this._transport.getDestinations()}getDestination(dt){return this._transport.getDestination(dt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(dt=!1){return this._transport.startCleanup(dt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(dt,ft,Rt,xt=!1){dn(this,o);dn(this,i,null);dn(this,a,!1);this._pageIndex=dt,this._pageInfo=ft,this._transport=Rt,this._stats=xt?new _display_utils.StatTimer:null,this._pdfBug=xt,this.commonObjs=Rt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:dt,rotation:ft=this.rotate,offsetX:Rt=0,offsetY:xt=0,dontFlip:wt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:dt,rotation:ft,offsetX:Rt,offsetY:xt,dontFlip:wt})}getAnnotations({intent:dt="display"}={}){const ft=this._transport.getRenderingIntent(dt);return this._transport.getAnnotations(this._pageIndex,ft.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var dt;return((dt=this._transport._htmlForXfa)==null?void 0:dt.children[this._pageIndex])||null}render({canvasContext:dt,viewport:ft,intent:Rt="display",annotationMode:xt=_util.AnnotationMode.ENABLE,transform:wt=null,background:jt=null,optionalContentConfigPromise:sn=null,annotationCanvasMap:Kt=null,pageColors:Yt=null,printAnnotationStorage:Ht=null}){var at,Et;(at=this._stats)==null||at.time("Overall");const Ut=this._transport.getRenderingIntent(Rt,xt,Ht);hn(this,a,!1),Qt(this,o,Us).call(this),sn||(sn=this._transport.getOptionalContentConfig());let At=this._intentStates.get(Ut.cacheKey);At||(At=Object.create(null),this._intentStates.set(Ut.cacheKey,At)),At.streamReaderCancelTimeout&&(clearTimeout(At.streamReaderCancelTimeout),At.streamReaderCancelTimeout=null);const Ft=!!(Ut.renderingIntent&_util.RenderingIntentFlag.PRINT);At.displayReadyCapability||(At.displayReadyCapability=new _util.PromiseCapability,At.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Et=this._stats)==null||Et.time("Page Request"),this._pumpOperatorList(Ut));const Xt=Ct=>{var Pt,It;At.renderTasks.delete(kt),(this._maybeCleanupAfterRender||Ft)&&hn(this,a,!0),Qt(this,o,es).call(this,!Ft),Ct?(kt.capability.reject(Ct),this._abortOperatorList({intentState:At,reason:Ct instanceof Error?Ct:new Error(Ct)})):kt.capability.resolve(),(Pt=this._stats)==null||Pt.timeEnd("Rendering"),(It=this._stats)==null||It.timeEnd("Overall")},kt=new InternalRenderTask({callback:Xt,params:{canvasContext:dt,viewport:ft,transform:wt,background:jt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Kt,operatorList:At.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ft,pdfBug:this._pdfBug,pageColors:Yt});(At.renderTasks||(At.renderTasks=new Set)).add(kt);const rt=kt.task;return Promise.all([At.displayReadyCapability.promise,sn]).then(([Ct,Pt])=>{var It;if(this.destroyed){Xt();return}(It=this._stats)==null||It.time("Rendering"),kt.initializeGraphics({transparency:Ct,optionalContentConfig:Pt}),kt.operatorListChanged()}).catch(Xt),rt}getOperatorList({intent:dt="display",annotationMode:ft=_util.AnnotationMode.ENABLE,printAnnotationStorage:Rt=null}={}){var Kt;function xt(){jt.operatorList.lastChunk&&(jt.opListReadCapability.resolve(jt.operatorList),jt.renderTasks.delete(sn))}const wt=this._transport.getRenderingIntent(dt,ft,Rt,!0);let jt=this._intentStates.get(wt.cacheKey);jt||(jt=Object.create(null),this._intentStates.set(wt.cacheKey,jt));let sn;return jt.opListReadCapability||(sn=Object.create(null),sn.operatorListChanged=xt,jt.opListReadCapability=new _util.PromiseCapability,(jt.renderTasks||(jt.renderTasks=new Set)).add(sn),jt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Kt=this._stats)==null||Kt.time("Page Request"),this._pumpOperatorList(wt)),jt.opListReadCapability.promise}streamTextContent({includeMarkedContent:dt=!1,disableNormalization:ft=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:dt===!0,disableNormalization:ft===!0},{highWaterMark:100,size(xt){return xt.items.length}})}getTextContent(dt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Rt=>_xfa_text.XfaText.textContent(Rt));const ft=this.streamTextContent(dt);return new Promise(function(Rt,xt){function wt(){jt.read().then(function({value:Kt,done:Yt}){if(Yt){Rt(sn);return}Object.assign(sn.styles,Kt.styles),sn.items.push(...Kt.items),wt()},xt)}const jt=ft.getReader(),sn={items:[],styles:Object.create(null)};wt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const dt=[];for(const ft of this._intentStates.values())if(this._abortOperatorList({intentState:ft,reason:new Error("Page was destroyed."),force:!0}),!ft.opListReadCapability)for(const Rt of ft.renderTasks)dt.push(Rt.completed),Rt.cancel();return this.objs.clear(),hn(this,a,!1),Qt(this,o,Us).call(this),Promise.all(dt)}cleanup(dt=!1){hn(this,a,!0);const ft=Qt(this,o,es).call(this,!1);return dt&&ft&&this._stats&&(this._stats=new _display_utils.StatTimer),ft}_startRenderPage(dt,ft){var xt,wt;const Rt=this._intentStates.get(ft);Rt&&((xt=this._stats)==null||xt.timeEnd("Page Request"),(wt=Rt.displayReadyCapability)==null||wt.resolve(dt))}_renderPageChunk(dt,ft){for(let Rt=0,xt=dt.length;Rt<xt;Rt++)ft.operatorList.fnArray.push(dt.fnArray[Rt]),ft.operatorList.argsArray.push(dt.argsArray[Rt]);ft.operatorList.lastChunk=dt.lastChunk,ft.operatorList.separateAnnots=dt.separateAnnots;for(const Rt of ft.renderTasks)Rt.operatorListChanged();dt.lastChunk&&Qt(this,o,es).call(this,!0)}_pumpOperatorList({renderingIntent:dt,cacheKey:ft,annotationStorageSerializable:Rt}){const{map:xt,transfers:wt}=Rt,sn=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:dt,cacheKey:ft,annotationStorage:xt},wt).getReader(),Kt=this._intentStates.get(ft);Kt.streamReader=sn;const Yt=()=>{sn.read().then(({value:Ht,done:Ut})=>{if(Ut){Kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ht,Kt),Yt())},Ht=>{if(Kt.streamReader=null,!this._transport.destroyed){if(Kt.operatorList){Kt.operatorList.lastChunk=!0;for(const Ut of Kt.renderTasks)Ut.operatorListChanged();Qt(this,o,es).call(this,!0)}if(Kt.displayReadyCapability)Kt.displayReadyCapability.reject(Ht);else if(Kt.opListReadCapability)Kt.opListReadCapability.reject(Ht);else throw Ht}})};Yt()}_abortOperatorList({intentState:dt,reason:ft,force:Rt=!1}){if(dt.streamReader){if(dt.streamReaderCancelTimeout&&(clearTimeout(dt.streamReaderCancelTimeout),dt.streamReaderCancelTimeout=null),!Rt){if(dt.renderTasks.size>0)return;if(ft instanceof _display_utils.RenderingCancelledException){let xt=RENDERING_CANCELLED_TIMEOUT;ft.extraDelay>0&&ft.extraDelay<1e3&&(xt+=ft.extraDelay),dt.streamReaderCancelTimeout=setTimeout(()=>{dt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:dt,reason:ft,force:!0})},xt);return}}if(dt.streamReader.cancel(new _util.AbortException(ft.message)).catch(()=>{}),dt.streamReader=null,!this._transport.destroyed){for(const[xt,wt]of this._intentStates)if(wt===dt){this._intentStates.delete(xt);break}this.cleanup()}}}get stats(){return this._stats}}i=new WeakMap,a=new WeakMap,o=new WeakSet,es=function(dt=!1){if(Qt(this,o,Us).call(this),!tt(this,a)||this.destroyed)return!1;if(dt)return hn(this,i,setTimeout(()=>{hn(this,i,null),Qt(this,o,es).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:ft,operatorList:Rt}of this._intentStates.values())if(ft.size>0||!Rt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),hn(this,a,!1),!0},Us=function(){tt(this,i)&&(clearTimeout(tt(this,i)),hn(this,i,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){dn(this,j,new Set);dn(this,b,Promise.resolve())}postMessage(dt,ft){const Rt={data:structuredClone(dt,ft?{transfer:ft}:null)};tt(this,b).then(()=>{for(const xt of tt(this,j))xt.call(this,Rt)})}addEventListener(dt,ft){tt(this,j).add(ft)}removeEventListener(dt,ft){tt(this,j).delete(ft)}terminate(){tt(this,j).clear()}}j=new WeakMap,b=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const it=($=document==null?void 0:document.currentScript)==null?void 0:$.src;it&&(PDFWorkerUtil.fallbackWorkerSrc=it.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(it,dt){let ft;try{if(ft=new URL(it),!ft.origin||ft.origin==="null")return!1}catch{return!1}const Rt=new URL(dt,ft);return ft.origin===Rt.origin},PDFWorkerUtil.createCDNWrapper=function(it){const dt=`importScripts("${it}");`;return URL.createObjectURL(new Blob([dt]))}}const _PDFWorker=class _PDFWorker{constructor({name:it=null,port:dt=null,verbosity:ft=(0,_util.getVerbosityLevel)()}={}){var Rt;if(this.name=it,this.destroyed=!1,this.verbosity=ft,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,dt){if((Rt=tt(_PDFWorker,_e))!=null&&Rt.has(dt))throw new Error("Cannot use more than one PDFWorker per port.");(tt(_PDFWorker,_e)||hn(_PDFWorker,_e,new WeakMap)).set(dt,this),this._initializeFromPort(dt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(it){this._port=it,this._messageHandler=new _message_handler.MessageHandler("main","worker",it),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:it}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,it)||(it=PDFWorkerUtil.createCDNWrapper(new URL(it,window.location).href));const dt=new Worker(it),ft=new _message_handler.MessageHandler("main","worker",dt),Rt=()=>{dt.removeEventListener("error",xt),ft.destroy(),dt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},xt=()=>{this._webWorker||Rt()};dt.addEventListener("error",xt),ft.on("test",jt=>{if(dt.removeEventListener("error",xt),this.destroyed){Rt();return}jt?(this._messageHandler=ft,this._port=dt,this._webWorker=dt,this._readyCapability.resolve(),ft.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),ft.destroy(),dt.terminate())}),ft.on("ready",jt=>{if(dt.removeEventListener("error",xt),this.destroyed){Rt();return}try{wt()}catch{this._setupFakeWorker()}});const wt=()=>{const jt=new Uint8Array;ft.send("test",jt,[jt.buffer])};wt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(it=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const dt=new LoopbackPort;this._port=dt;const ft=`fake${PDFWorkerUtil.fakeWorkerId++}`,Rt=new _message_handler.MessageHandler(ft+"_worker",ft,dt);it.setup(Rt,dt);const xt=new _message_handler.MessageHandler(ft,ft+"_worker",dt);this._messageHandler=xt,this._readyCapability.resolve(),xt.send("configure",{verbosity:this.verbosity})}).catch(it=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${it.message}".`))})}destroy(){var it;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(it=tt(_PDFWorker,_e))==null||it.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(it){var ft;if(!(it!=null&&it.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const dt=(ft=tt(this,_e))==null?void 0:ft.get(it.port);if(dt){if(dt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return dt}return new _PDFWorker(it)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var it;try{return((it=globalThis.pdfjsWorker)==null?void 0:it.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_e=new WeakMap,dn(_PDFWorker,_e);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(dt,ft,Rt,xt,wt){dn(this,yt);dn(this,ct,new Map);dn(this,ut,new Map);dn(this,ht,new Map);dn(this,pt,null);this.messageHandler=dt,this.loadingTask=ft,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:xt.ownerDocument,styleElement:xt.styleElement}),this._params=xt,this.canvasFactory=wt.canvasFactory,this.filterFactory=wt.filterFactory,this.cMapReaderFactory=wt.cMapReaderFactory,this.standardFontDataFactory=wt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Rt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(dt,ft=_util.AnnotationMode.ENABLE,Rt=null,xt=!1){let wt=_util.RenderingIntentFlag.DISPLAY,jt=_annotation_storage.SerializableEmpty;switch(dt){case"any":wt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":wt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${dt}`)}switch(ft){case _util.AnnotationMode.DISABLE:wt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:wt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:wt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,jt=(wt&_util.RenderingIntentFlag.PRINT&&Rt instanceof _annotation_storage.PrintAnnotationStorage?Rt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${ft}`)}return xt&&(wt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:wt,cacheKey:`${wt}_${jt.hash}`,annotationStorageSerializable:jt}}destroy(){var Rt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Rt=tt(this,pt))==null||Rt.reject(new Error("Worker was destroyed during onPassword callback"));const dt=[];for(const xt of tt(this,ut).values())dt.push(xt._destroy());tt(this,ut).clear(),tt(this,ht).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ft=this.messageHandler.sendWithPromise("Terminate",null);return dt.push(ft),Promise.all(dt).then(()=>{var xt;this.commonObjs.clear(),this.fontLoader.clear(),tt(this,ct).clear(),this.filterFactory.destroy(),(xt=this._networkStream)==null||xt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:dt,loadingTask:ft}=this;dt.on("GetReader",(Rt,xt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=wt=>{this._lastProgress={loaded:wt.loaded,total:wt.total}},xt.onPull=()=>{this._fullReader.read().then(function({value:wt,done:jt}){if(jt){xt.close();return}(0,_util.assert)(wt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),xt.enqueue(new Uint8Array(wt),1,[wt])}).catch(wt=>{xt.error(wt)})},xt.onCancel=wt=>{this._fullReader.cancel(wt),xt.ready.catch(jt=>{if(!this.destroyed)throw jt})}}),dt.on("ReaderHeadersReady",Rt=>{const xt=new _util.PromiseCapability,wt=this._fullReader;return wt.headersReady.then(()=>{var jt;(!wt.isStreamingSupported||!wt.isRangeSupported)&&(this._lastProgress&&((jt=ft.onProgress)==null||jt.call(ft,this._lastProgress)),wt.onProgress=sn=>{var Kt;(Kt=ft.onProgress)==null||Kt.call(ft,{loaded:sn.loaded,total:sn.total})}),xt.resolve({isStreamingSupported:wt.isStreamingSupported,isRangeSupported:wt.isRangeSupported,contentLength:wt.contentLength})},xt.reject),xt.promise}),dt.on("GetRangeReader",(Rt,xt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const wt=this._networkStream.getRangeReader(Rt.begin,Rt.end);if(!wt){xt.close();return}xt.onPull=()=>{wt.read().then(function({value:jt,done:sn}){if(sn){xt.close();return}(0,_util.assert)(jt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),xt.enqueue(new Uint8Array(jt),1,[jt])}).catch(jt=>{xt.error(jt)})},xt.onCancel=jt=>{wt.cancel(jt),xt.ready.catch(sn=>{if(!this.destroyed)throw sn})}}),dt.on("GetDoc",({pdfInfo:Rt})=>{this._numPages=Rt.numPages,this._htmlForXfa=Rt.htmlForXfa,delete Rt.htmlForXfa,ft._capability.resolve(new PDFDocumentProxy(Rt,this))}),dt.on("DocException",function(Rt){let xt;switch(Rt.name){case"PasswordException":xt=new _util.PasswordException(Rt.message,Rt.code);break;case"InvalidPDFException":xt=new _util.InvalidPDFException(Rt.message);break;case"MissingPDFException":xt=new _util.MissingPDFException(Rt.message);break;case"UnexpectedResponseException":xt=new _util.UnexpectedResponseException(Rt.message,Rt.status);break;case"UnknownErrorException":xt=new _util.UnknownErrorException(Rt.message,Rt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}ft._capability.reject(xt)}),dt.on("PasswordRequest",Rt=>{if(hn(this,pt,new _util.PromiseCapability),ft.onPassword){const xt=wt=>{wt instanceof Error?tt(this,pt).reject(wt):tt(this,pt).resolve({password:wt})};try{ft.onPassword(xt,Rt.code)}catch(wt){tt(this,pt).reject(wt)}}else tt(this,pt).reject(new _util.PasswordException(Rt.message,Rt.code));return tt(this,pt).promise}),dt.on("DataLoaded",Rt=>{var xt;(xt=ft.onProgress)==null||xt.call(ft,{loaded:Rt.length,total:Rt.length}),this.downloadInfoCapability.resolve(Rt)}),dt.on("StartRenderPage",Rt=>{if(this.destroyed)return;tt(this,ut).get(Rt.pageIndex)._startRenderPage(Rt.transparency,Rt.cacheKey)}),dt.on("commonobj",([Rt,xt,wt])=>{var jt;if(!this.destroyed&&!this.commonObjs.has(Rt))switch(xt){case"Font":const sn=this._params;if("error"in wt){const Ht=wt.error;(0,_util.warn)(`Error during font loading: ${Ht}`),this.commonObjs.resolve(Rt,Ht);break}const Kt=sn.pdfBug&&((jt=globalThis.FontInspector)!=null&&jt.enabled)?(Ht,Ut)=>globalThis.FontInspector.fontAdded(Ht,Ut):null,Yt=new _font_loader.FontFaceObject(wt,{isEvalSupported:sn.isEvalSupported,disableFontFace:sn.disableFontFace,ignoreErrors:sn.ignoreErrors,inspectFont:Kt});this.fontLoader.bind(Yt).catch(Ht=>dt.sendWithPromise("FontFallback",{id:Rt})).finally(()=>{!sn.fontExtraProperties&&Yt.data&&(Yt.data=null),this.commonObjs.resolve(Rt,Yt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Rt,wt);break;default:throw new Error(`Got unknown common object type ${xt}`)}}),dt.on("obj",([Rt,xt,wt,jt])=>{var Kt;if(this.destroyed)return;const sn=tt(this,ut).get(xt);if(!sn.objs.has(Rt))switch(wt){case"Image":if(sn.objs.resolve(Rt,jt),jt){let Yt;if(jt.bitmap){const{width:Ht,height:Ut}=jt;Yt=Ht*Ut*4}else Yt=((Kt=jt.data)==null?void 0:Kt.length)||0;Yt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(sn._maybeCleanupAfterRender=!0)}break;case"Pattern":sn.objs.resolve(Rt,jt);break;default:throw new Error(`Got unknown object type ${wt}`)}}),dt.on("DocProgress",Rt=>{var xt;this.destroyed||(xt=ft.onProgress)==null||xt.call(ft,{loaded:Rt.loaded,total:Rt.total})}),dt.on("FetchBuiltInCMap",Rt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Rt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),dt.on("FetchStandardFontData",Rt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Rt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Rt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:dt,transfers:ft}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:dt,filename:((Rt=this._fullReader)==null?void 0:Rt.filename)??null},ft).finally(()=>{this.annotationStorage.resetModified()})}getPage(dt){if(!Number.isInteger(dt)||dt<=0||dt>this._numPages)return Promise.reject(new Error("Invalid page request."));const ft=dt-1,Rt=tt(this,ht).get(ft);if(Rt)return Rt;const xt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ft}).then(wt=>{if(this.destroyed)throw new Error("Transport destroyed");const jt=new PDFPageProxy(ft,wt,this,this._params.pdfBug);return tt(this,ut).set(ft,jt),jt});return tt(this,ht).set(ft,xt),xt}getPageIndex(dt){return typeof dt!="object"||dt===null||!Number.isInteger(dt.num)||dt.num<0||!Number.isInteger(dt.gen)||dt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:dt.num,gen:dt.gen})}getAnnotations(dt,ft){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:dt,intent:ft})}getFieldObjects(){return Qt(this,yt,zs).call(this,"GetFieldObjects")}hasJSActions(){return Qt(this,yt,zs).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(dt){return typeof dt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:dt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Qt(this,yt,zs).call(this,"GetDocJSActions")}getPageJSActions(dt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:dt})}getStructTree(dt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:dt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(dt=>new _optional_content_config.OptionalContentConfig(dt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const dt="GetMetadata",ft=tt(this,ct).get(dt);if(ft)return ft;const Rt=this.messageHandler.sendWithPromise(dt,null).then(xt=>{var wt,jt;return{info:xt[0],metadata:xt[1]?new _metadata.Metadata(xt[1]):null,contentDispositionFilename:((wt=this._fullReader)==null?void 0:wt.filename)??null,contentLength:((jt=this._fullReader)==null?void 0:jt.contentLength)??null}});return tt(this,ct).set(dt,Rt),Rt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(dt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ft of tt(this,ut).values())if(!ft.cleanup())throw new Error(`startCleanup: Page ${ft.pageNumber} is currently rendering.`);this.commonObjs.clear(),dt||this.fontLoader.clear(),tt(this,ct).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:dt,enableXfa:ft}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:dt,enableXfa:ft})}}ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,pt=new WeakMap,yt=new WeakSet,zs=function(dt,ft=null){const Rt=tt(this,ct).get(dt);if(Rt)return Rt;const xt=this.messageHandler.sendWithPromise(dt,ft);return tt(this,ct).set(dt,xt),xt};class PDFObjects{constructor(){dn(this,nt);dn(this,et,Object.create(null))}get(dt,ft=null){if(ft){const xt=Qt(this,nt,Eo).call(this,dt);return xt.capability.promise.then(()=>ft(xt.data)),null}const Rt=tt(this,et)[dt];if(!(Rt!=null&&Rt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${dt}.`);return Rt.data}has(dt){const ft=tt(this,et)[dt];return(ft==null?void 0:ft.capability.settled)||!1}resolve(dt,ft=null){const Rt=Qt(this,nt,Eo).call(this,dt);Rt.data=ft,Rt.capability.resolve()}clear(){var dt;for(const ft in tt(this,et)){const{data:Rt}=tt(this,et)[ft];(dt=Rt==null?void 0:Rt.bitmap)==null||dt.close()}hn(this,et,Object.create(null))}}et=new WeakMap,nt=new WeakSet,Eo=function(dt){var ft;return(ft=tt(this,et))[dt]||(ft[dt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(dt){dn(this,gt,null);hn(this,gt,dt),this.onContinue=null}get promise(){return tt(this,gt).capability.promise}cancel(dt=0){tt(this,gt).cancel(null,dt)}get separateAnnots(){const{separateAnnots:dt}=tt(this,gt).operatorList;if(!dt)return!1;const{annotationCanvasMap:ft}=tt(this,gt);return dt.form||dt.canvas&&(ft==null?void 0:ft.size)>0}}gt=new WeakMap,exports$1.RenderTask=RenderTask;const mt=class mt{constructor({callback:dt,params:ft,objs:Rt,commonObjs:xt,annotationCanvasMap:wt,operatorList:jt,pageIndex:sn,canvasFactory:Kt,filterFactory:Yt,useRequestAnimationFrame:Ht=!1,pdfBug:Ut=!1,pageColors:At=null}){this.callback=dt,this.params=ft,this.objs=Rt,this.commonObjs=xt,this.annotationCanvasMap=wt,this.operatorListIdx=null,this.operatorList=jt,this._pageIndex=sn,this.canvasFactory=Kt,this.filterFactory=Yt,this._pdfBug=Ut,this.pageColors=At,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ht===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ft.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:dt=!1,optionalContentConfig:ft}){var sn,Kt;if(this.cancelled)return;if(this._canvas){if(tt(mt,ot).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");tt(mt,ot).add(this._canvas)}this._pdfBug&&((sn=globalThis.StepperManager)!=null&&sn.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Rt,viewport:xt,transform:wt,background:jt}=this.params;this.gfx=new _canvas.CanvasGraphics(Rt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ft},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:wt,viewport:xt,transparency:dt,background:jt}),this.operatorListIdx=0,this.graphicsReady=!0,(Kt=this.graphicsReadyCallback)==null||Kt.call(this)}cancel(dt=null,ft=0){var Rt;this.running=!1,this.cancelled=!0,(Rt=this.gfx)==null||Rt.endDrawing(),tt(mt,ot).delete(this._canvas),this.callback(dt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ft))}operatorListChanged(){var dt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(dt=this.stepper)==null||dt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),tt(mt,ot).delete(this._canvas),this.callback())))}};ot=new WeakMap,dn(mt,ot,new WeakSet);let InternalRenderTask=mt;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(e,s,i)=>{var $,_e,ct,Zl,ht;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var a=i(1),o=i(4),c=i(8);const h=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=h;class j{constructor(){dn(this,ct);dn(this,$,!1);dn(this,_e,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(yt,bt){const et=tt(this,_e).get(yt);return et===void 0?bt:Object.assign(bt,et)}getRawValue(yt){return tt(this,_e).get(yt)}remove(yt){if(tt(this,_e).delete(yt),tt(this,_e).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const bt of tt(this,_e).values())if(bt instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(yt,bt){const et=tt(this,_e).get(yt);let nt=!1;if(et!==void 0)for(const[st,gt]of Object.entries(bt))et[st]!==gt&&(nt=!0,et[st]=gt);else nt=!0,tt(this,_e).set(yt,bt);nt&&Qt(this,ct,Zl).call(this),bt instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(bt.constructor._type)}has(yt){return tt(this,_e).has(yt)}getAll(){return tt(this,_e).size>0?(0,a.objectFromMap)(tt(this,_e)):null}setAll(yt){for(const[bt,et]of Object.entries(yt))this.setValue(bt,et)}get size(){return tt(this,_e).size}resetModified(){tt(this,$)&&(hn(this,$,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(tt(this,_e).size===0)return h;const yt=new Map,bt=new c.MurmurHash3_64,et=[],nt=Object.create(null);let st=!1;for(const[gt,ot]of tt(this,_e)){const mt=ot instanceof o.AnnotationEditor?ot.serialize(!1,nt):ot;mt&&(yt.set(gt,mt),bt.update(`${gt}:${JSON.stringify(mt)}`),st||(st=!!mt.bitmap))}if(st)for(const gt of yt.values())gt.bitmap&&et.push(gt.bitmap);return yt.size>0?{map:yt,hash:bt.hexdigest(),transfers:et}:h}}$=new WeakMap,_e=new WeakMap,ct=new WeakSet,Zl=function(){tt(this,$)||(hn(this,$,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=j;class b extends j{constructor(bt){super();dn(this,ht);const{map:et,hash:nt,transfers:st}=bt.serializable,gt=structuredClone(et,st?{transfer:st}:null);hn(this,ht,{map:gt,hash:nt,transfers:st})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return tt(this,ht)}}ht=new WeakMap,s.PrintAnnotationStorage=b},(e,s,i)=>{var b,$,_e,ct,ut,ht,pt,yt,bt,et,nt,st,gt,ot,mt,_o,wo,ft,So,Ao,eu,tu,nu,ko,ru;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var a=i(5),o=i(1),c=i(6);const Ht=class Ht{constructor(At){dn(this,mt);dn(this,b,"");dn(this,$,!1);dn(this,_e,null);dn(this,ct,null);dn(this,ut,null);dn(this,ht,!1);dn(this,pt,null);dn(this,yt,this.focusin.bind(this));dn(this,bt,this.focusout.bind(this));dn(this,et,!1);dn(this,nt,!1);dn(this,st,!1);xr(this,"_initialOptions",Object.create(null));xr(this,"_uiManager",null);xr(this,"_focusEventsAllowed",!0);xr(this,"_l10nPromise",null);dn(this,gt,!1);dn(this,ot,Ht._zIndex++);this.constructor===Ht&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=At.parent,this.id=At.id,this.width=this.height=null,this.pageIndex=At.parent.pageIndex,this.name=At.name,this.div=null,this._uiManager=At.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=At.isCentered,this._structTreeParentId=null;const{rotation:Ft,rawDims:{pageWidth:Xt,pageHeight:kt,pageX:rt,pageY:at}}=this.parent.viewport;this.rotation=Ft,this.pageRotation=(360+Ft-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Xt,kt],this.pageTranslation=[rt,at];const[Et,Ct]=this.parentDimensions;this.x=At.x/Et,this.y=At.y/Ct,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(At){const Ft=new j({id:At.parent.getNextId(),parent:At.parent,uiManager:At._uiManager});Ft.annotationElementId=At.annotationElementId,Ft.deleted=!0,Ft._uiManager.addToAnnotationStorage(Ft)}static initialize(At,Ft=null){if(Ht._l10nPromise||(Ht._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(kt=>[kt,At.get(kt)]))),Ft!=null&&Ft.strings)for(const kt of Ft.strings)Ht._l10nPromise.set(kt,At.get(kt));if(Ht._borderLineWidth!==-1)return;const Xt=getComputedStyle(document.documentElement);Ht._borderLineWidth=parseFloat(Xt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(At,Ft){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(At){return!1}static paste(At,Ft){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return tt(this,gt)}set _isDraggable(At){var Ft;hn(this,gt,At),(Ft=this.div)==null||Ft.classList.toggle("draggable",At)}center(){const[At,Ft]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Ft/(At*2),this.y+=this.width*At/(Ft*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Ft/(At*2),this.y-=this.width*At/(Ft*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(At){this._uiManager.addCommands(At)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=tt(this,ot)}setParent(At){At!==null&&(this.pageIndex=At.pageIndex,this.pageDimensions=At.pageDimensions),this.parent=At}focusin(At){this._focusEventsAllowed&&(tt(this,et)?hn(this,et,!1):this.parent.setSelected(this))}focusout(At){var Xt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Ft=At.relatedTarget;Ft!=null&&Ft.closest(`#${this.id}`)||(At.preventDefault(),(Xt=this.parent)!=null&&Xt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(At,Ft,Xt,kt){const[rt,at]=this.parentDimensions;[Xt,kt]=this.screenToPageTranslation(Xt,kt),this.x=(At+Xt)/rt,this.y=(Ft+kt)/at,this.fixAndSetPosition()}translate(At,Ft){Qt(this,mt,_o).call(this,this.parentDimensions,At,Ft)}translateInPage(At,Ft){Qt(this,mt,_o).call(this,this.pageDimensions,At,Ft),this.div.scrollIntoView({block:"nearest"})}drag(At,Ft){const[Xt,kt]=this.parentDimensions;if(this.x+=At/Xt,this.y+=Ft/kt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Pt,y:It}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Pt,It)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:rt,y:at}=this;const[Et,Ct]=Qt(this,mt,wo).call(this);rt+=Et,at+=Ct,this.div.style.left=`${(100*rt).toFixed(2)}%`,this.div.style.top=`${(100*at).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[At,Ft]=this.pageDimensions;let{x:Xt,y:kt,width:rt,height:at}=this;switch(rt*=At,at*=Ft,Xt*=At,kt*=Ft,this.rotation){case 0:Xt=Math.max(0,Math.min(At-rt,Xt)),kt=Math.max(0,Math.min(Ft-at,kt));break;case 90:Xt=Math.max(0,Math.min(At-at,Xt)),kt=Math.min(Ft,Math.max(rt,kt));break;case 180:Xt=Math.min(At,Math.max(rt,Xt)),kt=Math.min(Ft,Math.max(at,kt));break;case 270:Xt=Math.min(At,Math.max(at,Xt)),kt=Math.max(0,Math.min(Ft-rt,kt));break}this.x=Xt/=At,this.y=kt/=Ft;const[Et,Ct]=Qt(this,mt,wo).call(this);Xt+=Et,kt+=Ct;const{style:Pt}=this.div;Pt.left=`${(100*Xt).toFixed(2)}%`,Pt.top=`${(100*kt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(At,Ft){var Xt;return Qt(Xt=Ht,ft,So).call(Xt,At,Ft,this.parentRotation)}pageTranslationToScreen(At,Ft){var Xt;return Qt(Xt=Ht,ft,So).call(Xt,At,Ft,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:At,pageDimensions:[Ft,Xt]}=this,kt=Ft*At,rt=Xt*At;return o.FeatureTest.isCSSRoundSupported?[Math.round(kt),Math.round(rt)]:[kt,rt]}setDims(At,Ft){var rt;const[Xt,kt]=this.parentDimensions;this.div.style.width=`${(100*At/Xt).toFixed(2)}%`,tt(this,ht)||(this.div.style.height=`${(100*Ft/kt).toFixed(2)}%`),(rt=tt(this,_e))==null||rt.classList.toggle("small",At<Ht.SMALL_EDITOR_SIZE||Ft<Ht.SMALL_EDITOR_SIZE)}fixDims(){const{style:At}=this.div,{height:Ft,width:Xt}=At,kt=Xt.endsWith("%"),rt=!tt(this,ht)&&Ft.endsWith("%");if(kt&&rt)return;const[at,Et]=this.parentDimensions;kt||(At.width=`${(100*parseFloat(Xt)/at).toFixed(2)}%`),!tt(this,ht)&&!rt&&(At.height=`${(100*parseFloat(Ft)/Et).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(tt(this,_e))return;const At=hn(this,_e,document.createElement("button"));At.className="altText";const Ft=await Ht._l10nPromise.get("editor_alt_text_button_label");At.textContent=Ft,At.setAttribute("aria-label",Ft),At.tabIndex="0",At.addEventListener("contextmenu",c.noContextMenu),At.addEventListener("pointerdown",Xt=>Xt.stopPropagation()),At.addEventListener("click",Xt=>{Xt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),At.addEventListener("keydown",Xt=>{Xt.target===At&&Xt.key==="Enter"&&(Xt.preventDefault(),this._uiManager.editAltText(this))}),Qt(this,mt,ko).call(this),this.div.append(At),Ht.SMALL_EDITOR_SIZE||(Ht.SMALL_EDITOR_SIZE=Math.min(128,Math.round(At.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:tt(this,b),decorative:tt(this,$)}}set altTextData({altText:At,decorative:Ft}){tt(this,b)===At&&tt(this,$)===Ft||(hn(this,b,At),hn(this,$,Ft),Qt(this,mt,ko).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",tt(this,yt)),this.div.addEventListener("focusout",tt(this,bt));const[At,Ft]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Ft/At).toFixed(2)}%`,this.div.style.maxHeight=`${(100*At/Ft).toFixed(2)}%`);const[Xt,kt]=this.getInitialTranslation();return this.translate(Xt,kt),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(At){const{isMac:Ft}=o.FeatureTest.platform;if(At.button!==0||At.ctrlKey&&Ft){At.preventDefault();return}hn(this,et,!0),Qt(this,mt,ru).call(this,At)}moveInDOM(){var At;(At=this.parent)==null||At.moveEditorInDOM(this)}_setParentAndPosition(At,Ft,Xt){At.changeParent(this),this.x=Ft,this.y=Xt,this.fixAndSetPosition()}getRect(At,Ft){const Xt=this.parentScale,[kt,rt]=this.pageDimensions,[at,Et]=this.pageTranslation,Ct=At/Xt,Pt=Ft/Xt,It=this.x*kt,Bt=this.y*rt,Lt=this.width*kt,an=this.height*rt;switch(this.rotation){case 0:return[It+Ct+at,rt-Bt-Pt-an+Et,It+Ct+Lt+at,rt-Bt-Pt+Et];case 90:return[It+Pt+at,rt-Bt+Ct+Et,It+Pt+an+at,rt-Bt+Ct+Lt+Et];case 180:return[It-Ct-Lt+at,rt-Bt+Pt+Et,It-Ct+at,rt-Bt+Pt+an+Et];case 270:return[It-Pt-an+at,rt-Bt-Ct-Lt+Et,It-Pt+at,rt-Bt-Ct+Et];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(At,Ft){const[Xt,kt,rt,at]=At,Et=rt-Xt,Ct=at-kt;switch(this.rotation){case 0:return[Xt,Ft-at,Et,Ct];case 90:return[Xt,Ft-kt,Ct,Et];case 180:return[rt,Ft-kt,Et,Ct];case 270:return[rt,Ft-at,Ct,Et];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){hn(this,st,!0)}disableEditMode(){hn(this,st,!1)}isInEditMode(){return tt(this,st)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var At,Ft;(At=this.div)==null||At.addEventListener("focusin",tt(this,yt)),(Ft=this.div)==null||Ft.addEventListener("focusout",tt(this,bt))}serialize(At=!1,Ft=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(At,Ft,Xt){const kt=new this.prototype.constructor({parent:Ft,id:Ft.getNextId(),uiManager:Xt});kt.rotation=At.rotation;const[rt,at]=kt.pageDimensions,[Et,Ct,Pt,It]=kt.getRectInCurrentCoords(At.rect,at);return kt.x=Et/rt,kt.y=Ct/at,kt.width=Pt/rt,kt.height=It/at,kt}remove(){var At;this.div.removeEventListener("focusin",tt(this,yt)),this.div.removeEventListener("focusout",tt(this,bt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(At=tt(this,_e))==null||At.remove(),hn(this,_e,null),hn(this,ct,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Qt(this,mt,eu).call(this),tt(this,pt).classList.remove("hidden"))}select(){var At;this.makeResizable(),(At=this.div)==null||At.classList.add("selectedEditor")}unselect(){var At,Ft,Xt;(At=tt(this,pt))==null||At.classList.add("hidden"),(Ft=this.div)==null||Ft.classList.remove("selectedEditor"),(Xt=this.div)!=null&&Xt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(At,Ft){}disableEditing(){tt(this,_e)&&(tt(this,_e).hidden=!0)}enableEditing(){tt(this,_e)&&(tt(this,_e).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return tt(this,nt)}set isEditing(At){hn(this,nt,At),this.parent&&(At?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(At,Ft){hn(this,ht,!0);const Xt=At/Ft,{style:kt}=this.div;kt.aspectRatio=Xt,kt.height="auto"}static get MIN_SIZE(){return 16}};b=new WeakMap,$=new WeakMap,_e=new WeakMap,ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,pt=new WeakMap,yt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,gt=new WeakMap,ot=new WeakMap,mt=new WeakSet,_o=function([At,Ft],Xt,kt){[Xt,kt]=this.screenToPageTranslation(Xt,kt),this.x+=Xt/At,this.y+=kt/Ft,this.fixAndSetPosition()},wo=function(){const[At,Ft]=this.parentDimensions,{_borderLineWidth:Xt}=Ht,kt=Xt/At,rt=Xt/Ft;switch(this.rotation){case 90:return[-kt,rt];case 180:return[kt,rt];case 270:return[kt,-rt];default:return[-kt,-rt]}},ft=new WeakSet,So=function(At,Ft,Xt){switch(Xt){case 90:return[Ft,-At];case 180:return[-At,-Ft];case 270:return[-Ft,At];default:return[At,Ft]}},Ao=function(At){switch(At){case 90:{const[Ft,Xt]=this.pageDimensions;return[0,-Ft/Xt,Xt/Ft,0]}case 180:return[-1,0,0,-1];case 270:{const[Ft,Xt]=this.pageDimensions;return[0,Ft/Xt,-Xt/Ft,0]}default:return[1,0,0,1]}},eu=function(){if(tt(this,pt))return;hn(this,pt,document.createElement("div")),tt(this,pt).classList.add("resizers");const At=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||At.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Ft of At){const Xt=document.createElement("div");tt(this,pt).append(Xt),Xt.classList.add("resizer",Ft),Xt.addEventListener("pointerdown",Qt(this,mt,tu).bind(this,Ft)),Xt.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(tt(this,pt))},tu=function(At,Ft){Ft.preventDefault();const{isMac:Xt}=o.FeatureTest.platform;if(Ft.button!==0||Ft.ctrlKey&&Xt)return;const kt=Qt(this,mt,nu).bind(this,At),rt=this._isDraggable;this._isDraggable=!1;const at={passive:!0,capture:!0};window.addEventListener("pointermove",kt,at);const Et=this.x,Ct=this.y,Pt=this.width,It=this.height,Bt=this.parent.div.style.cursor,Lt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Ft.target).cursor;const an=()=>{this._isDraggable=rt,window.removeEventListener("pointerup",an),window.removeEventListener("blur",an),window.removeEventListener("pointermove",kt,at),this.parent.div.style.cursor=Bt,this.div.style.cursor=Lt;const rn=this.x,En=this.y,kn=this.width,An=this.height;rn===Et&&En===Ct&&kn===Pt&&An===It||this.addCommands({cmd:()=>{this.width=kn,this.height=An,this.x=rn,this.y=En;const[on,Vt]=this.parentDimensions;this.setDims(on*kn,Vt*An),this.fixAndSetPosition()},undo:()=>{this.width=Pt,this.height=It,this.x=Et,this.y=Ct;const[on,Vt]=this.parentDimensions;this.setDims(on*Pt,Vt*It),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",an),window.addEventListener("blur",an)},nu=function(At,Ft){const[Xt,kt]=this.parentDimensions,rt=this.x,at=this.y,Et=this.width,Ct=this.height,Pt=Ht.MIN_SIZE/Xt,It=Ht.MIN_SIZE/kt,Bt=Wn=>Math.round(Wn*1e4)/1e4,Lt=Qt(this,mt,Ao).call(this,this.rotation),an=(Wn,Qn)=>[Lt[0]*Wn+Lt[2]*Qn,Lt[1]*Wn+Lt[3]*Qn],rn=Qt(this,mt,Ao).call(this,360-this.rotation),En=(Wn,Qn)=>[rn[0]*Wn+rn[2]*Qn,rn[1]*Wn+rn[3]*Qn];let kn,An,on=!1,Vt=!1;switch(At){case"topLeft":on=!0,kn=(Wn,Qn)=>[0,0],An=(Wn,Qn)=>[Wn,Qn];break;case"topMiddle":kn=(Wn,Qn)=>[Wn/2,0],An=(Wn,Qn)=>[Wn/2,Qn];break;case"topRight":on=!0,kn=(Wn,Qn)=>[Wn,0],An=(Wn,Qn)=>[0,Qn];break;case"middleRight":Vt=!0,kn=(Wn,Qn)=>[Wn,Qn/2],An=(Wn,Qn)=>[0,Qn/2];break;case"bottomRight":on=!0,kn=(Wn,Qn)=>[Wn,Qn],An=(Wn,Qn)=>[0,0];break;case"bottomMiddle":kn=(Wn,Qn)=>[Wn/2,Qn],An=(Wn,Qn)=>[Wn/2,0];break;case"bottomLeft":on=!0,kn=(Wn,Qn)=>[0,Qn],An=(Wn,Qn)=>[Wn,0];break;case"middleLeft":Vt=!0,kn=(Wn,Qn)=>[0,Qn/2],An=(Wn,Qn)=>[Wn,Qn/2];break}const St=kn(Et,Ct),Nt=An(Et,Ct);let Gt=an(...Nt);const Jt=Bt(rt+Gt[0]),vn=Bt(at+Gt[1]);let Sn=1,Tn=1,[Zt,In]=this.screenToPageTranslation(Ft.movementX,Ft.movementY);if([Zt,In]=En(Zt/Xt,In/kt),on){const Wn=Math.hypot(Et,Ct);Sn=Tn=Math.max(Math.min(Math.hypot(Nt[0]-St[0]-Zt,Nt[1]-St[1]-In)/Wn,1/Et,1/Ct),Pt/Et,It/Ct)}else Vt?Sn=Math.max(Pt,Math.min(1,Math.abs(Nt[0]-St[0]-Zt)))/Et:Tn=Math.max(It,Math.min(1,Math.abs(Nt[1]-St[1]-In)))/Ct;const Dn=Bt(Et*Sn),rr=Bt(Ct*Tn);Gt=an(...An(Dn,rr));const Zn=Jt-Gt[0],or=vn-Gt[1];this.width=Dn,this.height=rr,this.x=Zn,this.y=or,this.setDims(Xt*Dn,kt*rr),this.fixAndSetPosition()},ko=async function(){var Xt;const At=tt(this,_e);if(!At)return;if(!tt(this,b)&&!tt(this,$)){At.classList.remove("done"),(Xt=tt(this,ct))==null||Xt.remove();return}Ht._l10nPromise.get("editor_alt_text_edit_button_label").then(kt=>{At.setAttribute("aria-label",kt)});let Ft=tt(this,ct);if(!Ft){hn(this,ct,Ft=document.createElement("span")),Ft.className="tooltip",Ft.setAttribute("role","tooltip");const kt=Ft.id=`alt-text-tooltip-${this.id}`;At.setAttribute("aria-describedby",kt);const rt=100;At.addEventListener("mouseenter",()=>{hn(this,ut,setTimeout(()=>{hn(this,ut,null),tt(this,ct).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},rt))}),At.addEventListener("mouseleave",()=>{var at;clearTimeout(tt(this,ut)),hn(this,ut,null),(at=tt(this,ct))==null||at.classList.remove("show")})}At.classList.add("done"),Ft.innerText=tt(this,$)?await Ht._l10nPromise.get("editor_alt_text_decorative_tooltip"):tt(this,b),Ft.parentNode||At.append(Ft)},ru=function(At){if(!this._isDraggable)return;const Ft=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Xt,kt;Ft&&(Xt={passive:!0,capture:!0},kt=at=>{const[Et,Ct]=this.screenToPageTranslation(at.movementX,at.movementY);this._uiManager.dragSelectedEditors(Et,Ct)},window.addEventListener("pointermove",kt,Xt));const rt=()=>{if(window.removeEventListener("pointerup",rt),window.removeEventListener("blur",rt),Ft&&window.removeEventListener("pointermove",kt,Xt),hn(this,et,!1),!this._uiManager.endDragSession()){const{isMac:at}=o.FeatureTest.platform;At.ctrlKey&&!at||At.shiftKey||At.metaKey&&at?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",rt),window.addEventListener("blur",rt)},dn(Ht,ft),xr(Ht,"_borderLineWidth",-1),xr(Ht,"_colorManager",new a.ColorManager),xr(Ht,"_zIndex",1),xr(Ht,"SMALL_EDITOR_SIZE",0);let h=Ht;s.AnnotationEditor=h;class j extends h{constructor(At){super(At),this.annotationElementId=At.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,s,i)=>{var ht,pt,yt,bt,et,Ro,gt,ot,mt,it,dt,su,xt,wt,jt,sn,Kt,Yt,Ht,Ut,At,Ft,Xt,kt,rt,at,Et,Ct,Pt,It,Bt,Lt,an,rn,En,kn,An,on,Vt,St,Nt,Gt,Jt,vn,Sn,Tn,Zt,iu,Co,To,Ws,Po,jo,Nr,ms,au,ou,Do,gs,No;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=c,s.opacityToHex=h;var a=i(1),o=i(6);function c(jn,Ot,_n){for(const Mn of _n)Ot.addEventListener(Mn,jn[Mn].bind(jn))}function h(jn){return Math.round(Math.min(255,Math.max(1,255*jn))).toString(16).padStart(2,"0")}class j{constructor(){dn(this,ht,0)}getId(){return`${a.AnnotationEditorPrefix}${ps(this,ht)._++}`}}ht=new WeakMap;const st=class st{constructor(){dn(this,et);dn(this,pt,(0,a.getUuid)());dn(this,yt,0);dn(this,bt,null)}static get _isSVGFittingCanvas(){const Ot='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Mn=new OffscreenCanvas(1,3).getContext("2d"),$n=new Image;$n.src=Ot;const Jn=$n.decode().then(()=>(Mn.drawImage($n,0,0,1,1,0,0,1,3),new Uint32Array(Mn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",Jn)}async getFromFile(Ot){const{lastModified:_n,name:Mn,size:$n,type:Jn}=Ot;return Qt(this,et,Ro).call(this,`${_n}_${Mn}_${$n}_${Jn}`,Ot)}async getFromUrl(Ot){return Qt(this,et,Ro).call(this,Ot,Ot)}async getFromId(Ot){tt(this,bt)||hn(this,bt,new Map);const _n=tt(this,bt).get(Ot);return _n?_n.bitmap?(_n.refCounter+=1,_n):_n.file?this.getFromFile(_n.file):this.getFromUrl(_n.url):null}getSvgUrl(Ot){const _n=tt(this,bt).get(Ot);return _n!=null&&_n.isSvg?_n.svgUrl:null}deleteId(Ot){tt(this,bt)||hn(this,bt,new Map);const _n=tt(this,bt).get(Ot);_n&&(_n.refCounter-=1,_n.refCounter===0&&(_n.bitmap=null))}isValidId(Ot){return Ot.startsWith(`image_${tt(this,pt)}_`)}};pt=new WeakMap,yt=new WeakMap,bt=new WeakMap,et=new WeakSet,Ro=async function(Ot,_n){tt(this,bt)||hn(this,bt,new Map);let Mn=tt(this,bt).get(Ot);if(Mn===null)return null;if(Mn!=null&&Mn.bitmap)return Mn.refCounter+=1,Mn;try{Mn||(Mn={bitmap:null,id:`image_${tt(this,pt)}_${ps(this,yt)._++}`,refCounter:0,isSvg:!1});let $n;if(typeof _n=="string"){Mn.url=_n;const Jn=await fetch(_n);if(!Jn.ok)throw new Error(Jn.statusText);$n=await Jn.blob()}else $n=Mn.file=_n;if($n.type==="image/svg+xml"){const Jn=st._isSVGFittingCanvas,Un=new FileReader,Dt=new Image,Tt=new Promise(($t,gn)=>{Dt.onload=()=>{Mn.bitmap=Dt,Mn.isSvg=!0,$t()},Un.onload=async()=>{const xn=Mn.svgUrl=Un.result;Dt.src=await Jn?`${xn}#svgView(preserveAspectRatio(none))`:xn},Dt.onerror=Un.onerror=gn});Un.readAsDataURL($n),await Tt}else Mn.bitmap=await createImageBitmap($n);Mn.refCounter=1}catch($n){console.error($n),Mn=null}return tt(this,bt).set(Ot,Mn),Mn&&tt(this,bt).set(Mn.id,Mn),Mn};let b=st;class ${constructor(Ot=128){dn(this,gt,[]);dn(this,ot,!1);dn(this,mt);dn(this,it,-1);hn(this,mt,Ot)}add({cmd:Ot,undo:_n,mustExec:Mn,type:$n=NaN,overwriteIfSameType:Jn=!1,keepUndo:Un=!1}){if(Mn&&Ot(),tt(this,ot))return;const Dt={cmd:Ot,undo:_n,type:$n};if(tt(this,it)===-1){tt(this,gt).length>0&&(tt(this,gt).length=0),hn(this,it,0),tt(this,gt).push(Dt);return}if(Jn&&tt(this,gt)[tt(this,it)].type===$n){Un&&(Dt.undo=tt(this,gt)[tt(this,it)].undo),tt(this,gt)[tt(this,it)]=Dt;return}const Tt=tt(this,it)+1;Tt===tt(this,mt)?tt(this,gt).splice(0,1):(hn(this,it,Tt),Tt<tt(this,gt).length&&tt(this,gt).splice(Tt)),tt(this,gt).push(Dt)}undo(){tt(this,it)!==-1&&(hn(this,ot,!0),tt(this,gt)[tt(this,it)].undo(),hn(this,ot,!1),hn(this,it,tt(this,it)-1))}redo(){tt(this,it)<tt(this,gt).length-1&&(hn(this,it,tt(this,it)+1),hn(this,ot,!0),tt(this,gt)[tt(this,it)].cmd(),hn(this,ot,!1))}hasSomethingToUndo(){return tt(this,it)!==-1}hasSomethingToRedo(){return tt(this,it)<tt(this,gt).length-1}destroy(){hn(this,gt,null)}}gt=new WeakMap,ot=new WeakMap,mt=new WeakMap,it=new WeakMap,s.CommandManager=$;class _e{constructor(Ot){dn(this,dt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_n}=a.FeatureTest.platform;for(const[Mn,$n,Jn={}]of Ot)for(const Un of Mn){const Dt=Un.startsWith("mac+");_n&&Dt?(this.callbacks.set(Un.slice(4),{callback:$n,options:Jn}),this.allKeys.add(Un.split("+").at(-1))):!_n&&!Dt&&(this.callbacks.set(Un,{callback:$n,options:Jn}),this.allKeys.add(Un.split("+").at(-1)))}}exec(Ot,_n){if(!this.allKeys.has(_n.key))return;const Mn=this.callbacks.get(Qt(this,dt,su).call(this,_n));if(!Mn)return;const{callback:$n,options:{bubbles:Jn=!1,args:Un=[],checker:Dt=null}}=Mn;Dt&&!Dt(Ot,_n)||($n.bind(Ot,...Un)(),Jn||(_n.stopPropagation(),_n.preventDefault()))}}dt=new WeakSet,su=function(Ot){Ot.altKey&&this.buffer.push("alt"),Ot.ctrlKey&&this.buffer.push("ctrl"),Ot.metaKey&&this.buffer.push("meta"),Ot.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ot.key);const _n=this.buffer.join("+");return this.buffer.length=0,_n},s.KeyboardManager=_e;const Rt=class Rt{get _colors(){const Ot=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(Ot),(0,a.shadow)(this,"_colors",Ot)}convert(Ot){const _n=(0,o.getRGB)(Ot);if(!window.matchMedia("(forced-colors: active)").matches)return _n;for(const[Mn,$n]of this._colors)if($n.every((Jn,Un)=>Jn===_n[Un]))return Rt._colorsMapping.get(Mn);return _n}getHexCode(Ot){const _n=this._colors.get(Ot);return _n?a.Util.makeHexColor(..._n):Ot}};xr(Rt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ct=Rt;s.ColorManager=ct;const ir=class ir{constructor(Ot,_n,Mn,$n,Jn,Un){dn(this,Zt);dn(this,xt,null);dn(this,wt,new Map);dn(this,jt,new Map);dn(this,sn,null);dn(this,Kt,null);dn(this,Yt,new $);dn(this,Ht,0);dn(this,Ut,new Set);dn(this,At,null);dn(this,Ft,null);dn(this,Xt,new Set);dn(this,kt,null);dn(this,rt,new j);dn(this,at,!1);dn(this,Et,!1);dn(this,Ct,null);dn(this,Pt,a.AnnotationEditorType.NONE);dn(this,It,new Set);dn(this,Bt,null);dn(this,Lt,this.blur.bind(this));dn(this,an,this.focus.bind(this));dn(this,rn,this.copy.bind(this));dn(this,En,this.cut.bind(this));dn(this,kn,this.paste.bind(this));dn(this,An,this.keydown.bind(this));dn(this,on,this.onEditingAction.bind(this));dn(this,Vt,this.onPageChanging.bind(this));dn(this,St,this.onScaleChanging.bind(this));dn(this,Nt,this.onRotationChanging.bind(this));dn(this,Gt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});dn(this,Jt,[0,0]);dn(this,vn,null);dn(this,Sn,null);dn(this,Tn,null);hn(this,Sn,Ot),hn(this,Tn,_n),hn(this,sn,Mn),this._eventBus=$n,this._eventBus._on("editingaction",tt(this,on)),this._eventBus._on("pagechanging",tt(this,Vt)),this._eventBus._on("scalechanging",tt(this,St)),this._eventBus._on("rotationchanging",tt(this,Nt)),hn(this,Kt,Jn.annotationStorage),hn(this,kt,Jn.filterFactory),hn(this,Bt,Un),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Ot=ir.prototype,_n=Jn=>{const{activeElement:Un}=document;return Un&&tt(Jn,Sn).contains(Un)&&Jn.hasSomethingToControl()},Mn=this.TRANSLATE_SMALL,$n=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new _e([[["ctrl+a","mac+meta+a"],Ot.selectAll],[["ctrl+z","mac+meta+z"],Ot.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Ot.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Ot.delete],[["Escape","mac+Escape"],Ot.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Ot.translateSelectedEditors,{args:[-Mn,0],checker:_n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ot.translateSelectedEditors,{args:[-$n,0],checker:_n}],[["ArrowRight","mac+ArrowRight"],Ot.translateSelectedEditors,{args:[Mn,0],checker:_n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ot.translateSelectedEditors,{args:[$n,0],checker:_n}],[["ArrowUp","mac+ArrowUp"],Ot.translateSelectedEditors,{args:[0,-Mn],checker:_n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ot.translateSelectedEditors,{args:[0,-$n],checker:_n}],[["ArrowDown","mac+ArrowDown"],Ot.translateSelectedEditors,{args:[0,Mn],checker:_n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ot.translateSelectedEditors,{args:[0,$n],checker:_n}]]))}destroy(){Qt(this,Zt,Ws).call(this),Qt(this,Zt,Co).call(this),this._eventBus._off("editingaction",tt(this,on)),this._eventBus._off("pagechanging",tt(this,Vt)),this._eventBus._off("scalechanging",tt(this,St)),this._eventBus._off("rotationchanging",tt(this,Nt));for(const Ot of tt(this,jt).values())Ot.destroy();tt(this,jt).clear(),tt(this,wt).clear(),tt(this,Xt).clear(),hn(this,xt,null),tt(this,It).clear(),tt(this,Yt).destroy(),tt(this,sn).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",tt(this,Bt)?tt(this,kt).addHCMFilter(tt(this,Bt).foreground,tt(this,Bt).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(tt(this,Sn)).direction)}editAltText(Ot){var _n;(_n=tt(this,sn))==null||_n.editAltText(this,Ot)}onPageChanging({pageNumber:Ot}){hn(this,Ht,Ot-1)}focusMainContainer(){tt(this,Sn).focus()}findParent(Ot,_n){for(const Mn of tt(this,jt).values()){const{x:$n,y:Jn,width:Un,height:Dt}=Mn.div.getBoundingClientRect();if(Ot>=$n&&Ot<=$n+Un&&_n>=Jn&&_n<=Jn+Dt)return Mn}return null}disableUserSelect(Ot=!1){tt(this,Tn).classList.toggle("noUserSelect",Ot)}addShouldRescale(Ot){tt(this,Xt).add(Ot)}removeShouldRescale(Ot){tt(this,Xt).delete(Ot)}onScaleChanging({scale:Ot}){this.commitOrRemove(),this.viewParameters.realScale=Ot*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _n of tt(this,Xt))_n.onScaleChanging()}onRotationChanging({pagesRotation:Ot}){this.commitOrRemove(),this.viewParameters.rotation=Ot}addToAnnotationStorage(Ot){!Ot.isEmpty()&&tt(this,Kt)&&!tt(this,Kt).has(Ot.id)&&tt(this,Kt).setValue(Ot.id,Ot)}blur(){if(!this.hasSelection)return;const{activeElement:Ot}=document;for(const _n of tt(this,It))if(_n.div.contains(Ot)){hn(this,Ct,[_n,Ot]),_n._focusEventsAllowed=!1;break}}focus(){if(!tt(this,Ct))return;const[Ot,_n]=tt(this,Ct);hn(this,Ct,null),_n.addEventListener("focusin",()=>{Ot._focusEventsAllowed=!0},{once:!0}),_n.focus()}addEditListeners(){Qt(this,Zt,To).call(this),Qt(this,Zt,Po).call(this)}removeEditListeners(){Qt(this,Zt,Ws).call(this),Qt(this,Zt,jo).call(this)}copy(Ot){var Mn;if(Ot.preventDefault(),(Mn=tt(this,xt))==null||Mn.commitOrRemove(),!this.hasSelection)return;const _n=[];for(const $n of tt(this,It)){const Jn=$n.serialize(!0);Jn&&_n.push(Jn)}_n.length!==0&&Ot.clipboardData.setData("application/pdfjs",JSON.stringify(_n))}cut(Ot){this.copy(Ot),this.delete()}paste(Ot){Ot.preventDefault();const{clipboardData:_n}=Ot;for(const Jn of _n.items)for(const Un of tt(this,Ft))if(Un.isHandlingMimeForPasting(Jn.type)){Un.paste(Jn,this.currentLayer);return}let Mn=_n.getData("application/pdfjs");if(!Mn)return;try{Mn=JSON.parse(Mn)}catch(Jn){(0,a.warn)(`paste: "${Jn.message}".`);return}if(!Array.isArray(Mn))return;this.unselectAll();const $n=this.currentLayer;try{const Jn=[];for(const Tt of Mn){const $t=$n.deserialize(Tt);if(!$t)return;Jn.push($t)}const Un=()=>{for(const Tt of Jn)Qt(this,Zt,Do).call(this,Tt);Qt(this,Zt,No).call(this,Jn)},Dt=()=>{for(const Tt of Jn)Tt.remove()};this.addCommands({cmd:Un,undo:Dt,mustExec:!0})}catch(Jn){(0,a.warn)(`paste: "${Jn.message}".`)}}keydown(Ot){var _n;(_n=this.getActive())!=null&&_n.shouldGetKeyboardEvents()||ir._keyboardManager.exec(this,Ot)}onEditingAction(Ot){["undo","redo","delete","selectAll"].includes(Ot.name)&&this[Ot.name]()}setEditingState(Ot){Ot?(Qt(this,Zt,iu).call(this),Qt(this,Zt,To).call(this),Qt(this,Zt,Po).call(this),Qt(this,Zt,Nr).call(this,{isEditing:tt(this,Pt)!==a.AnnotationEditorType.NONE,isEmpty:Qt(this,Zt,gs).call(this),hasSomethingToUndo:tt(this,Yt).hasSomethingToUndo(),hasSomethingToRedo:tt(this,Yt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Qt(this,Zt,Co).call(this),Qt(this,Zt,Ws).call(this),Qt(this,Zt,jo).call(this),Qt(this,Zt,Nr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Ot){if(!tt(this,Ft)){hn(this,Ft,Ot);for(const _n of tt(this,Ft))Qt(this,Zt,ms).call(this,_n.defaultPropertiesToUpdate)}}getId(){return tt(this,rt).getId()}get currentLayer(){return tt(this,jt).get(tt(this,Ht))}getLayer(Ot){return tt(this,jt).get(Ot)}get currentPageIndex(){return tt(this,Ht)}addLayer(Ot){tt(this,jt).set(Ot.pageIndex,Ot),tt(this,at)?Ot.enable():Ot.disable()}removeLayer(Ot){tt(this,jt).delete(Ot.pageIndex)}updateMode(Ot,_n=null){if(tt(this,Pt)!==Ot){if(hn(this,Pt,Ot),Ot===a.AnnotationEditorType.NONE){this.setEditingState(!1),Qt(this,Zt,ou).call(this);return}this.setEditingState(!0),Qt(this,Zt,au).call(this),this.unselectAll();for(const Mn of tt(this,jt).values())Mn.updateMode(Ot);if(_n){for(const Mn of tt(this,wt).values())if(Mn.annotationElementId===_n){this.setSelected(Mn),Mn.enterInEditMode();break}}}}updateToolbar(Ot){Ot!==tt(this,Pt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Ot})}updateParams(Ot,_n){if(tt(this,Ft)){if(Ot===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Ot);return}for(const Mn of tt(this,It))Mn.updateParams(Ot,_n);for(const Mn of tt(this,Ft))Mn.updateDefaultParams(Ot,_n)}}enableWaiting(Ot=!1){if(tt(this,Et)!==Ot){hn(this,Et,Ot);for(const _n of tt(this,jt).values())Ot?_n.disableClick():_n.enableClick(),_n.div.classList.toggle("waiting",Ot)}}getEditors(Ot){const _n=[];for(const Mn of tt(this,wt).values())Mn.pageIndex===Ot&&_n.push(Mn);return _n}getEditor(Ot){return tt(this,wt).get(Ot)}addEditor(Ot){tt(this,wt).set(Ot.id,Ot)}removeEditor(Ot){var _n;tt(this,wt).delete(Ot.id),this.unselect(Ot),(!Ot.annotationElementId||!tt(this,Ut).has(Ot.annotationElementId))&&((_n=tt(this,Kt))==null||_n.remove(Ot.id))}addDeletedAnnotationElement(Ot){tt(this,Ut).add(Ot.annotationElementId),Ot.deleted=!0}isDeletedAnnotationElement(Ot){return tt(this,Ut).has(Ot)}removeDeletedAnnotationElement(Ot){tt(this,Ut).delete(Ot.annotationElementId),Ot.deleted=!1}setActiveEditor(Ot){tt(this,xt)!==Ot&&(hn(this,xt,Ot),Ot&&Qt(this,Zt,ms).call(this,Ot.propertiesToUpdate))}toggleSelected(Ot){if(tt(this,It).has(Ot)){tt(this,It).delete(Ot),Ot.unselect(),Qt(this,Zt,Nr).call(this,{hasSelectedEditor:this.hasSelection});return}tt(this,It).add(Ot),Ot.select(),Qt(this,Zt,ms).call(this,Ot.propertiesToUpdate),Qt(this,Zt,Nr).call(this,{hasSelectedEditor:!0})}setSelected(Ot){for(const _n of tt(this,It))_n!==Ot&&_n.unselect();tt(this,It).clear(),tt(this,It).add(Ot),Ot.select(),Qt(this,Zt,ms).call(this,Ot.propertiesToUpdate),Qt(this,Zt,Nr).call(this,{hasSelectedEditor:!0})}isSelected(Ot){return tt(this,It).has(Ot)}unselect(Ot){Ot.unselect(),tt(this,It).delete(Ot),Qt(this,Zt,Nr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return tt(this,It).size!==0}undo(){tt(this,Yt).undo(),Qt(this,Zt,Nr).call(this,{hasSomethingToUndo:tt(this,Yt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Qt(this,Zt,gs).call(this)})}redo(){tt(this,Yt).redo(),Qt(this,Zt,Nr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:tt(this,Yt).hasSomethingToRedo(),isEmpty:Qt(this,Zt,gs).call(this)})}addCommands(Ot){tt(this,Yt).add(Ot),Qt(this,Zt,Nr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Qt(this,Zt,gs).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Ot=[...tt(this,It)],_n=()=>{for(const $n of Ot)$n.remove()},Mn=()=>{for(const $n of Ot)Qt(this,Zt,Do).call(this,$n)};this.addCommands({cmd:_n,undo:Mn,mustExec:!0})}commitOrRemove(){var Ot;(Ot=tt(this,xt))==null||Ot.commitOrRemove()}hasSomethingToControl(){return tt(this,xt)||this.hasSelection}selectAll(){for(const Ot of tt(this,It))Ot.commit();Qt(this,Zt,No).call(this,tt(this,wt).values())}unselectAll(){if(tt(this,xt)){tt(this,xt).commitOrRemove();return}if(this.hasSelection){for(const Ot of tt(this,It))Ot.unselect();tt(this,It).clear(),Qt(this,Zt,Nr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Ot,_n,Mn=!1){if(Mn||this.commitOrRemove(),!this.hasSelection)return;tt(this,Jt)[0]+=Ot,tt(this,Jt)[1]+=_n;const[$n,Jn]=tt(this,Jt),Un=[...tt(this,It)],Dt=1e3;tt(this,vn)&&clearTimeout(tt(this,vn)),hn(this,vn,setTimeout(()=>{hn(this,vn,null),tt(this,Jt)[0]=tt(this,Jt)[1]=0,this.addCommands({cmd:()=>{for(const Tt of Un)tt(this,wt).has(Tt.id)&&Tt.translateInPage($n,Jn)},undo:()=>{for(const Tt of Un)tt(this,wt).has(Tt.id)&&Tt.translateInPage(-$n,-Jn)},mustExec:!1})},Dt));for(const Tt of Un)Tt.translateInPage(Ot,_n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),hn(this,At,new Map);for(const Ot of tt(this,It))tt(this,At).set(Ot,{savedX:Ot.x,savedY:Ot.y,savedPageIndex:Ot.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!tt(this,At))return!1;this.disableUserSelect(!1);const Ot=tt(this,At);hn(this,At,null);let _n=!1;for(const[{x:$n,y:Jn,pageIndex:Un},Dt]of Ot)Dt.newX=$n,Dt.newY=Jn,Dt.newPageIndex=Un,_n||(_n=$n!==Dt.savedX||Jn!==Dt.savedY||Un!==Dt.savedPageIndex);if(!_n)return!1;const Mn=($n,Jn,Un,Dt)=>{if(tt(this,wt).has($n.id)){const Tt=tt(this,jt).get(Dt);Tt?$n._setParentAndPosition(Tt,Jn,Un):($n.pageIndex=Dt,$n.x=Jn,$n.y=Un)}};return this.addCommands({cmd:()=>{for(const[$n,{newX:Jn,newY:Un,newPageIndex:Dt}]of Ot)Mn($n,Jn,Un,Dt)},undo:()=>{for(const[$n,{savedX:Jn,savedY:Un,savedPageIndex:Dt}]of Ot)Mn($n,Jn,Un,Dt)},mustExec:!0}),!0}dragSelectedEditors(Ot,_n){if(tt(this,At))for(const Mn of tt(this,At).keys())Mn.drag(Ot,_n)}rebuild(Ot){if(Ot.parent===null){const _n=this.getLayer(Ot.pageIndex);_n?(_n.changeParent(Ot),_n.addOrRebuild(Ot)):(this.addEditor(Ot),this.addToAnnotationStorage(Ot),Ot.rebuild())}else Ot.parent.addOrRebuild(Ot)}isActive(Ot){return tt(this,xt)===Ot}getActive(){return tt(this,xt)}getMode(){return tt(this,Pt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new b)}};xt=new WeakMap,wt=new WeakMap,jt=new WeakMap,sn=new WeakMap,Kt=new WeakMap,Yt=new WeakMap,Ht=new WeakMap,Ut=new WeakMap,At=new WeakMap,Ft=new WeakMap,Xt=new WeakMap,kt=new WeakMap,rt=new WeakMap,at=new WeakMap,Et=new WeakMap,Ct=new WeakMap,Pt=new WeakMap,It=new WeakMap,Bt=new WeakMap,Lt=new WeakMap,an=new WeakMap,rn=new WeakMap,En=new WeakMap,kn=new WeakMap,An=new WeakMap,on=new WeakMap,Vt=new WeakMap,St=new WeakMap,Nt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,vn=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,Zt=new WeakSet,iu=function(){window.addEventListener("focus",tt(this,an)),window.addEventListener("blur",tt(this,Lt))},Co=function(){window.removeEventListener("focus",tt(this,an)),window.removeEventListener("blur",tt(this,Lt))},To=function(){window.addEventListener("keydown",tt(this,An),{capture:!0})},Ws=function(){window.removeEventListener("keydown",tt(this,An),{capture:!0})},Po=function(){document.addEventListener("copy",tt(this,rn)),document.addEventListener("cut",tt(this,En)),document.addEventListener("paste",tt(this,kn))},jo=function(){document.removeEventListener("copy",tt(this,rn)),document.removeEventListener("cut",tt(this,En)),document.removeEventListener("paste",tt(this,kn))},Nr=function(Ot){Object.entries(Ot).some(([Mn,$n])=>tt(this,Gt)[Mn]!==$n)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(tt(this,Gt),Ot)})},ms=function(Ot){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Ot})},au=function(){if(!tt(this,at)){hn(this,at,!0);for(const Ot of tt(this,jt).values())Ot.enable()}},ou=function(){if(this.unselectAll(),tt(this,at)){hn(this,at,!1);for(const Ot of tt(this,jt).values())Ot.disable()}},Do=function(Ot){const _n=tt(this,jt).get(Ot.pageIndex);_n?_n.addOrRebuild(Ot):this.addEditor(Ot)},gs=function(){if(tt(this,wt).size===0)return!0;if(tt(this,wt).size===1)for(const Ot of tt(this,wt).values())return Ot.isEmpty();return!1},No=function(Ot){tt(this,It).clear();for(const _n of Ot)_n.isEmpty()||(tt(this,It).add(_n),_n.select());Qt(this,Zt,Nr).call(this,{hasSelectedEditor:!0})},xr(ir,"TRANSLATE_SMALL",1),xr(ir,"TRANSLATE_BIG",10);let ut=ir;s.AnnotationEditorUIManager=ut},(e,s,i)=>{var Ht,Ut,At,Ft,Xt,kt,rt,at,Et,Ct,Pt,It,ts,ns,Io,Hs,Vs,xs,ys;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=it,s.getColorValues=wt,s.getCurrentTransform=jt,s.getCurrentTransformInverse=sn,s.getFilenameFromUrl=et,s.getPdfFilenameFromUrl=nt,s.getRGB=xt,s.getXfaPageViewport=Rt,s.isDataScheme=yt,s.isPdfFile=bt,s.isValidFetchUrl=gt,s.loadScript=mt,s.noContextMenu=ot,s.setLayerDimensions=Kt;var a=i(7),o=i(1);const c="http://www.w3.org/2000/svg",Yt=class Yt{};xr(Yt,"CSS",96),xr(Yt,"PDF",72),xr(Yt,"PDF_TO_CSS_UNITS",Yt.CSS/Yt.PDF);let h=Yt;s.PixelsPerInch=h;class j extends a.BaseFilterFactory{constructor({docId:St,ownerDocument:Nt=globalThis.document}={}){super();dn(this,It);dn(this,Ht);dn(this,Ut);dn(this,At);dn(this,Ft);dn(this,Xt);dn(this,kt);dn(this,rt);dn(this,at);dn(this,Et);dn(this,Ct);dn(this,Pt,0);hn(this,At,St),hn(this,Ft,Nt)}addFilter(St){if(!St)return"none";let Nt=tt(this,It,ts).get(St);if(Nt)return Nt;let Gt,Jt,vn,Sn;if(St.length===1){const Dn=St[0],rr=new Array(256);for(let Zn=0;Zn<256;Zn++)rr[Zn]=Dn[Zn]/255;Sn=Gt=Jt=vn=rr.join(",")}else{const[Dn,rr,Zn]=St,or=new Array(256),Wn=new Array(256),Qn=new Array(256);for(let ar=0;ar<256;ar++)or[ar]=Dn[ar]/255,Wn[ar]=rr[ar]/255,Qn[ar]=Zn[ar]/255;Gt=or.join(","),Jt=Wn.join(","),vn=Qn.join(","),Sn=`${Gt}${Jt}${vn}`}if(Nt=tt(this,It,ts).get(Sn),Nt)return tt(this,It,ts).set(St,Nt),Nt;const Tn=`g_${tt(this,At)}_transfer_map_${ps(this,Pt)._++}`,Zt=`url(#${Tn})`;tt(this,It,ts).set(St,Zt),tt(this,It,ts).set(Sn,Zt);const In=Qt(this,It,Hs).call(this,Tn);return Qt(this,It,xs).call(this,Gt,Jt,vn,In),Zt}addHCMFilter(St,Nt){var rr;const Gt=`${St}-${Nt}`;if(tt(this,kt)===Gt)return tt(this,rt);if(hn(this,kt,Gt),hn(this,rt,"none"),(rr=tt(this,Xt))==null||rr.remove(),!St||!Nt)return tt(this,rt);const Jt=Qt(this,It,ys).call(this,St);St=o.Util.makeHexColor(...Jt);const vn=Qt(this,It,ys).call(this,Nt);if(Nt=o.Util.makeHexColor(...vn),tt(this,It,ns).style.color="",St==="#000000"&&Nt==="#ffffff"||St===Nt)return tt(this,rt);const Sn=new Array(256);for(let Zn=0;Zn<=255;Zn++){const or=Zn/255;Sn[Zn]=or<=.03928?or/12.92:((or+.055)/1.055)**2.4}const Tn=Sn.join(","),Zt=`g_${tt(this,At)}_hcm_filter`,In=hn(this,at,Qt(this,It,Hs).call(this,Zt));Qt(this,It,xs).call(this,Tn,Tn,Tn,In),Qt(this,It,Io).call(this,In);const Dn=(Zn,or)=>{const Wn=Jt[Zn]/255,Qn=vn[Zn]/255,ar=new Array(or+1);for(let dr=0;dr<=or;dr++)ar[dr]=Wn+dr/or*(Qn-Wn);return ar.join(",")};return Qt(this,It,xs).call(this,Dn(0,5),Dn(1,5),Dn(2,5),In),hn(this,rt,`url(#${Zt})`),tt(this,rt)}addHighlightHCMFilter(St,Nt,Gt,Jt){var Qn;const vn=`${St}-${Nt}-${Gt}-${Jt}`;if(tt(this,Et)===vn)return tt(this,Ct);if(hn(this,Et,vn),hn(this,Ct,"none"),(Qn=tt(this,at))==null||Qn.remove(),!St||!Nt)return tt(this,Ct);const[Sn,Tn]=[St,Nt].map(Qt(this,It,ys).bind(this));let Zt=Math.round(.2126*Sn[0]+.7152*Sn[1]+.0722*Sn[2]),In=Math.round(.2126*Tn[0]+.7152*Tn[1]+.0722*Tn[2]),[Dn,rr]=[Gt,Jt].map(Qt(this,It,ys).bind(this));In<Zt&&([Zt,In,Dn,rr]=[In,Zt,rr,Dn]),tt(this,It,ns).style.color="";const Zn=(ar,dr,Rn)=>{const zt=new Array(256),cn=(In-Zt)/Rn,On=ar/255,ir=(dr-ar)/(255*Rn);let jn=0;for(let Ot=0;Ot<=Rn;Ot++){const _n=Math.round(Zt+Ot*cn),Mn=On+Ot*ir;for(let $n=jn;$n<=_n;$n++)zt[$n]=Mn;jn=_n+1}for(let Ot=jn;Ot<256;Ot++)zt[Ot]=zt[jn-1];return zt.join(",")},or=`g_${tt(this,At)}_hcm_highlight_filter`,Wn=hn(this,at,Qt(this,It,Hs).call(this,or));return Qt(this,It,Io).call(this,Wn),Qt(this,It,xs).call(this,Zn(Dn[0],rr[0],5),Zn(Dn[1],rr[1],5),Zn(Dn[2],rr[2],5),Wn),hn(this,Ct,`url(#${or})`),tt(this,Ct)}destroy(St=!1){St&&(tt(this,rt)||tt(this,Ct))||(tt(this,Ut)&&(tt(this,Ut).parentNode.parentNode.remove(),hn(this,Ut,null)),tt(this,Ht)&&(tt(this,Ht).clear(),hn(this,Ht,null)),hn(this,Pt,0))}}Ht=new WeakMap,Ut=new WeakMap,At=new WeakMap,Ft=new WeakMap,Xt=new WeakMap,kt=new WeakMap,rt=new WeakMap,at=new WeakMap,Et=new WeakMap,Ct=new WeakMap,Pt=new WeakMap,It=new WeakSet,ts=function(){return tt(this,Ht)||hn(this,Ht,new Map)},ns=function(){if(!tt(this,Ut)){const St=tt(this,Ft).createElement("div"),{style:Nt}=St;Nt.visibility="hidden",Nt.contain="strict",Nt.width=Nt.height=0,Nt.position="absolute",Nt.top=Nt.left=0,Nt.zIndex=-1;const Gt=tt(this,Ft).createElementNS(c,"svg");Gt.setAttribute("width",0),Gt.setAttribute("height",0),hn(this,Ut,tt(this,Ft).createElementNS(c,"defs")),St.append(Gt),Gt.append(tt(this,Ut)),tt(this,Ft).body.append(St)}return tt(this,Ut)},Io=function(St){const Nt=tt(this,Ft).createElementNS(c,"feColorMatrix");Nt.setAttribute("type","matrix"),Nt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),St.append(Nt)},Hs=function(St){const Nt=tt(this,Ft).createElementNS(c,"filter");return Nt.setAttribute("color-interpolation-filters","sRGB"),Nt.setAttribute("id",St),tt(this,It,ns).append(Nt),Nt},Vs=function(St,Nt,Gt){const Jt=tt(this,Ft).createElementNS(c,Nt);Jt.setAttribute("type","discrete"),Jt.setAttribute("tableValues",Gt),St.append(Jt)},xs=function(St,Nt,Gt,Jt){const vn=tt(this,Ft).createElementNS(c,"feComponentTransfer");Jt.append(vn),Qt(this,It,Vs).call(this,vn,"feFuncR",St),Qt(this,It,Vs).call(this,vn,"feFuncG",Nt),Qt(this,It,Vs).call(this,vn,"feFuncB",Gt)},ys=function(St){return tt(this,It,ns).style.color=St,xt(getComputedStyle(tt(this,It,ns)).getPropertyValue("color"))},s.DOMFilterFactory=j;class b extends a.BaseCanvasFactory{constructor({ownerDocument:Vt=globalThis.document}={}){super(),this._document=Vt}_createCanvas(Vt,St){const Nt=this._document.createElement("canvas");return Nt.width=Vt,Nt.height=St,Nt}}s.DOMCanvasFactory=b;async function $(on,Vt=!1){if(gt(on,document.baseURI)){const St=await fetch(on);if(!St.ok)throw new Error(St.statusText);return Vt?new Uint8Array(await St.arrayBuffer()):(0,o.stringToBytes)(await St.text())}return new Promise((St,Nt)=>{const Gt=new XMLHttpRequest;Gt.open("GET",on,!0),Vt&&(Gt.responseType="arraybuffer"),Gt.onreadystatechange=()=>{if(Gt.readyState===XMLHttpRequest.DONE){if(Gt.status===200||Gt.status===0){let Jt;if(Vt&&Gt.response?Jt=new Uint8Array(Gt.response):!Vt&&Gt.responseText&&(Jt=(0,o.stringToBytes)(Gt.responseText)),Jt){St(Jt);return}}Nt(new Error(Gt.statusText))}},Gt.send(null)})}class _e extends a.BaseCMapReaderFactory{_fetchData(Vt,St){return $(Vt,this.isCompressed).then(Nt=>({cMapData:Nt,compressionType:St}))}}s.DOMCMapReaderFactory=_e;class ct extends a.BaseStandardFontDataFactory{_fetchData(Vt){return $(Vt,!0)}}s.DOMStandardFontDataFactory=ct;class ut extends a.BaseSVGFactory{_createSVG(Vt){return document.createElementNS(c,Vt)}}s.DOMSVGFactory=ut;class ht{constructor({viewBox:Vt,scale:St,rotation:Nt,offsetX:Gt=0,offsetY:Jt=0,dontFlip:vn=!1}){this.viewBox=Vt,this.scale=St,this.rotation=Nt,this.offsetX=Gt,this.offsetY=Jt;const Sn=(Vt[2]+Vt[0])/2,Tn=(Vt[3]+Vt[1])/2;let Zt,In,Dn,rr;switch(Nt%=360,Nt<0&&(Nt+=360),Nt){case 180:Zt=-1,In=0,Dn=0,rr=1;break;case 90:Zt=0,In=1,Dn=1,rr=0;break;case 270:Zt=0,In=-1,Dn=-1,rr=0;break;case 0:Zt=1,In=0,Dn=0,rr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}vn&&(Dn=-Dn,rr=-rr);let Zn,or,Wn,Qn;Zt===0?(Zn=Math.abs(Tn-Vt[1])*St+Gt,or=Math.abs(Sn-Vt[0])*St+Jt,Wn=(Vt[3]-Vt[1])*St,Qn=(Vt[2]-Vt[0])*St):(Zn=Math.abs(Sn-Vt[0])*St+Gt,or=Math.abs(Tn-Vt[1])*St+Jt,Wn=(Vt[2]-Vt[0])*St,Qn=(Vt[3]-Vt[1])*St),this.transform=[Zt*St,In*St,Dn*St,rr*St,Zn-Zt*St*Sn-Dn*St*Tn,or-In*St*Sn-rr*St*Tn],this.width=Wn,this.height=Qn}get rawDims(){const{viewBox:Vt}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:Vt[2]-Vt[0],pageHeight:Vt[3]-Vt[1],pageX:Vt[0],pageY:Vt[1]})}clone({scale:Vt=this.scale,rotation:St=this.rotation,offsetX:Nt=this.offsetX,offsetY:Gt=this.offsetY,dontFlip:Jt=!1}={}){return new ht({viewBox:this.viewBox.slice(),scale:Vt,rotation:St,offsetX:Nt,offsetY:Gt,dontFlip:Jt})}convertToViewportPoint(Vt,St){return o.Util.applyTransform([Vt,St],this.transform)}convertToViewportRectangle(Vt){const St=o.Util.applyTransform([Vt[0],Vt[1]],this.transform),Nt=o.Util.applyTransform([Vt[2],Vt[3]],this.transform);return[St[0],St[1],Nt[0],Nt[1]]}convertToPdfPoint(Vt,St){return o.Util.applyInverseTransform([Vt,St],this.transform)}}s.PageViewport=ht;class pt extends o.BaseException{constructor(Vt,St=0){super(Vt,"RenderingCancelledException"),this.extraDelay=St}}s.RenderingCancelledException=pt;function yt(on){const Vt=on.length;let St=0;for(;St<Vt&&on[St].trim()==="";)St++;return on.substring(St,St+5).toLowerCase()==="data:"}function bt(on){return typeof on=="string"&&/\.pdf$/i.test(on)}function et(on,Vt=!1){return Vt||([on]=on.split(/[#?]/,1)),on.substring(on.lastIndexOf("/")+1)}function nt(on,Vt="document.pdf"){if(typeof on!="string")return Vt;if(yt(on))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Vt;const St=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Nt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Gt=St.exec(on);let Jt=Nt.exec(Gt[1])||Nt.exec(Gt[2])||Nt.exec(Gt[3]);if(Jt&&(Jt=Jt[0],Jt.includes("%")))try{Jt=Nt.exec(decodeURIComponent(Jt))[0]}catch{}return Jt||Vt}class st{constructor(){xr(this,"started",Object.create(null));xr(this,"times",[])}time(Vt){Vt in this.started&&(0,o.warn)(`Timer is already running for ${Vt}`),this.started[Vt]=Date.now()}timeEnd(Vt){Vt in this.started||(0,o.warn)(`Timer has not been started for ${Vt}`),this.times.push({name:Vt,start:this.started[Vt],end:Date.now()}),delete this.started[Vt]}toString(){const Vt=[];let St=0;for(const{name:Nt}of this.times)St=Math.max(Nt.length,St);for(const{name:Nt,start:Gt,end:Jt}of this.times)Vt.push(`${Nt.padEnd(St)} ${Jt-Gt}ms
`);return Vt.join("")}}s.StatTimer=st;function gt(on,Vt){try{const{protocol:St}=Vt?new URL(on,Vt):new URL(on);return St==="http:"||St==="https:"}catch{return!1}}function ot(on){on.preventDefault()}function mt(on,Vt=!1){return new Promise((St,Nt)=>{const Gt=document.createElement("script");Gt.src=on,Gt.onload=function(Jt){Vt&&Gt.remove(),St(Jt)},Gt.onerror=function(){Nt(new Error(`Cannot load script at: ${Gt.src}`))},(document.head||document.documentElement).append(Gt)})}function it(on){console.log("Deprecated API usage: "+on)}let dt;class ft{static toDateObject(Vt){if(!Vt||typeof Vt!="string")return null;dt||(dt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const St=dt.exec(Vt);if(!St)return null;const Nt=parseInt(St[1],10);let Gt=parseInt(St[2],10);Gt=Gt>=1&&Gt<=12?Gt-1:0;let Jt=parseInt(St[3],10);Jt=Jt>=1&&Jt<=31?Jt:1;let vn=parseInt(St[4],10);vn=vn>=0&&vn<=23?vn:0;let Sn=parseInt(St[5],10);Sn=Sn>=0&&Sn<=59?Sn:0;let Tn=parseInt(St[6],10);Tn=Tn>=0&&Tn<=59?Tn:0;const Zt=St[7]||"Z";let In=parseInt(St[8],10);In=In>=0&&In<=23?In:0;let Dn=parseInt(St[9],10)||0;return Dn=Dn>=0&&Dn<=59?Dn:0,Zt==="-"?(vn+=In,Sn+=Dn):Zt==="+"&&(vn-=In,Sn-=Dn),new Date(Date.UTC(Nt,Gt,Jt,vn,Sn,Tn))}}s.PDFDateString=ft;function Rt(on,{scale:Vt=1,rotation:St=0}){const{width:Nt,height:Gt}=on.attributes.style,Jt=[0,0,parseInt(Nt),parseInt(Gt)];return new ht({viewBox:Jt,scale:Vt,rotation:St})}function xt(on){if(on.startsWith("#")){const Vt=parseInt(on.slice(1),16);return[(Vt&16711680)>>16,(Vt&65280)>>8,Vt&255]}return on.startsWith("rgb(")?on.slice(4,-1).split(",").map(Vt=>parseInt(Vt)):on.startsWith("rgba(")?on.slice(5,-1).split(",").map(Vt=>parseInt(Vt)).slice(0,3):((0,o.warn)(`Not a valid color format: "${on}"`),[0,0,0])}function wt(on){const Vt=document.createElement("span");Vt.style.visibility="hidden",document.body.append(Vt);for(const St of on.keys()){Vt.style.color=St;const Nt=window.getComputedStyle(Vt).color;on.set(St,xt(Nt))}Vt.remove()}function jt(on){const{a:Vt,b:St,c:Nt,d:Gt,e:Jt,f:vn}=on.getTransform();return[Vt,St,Nt,Gt,Jt,vn]}function sn(on){const{a:Vt,b:St,c:Nt,d:Gt,e:Jt,f:vn}=on.getTransform().invertSelf();return[Vt,St,Nt,Gt,Jt,vn]}function Kt(on,Vt,St=!1,Nt=!0){if(Vt instanceof ht){const{pageWidth:Gt,pageHeight:Jt}=Vt.rawDims,{style:vn}=on,Sn=o.FeatureTest.isCSSRoundSupported,Tn=`var(--scale-factor) * ${Gt}px`,Zt=`var(--scale-factor) * ${Jt}px`,In=Sn?`round(${Tn}, 1px)`:`calc(${Tn})`,Dn=Sn?`round(${Zt}, 1px)`:`calc(${Zt})`;!St||Vt.rotation%180===0?(vn.width=In,vn.height=Dn):(vn.width=Dn,vn.height=In)}Nt&&on.setAttribute("data-main-rotation",Vt.rotation)}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var a=i(1);class o{constructor(){this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_e){return"none"}addHCMFilter(_e,ct){return"none"}addHighlightHCMFilter(_e,ct,ut,ht){return"none"}destroy(_e=!1){}}s.BaseFilterFactory=o;class c{constructor(){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_e,ct){if(_e<=0||ct<=0)throw new Error("Invalid canvas size");const ut=this._createCanvas(_e,ct);return{canvas:ut,context:ut.getContext("2d")}}reset(_e,ct,ut){if(!_e.canvas)throw new Error("Canvas is not specified");if(ct<=0||ut<=0)throw new Error("Invalid canvas size");_e.canvas.width=ct,_e.canvas.height=ut}destroy(_e){if(!_e.canvas)throw new Error("Canvas is not specified");_e.canvas.width=0,_e.canvas.height=0,_e.canvas=null,_e.context=null}_createCanvas(_e,ct){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=c;class h{constructor({baseUrl:_e=null,isCompressed:ct=!0}){this.constructor===h&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_e,this.isCompressed=ct}async fetch({name:_e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_e)throw new Error("CMap name must be specified.");const ct=this.baseUrl+_e+(this.isCompressed?".bcmap":""),ut=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(ct,ut).catch(ht=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ct}`)})}_fetchData(_e,ct){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=h;class j{constructor({baseUrl:_e=null}){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_e}async fetch({filename:_e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_e)throw new Error("Font filename must be specified.");const ct=`${this.baseUrl}${_e}`;return this._fetchData(ct).catch(ut=>{throw new Error(`Unable to load font data at: ${ct}`)})}_fetchData(_e){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=j;class b{constructor(){this.constructor===b&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(_e,ct,ut=!1){if(_e<=0||ct<=0)throw new Error("Invalid SVG dimensions");const ht=this._createSVG("svg:svg");return ht.setAttribute("version","1.1"),ut||(ht.setAttribute("width",`${_e}px`),ht.setAttribute("height",`${ct}px`)),ht.setAttribute("preserveAspectRatio","none"),ht.setAttribute("viewBox",`0 0 ${_e} ${ct}`),ht}createElement(_e){if(typeof _e!="string")throw new Error("Invalid SVG element type");return this._createSVG(_e)}_createSVG(_e){(0,a.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=b},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var a=i(1);const o=3285377520,c=4294901760,h=65535;class j{constructor($){this.h1=$?$&4294967295:o,this.h2=$?$&4294967295:o}update($){let _e,ct;if(typeof $=="string"){_e=new Uint8Array($.length*2),ct=0;for(let it=0,dt=$.length;it<dt;it++){const ft=$.charCodeAt(it);ft<=255?_e[ct++]=ft:(_e[ct++]=ft>>>8,_e[ct++]=ft&255)}}else if((0,a.isArrayBuffer)($))_e=$.slice(),ct=_e.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const ut=ct>>2,ht=ct-ut*4,pt=new Uint32Array(_e.buffer,0,ut);let yt=0,bt=0,et=this.h1,nt=this.h2;const st=3432918353,gt=461845907,ot=st&h,mt=gt&h;for(let it=0;it<ut;it++)it&1?(yt=pt[it],yt=yt*st&c|yt*ot&h,yt=yt<<15|yt>>>17,yt=yt*gt&c|yt*mt&h,et^=yt,et=et<<13|et>>>19,et=et*5+3864292196):(bt=pt[it],bt=bt*st&c|bt*ot&h,bt=bt<<15|bt>>>17,bt=bt*gt&c|bt*mt&h,nt^=bt,nt=nt<<13|nt>>>19,nt=nt*5+3864292196);switch(yt=0,ht){case 3:yt^=_e[ut*4+2]<<16;case 2:yt^=_e[ut*4+1]<<8;case 1:yt^=_e[ut*4],yt=yt*st&c|yt*ot&h,yt=yt<<15|yt>>>17,yt=yt*gt&c|yt*mt&h,ut&1?et^=yt:nt^=yt}this.h1=et,this.h2=nt}hexdigest(){let $=this.h1,_e=this.h2;return $^=_e>>>1,$=$*3981806797&c|$*36045&h,_e=_e*4283543511&c|((_e<<16|$>>>16)*2950163797&c)>>>16,$^=_e>>>1,$=$*444984403&c|$*60499&h,_e=_e*3301882366&c|((_e<<16|$>>>16)*3120437893&c)>>>16,$^=_e>>>1,($>>>0).toString(16).padStart(8,"0")+(_e>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=j},(e,s,i)=>{var h;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var a=i(1);class o{constructor({ownerDocument:b=globalThis.document,styleElement:$=null}){dn(this,h,new Set);this._document=b,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(b){this.nativeFontFaces.add(b),this._document.fonts.add(b)}removeNativeFontFace(b){this.nativeFontFaces.delete(b),this._document.fonts.delete(b)}insertRule(b){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const $=this.styleElement.sheet;$.insertRule(b,$.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.clear(),tt(this,h).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(b){if(!(!b||tt(this,h).has(b.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:$,src:_e,style:ct}=b,ut=new FontFace($,_e,ct);this.addNativeFontFace(ut);try{await ut.load(),tt(this,h).add($)}catch{(0,a.warn)(`Cannot load system font: ${b.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ut)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(b){if(b.attached||b.missingFile&&!b.systemFontInfo)return;if(b.attached=!0,b.systemFontInfo){await this.loadSystemFont(b.systemFontInfo);return}if(this.isFontLoadingAPISupported){const _e=b.createNativeFontFace();if(_e){this.addNativeFontFace(_e);try{await _e.loaded}catch(ct){throw(0,a.warn)(`Failed to load font '${_e.family}': '${ct}'.`),b.disableFontFace=!0,ct}}return}const $=b.createFontFaceRule();if($){if(this.insertRule($),this.isSyncFontLoadingSupported)return;await new Promise(_e=>{const ct=this._queueLoadingCallback(_e);this._prepareFontLoadEvent(b,ct)})}}get isFontLoadingAPISupported(){var $;const b=!!(($=this._document)!=null&&$.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){let b=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(b=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function $(){for((0,a.assert)(!ct.done,"completeRequest() cannot be called twice."),ct.done=!0;_e.length>0&&_e[0].done;){const ut=_e.shift();setTimeout(ut.callback,0)}}const{loadingRequests:_e}=this,ct={done:!1,complete:$,callback:b};return _e.push(ct),ct}get _loadTestFont(){const b=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",b)}_prepareFontLoadEvent(b,$){function _e(xt,wt){return xt.charCodeAt(wt)<<24|xt.charCodeAt(wt+1)<<16|xt.charCodeAt(wt+2)<<8|xt.charCodeAt(wt+3)&255}function ct(xt,wt,jt,sn){const Kt=xt.substring(0,wt),Yt=xt.substring(wt+jt);return Kt+sn+Yt}let ut,ht;const pt=this._document.createElement("canvas");pt.width=1,pt.height=1;const yt=pt.getContext("2d");let bt=0;function et(xt,wt){if(++bt>30){(0,a.warn)("Load test font never loaded."),wt();return}if(yt.font="30px "+xt,yt.fillText(".",0,20),yt.getImageData(0,0,1,1).data[3]>0){wt();return}setTimeout(et.bind(null,xt,wt))}const nt=`lt${Date.now()}${this.loadTestFontId++}`;let st=this._loadTestFont;st=ct(st,976,nt.length,nt);const ot=16,mt=1482184792;let it=_e(st,ot);for(ut=0,ht=nt.length-3;ut<ht;ut+=4)it=it-mt+_e(nt,ut)|0;ut<nt.length&&(it=it-mt+_e(nt+"XXX",ut)|0),st=ct(st,ot,4,(0,a.string32)(it));const dt=`url(data:font/opentype;base64,${btoa(st)});`,ft=`@font-face {font-family:"${nt}";src:${dt}}`;this.insertRule(ft);const Rt=this._document.createElement("div");Rt.style.visibility="hidden",Rt.style.width=Rt.style.height="10px",Rt.style.position="absolute",Rt.style.top=Rt.style.left="0px";for(const xt of[b.loadedName,nt]){const wt=this._document.createElement("span");wt.textContent="Hi",wt.style.fontFamily=xt,Rt.append(wt)}this._document.body.append(Rt),et(nt,()=>{Rt.remove(),$.complete()})}}h=new WeakMap,s.FontLoader=o;class c{constructor(b,{isEvalSupported:$=!0,disableFontFace:_e=!1,ignoreErrors:ct=!1,inspectFont:ut=null}){this.compiledGlyphs=Object.create(null);for(const ht in b)this[ht]=b[ht];this.isEvalSupported=$!==!1,this.disableFontFace=_e===!0,this.ignoreErrors=ct===!0,this._inspectFont=ut}createNativeFontFace(){var $;if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const _e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,_e)}return($=this._inspectFont)==null||$.call(this,this),b}createFontFaceRule(){var ct;if(!this.data||this.disableFontFace)return null;const b=(0,a.bytesToString)(this.data),$=`url(data:${this.mimetype};base64,${btoa(b)});`;let _e;if(!this.cssFontInfo)_e=`@font-face {font-family:"${this.loadedName}";src:${$}}`;else{let ut=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ut+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ut}src:${$}}`}return(ct=this._inspectFont)==null||ct.call(this,this,$),_e}getPathGenerator(b,$){if(this.compiledGlyphs[$]!==void 0)return this.compiledGlyphs[$];let _e;try{_e=b.get(this.loadedName+"_path_"+$)}catch(ct){if(!this.ignoreErrors)throw ct;return(0,a.warn)(`getPathGenerator - ignoring character: "${ct}".`),this.compiledGlyphs[$]=function(ut,ht){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const ct=[];for(const ut of _e){const ht=ut.args!==void 0?ut.args.join(","):"";ct.push("c.",ut.cmd,"(",ht,`);
`)}return this.compiledGlyphs[$]=new Function("c","size",ct.join(""))}return this.compiledGlyphs[$]=function(ct,ut){for(const ht of _e)ht.cmd==="scale"&&(ht.args=[ut,-ut]),ct[ht.cmd].apply(ct,ht.args)}}}s.FontFaceObject=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var a=i(7);i(1);const o=function($){return new Promise((_e,ct)=>{require$$5.readFile($,(ht,pt)=>{if(ht||!pt){ct(new Error(ht));return}_e(new Uint8Array(pt))})})};class c extends a.BaseFilterFactory{}s.NodeFilterFactory=c;class h extends a.BaseCanvasFactory{_createCanvas(_e,ct){return require$$5.createCanvas(_e,ct)}}s.NodeCanvasFactory=h;class j extends a.BaseCMapReaderFactory{_fetchData(_e,ct){return o(_e).then(ut=>({cMapData:ut,compressionType:ct}))}}s.NodeCMapReaderFactory=j;class b extends a.BaseStandardFontDataFactory{_fetchData(_e){return o(_e)}}s.NodeStandardFontDataFactory=b},(e,s,i)=>{var Ut,Mo,Fo;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var a=i(1),o=i(6),c=i(12),h=i(13);const j=16,b=100,$=4096,_e=15,ct=10,ut=1e3,ht=16;function pt(kt,rt){if(kt._removeMirroring)throw new Error("Context is already forwarding operations.");kt.__originalSave=kt.save,kt.__originalRestore=kt.restore,kt.__originalRotate=kt.rotate,kt.__originalScale=kt.scale,kt.__originalTranslate=kt.translate,kt.__originalTransform=kt.transform,kt.__originalSetTransform=kt.setTransform,kt.__originalResetTransform=kt.resetTransform,kt.__originalClip=kt.clip,kt.__originalMoveTo=kt.moveTo,kt.__originalLineTo=kt.lineTo,kt.__originalBezierCurveTo=kt.bezierCurveTo,kt.__originalRect=kt.rect,kt.__originalClosePath=kt.closePath,kt.__originalBeginPath=kt.beginPath,kt._removeMirroring=()=>{kt.save=kt.__originalSave,kt.restore=kt.__originalRestore,kt.rotate=kt.__originalRotate,kt.scale=kt.__originalScale,kt.translate=kt.__originalTranslate,kt.transform=kt.__originalTransform,kt.setTransform=kt.__originalSetTransform,kt.resetTransform=kt.__originalResetTransform,kt.clip=kt.__originalClip,kt.moveTo=kt.__originalMoveTo,kt.lineTo=kt.__originalLineTo,kt.bezierCurveTo=kt.__originalBezierCurveTo,kt.rect=kt.__originalRect,kt.closePath=kt.__originalClosePath,kt.beginPath=kt.__originalBeginPath,delete kt._removeMirroring},kt.save=function(){rt.save(),this.__originalSave()},kt.restore=function(){rt.restore(),this.__originalRestore()},kt.translate=function(Et,Ct){rt.translate(Et,Ct),this.__originalTranslate(Et,Ct)},kt.scale=function(Et,Ct){rt.scale(Et,Ct),this.__originalScale(Et,Ct)},kt.transform=function(Et,Ct,Pt,It,Bt,Lt){rt.transform(Et,Ct,Pt,It,Bt,Lt),this.__originalTransform(Et,Ct,Pt,It,Bt,Lt)},kt.setTransform=function(Et,Ct,Pt,It,Bt,Lt){rt.setTransform(Et,Ct,Pt,It,Bt,Lt),this.__originalSetTransform(Et,Ct,Pt,It,Bt,Lt)},kt.resetTransform=function(){rt.resetTransform(),this.__originalResetTransform()},kt.rotate=function(Et){rt.rotate(Et),this.__originalRotate(Et)},kt.clip=function(Et){rt.clip(Et),this.__originalClip(Et)},kt.moveTo=function(at,Et){rt.moveTo(at,Et),this.__originalMoveTo(at,Et)},kt.lineTo=function(at,Et){rt.lineTo(at,Et),this.__originalLineTo(at,Et)},kt.bezierCurveTo=function(at,Et,Ct,Pt,It,Bt){rt.bezierCurveTo(at,Et,Ct,Pt,It,Bt),this.__originalBezierCurveTo(at,Et,Ct,Pt,It,Bt)},kt.rect=function(at,Et,Ct,Pt){rt.rect(at,Et,Ct,Pt),this.__originalRect(at,Et,Ct,Pt)},kt.closePath=function(){rt.closePath(),this.__originalClosePath()},kt.beginPath=function(){rt.beginPath(),this.__originalBeginPath()}}class yt{constructor(rt){this.canvasFactory=rt,this.cache=Object.create(null)}getCanvas(rt,at,Et){let Ct;return this.cache[rt]!==void 0?(Ct=this.cache[rt],this.canvasFactory.reset(Ct,at,Et)):(Ct=this.canvasFactory.create(at,Et),this.cache[rt]=Ct),Ct}delete(rt){delete this.cache[rt]}clear(){for(const rt in this.cache){const at=this.cache[rt];this.canvasFactory.destroy(at),delete this.cache[rt]}}}function bt(kt,rt,at,Et,Ct,Pt,It,Bt,Lt,an){const[rn,En,kn,An,on,Vt]=(0,o.getCurrentTransform)(kt);if(En===0&&kn===0){const Gt=It*rn+on,Jt=Math.round(Gt),vn=Bt*An+Vt,Sn=Math.round(vn),Tn=(It+Lt)*rn+on,Zt=Math.abs(Math.round(Tn)-Jt)||1,In=(Bt+an)*An+Vt,Dn=Math.abs(Math.round(In)-Sn)||1;return kt.setTransform(Math.sign(rn),0,0,Math.sign(An),Jt,Sn),kt.drawImage(rt,at,Et,Ct,Pt,0,0,Zt,Dn),kt.setTransform(rn,En,kn,An,on,Vt),[Zt,Dn]}if(rn===0&&An===0){const Gt=Bt*kn+on,Jt=Math.round(Gt),vn=It*En+Vt,Sn=Math.round(vn),Tn=(Bt+an)*kn+on,Zt=Math.abs(Math.round(Tn)-Jt)||1,In=(It+Lt)*En+Vt,Dn=Math.abs(Math.round(In)-Sn)||1;return kt.setTransform(0,Math.sign(En),Math.sign(kn),0,Jt,Sn),kt.drawImage(rt,at,Et,Ct,Pt,0,0,Dn,Zt),kt.setTransform(rn,En,kn,An,on,Vt),[Dn,Zt]}kt.drawImage(rt,at,Et,Ct,Pt,It,Bt,Lt,an);const St=Math.hypot(rn,En),Nt=Math.hypot(kn,An);return[St*Lt,Nt*an]}function et(kt){const{width:rt,height:at}=kt;if(rt>ut||at>ut)return null;const Et=1e3,Ct=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Pt=rt+1;let It=new Uint8Array(Pt*(at+1)),Bt,Lt,an;const rn=rt+7&-8;let En=new Uint8Array(rn*at),kn=0;for(const Nt of kt.data){let Gt=128;for(;Gt>0;)En[kn++]=Nt&Gt?0:255,Gt>>=1}let An=0;for(kn=0,En[kn]!==0&&(It[0]=1,++An),Lt=1;Lt<rt;Lt++)En[kn]!==En[kn+1]&&(It[Lt]=En[kn]?2:1,++An),kn++;for(En[kn]!==0&&(It[Lt]=2,++An),Bt=1;Bt<at;Bt++){kn=Bt*rn,an=Bt*Pt,En[kn-rn]!==En[kn]&&(It[an]=En[kn]?1:8,++An);let Nt=(En[kn]?4:0)+(En[kn-rn]?8:0);for(Lt=1;Lt<rt;Lt++)Nt=(Nt>>2)+(En[kn+1]?4:0)+(En[kn-rn+1]?8:0),Ct[Nt]&&(It[an+Lt]=Ct[Nt],++An),kn++;if(En[kn-rn]!==En[kn]&&(It[an+Lt]=En[kn]?2:4,++An),An>Et)return null}for(kn=rn*(at-1),an=Bt*Pt,En[kn]!==0&&(It[an]=8,++An),Lt=1;Lt<rt;Lt++)En[kn]!==En[kn+1]&&(It[an+Lt]=En[kn]?4:8,++An),kn++;if(En[kn]!==0&&(It[an+Lt]=4,++An),An>Et)return null;const on=new Int32Array([0,Pt,-1,0,-Pt,0,0,0,1]),Vt=new Path2D;for(Bt=0;An&&Bt<=at;Bt++){let Nt=Bt*Pt;const Gt=Nt+rt;for(;Nt<Gt&&!It[Nt];)Nt++;if(Nt===Gt)continue;Vt.moveTo(Nt%Pt,Bt);const Jt=Nt;let vn=It[Nt];do{const Sn=on[vn];do Nt+=Sn;while(!It[Nt]);const Tn=It[Nt];Tn!==5&&Tn!==10?(vn=Tn,It[Nt]=0):(vn=Tn&51*vn>>4,It[Nt]&=vn>>2|vn<<2),Vt.lineTo(Nt%Pt,Nt/Pt|0),It[Nt]||--An}while(Jt!==Nt);--Bt}return En=null,It=null,function(Nt){Nt.save(),Nt.scale(1/rt,-1/at),Nt.translate(0,-at),Nt.fill(Vt),Nt.beginPath(),Nt.restore()}}class nt{constructor(rt,at){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,rt,at])}clone(){const rt=Object.create(this);return rt.clipBox=this.clipBox.slice(),rt}setCurrentPoint(rt,at){this.x=rt,this.y=at}updatePathMinMax(rt,at,Et){[at,Et]=a.Util.applyTransform([at,Et],rt),this.minX=Math.min(this.minX,at),this.minY=Math.min(this.minY,Et),this.maxX=Math.max(this.maxX,at),this.maxY=Math.max(this.maxY,Et)}updateRectMinMax(rt,at){const Et=a.Util.applyTransform(at,rt),Ct=a.Util.applyTransform(at.slice(2),rt);this.minX=Math.min(this.minX,Et[0],Ct[0]),this.minY=Math.min(this.minY,Et[1],Ct[1]),this.maxX=Math.max(this.maxX,Et[0],Ct[0]),this.maxY=Math.max(this.maxY,Et[1],Ct[1])}updateScalingPathMinMax(rt,at){a.Util.scaleMinMax(rt,at),this.minX=Math.min(this.minX,at[0]),this.maxX=Math.max(this.maxX,at[1]),this.minY=Math.min(this.minY,at[2]),this.maxY=Math.max(this.maxY,at[3])}updateCurvePathMinMax(rt,at,Et,Ct,Pt,It,Bt,Lt,an,rn){const En=a.Util.bezierBoundingBox(at,Et,Ct,Pt,It,Bt,Lt,an);if(rn){rn[0]=Math.min(rn[0],En[0],En[2]),rn[1]=Math.max(rn[1],En[0],En[2]),rn[2]=Math.min(rn[2],En[1],En[3]),rn[3]=Math.max(rn[3],En[1],En[3]);return}this.updateRectMinMax(rt,En)}getPathBoundingBox(rt=c.PathType.FILL,at=null){const Et=[this.minX,this.minY,this.maxX,this.maxY];if(rt===c.PathType.STROKE){at||(0,a.unreachable)("Stroke bounding box must include transform.");const Ct=a.Util.singularValueDecompose2dScale(at),Pt=Ct[0]*this.lineWidth/2,It=Ct[1]*this.lineWidth/2;Et[0]-=Pt,Et[1]-=It,Et[2]+=Pt,Et[3]+=It}return Et}updateClipFromPath(){const rt=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(rt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(rt){this.clipBox=rt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(rt=c.PathType.FILL,at=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(rt,at))}}function st(kt,rt){if(typeof ImageData<"u"&&rt instanceof ImageData){kt.putImageData(rt,0,0);return}const at=rt.height,Et=rt.width,Ct=at%ht,Pt=(at-Ct)/ht,It=Ct===0?Pt:Pt+1,Bt=kt.createImageData(Et,ht);let Lt=0,an;const rn=rt.data,En=Bt.data;let kn,An,on,Vt;if(rt.kind===a.ImageKind.GRAYSCALE_1BPP){const St=rn.byteLength,Nt=new Uint32Array(En.buffer,0,En.byteLength>>2),Gt=Nt.length,Jt=Et+7>>3,vn=4294967295,Sn=a.FeatureTest.isLittleEndian?4278190080:255;for(kn=0;kn<It;kn++){for(on=kn<Pt?ht:Ct,an=0,An=0;An<on;An++){const Tn=St-Lt;let Zt=0;const In=Tn>Jt?Et:Tn*8-7,Dn=In&-8;let rr=0,Zn=0;for(;Zt<Dn;Zt+=8)Zn=rn[Lt++],Nt[an++]=Zn&128?vn:Sn,Nt[an++]=Zn&64?vn:Sn,Nt[an++]=Zn&32?vn:Sn,Nt[an++]=Zn&16?vn:Sn,Nt[an++]=Zn&8?vn:Sn,Nt[an++]=Zn&4?vn:Sn,Nt[an++]=Zn&2?vn:Sn,Nt[an++]=Zn&1?vn:Sn;for(;Zt<In;Zt++)rr===0&&(Zn=rn[Lt++],rr=128),Nt[an++]=Zn&rr?vn:Sn,rr>>=1}for(;an<Gt;)Nt[an++]=0;kt.putImageData(Bt,0,kn*ht)}}else if(rt.kind===a.ImageKind.RGBA_32BPP){for(An=0,Vt=Et*ht*4,kn=0;kn<Pt;kn++)En.set(rn.subarray(Lt,Lt+Vt)),Lt+=Vt,kt.putImageData(Bt,0,An),An+=ht;kn<It&&(Vt=Et*Ct*4,En.set(rn.subarray(Lt,Lt+Vt)),kt.putImageData(Bt,0,An))}else if(rt.kind===a.ImageKind.RGB_24BPP)for(on=ht,Vt=Et*on,kn=0;kn<It;kn++){for(kn>=Pt&&(on=Ct,Vt=Et*on),an=0,An=Vt;An--;)En[an++]=rn[Lt++],En[an++]=rn[Lt++],En[an++]=rn[Lt++],En[an++]=255;kt.putImageData(Bt,0,kn*ht)}else throw new Error(`bad image kind: ${rt.kind}`)}function gt(kt,rt){if(rt.bitmap){kt.drawImage(rt.bitmap,0,0);return}const at=rt.height,Et=rt.width,Ct=at%ht,Pt=(at-Ct)/ht,It=Ct===0?Pt:Pt+1,Bt=kt.createImageData(Et,ht);let Lt=0;const an=rt.data,rn=Bt.data;for(let En=0;En<It;En++){const kn=En<Pt?ht:Ct;({srcPos:Lt}=(0,h.convertBlackAndWhiteToRGBA)({src:an,srcPos:Lt,dest:rn,width:Et,height:kn,nonBlackColor:0})),kt.putImageData(Bt,0,En*ht)}}function ot(kt,rt){const at=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Et of at)kt[Et]!==void 0&&(rt[Et]=kt[Et]);kt.setLineDash!==void 0&&(rt.setLineDash(kt.getLineDash()),rt.lineDashOffset=kt.lineDashOffset)}function mt(kt){if(kt.strokeStyle=kt.fillStyle="#000000",kt.fillRule="nonzero",kt.globalAlpha=1,kt.lineWidth=1,kt.lineCap="butt",kt.lineJoin="miter",kt.miterLimit=10,kt.globalCompositeOperation="source-over",kt.font="10px sans-serif",kt.setLineDash!==void 0&&(kt.setLineDash([]),kt.lineDashOffset=0),!a.isNodeJS){const{filter:rt}=kt;rt!=="none"&&rt!==""&&(kt.filter="none")}}function it(kt,rt,at,Et){const Ct=kt.length;for(let Pt=3;Pt<Ct;Pt+=4){const It=kt[Pt];if(It===0)kt[Pt-3]=rt,kt[Pt-2]=at,kt[Pt-1]=Et;else if(It<255){const Bt=255-It;kt[Pt-3]=kt[Pt-3]*It+rt*Bt>>8,kt[Pt-2]=kt[Pt-2]*It+at*Bt>>8,kt[Pt-1]=kt[Pt-1]*It+Et*Bt>>8}}}function dt(kt,rt,at){const Et=kt.length,Ct=1/255;for(let Pt=3;Pt<Et;Pt+=4){const It=at?at[kt[Pt]]:kt[Pt];rt[Pt]=rt[Pt]*It*Ct|0}}function ft(kt,rt,at){const Et=kt.length;for(let Ct=3;Ct<Et;Ct+=4){const Pt=kt[Ct-3]*77+kt[Ct-2]*152+kt[Ct-1]*28;rt[Ct]=at?rt[Ct]*at[Pt>>8]>>8:rt[Ct]*Pt>>16}}function Rt(kt,rt,at,Et,Ct,Pt,It,Bt,Lt,an,rn){const En=!!Pt,kn=En?Pt[0]:0,An=En?Pt[1]:0,on=En?Pt[2]:0,Vt=Ct==="Luminosity"?ft:dt,Nt=Math.min(Et,Math.ceil(1048576/at));for(let Gt=0;Gt<Et;Gt+=Nt){const Jt=Math.min(Nt,Et-Gt),vn=kt.getImageData(Bt-an,Gt+(Lt-rn),at,Jt),Sn=rt.getImageData(Bt,Gt+Lt,at,Jt);En&&it(vn.data,kn,An,on),Vt(vn.data,Sn.data,It),rt.putImageData(Sn,Bt,Gt+Lt)}}function xt(kt,rt,at,Et){const Ct=Et[0],Pt=Et[1],It=Et[2]-Ct,Bt=Et[3]-Pt;It===0||Bt===0||(Rt(rt.context,at,It,Bt,rt.subtype,rt.backdrop,rt.transferMap,Ct,Pt,rt.offsetX,rt.offsetY),kt.save(),kt.globalAlpha=1,kt.globalCompositeOperation="source-over",kt.setTransform(1,0,0,1,0,0),kt.drawImage(at.canvas,0,0),kt.restore())}function wt(kt,rt){const at=a.Util.singularValueDecompose2dScale(kt);at[0]=Math.fround(at[0]),at[1]=Math.fround(at[1]);const Et=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return rt!==void 0?rt:at[0]<=Et||at[1]<=Et}const jt=["butt","round","square"],sn=["miter","round","bevel"],Kt={},Yt={},Xt=class Xt{constructor(rt,at,Et,Ct,Pt,{optionalContentConfig:It,markedContentStack:Bt=null},Lt,an){dn(this,Ut);this.ctx=rt,this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=at,this.objs=Et,this.canvasFactory=Ct,this.filterFactory=Pt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Bt||[],this.optionalContentConfig=It,this.cachedCanvases=new yt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Lt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=an,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(rt,at=null){return typeof rt=="string"?rt.startsWith("g_")?this.commonObjs.get(rt):this.objs.get(rt):at}beginDrawing({transform:rt,viewport:at,transparency:Et=!1,background:Ct=null}){const Pt=this.ctx.canvas.width,It=this.ctx.canvas.height,Bt=this.ctx.fillStyle;if(this.ctx.fillStyle=Ct||"#ffffff",this.ctx.fillRect(0,0,Pt,It),this.ctx.fillStyle=Bt,Et){const Lt=this.cachedCanvases.getCanvas("transparent",Pt,It);this.compositeCtx=this.ctx,this.transparentCanvas=Lt.canvas,this.ctx=Lt.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),mt(this.ctx),rt&&(this.ctx.transform(...rt),this.outputScaleX=rt[0],this.outputScaleY=rt[0]),this.ctx.transform(...at.transform),this.viewportScale=at.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(rt,at,Et,Ct){const Pt=rt.argsArray,It=rt.fnArray;let Bt=at||0;const Lt=Pt.length;if(Lt===Bt)return Bt;const an=Lt-Bt>ct&&typeof Et=="function",rn=an?Date.now()+_e:0;let En=0;const kn=this.commonObjs,An=this.objs;let on;for(;;){if(Ct!==void 0&&Bt===Ct.nextBreakPoint)return Ct.breakIt(Bt,Et),Bt;if(on=It[Bt],on!==a.OPS.dependency)this[on].apply(this,Pt[Bt]);else for(const Vt of Pt[Bt]){const St=Vt.startsWith("g_")?kn:An;if(!St.has(Vt))return St.get(Vt,Et),Bt}if(Bt++,Bt===Lt)return Bt;if(an&&++En>ct){if(Date.now()>rn)return Et(),Bt;En=0}}}endDrawing(){Qt(this,Ut,Mo).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const rt of this._cachedBitmapsMap.values()){for(const at of rt.values())typeof HTMLCanvasElement<"u"&&at instanceof HTMLCanvasElement&&(at.width=at.height=0);rt.clear()}this._cachedBitmapsMap.clear(),Qt(this,Ut,Fo).call(this)}_scaleImage(rt,at){const Et=rt.width,Ct=rt.height;let Pt=Math.max(Math.hypot(at[0],at[1]),1),It=Math.max(Math.hypot(at[2],at[3]),1),Bt=Et,Lt=Ct,an="prescale1",rn,En;for(;Pt>2&&Bt>1||It>2&&Lt>1;){let kn=Bt,An=Lt;Pt>2&&Bt>1&&(kn=Bt>=16384?Math.floor(Bt/2)-1||1:Math.ceil(Bt/2),Pt/=Bt/kn),It>2&&Lt>1&&(An=Lt>=16384?Math.floor(Lt/2)-1||1:Math.ceil(Lt)/2,It/=Lt/An),rn=this.cachedCanvases.getCanvas(an,kn,An),En=rn.context,En.clearRect(0,0,kn,An),En.drawImage(rt,0,0,Bt,Lt,0,0,kn,An),rt=rn.canvas,Bt=kn,Lt=An,an=an==="prescale1"?"prescale2":"prescale1"}return{img:rt,paintWidth:Bt,paintHeight:Lt}}_createMaskCanvas(rt){const at=this.ctx,{width:Et,height:Ct}=rt,Pt=this.current.fillColor,It=this.current.patternFill,Bt=(0,o.getCurrentTransform)(at);let Lt,an,rn,En;if((rt.bitmap||rt.data)&&rt.count>1){const Zt=rt.bitmap||rt.data.buffer;an=JSON.stringify(It?Bt:[Bt.slice(0,4),Pt]),Lt=this._cachedBitmapsMap.get(Zt),Lt||(Lt=new Map,this._cachedBitmapsMap.set(Zt,Lt));const In=Lt.get(an);if(In&&!It){const Dn=Math.round(Math.min(Bt[0],Bt[2])+Bt[4]),rr=Math.round(Math.min(Bt[1],Bt[3])+Bt[5]);return{canvas:In,offsetX:Dn,offsetY:rr}}rn=In}rn||(En=this.cachedCanvases.getCanvas("maskCanvas",Et,Ct),gt(En.context,rt));let kn=a.Util.transform(Bt,[1/Et,0,0,-1/Ct,0,0]);kn=a.Util.transform(kn,[1,0,0,1,0,-Ct]);const An=a.Util.applyTransform([0,0],kn),on=a.Util.applyTransform([Et,Ct],kn),Vt=a.Util.normalizeRect([An[0],An[1],on[0],on[1]]),St=Math.round(Vt[2]-Vt[0])||1,Nt=Math.round(Vt[3]-Vt[1])||1,Gt=this.cachedCanvases.getCanvas("fillCanvas",St,Nt),Jt=Gt.context,vn=Math.min(An[0],on[0]),Sn=Math.min(An[1],on[1]);Jt.translate(-vn,-Sn),Jt.transform(...kn),rn||(rn=this._scaleImage(En.canvas,(0,o.getCurrentTransformInverse)(Jt)),rn=rn.img,Lt&&It&&Lt.set(an,rn)),Jt.imageSmoothingEnabled=wt((0,o.getCurrentTransform)(Jt),rt.interpolate),bt(Jt,rn,0,0,rn.width,rn.height,0,0,Et,Ct),Jt.globalCompositeOperation="source-in";const Tn=a.Util.transform((0,o.getCurrentTransformInverse)(Jt),[1,0,0,1,-vn,-Sn]);return Jt.fillStyle=It?Pt.getPattern(at,this,Tn,c.PathType.FILL):Pt,Jt.fillRect(0,0,Et,Ct),Lt&&!It&&(this.cachedCanvases.delete("fillCanvas"),Lt.set(an,Gt.canvas)),{canvas:Gt.canvas,offsetX:Math.round(vn),offsetY:Math.round(Sn)}}setLineWidth(rt){rt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=rt,this.ctx.lineWidth=rt}setLineCap(rt){this.ctx.lineCap=jt[rt]}setLineJoin(rt){this.ctx.lineJoin=sn[rt]}setMiterLimit(rt){this.ctx.miterLimit=rt}setDash(rt,at){const Et=this.ctx;Et.setLineDash!==void 0&&(Et.setLineDash(rt),Et.lineDashOffset=at)}setRenderingIntent(rt){}setFlatness(rt){}setGState(rt){for(const[at,Et]of rt)switch(at){case"LW":this.setLineWidth(Et);break;case"LC":this.setLineCap(Et);break;case"LJ":this.setLineJoin(Et);break;case"ML":this.setMiterLimit(Et);break;case"D":this.setDash(Et[0],Et[1]);break;case"RI":this.setRenderingIntent(Et);break;case"FL":this.setFlatness(Et);break;case"Font":this.setFont(Et[0],Et[1]);break;case"CA":this.current.strokeAlpha=Et;break;case"ca":this.current.fillAlpha=Et,this.ctx.globalAlpha=Et;break;case"BM":this.ctx.globalCompositeOperation=Et;break;case"SMask":this.current.activeSMask=Et?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Et);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const rt=this.inSMaskMode;this.current.activeSMask&&!rt?this.beginSMaskMode():!this.current.activeSMask&&rt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const rt=this.ctx.canvas.width,at=this.ctx.canvas.height,Et="smaskGroupAt"+this.groupLevel,Ct=this.cachedCanvases.getCanvas(Et,rt,at);this.suspendedCtx=this.ctx,this.ctx=Ct.context;const Pt=this.ctx;Pt.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),ot(this.suspendedCtx,Pt),pt(Pt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ot(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(rt){if(!this.current.activeSMask)return;rt?(rt[0]=Math.floor(rt[0]),rt[1]=Math.floor(rt[1]),rt[2]=Math.ceil(rt[2]),rt[3]=Math.ceil(rt[3])):rt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const at=this.current.activeSMask,Et=this.suspendedCtx;xt(Et,at,this.ctx,rt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ot(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const rt=this.current;this.stateStack.push(rt),this.current=rt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ot(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(rt,at,Et,Ct,Pt,It){this.ctx.transform(rt,at,Et,Ct,Pt,It),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(rt,at,Et){const Ct=this.ctx,Pt=this.current;let It=Pt.x,Bt=Pt.y,Lt,an;const rn=(0,o.getCurrentTransform)(Ct),En=rn[0]===0&&rn[3]===0||rn[1]===0&&rn[2]===0,kn=En?Et.slice(0):null;for(let An=0,on=0,Vt=rt.length;An<Vt;An++)switch(rt[An]|0){case a.OPS.rectangle:It=at[on++],Bt=at[on++];const St=at[on++],Nt=at[on++],Gt=It+St,Jt=Bt+Nt;Ct.moveTo(It,Bt),St===0||Nt===0?Ct.lineTo(Gt,Jt):(Ct.lineTo(Gt,Bt),Ct.lineTo(Gt,Jt),Ct.lineTo(It,Jt)),En||Pt.updateRectMinMax(rn,[It,Bt,Gt,Jt]),Ct.closePath();break;case a.OPS.moveTo:It=at[on++],Bt=at[on++],Ct.moveTo(It,Bt),En||Pt.updatePathMinMax(rn,It,Bt);break;case a.OPS.lineTo:It=at[on++],Bt=at[on++],Ct.lineTo(It,Bt),En||Pt.updatePathMinMax(rn,It,Bt);break;case a.OPS.curveTo:Lt=It,an=Bt,It=at[on+4],Bt=at[on+5],Ct.bezierCurveTo(at[on],at[on+1],at[on+2],at[on+3],It,Bt),Pt.updateCurvePathMinMax(rn,Lt,an,at[on],at[on+1],at[on+2],at[on+3],It,Bt,kn),on+=6;break;case a.OPS.curveTo2:Lt=It,an=Bt,Ct.bezierCurveTo(It,Bt,at[on],at[on+1],at[on+2],at[on+3]),Pt.updateCurvePathMinMax(rn,Lt,an,It,Bt,at[on],at[on+1],at[on+2],at[on+3],kn),It=at[on+2],Bt=at[on+3],on+=4;break;case a.OPS.curveTo3:Lt=It,an=Bt,It=at[on+2],Bt=at[on+3],Ct.bezierCurveTo(at[on],at[on+1],It,Bt,It,Bt),Pt.updateCurvePathMinMax(rn,Lt,an,at[on],at[on+1],It,Bt,It,Bt,kn),on+=4;break;case a.OPS.closePath:Ct.closePath();break}En&&Pt.updateScalingPathMinMax(rn,kn),Pt.setCurrentPoint(It,Bt)}closePath(){this.ctx.closePath()}stroke(rt=!0){const at=this.ctx,Et=this.current.strokeColor;at.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Et=="object"&&(Et!=null&&Et.getPattern)?(at.save(),at.strokeStyle=Et.getPattern(at,this,(0,o.getCurrentTransformInverse)(at),c.PathType.STROKE),this.rescaleAndStroke(!1),at.restore()):this.rescaleAndStroke(!0)),rt&&this.consumePath(this.current.getClippedPathBoundingBox()),at.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(rt=!0){const at=this.ctx,Et=this.current.fillColor,Ct=this.current.patternFill;let Pt=!1;Ct&&(at.save(),at.fillStyle=Et.getPattern(at,this,(0,o.getCurrentTransformInverse)(at),c.PathType.FILL),Pt=!0);const It=this.current.getClippedPathBoundingBox();this.contentVisible&&It!==null&&(this.pendingEOFill?(at.fill("evenodd"),this.pendingEOFill=!1):at.fill()),Pt&&at.restore(),rt&&this.consumePath(It)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Kt}eoClip(){this.pendingClip=Yt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const rt=this.pendingTextPaths,at=this.ctx;if(rt===void 0){at.beginPath();return}at.save(),at.beginPath();for(const Et of rt)at.setTransform(...Et.transform),at.translate(Et.x,Et.y),Et.addToPath(at,Et.fontSize);at.restore(),at.clip(),at.beginPath(),delete this.pendingTextPaths}setCharSpacing(rt){this.current.charSpacing=rt}setWordSpacing(rt){this.current.wordSpacing=rt}setHScale(rt){this.current.textHScale=rt/100}setLeading(rt){this.current.leading=-rt}setFont(rt,at){var rn;const Et=this.commonObjs.get(rt),Ct=this.current;if(!Et)throw new Error(`Can't find font for ${rt}`);if(Ct.fontMatrix=Et.fontMatrix||a.FONT_IDENTITY_MATRIX,(Ct.fontMatrix[0]===0||Ct.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+rt),at<0?(at=-at,Ct.fontDirection=-1):Ct.fontDirection=1,this.current.font=Et,this.current.fontSize=at,Et.isType3Font)return;const Pt=Et.loadedName||"sans-serif",It=((rn=Et.systemFontInfo)==null?void 0:rn.css)||`"${Pt}", ${Et.fallbackName}`;let Bt="normal";Et.black?Bt="900":Et.bold&&(Bt="bold");const Lt=Et.italic?"italic":"normal";let an=at;at<j?an=j:at>b&&(an=b),this.current.fontSizeScale=at/an,this.ctx.font=`${Lt} ${Bt} ${an}px ${It}`}setTextRenderingMode(rt){this.current.textRenderingMode=rt}setTextRise(rt){this.current.textRise=rt}moveText(rt,at){this.current.x=this.current.lineX+=rt,this.current.y=this.current.lineY+=at}setLeadingMoveText(rt,at){this.setLeading(-at),this.moveText(rt,at)}setTextMatrix(rt,at,Et,Ct,Pt,It){this.current.textMatrix=[rt,at,Et,Ct,Pt,It],this.current.textMatrixScale=Math.hypot(rt,at),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(rt,at,Et,Ct){const Pt=this.ctx,It=this.current,Bt=It.font,Lt=It.textRenderingMode,an=It.fontSize/It.fontSizeScale,rn=Lt&a.TextRenderingMode.FILL_STROKE_MASK,En=!!(Lt&a.TextRenderingMode.ADD_TO_PATH_FLAG),kn=It.patternFill&&!Bt.missingFile;let An;(Bt.disableFontFace||En||kn)&&(An=Bt.getPathGenerator(this.commonObjs,rt)),Bt.disableFontFace||kn?(Pt.save(),Pt.translate(at,Et),Pt.beginPath(),An(Pt,an),Ct&&Pt.setTransform(...Ct),(rn===a.TextRenderingMode.FILL||rn===a.TextRenderingMode.FILL_STROKE)&&Pt.fill(),(rn===a.TextRenderingMode.STROKE||rn===a.TextRenderingMode.FILL_STROKE)&&Pt.stroke(),Pt.restore()):((rn===a.TextRenderingMode.FILL||rn===a.TextRenderingMode.FILL_STROKE)&&Pt.fillText(rt,at,Et),(rn===a.TextRenderingMode.STROKE||rn===a.TextRenderingMode.FILL_STROKE)&&Pt.strokeText(rt,at,Et)),En&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(Pt),x:at,y:Et,fontSize:an,addToPath:An})}get isFontSubpixelAAEnabled(){const{context:rt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);rt.scale(1.5,1),rt.fillText("I",0,10);const at=rt.getImageData(0,0,10,10).data;let Et=!1;for(let Ct=3;Ct<at.length;Ct+=4)if(at[Ct]>0&&at[Ct]<255){Et=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",Et)}showText(rt){const at=this.current,Et=at.font;if(Et.isType3Font)return this.showType3Text(rt);const Ct=at.fontSize;if(Ct===0)return;const Pt=this.ctx,It=at.fontSizeScale,Bt=at.charSpacing,Lt=at.wordSpacing,an=at.fontDirection,rn=at.textHScale*an,En=rt.length,kn=Et.vertical,An=kn?1:-1,on=Et.defaultVMetrics,Vt=Ct*at.fontMatrix[0],St=at.textRenderingMode===a.TextRenderingMode.FILL&&!Et.disableFontFace&&!at.patternFill;Pt.save(),Pt.transform(...at.textMatrix),Pt.translate(at.x,at.y+at.textRise),an>0?Pt.scale(rn,-1):Pt.scale(rn,1);let Nt;if(at.patternFill){Pt.save();const Tn=at.fillColor.getPattern(Pt,this,(0,o.getCurrentTransformInverse)(Pt),c.PathType.FILL);Nt=(0,o.getCurrentTransform)(Pt),Pt.restore(),Pt.fillStyle=Tn}let Gt=at.lineWidth;const Jt=at.textMatrixScale;if(Jt===0||Gt===0){const Tn=at.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(Tn===a.TextRenderingMode.STROKE||Tn===a.TextRenderingMode.FILL_STROKE)&&(Gt=this.getSinglePixelWidth())}else Gt/=Jt;if(It!==1&&(Pt.scale(It,It),Gt/=It),Pt.lineWidth=Gt,Et.isInvalidPDFjsFont){const Tn=[];let Zt=0;for(const In of rt)Tn.push(In.unicode),Zt+=In.width;Pt.fillText(Tn.join(""),0,0),at.x+=Zt*Vt*rn,Pt.restore(),this.compose();return}let vn=0,Sn;for(Sn=0;Sn<En;++Sn){const Tn=rt[Sn];if(typeof Tn=="number"){vn+=An*Tn*Ct/1e3;continue}let Zt=!1;const In=(Tn.isSpace?Lt:0)+Bt,Dn=Tn.fontChar,rr=Tn.accent;let Zn,or,Wn=Tn.width;if(kn){const ar=Tn.vmetric||on,dr=-(Tn.vmetric?ar[1]:Wn*.5)*Vt,Rn=ar[2]*Vt;Wn=ar?-ar[0]:Wn,Zn=dr/It,or=(vn+Rn)/It}else Zn=vn/It,or=0;if(Et.remeasure&&Wn>0){const ar=Pt.measureText(Dn).width*1e3/Ct*It;if(Wn<ar&&this.isFontSubpixelAAEnabled){const dr=Wn/ar;Zt=!0,Pt.save(),Pt.scale(dr,1),Zn/=dr}else Wn!==ar&&(Zn+=(Wn-ar)/2e3*Ct/It)}if(this.contentVisible&&(Tn.isInFont||Et.missingFile)){if(St&&!rr)Pt.fillText(Dn,Zn,or);else if(this.paintChar(Dn,Zn,or,Nt),rr){const ar=Zn+Ct*rr.offset.x/It,dr=or-Ct*rr.offset.y/It;this.paintChar(rr.fontChar,ar,dr,Nt)}}const Qn=kn?Wn*Vt-In*an:Wn*Vt+In*an;vn+=Qn,Zt&&Pt.restore()}kn?at.y-=vn:at.x+=vn*rn,Pt.restore(),this.compose()}showType3Text(rt){const at=this.ctx,Et=this.current,Ct=Et.font,Pt=Et.fontSize,It=Et.fontDirection,Bt=Ct.vertical?1:-1,Lt=Et.charSpacing,an=Et.wordSpacing,rn=Et.textHScale*It,En=Et.fontMatrix||a.FONT_IDENTITY_MATRIX,kn=rt.length,An=Et.textRenderingMode===a.TextRenderingMode.INVISIBLE;let on,Vt,St,Nt;if(!(An||Pt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,at.save(),at.transform(...Et.textMatrix),at.translate(Et.x,Et.y),at.scale(rn,It),on=0;on<kn;++on){if(Vt=rt[on],typeof Vt=="number"){Nt=Bt*Vt*Pt/1e3,this.ctx.translate(Nt,0),Et.x+=Nt*rn;continue}const Gt=(Vt.isSpace?an:0)+Lt,Jt=Ct.charProcOperatorList[Vt.operatorListId];if(!Jt){(0,a.warn)(`Type3 character "${Vt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Vt,this.save(),at.scale(Pt,Pt),at.transform(...En),this.executeOperatorList(Jt),this.restore()),St=a.Util.applyTransform([Vt.width,0],En)[0]*Pt+Gt,at.translate(St,0),Et.x+=St*rn}at.restore(),this.processingType3=null}}setCharWidth(rt,at){}setCharWidthAndBounds(rt,at,Et,Ct,Pt,It){this.ctx.rect(Et,Ct,Pt-Et,It-Ct),this.ctx.clip(),this.endPath()}getColorN_Pattern(rt){let at;if(rt[0]==="TilingPattern"){const Et=rt[1],Ct=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),Pt={createCanvasGraphics:It=>new Xt(It,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};at=new c.TilingPattern(rt,Et,this.ctx,Pt,Ct)}else at=this._getPattern(rt[1],rt[2]);return at}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(rt,at,Et){const Ct=a.Util.makeHexColor(rt,at,Et);this.ctx.strokeStyle=Ct,this.current.strokeColor=Ct}setFillRGBColor(rt,at,Et){const Ct=a.Util.makeHexColor(rt,at,Et);this.ctx.fillStyle=Ct,this.current.fillColor=Ct,this.current.patternFill=!1}_getPattern(rt,at=null){let Et;return this.cachedPatterns.has(rt)?Et=this.cachedPatterns.get(rt):(Et=(0,c.getShadingPattern)(this.getObject(rt)),this.cachedPatterns.set(rt,Et)),at&&(Et.matrix=at),Et}shadingFill(rt){if(!this.contentVisible)return;const at=this.ctx;this.save();const Et=this._getPattern(rt);at.fillStyle=Et.getPattern(at,this,(0,o.getCurrentTransformInverse)(at),c.PathType.SHADING);const Ct=(0,o.getCurrentTransformInverse)(at);if(Ct){const{width:Pt,height:It}=at.canvas,[Bt,Lt,an,rn]=a.Util.getAxialAlignedBoundingBox([0,0,Pt,It],Ct);this.ctx.fillRect(Bt,Lt,an-Bt,rn-Lt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(rt,at){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(rt)&&rt.length===6&&this.transform(...rt),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),at)){const Et=at[2]-at[0],Ct=at[3]-at[1];this.ctx.rect(at[0],at[1],Et,Ct),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),at),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(rt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const at=this.ctx;rt.isolated||(0,a.info)("TODO: Support non-isolated groups."),rt.knockout&&(0,a.warn)("Knockout groups not supported.");const Et=(0,o.getCurrentTransform)(at);if(rt.matrix&&at.transform(...rt.matrix),!rt.bbox)throw new Error("Bounding box is required.");let Ct=a.Util.getAxialAlignedBoundingBox(rt.bbox,(0,o.getCurrentTransform)(at));const Pt=[0,0,at.canvas.width,at.canvas.height];Ct=a.Util.intersect(Ct,Pt)||[0,0,0,0];const It=Math.floor(Ct[0]),Bt=Math.floor(Ct[1]);let Lt=Math.max(Math.ceil(Ct[2])-It,1),an=Math.max(Math.ceil(Ct[3])-Bt,1),rn=1,En=1;Lt>$&&(rn=Lt/$,Lt=$),an>$&&(En=an/$,an=$),this.current.startNewPathAndClipBox([0,0,Lt,an]);let kn="groupAt"+this.groupLevel;rt.smask&&(kn+="_smask_"+this.smaskCounter++%2);const An=this.cachedCanvases.getCanvas(kn,Lt,an),on=An.context;on.scale(1/rn,1/En),on.translate(-It,-Bt),on.transform(...Et),rt.smask?this.smaskStack.push({canvas:An.canvas,context:on,offsetX:It,offsetY:Bt,scaleX:rn,scaleY:En,subtype:rt.smask.subtype,backdrop:rt.smask.backdrop,transferMap:rt.smask.transferMap||null,startTransformInverse:null}):(at.setTransform(1,0,0,1,0,0),at.translate(It,Bt),at.scale(rn,En),at.save()),ot(at,on),this.ctx=on,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(at),this.groupLevel++}endGroup(rt){if(!this.contentVisible)return;this.groupLevel--;const at=this.ctx,Et=this.groupStack.pop();if(this.ctx=Et,this.ctx.imageSmoothingEnabled=!1,rt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Ct=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Ct);const Pt=a.Util.getAxialAlignedBoundingBox([0,0,at.canvas.width,at.canvas.height],Ct);this.ctx.drawImage(at.canvas,0,0),this.ctx.restore(),this.compose(Pt)}}beginAnnotation(rt,at,Et,Ct,Pt){if(Qt(this,Ut,Mo).call(this),mt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(at)&&at.length===4){const It=at[2]-at[0],Bt=at[3]-at[1];if(Pt&&this.annotationCanvasMap){Et=Et.slice(),Et[4]-=at[0],Et[5]-=at[1],at=at.slice(),at[0]=at[1]=0,at[2]=It,at[3]=Bt;const[Lt,an]=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:rn}=this,En=Math.ceil(It*this.outputScaleX*rn),kn=Math.ceil(Bt*this.outputScaleY*rn);this.annotationCanvas=this.canvasFactory.create(En,kn);const{canvas:An,context:on}=this.annotationCanvas;this.annotationCanvasMap.set(rt,An),this.annotationCanvas.savedCtx=this.ctx,this.ctx=on,this.ctx.save(),this.ctx.setTransform(Lt,0,0,-an,0,Bt*an),mt(this.ctx)}else mt(this.ctx),this.ctx.rect(at[0],at[1],It,Bt),this.ctx.clip(),this.endPath()}this.current=new nt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Et),this.transform(...Ct)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Qt(this,Ut,Fo).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(rt){if(!this.contentVisible)return;const at=rt.count;rt=this.getObject(rt.data,rt),rt.count=at;const Et=this.ctx,Ct=this.processingType3;if(Ct&&(Ct.compiled===void 0&&(Ct.compiled=et(rt)),Ct.compiled)){Ct.compiled(Et);return}const Pt=this._createMaskCanvas(rt),It=Pt.canvas;Et.save(),Et.setTransform(1,0,0,1,0,0),Et.drawImage(It,Pt.offsetX,Pt.offsetY),Et.restore(),this.compose()}paintImageMaskXObjectRepeat(rt,at,Et=0,Ct=0,Pt,It){if(!this.contentVisible)return;rt=this.getObject(rt.data,rt);const Bt=this.ctx;Bt.save();const Lt=(0,o.getCurrentTransform)(Bt);Bt.transform(at,Et,Ct,Pt,0,0);const an=this._createMaskCanvas(rt);Bt.setTransform(1,0,0,1,an.offsetX-Lt[4],an.offsetY-Lt[5]);for(let rn=0,En=It.length;rn<En;rn+=2){const kn=a.Util.transform(Lt,[at,Et,Ct,Pt,It[rn],It[rn+1]]),[An,on]=a.Util.applyTransform([0,0],kn);Bt.drawImage(an.canvas,An,on)}Bt.restore(),this.compose()}paintImageMaskXObjectGroup(rt){if(!this.contentVisible)return;const at=this.ctx,Et=this.current.fillColor,Ct=this.current.patternFill;for(const Pt of rt){const{data:It,width:Bt,height:Lt,transform:an}=Pt,rn=this.cachedCanvases.getCanvas("maskCanvas",Bt,Lt),En=rn.context;En.save();const kn=this.getObject(It,Pt);gt(En,kn),En.globalCompositeOperation="source-in",En.fillStyle=Ct?Et.getPattern(En,this,(0,o.getCurrentTransformInverse)(at),c.PathType.FILL):Et,En.fillRect(0,0,Bt,Lt),En.restore(),at.save(),at.transform(...an),at.scale(1,-1),bt(at,rn.canvas,0,0,Bt,Lt,0,-1,1,1),at.restore()}this.compose()}paintImageXObject(rt){if(!this.contentVisible)return;const at=this.getObject(rt);if(!at){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(at)}paintImageXObjectRepeat(rt,at,Et,Ct){if(!this.contentVisible)return;const Pt=this.getObject(rt);if(!Pt){(0,a.warn)("Dependent image isn't ready yet");return}const It=Pt.width,Bt=Pt.height,Lt=[];for(let an=0,rn=Ct.length;an<rn;an+=2)Lt.push({transform:[at,0,0,Et,Ct[an],Ct[an+1]],x:0,y:0,w:It,h:Bt});this.paintInlineImageXObjectGroup(Pt,Lt)}applyTransferMapsToCanvas(rt){return this.current.transferMaps!=="none"&&(rt.filter=this.current.transferMaps,rt.drawImage(rt.canvas,0,0),rt.filter="none"),rt.canvas}applyTransferMapsToBitmap(rt){if(this.current.transferMaps==="none")return rt.bitmap;const{bitmap:at,width:Et,height:Ct}=rt,Pt=this.cachedCanvases.getCanvas("inlineImage",Et,Ct),It=Pt.context;return It.filter=this.current.transferMaps,It.drawImage(at,0,0),It.filter="none",Pt.canvas}paintInlineImageXObject(rt){if(!this.contentVisible)return;const at=rt.width,Et=rt.height,Ct=this.ctx;if(this.save(),!a.isNodeJS){const{filter:Bt}=Ct;Bt!=="none"&&Bt!==""&&(Ct.filter="none")}Ct.scale(1/at,-1/Et);let Pt;if(rt.bitmap)Pt=this.applyTransferMapsToBitmap(rt);else if(typeof HTMLElement=="function"&&rt instanceof HTMLElement||!rt.data)Pt=rt;else{const Lt=this.cachedCanvases.getCanvas("inlineImage",at,Et).context;st(Lt,rt),Pt=this.applyTransferMapsToCanvas(Lt)}const It=this._scaleImage(Pt,(0,o.getCurrentTransformInverse)(Ct));Ct.imageSmoothingEnabled=wt((0,o.getCurrentTransform)(Ct),rt.interpolate),bt(Ct,It.img,0,0,It.paintWidth,It.paintHeight,0,-Et,at,Et),this.compose(),this.restore()}paintInlineImageXObjectGroup(rt,at){if(!this.contentVisible)return;const Et=this.ctx;let Ct;if(rt.bitmap)Ct=rt.bitmap;else{const Pt=rt.width,It=rt.height,Lt=this.cachedCanvases.getCanvas("inlineImage",Pt,It).context;st(Lt,rt),Ct=this.applyTransferMapsToCanvas(Lt)}for(const Pt of at)Et.save(),Et.transform(...Pt.transform),Et.scale(1,-1),bt(Et,Ct,Pt.x,Pt.y,Pt.w,Pt.h,0,-1,1,1),Et.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(rt){}markPointProps(rt,at){}beginMarkedContent(rt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(rt,at){rt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(at)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(rt){const at=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(rt);const Et=this.ctx;this.pendingClip&&(at||(this.pendingClip===Yt?Et.clip("evenodd"):Et.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Et.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const rt=(0,o.getCurrentTransform)(this.ctx);if(rt[1]===0&&rt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(rt[0]),Math.abs(rt[3]));else{const at=Math.abs(rt[0]*rt[3]-rt[2]*rt[1]),Et=Math.hypot(rt[0],rt[2]),Ct=Math.hypot(rt[1],rt[3]);this._cachedGetSinglePixelWidth=Math.max(Et,Ct)/at}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:rt}=this.current,{a:at,b:Et,c:Ct,d:Pt}=this.ctx.getTransform();let It,Bt;if(Et===0&&Ct===0){const Lt=Math.abs(at),an=Math.abs(Pt);if(Lt===an)if(rt===0)It=Bt=1/Lt;else{const rn=Lt*rt;It=Bt=rn<1?1/rn:1}else if(rt===0)It=1/Lt,Bt=1/an;else{const rn=Lt*rt,En=an*rt;It=rn<1?1/rn:1,Bt=En<1?1/En:1}}else{const Lt=Math.abs(at*Pt-Et*Ct),an=Math.hypot(at,Et),rn=Math.hypot(Ct,Pt);if(rt===0)It=rn/Lt,Bt=an/Lt;else{const En=rt*Lt;It=rn>En?rn/En:1,Bt=an>En?an/En:1}}this._cachedScaleForStroking[0]=It,this._cachedScaleForStroking[1]=Bt}return this._cachedScaleForStroking}rescaleAndStroke(rt){const{ctx:at}=this,{lineWidth:Et}=this.current,[Ct,Pt]=this.getScaleForStroking();if(at.lineWidth=Et||1,Ct===1&&Pt===1){at.stroke();return}const It=at.getLineDash();if(rt&&at.save(),at.scale(Ct,Pt),It.length>0){const Bt=Math.max(Ct,Pt);at.setLineDash(It.map(Lt=>Lt/Bt)),at.lineDashOffset/=Bt}at.stroke(),rt&&at.restore()}isContentVisible(){for(let rt=this.markedContentStack.length-1;rt>=0;rt--)if(!this.markedContentStack[rt].visible)return!1;return!0}};Ut=new WeakSet,Mo=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Fo=function(){if(this.pageColors){const rt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(rt!=="none"){const at=this.ctx.filter;this.ctx.filter=rt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=at}}};let Ht=Xt;s.CanvasGraphics=Ht;for(const kt in a.OPS)Ht.prototype[kt]!==void 0&&(Ht.prototype[a.OPS[kt]]=Ht.prototype[kt])},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=ht;var a=i(1),o=i(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=c;function h(et,nt){if(!nt)return;const st=nt[2]-nt[0],gt=nt[3]-nt[1],ot=new Path2D;ot.rect(nt[0],nt[1],st,gt),et.clip(ot)}class j{constructor(){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class b extends j{constructor(nt){super(),this._type=nt[1],this._bbox=nt[2],this._colorStops=nt[3],this._p0=nt[4],this._p1=nt[5],this._r0=nt[6],this._r1=nt[7],this.matrix=null}_createGradient(nt){let st;this._type==="axial"?st=nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(st=nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const gt of this._colorStops)st.addColorStop(gt[0],gt[1]);return st}getPattern(nt,st,gt,ot){let mt;if(ot===c.STROKE||ot===c.FILL){const it=st.current.getClippedPathBoundingBox(ot,(0,o.getCurrentTransform)(nt))||[0,0,0,0],dt=Math.ceil(it[2]-it[0])||1,ft=Math.ceil(it[3]-it[1])||1,Rt=st.cachedCanvases.getCanvas("pattern",dt,ft,!0),xt=Rt.context;xt.clearRect(0,0,xt.canvas.width,xt.canvas.height),xt.beginPath(),xt.rect(0,0,xt.canvas.width,xt.canvas.height),xt.translate(-it[0],-it[1]),gt=a.Util.transform(gt,[1,0,0,1,it[0],it[1]]),xt.transform(...st.baseTransform),this.matrix&&xt.transform(...this.matrix),h(xt,this._bbox),xt.fillStyle=this._createGradient(xt),xt.fill(),mt=nt.createPattern(Rt.canvas,"no-repeat");const wt=new DOMMatrix(gt);mt.setTransform(wt)}else h(nt,this._bbox),mt=this._createGradient(nt);return mt}}function $(et,nt,st,gt,ot,mt,it,dt){const ft=nt.coords,Rt=nt.colors,xt=et.data,wt=et.width*4;let jt;ft[st+1]>ft[gt+1]&&(jt=st,st=gt,gt=jt,jt=mt,mt=it,it=jt),ft[gt+1]>ft[ot+1]&&(jt=gt,gt=ot,ot=jt,jt=it,it=dt,dt=jt),ft[st+1]>ft[gt+1]&&(jt=st,st=gt,gt=jt,jt=mt,mt=it,it=jt);const sn=(ft[st]+nt.offsetX)*nt.scaleX,Kt=(ft[st+1]+nt.offsetY)*nt.scaleY,Yt=(ft[gt]+nt.offsetX)*nt.scaleX,Ht=(ft[gt+1]+nt.offsetY)*nt.scaleY,Ut=(ft[ot]+nt.offsetX)*nt.scaleX,At=(ft[ot+1]+nt.offsetY)*nt.scaleY;if(Kt>=At)return;const Ft=Rt[mt],Xt=Rt[mt+1],kt=Rt[mt+2],rt=Rt[it],at=Rt[it+1],Et=Rt[it+2],Ct=Rt[dt],Pt=Rt[dt+1],It=Rt[dt+2],Bt=Math.round(Kt),Lt=Math.round(At);let an,rn,En,kn,An,on,Vt,St;for(let Nt=Bt;Nt<=Lt;Nt++){if(Nt<Ht){const Tn=Nt<Kt?0:(Kt-Nt)/(Kt-Ht);an=sn-(sn-Yt)*Tn,rn=Ft-(Ft-rt)*Tn,En=Xt-(Xt-at)*Tn,kn=kt-(kt-Et)*Tn}else{let Tn;Nt>At?Tn=1:Ht===At?Tn=0:Tn=(Ht-Nt)/(Ht-At),an=Yt-(Yt-Ut)*Tn,rn=rt-(rt-Ct)*Tn,En=at-(at-Pt)*Tn,kn=Et-(Et-It)*Tn}let Gt;Nt<Kt?Gt=0:Nt>At?Gt=1:Gt=(Kt-Nt)/(Kt-At),An=sn-(sn-Ut)*Gt,on=Ft-(Ft-Ct)*Gt,Vt=Xt-(Xt-Pt)*Gt,St=kt-(kt-It)*Gt;const Jt=Math.round(Math.min(an,An)),vn=Math.round(Math.max(an,An));let Sn=wt*Nt+Jt*4;for(let Tn=Jt;Tn<=vn;Tn++)Gt=(an-Tn)/(an-An),Gt<0?Gt=0:Gt>1&&(Gt=1),xt[Sn++]=rn-(rn-on)*Gt|0,xt[Sn++]=En-(En-Vt)*Gt|0,xt[Sn++]=kn-(kn-St)*Gt|0,xt[Sn++]=255}}function _e(et,nt,st){const gt=nt.coords,ot=nt.colors;let mt,it;switch(nt.type){case"lattice":const dt=nt.verticesPerRow,ft=Math.floor(gt.length/dt)-1,Rt=dt-1;for(mt=0;mt<ft;mt++){let xt=mt*dt;for(let wt=0;wt<Rt;wt++,xt++)$(et,st,gt[xt],gt[xt+1],gt[xt+dt],ot[xt],ot[xt+1],ot[xt+dt]),$(et,st,gt[xt+dt+1],gt[xt+1],gt[xt+dt],ot[xt+dt+1],ot[xt+1],ot[xt+dt])}break;case"triangles":for(mt=0,it=gt.length;mt<it;mt+=3)$(et,st,gt[mt],gt[mt+1],gt[mt+2],ot[mt],ot[mt+1],ot[mt+2]);break;default:throw new Error("illegal figure")}}class ct extends j{constructor(nt){super(),this._coords=nt[2],this._colors=nt[3],this._figures=nt[4],this._bounds=nt[5],this._bbox=nt[7],this._background=nt[8],this.matrix=null}_createMeshCanvas(nt,st,gt){const dt=Math.floor(this._bounds[0]),ft=Math.floor(this._bounds[1]),Rt=Math.ceil(this._bounds[2])-dt,xt=Math.ceil(this._bounds[3])-ft,wt=Math.min(Math.ceil(Math.abs(Rt*nt[0]*1.1)),3e3),jt=Math.min(Math.ceil(Math.abs(xt*nt[1]*1.1)),3e3),sn=Rt/wt,Kt=xt/jt,Yt={coords:this._coords,colors:this._colors,offsetX:-dt,offsetY:-ft,scaleX:1/sn,scaleY:1/Kt},Ht=wt+2*2,Ut=jt+2*2,At=gt.getCanvas("mesh",Ht,Ut,!1),Ft=At.context,Xt=Ft.createImageData(wt,jt);if(st){const rt=Xt.data;for(let at=0,Et=rt.length;at<Et;at+=4)rt[at]=st[0],rt[at+1]=st[1],rt[at+2]=st[2],rt[at+3]=255}for(const rt of this._figures)_e(Xt,rt,Yt);return Ft.putImageData(Xt,2,2),{canvas:At.canvas,offsetX:dt-2*sn,offsetY:ft-2*Kt,scaleX:sn,scaleY:Kt}}getPattern(nt,st,gt,ot){h(nt,this._bbox);let mt;if(ot===c.SHADING)mt=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(nt));else if(mt=a.Util.singularValueDecompose2dScale(st.baseTransform),this.matrix){const dt=a.Util.singularValueDecompose2dScale(this.matrix);mt=[mt[0]*dt[0],mt[1]*dt[1]]}const it=this._createMeshCanvas(mt,ot===c.SHADING?null:this._background,st.cachedCanvases);return ot!==c.SHADING&&(nt.setTransform(...st.baseTransform),this.matrix&&nt.transform(...this.matrix)),nt.translate(it.offsetX,it.offsetY),nt.scale(it.scaleX,it.scaleY),nt.createPattern(it.canvas,"no-repeat")}}class ut extends j{getPattern(){return"hotpink"}}function ht(et){switch(et[0]){case"RadialAxial":return new b(et);case"Mesh":return new ct(et);case"Dummy":return new ut}throw new Error(`Unknown IR type: ${et[0]}`)}const pt={COLORED:1,UNCOLORED:2},bt=class bt{constructor(nt,st,gt,ot,mt){this.operatorList=nt[2],this.matrix=nt[3]||[1,0,0,1,0,0],this.bbox=nt[4],this.xstep=nt[5],this.ystep=nt[6],this.paintType=nt[7],this.tilingType=nt[8],this.color=st,this.ctx=gt,this.canvasGraphicsFactory=ot,this.baseTransform=mt}createPatternCanvas(nt){const st=this.operatorList,gt=this.bbox,ot=this.xstep,mt=this.ystep,it=this.paintType,dt=this.tilingType,ft=this.color,Rt=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+dt);const xt=gt[0],wt=gt[1],jt=gt[2],sn=gt[3],Kt=a.Util.singularValueDecompose2dScale(this.matrix),Yt=a.Util.singularValueDecompose2dScale(this.baseTransform),Ht=[Kt[0]*Yt[0],Kt[1]*Yt[1]],Ut=this.getSizeAndScale(ot,this.ctx.canvas.width,Ht[0]),At=this.getSizeAndScale(mt,this.ctx.canvas.height,Ht[1]),Ft=nt.cachedCanvases.getCanvas("pattern",Ut.size,At.size,!0),Xt=Ft.context,kt=Rt.createCanvasGraphics(Xt);kt.groupLevel=nt.groupLevel,this.setFillAndStrokeStyleToContext(kt,it,ft);let rt=xt,at=wt,Et=jt,Ct=sn;return xt<0&&(rt=0,Et+=Math.abs(xt)),wt<0&&(at=0,Ct+=Math.abs(wt)),Xt.translate(-(Ut.scale*rt),-(At.scale*at)),kt.transform(Ut.scale,0,0,At.scale,0,0),Xt.save(),this.clipBbox(kt,rt,at,Et,Ct),kt.baseTransform=(0,o.getCurrentTransform)(kt.ctx),kt.executeOperatorList(st),kt.endDrawing(),{canvas:Ft.canvas,scaleX:Ut.scale,scaleY:At.scale,offsetX:rt,offsetY:at}}getSizeAndScale(nt,st,gt){nt=Math.abs(nt);const ot=Math.max(bt.MAX_PATTERN_SIZE,st);let mt=Math.ceil(nt*gt);return mt>=ot?mt=ot:gt=mt/nt,{scale:gt,size:mt}}clipBbox(nt,st,gt,ot,mt){const it=ot-st,dt=mt-gt;nt.ctx.rect(st,gt,it,dt),nt.current.updateRectMinMax((0,o.getCurrentTransform)(nt.ctx),[st,gt,ot,mt]),nt.clip(),nt.endPath()}setFillAndStrokeStyleToContext(nt,st,gt){const ot=nt.ctx,mt=nt.current;switch(st){case pt.COLORED:const it=this.ctx;ot.fillStyle=it.fillStyle,ot.strokeStyle=it.strokeStyle,mt.fillColor=it.fillStyle,mt.strokeColor=it.strokeStyle;break;case pt.UNCOLORED:const dt=a.Util.makeHexColor(gt[0],gt[1],gt[2]);ot.fillStyle=dt,ot.strokeStyle=dt,mt.fillColor=dt,mt.strokeColor=dt;break;default:throw new a.FormatError(`Unsupported paint type: ${st}`)}}getPattern(nt,st,gt,ot){let mt=gt;ot!==c.SHADING&&(mt=a.Util.transform(mt,st.baseTransform),this.matrix&&(mt=a.Util.transform(mt,this.matrix)));const it=this.createPatternCanvas(st);let dt=new DOMMatrix(mt);dt=dt.translate(it.offsetX,it.offsetY),dt=dt.scale(1/it.scaleX,1/it.scaleY);const ft=nt.createPattern(it.canvas,"repeat");return ft.setTransform(dt),ft}};xr(bt,"MAX_PATTERN_SIZE",3e3);let yt=bt;s.TilingPattern=yt},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=c,s.convertToRGBA=o,s.grayToRGBA=j;var a=i(1);function o(b){switch(b.kind){case a.ImageKind.GRAYSCALE_1BPP:return c(b);case a.ImageKind.RGB_24BPP:return h(b)}return null}function c({src:b,srcPos:$=0,dest:_e,width:ct,height:ut,nonBlackColor:ht=4294967295,inverseDecode:pt=!1}){const yt=a.FeatureTest.isLittleEndian?4278190080:255,[bt,et]=pt?[ht,yt]:[yt,ht],nt=ct>>3,st=ct&7,gt=b.length;_e=new Uint32Array(_e.buffer);let ot=0;for(let mt=0;mt<ut;mt++){for(const dt=$+nt;$<dt;$++){const ft=$<gt?b[$]:255;_e[ot++]=ft&128?et:bt,_e[ot++]=ft&64?et:bt,_e[ot++]=ft&32?et:bt,_e[ot++]=ft&16?et:bt,_e[ot++]=ft&8?et:bt,_e[ot++]=ft&4?et:bt,_e[ot++]=ft&2?et:bt,_e[ot++]=ft&1?et:bt}if(st===0)continue;const it=$<gt?b[$++]:255;for(let dt=0;dt<st;dt++)_e[ot++]=it&1<<7-dt?et:bt}return{srcPos:$,destPos:ot}}function h({src:b,srcPos:$=0,dest:_e,destPos:ct=0,width:ut,height:ht}){let pt=0;const yt=b.length>>2,bt=new Uint32Array(b.buffer,$,yt);if(a.FeatureTest.isLittleEndian){for(;pt<yt-2;pt+=3,ct+=4){const et=bt[pt],nt=bt[pt+1],st=bt[pt+2];_e[ct]=et|4278190080,_e[ct+1]=et>>>24|nt<<8|4278190080,_e[ct+2]=nt>>>16|st<<16|4278190080,_e[ct+3]=st>>>8|4278190080}for(let et=pt*4,nt=b.length;et<nt;et+=3)_e[ct++]=b[et]|b[et+1]<<8|b[et+2]<<16|4278190080}else{for(;pt<yt-2;pt+=3,ct+=4){const et=bt[pt],nt=bt[pt+1],st=bt[pt+2];_e[ct]=et|255,_e[ct+1]=et<<24|nt>>>8|255,_e[ct+2]=nt<<16|st>>>16|255,_e[ct+3]=st<<8|255}for(let et=pt*4,nt=b.length;et<nt;et+=3)_e[ct++]=b[et]<<24|b[et+1]<<16|b[et+2]<<8|255}return{srcPos:$,destPos:ct}}function j(b,$){if(a.FeatureTest.isLittleEndian)for(let _e=0,ct=b.length;_e<ct;_e++)$[_e]=b[_e]*65793|4278190080;else for(let _e=0,ct=b.length;_e<ct;_e++)$[_e]=b[_e]*16843008|255}},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const i=Object.create(null);s.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(e,s,i)=>{var b,lu,uu,Ks;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var a=i(1);const o={DATA:1,ERROR:2},c={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function h(ut){switch(ut instanceof Error||typeof ut=="object"&&ut!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ut.name){case"AbortException":return new a.AbortException(ut.message);case"MissingPDFException":return new a.MissingPDFException(ut.message);case"PasswordException":return new a.PasswordException(ut.message,ut.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(ut.message,ut.status);case"UnknownErrorException":return new a.UnknownErrorException(ut.message,ut.details);default:return new a.UnknownErrorException(ut.message,ut.toString())}}class j{constructor(ht,pt,yt){dn(this,b);this.sourceName=ht,this.targetName=pt,this.comObj=yt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=bt=>{const et=bt.data;if(et.targetName!==this.sourceName)return;if(et.stream){Qt(this,b,uu).call(this,et);return}if(et.callback){const st=et.callbackId,gt=this.callbackCapabilities[st];if(!gt)throw new Error(`Cannot resolve callback ${st}`);if(delete this.callbackCapabilities[st],et.callback===o.DATA)gt.resolve(et.data);else if(et.callback===o.ERROR)gt.reject(h(et.reason));else throw new Error("Unexpected callback case");return}const nt=this.actionHandler[et.action];if(!nt)throw new Error(`Unknown action from worker: ${et.action}`);if(et.callbackId){const st=this.sourceName,gt=et.sourceName;new Promise(function(ot){ot(nt(et.data))}).then(function(ot){yt.postMessage({sourceName:st,targetName:gt,callback:o.DATA,callbackId:et.callbackId,data:ot})},function(ot){yt.postMessage({sourceName:st,targetName:gt,callback:o.ERROR,callbackId:et.callbackId,reason:h(ot)})});return}if(et.streamId){Qt(this,b,lu).call(this,et);return}nt(et.data)},yt.addEventListener("message",this._onComObjOnMessage)}on(ht,pt){const yt=this.actionHandler;if(yt[ht])throw new Error(`There is already an actionName called "${ht}"`);yt[ht]=pt}send(ht,pt,yt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ht,data:pt},yt)}sendWithPromise(ht,pt,yt){const bt=this.callbackId++,et=new a.PromiseCapability;this.callbackCapabilities[bt]=et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ht,callbackId:bt,data:pt},yt)}catch(nt){et.reject(nt)}return et.promise}sendWithStream(ht,pt,yt,bt){const et=this.streamId++,nt=this.sourceName,st=this.targetName,gt=this.comObj;return new ReadableStream({start:ot=>{const mt=new a.PromiseCapability;return this.streamControllers[et]={controller:ot,startCall:mt,pullCall:null,cancelCall:null,isClosed:!1},gt.postMessage({sourceName:nt,targetName:st,action:ht,streamId:et,data:pt,desiredSize:ot.desiredSize},bt),mt.promise},pull:ot=>{const mt=new a.PromiseCapability;return this.streamControllers[et].pullCall=mt,gt.postMessage({sourceName:nt,targetName:st,stream:c.PULL,streamId:et,desiredSize:ot.desiredSize}),mt.promise},cancel:ot=>{(0,a.assert)(ot instanceof Error,"cancel must have a valid reason");const mt=new a.PromiseCapability;return this.streamControllers[et].cancelCall=mt,this.streamControllers[et].isClosed=!0,gt.postMessage({sourceName:nt,targetName:st,stream:c.CANCEL,streamId:et,reason:h(ot)}),mt.promise}},yt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}b=new WeakSet,lu=function(ht){const pt=ht.streamId,yt=this.sourceName,bt=ht.sourceName,et=this.comObj,nt=this,st=this.actionHandler[ht.action],gt={enqueue(ot,mt=1,it){if(this.isCancelled)return;const dt=this.desiredSize;this.desiredSize-=mt,dt>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),et.postMessage({sourceName:yt,targetName:bt,stream:c.ENQUEUE,streamId:pt,chunk:ot},it)},close(){this.isCancelled||(this.isCancelled=!0,et.postMessage({sourceName:yt,targetName:bt,stream:c.CLOSE,streamId:pt}),delete nt.streamSinks[pt])},error(ot){(0,a.assert)(ot instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,et.postMessage({sourceName:yt,targetName:bt,stream:c.ERROR,streamId:pt,reason:h(ot)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ht.desiredSize,ready:null};gt.sinkCapability.resolve(),gt.ready=gt.sinkCapability.promise,this.streamSinks[pt]=gt,new Promise(function(ot){ot(st(ht.data,gt))}).then(function(){et.postMessage({sourceName:yt,targetName:bt,stream:c.START_COMPLETE,streamId:pt,success:!0})},function(ot){et.postMessage({sourceName:yt,targetName:bt,stream:c.START_COMPLETE,streamId:pt,reason:h(ot)})})},uu=function(ht){const pt=ht.streamId,yt=this.sourceName,bt=ht.sourceName,et=this.comObj,nt=this.streamControllers[pt],st=this.streamSinks[pt];switch(ht.stream){case c.START_COMPLETE:ht.success?nt.startCall.resolve():nt.startCall.reject(h(ht.reason));break;case c.PULL_COMPLETE:ht.success?nt.pullCall.resolve():nt.pullCall.reject(h(ht.reason));break;case c.PULL:if(!st){et.postMessage({sourceName:yt,targetName:bt,stream:c.PULL_COMPLETE,streamId:pt,success:!0});break}st.desiredSize<=0&&ht.desiredSize>0&&st.sinkCapability.resolve(),st.desiredSize=ht.desiredSize,new Promise(function(gt){var ot;gt((ot=st.onPull)==null?void 0:ot.call(st))}).then(function(){et.postMessage({sourceName:yt,targetName:bt,stream:c.PULL_COMPLETE,streamId:pt,success:!0})},function(gt){et.postMessage({sourceName:yt,targetName:bt,stream:c.PULL_COMPLETE,streamId:pt,reason:h(gt)})});break;case c.ENQUEUE:if((0,a.assert)(nt,"enqueue should have stream controller"),nt.isClosed)break;nt.controller.enqueue(ht.chunk);break;case c.CLOSE:if((0,a.assert)(nt,"close should have stream controller"),nt.isClosed)break;nt.isClosed=!0,nt.controller.close(),Qt(this,b,Ks).call(this,nt,pt);break;case c.ERROR:(0,a.assert)(nt,"error should have stream controller"),nt.controller.error(h(ht.reason)),Qt(this,b,Ks).call(this,nt,pt);break;case c.CANCEL_COMPLETE:ht.success?nt.cancelCall.resolve():nt.cancelCall.reject(h(ht.reason)),Qt(this,b,Ks).call(this,nt,pt);break;case c.CANCEL:if(!st)break;new Promise(function(gt){var ot;gt((ot=st.onCancel)==null?void 0:ot.call(st,h(ht.reason)))}).then(function(){et.postMessage({sourceName:yt,targetName:bt,stream:c.CANCEL_COMPLETE,streamId:pt,success:!0})},function(gt){et.postMessage({sourceName:yt,targetName:bt,stream:c.CANCEL_COMPLETE,streamId:pt,reason:h(gt)})}),st.sinkCapability.reject(h(ht.reason)),st.isCancelled=!0,delete this.streamSinks[pt];break;default:throw new Error("Unexpected stream case")}},Ks=async function(ht,pt){var yt,bt,et;await Promise.allSettled([(yt=ht.startCall)==null?void 0:yt.promise,(bt=ht.pullCall)==null?void 0:bt.promise,(et=ht.cancelCall)==null?void 0:et.promise]),delete this.streamControllers[pt]},s.MessageHandler=j},(e,s,i)=>{var c,h;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var a=i(1);class o{constructor({parsedData:b,rawData:$}){dn(this,c);dn(this,h);hn(this,c,b),hn(this,h,$)}getRaw(){return tt(this,h)}get(b){return tt(this,c).get(b)??null}getAll(){return(0,a.objectFromMap)(tt(this,c))}has(b){return tt(this,c).has(b)}}c=new WeakMap,h=new WeakMap,s.Metadata=o},(e,s,i)=>{var b,$,_e,ct,ut,ht,Lo;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var a=i(1),o=i(8);const c=Symbol("INTERNAL");class h{constructor(bt,et){dn(this,b,!0);this.name=bt,this.intent=et}get visible(){return tt(this,b)}_setVisible(bt,et){bt!==c&&(0,a.unreachable)("Internal method `_setVisible` called."),hn(this,b,et)}}b=new WeakMap;class j{constructor(bt){dn(this,ht);dn(this,$,null);dn(this,_e,new Map);dn(this,ct,null);dn(this,ut,null);if(this.name=null,this.creator=null,bt!==null){this.name=bt.name,this.creator=bt.creator,hn(this,ut,bt.order);for(const et of bt.groups)tt(this,_e).set(et.id,new h(et.name,et.intent));if(bt.baseState==="OFF")for(const et of tt(this,_e).values())et._setVisible(c,!1);for(const et of bt.on)tt(this,_e).get(et)._setVisible(c,!0);for(const et of bt.off)tt(this,_e).get(et)._setVisible(c,!1);hn(this,ct,this.getHash())}}isVisible(bt){if(tt(this,_e).size===0)return!0;if(!bt)return(0,a.warn)("Optional content group not defined."),!0;if(bt.type==="OCG")return tt(this,_e).has(bt.id)?tt(this,_e).get(bt.id).visible:((0,a.warn)(`Optional content group not found: ${bt.id}`),!0);if(bt.type==="OCMD"){if(bt.expression)return Qt(this,ht,Lo).call(this,bt.expression);if(!bt.policy||bt.policy==="AnyOn"){for(const et of bt.ids){if(!tt(this,_e).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(tt(this,_e).get(et).visible)return!0}return!1}else if(bt.policy==="AllOn"){for(const et of bt.ids){if(!tt(this,_e).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(!tt(this,_e).get(et).visible)return!1}return!0}else if(bt.policy==="AnyOff"){for(const et of bt.ids){if(!tt(this,_e).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(!tt(this,_e).get(et).visible)return!0}return!1}else if(bt.policy==="AllOff"){for(const et of bt.ids){if(!tt(this,_e).has(et))return(0,a.warn)(`Optional content group not found: ${et}`),!0;if(tt(this,_e).get(et).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${bt.policy}.`),!0}return(0,a.warn)(`Unknown group type ${bt.type}.`),!0}setVisibility(bt,et=!0){if(!tt(this,_e).has(bt)){(0,a.warn)(`Optional content group not found: ${bt}`);return}tt(this,_e).get(bt)._setVisible(c,!!et),hn(this,$,null)}get hasInitialVisibility(){return tt(this,ct)===null||this.getHash()===tt(this,ct)}getOrder(){return tt(this,_e).size?tt(this,ut)?tt(this,ut).slice():[...tt(this,_e).keys()]:null}getGroups(){return tt(this,_e).size>0?(0,a.objectFromMap)(tt(this,_e)):null}getGroup(bt){return tt(this,_e).get(bt)||null}getHash(){if(tt(this,$)!==null)return tt(this,$);const bt=new o.MurmurHash3_64;for(const[et,nt]of tt(this,_e))bt.update(`${et}:${nt.visible}`);return hn(this,$,bt.hexdigest())}}$=new WeakMap,_e=new WeakMap,ct=new WeakMap,ut=new WeakMap,ht=new WeakSet,Lo=function(bt){const et=bt.length;if(et<2)return!0;const nt=bt[0];for(let st=1;st<et;st++){const gt=bt[st];let ot;if(Array.isArray(gt))ot=Qt(this,ht,Lo).call(this,gt);else if(tt(this,_e).has(gt))ot=tt(this,_e).get(gt).visible;else return(0,a.warn)(`Optional content group not found: ${gt}`),!0;switch(nt){case"And":if(!ot)return!1;break;case"Or":if(ot)return!0;break;case"Not":return!ot;default:return!0}}return nt==="And"},s.OptionalContentConfig=j},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var a=i(1),o=i(6);class c{constructor({length:$,initialData:_e,progressiveDone:ct=!1,contentDispositionFilename:ut=null,disableRange:ht=!1,disableStream:pt=!1},yt){if((0,a.assert)(yt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=ct,this._contentDispositionFilename=ut,(_e==null?void 0:_e.length)>0){const bt=_e instanceof Uint8Array&&_e.byteLength===_e.buffer.byteLength?_e.buffer:new Uint8Array(_e).buffer;this._queuedChunks.push(bt)}this._pdfDataRangeTransport=yt,this._isStreamingSupported=!pt,this._isRangeSupported=!ht,this._contentLength=$,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((bt,et)=>{this._onReceiveData({begin:bt,chunk:et})}),this._pdfDataRangeTransport.addProgressListener((bt,et)=>{this._onProgress({loaded:bt,total:et})}),this._pdfDataRangeTransport.addProgressiveReadListener(bt=>{this._onReceiveData({chunk:bt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:$,chunk:_e}){const ct=_e instanceof Uint8Array&&_e.byteLength===_e.buffer.byteLength?_e.buffer:new Uint8Array(_e).buffer;if($===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ct):this._queuedChunks.push(ct);else{const ut=this._rangeReaders.some(function(ht){return ht._begin!==$?!1:(ht._enqueue(ct),!0)});(0,a.assert)(ut,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var $;return(($=this._fullRequestReader)==null?void 0:$._loaded)??0}_onProgress($){var _e,ct,ut,ht;$.total===void 0?(ct=(_e=this._rangeReaders[0])==null?void 0:_e.onProgress)==null||ct.call(_e,{loaded:$.loaded}):(ht=(ut=this._fullRequestReader)==null?void 0:ut.onProgress)==null||ht.call(ut,{loaded:$.loaded,total:$.total})}_onProgressiveDone(){var $;($=this._fullRequestReader)==null||$.progressiveDone(),this._progressiveDone=!0}_removeRangeReader($){const _e=this._rangeReaders.indexOf($);_e>=0&&this._rangeReaders.splice(_e,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const $=this._queuedChunks;return this._queuedChunks=null,new h(this,$,this._progressiveDone,this._contentDispositionFilename)}getRangeReader($,_e){if(_e<=this._progressiveDataLength)return null;const ct=new j(this,$,_e);return this._pdfDataRangeTransport.requestDataRange($,_e),this._rangeReaders.push(ct),ct}cancelAllRequests($){var _e;(_e=this._fullRequestReader)==null||_e.cancel($);for(const ct of this._rangeReaders.slice(0))ct.cancel($);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=c;class h{constructor($,_e,ct=!1,ut=null){this._stream=$,this._done=ct||!1,this._filename=(0,o.isPdfFile)(ut)?ut:null,this._queuedChunks=_e||[],this._loaded=0;for(const ht of this._queuedChunks)this._loaded+=ht.byteLength;this._requests=[],this._headersReady=Promise.resolve(),$._fullRequestReader=this,this.onProgress=null}_enqueue($){this._done||(this._requests.length>0?this._requests.shift().resolve({value:$,done:!1}):this._queuedChunks.push($),this._loaded+=$.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const $=new a.PromiseCapability;return this._requests.push($),$.promise}cancel($){this._done=!0;for(const _e of this._requests)_e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class j{constructor($,_e,ct){this._stream=$,this._begin=_e,this._end=ct,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue($){if(!this._done){if(this._requests.length===0)this._queuedChunk=$;else{this._requests.shift().resolve({value:$,done:!1});for(const ct of this._requests)ct.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _e=this._queuedChunk;return this._queuedChunk=null,{value:_e,done:!1}}if(this._done)return{value:void 0,done:!0};const $=new a.PromiseCapability;return this._requests.push($),$.promise}cancel($){this._done=!0;for(const _e of this._requests)_e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var a=i(1),o=i(20);function c(ct,ut,ht){return{method:"GET",headers:ct,signal:ht.signal,mode:"cors",credentials:ut?"include":"same-origin",redirect:"follow"}}function h(ct){const ut=new Headers;for(const ht in ct){const pt=ct[ht];pt!==void 0&&ut.append(ht,pt)}return ut}function j(ct){return ct instanceof Uint8Array?ct.buffer:ct instanceof ArrayBuffer?ct:((0,a.warn)(`getArrayBuffer - unexpected data format: ${ct}`),new Uint8Array(ct).buffer)}class b{constructor(ut){this.source=ut,this.isHttp=/^https?:/i.test(ut.url),this.httpHeaders=this.isHttp&&ut.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ut;return((ut=this._fullRequestReader)==null?void 0:ut._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new $(this),this._fullRequestReader}getRangeReader(ut,ht){if(ht<=this._progressiveDataLength)return null;const pt=new _e(this,ut,ht);return this._rangeRequestReaders.push(pt),pt}cancelAllRequests(ut){var ht;(ht=this._fullRequestReader)==null||ht.cancel(ut);for(const pt of this._rangeRequestReaders.slice(0))pt.cancel(ut)}}s.PDFFetchStream=b;class ${constructor(ut){this._stream=ut,this._reader=null,this._loaded=0,this._filename=null;const ht=ut.source;this._withCredentials=ht.withCredentials||!1,this._contentLength=ht.length,this._headersCapability=new a.PromiseCapability,this._disableRange=ht.disableRange||!1,this._rangeChunkSize=ht.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ht.disableStream,this._isRangeSupported=!ht.disableRange,this._headers=h(this._stream.httpHeaders);const pt=ht.url;fetch(pt,c(this._headers,this._withCredentials,this._abortController)).then(yt=>{if(!(0,o.validateResponseStatus)(yt.status))throw(0,o.createResponseStatusError)(yt.status,pt);this._reader=yt.body.getReader(),this._headersCapability.resolve();const bt=st=>yt.headers.get(st),{allowRangeRequests:et,suggestedLength:nt}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:bt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=et,this._contentLength=nt||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(bt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var pt;await this._headersCapability.promise;const{value:ut,done:ht}=await this._reader.read();return ht?{value:ut,done:ht}:(this._loaded+=ut.byteLength,(pt=this.onProgress)==null||pt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:j(ut),done:!1})}cancel(ut){var ht;(ht=this._reader)==null||ht.cancel(ut),this._abortController.abort()}}class _e{constructor(ut,ht,pt){this._stream=ut,this._reader=null,this._loaded=0;const yt=ut.source;this._withCredentials=yt.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!yt.disableStream,this._abortController=new AbortController,this._headers=h(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ht}-${pt-1}`);const bt=yt.url;fetch(bt,c(this._headers,this._withCredentials,this._abortController)).then(et=>{if(!(0,o.validateResponseStatus)(et.status))throw(0,o.createResponseStatusError)(et.status,bt);this._readCapability.resolve(),this._reader=et.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var pt;await this._readCapability.promise;const{value:ut,done:ht}=await this._reader.read();return ht?{value:ut,done:ht}:(this._loaded+=ut.byteLength,(pt=this.onProgress)==null||pt.call(this,{loaded:this._loaded}),{value:j(ut),done:!1})}cancel(ut){var ht;(ht=this._reader)==null||ht.cancel(ut),this._abortController.abort()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=b,s.extractFilenameFromHeader=j,s.validateRangeRequestCapabilities=h,s.validateResponseStatus=$;var a=i(1),o=i(21),c=i(6);function h({getResponseHeader:_e,isHttp:ct,rangeChunkSize:ut,disableRange:ht}){const pt={allowRangeRequests:!1,suggestedLength:void 0},yt=parseInt(_e("Content-Length"),10);return!Number.isInteger(yt)||(pt.suggestedLength=yt,yt<=2*ut)||ht||!ct||_e("Accept-Ranges")!=="bytes"||(_e("Content-Encoding")||"identity")!=="identity"||(pt.allowRangeRequests=!0),pt}function j(_e){const ct=_e("Content-Disposition");if(ct){let ut=(0,o.getFilenameFromContentDispositionHeader)(ct);if(ut.includes("%"))try{ut=decodeURIComponent(ut)}catch{}if((0,c.isPdfFile)(ut))return ut}return null}function b(_e,ct){return _e===404||_e===0&&ct.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+ct+'".'):new a.UnexpectedResponseException(`Unexpected server response (${_e}) while retrieving PDF "${ct}".`,_e)}function $(_e){return _e===200||_e===206}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=o;var a=i(1);function o(c){let h=!0,j=b("filename\\*","i").exec(c);if(j){j=j[1];let yt=ut(j);return yt=unescape(yt),yt=ht(yt),yt=pt(yt),_e(yt)}if(j=ct(c),j){const yt=pt(j);return _e(yt)}if(j=b("filename","i").exec(c),j){j=j[1];let yt=ut(j);return yt=pt(yt),_e(yt)}function b(yt,bt){return new RegExp("(?:^|;)\\s*"+yt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',bt)}function $(yt,bt){if(yt){if(!/^[\x00-\xFF]+$/.test(bt))return bt;try{const et=new TextDecoder(yt,{fatal:!0}),nt=(0,a.stringToBytes)(bt);bt=et.decode(nt),h=!1}catch{}}return bt}function _e(yt){return h&&/[\x80-\xff]/.test(yt)&&(yt=$("utf-8",yt),h&&(yt=$("iso-8859-1",yt))),yt}function ct(yt){const bt=[];let et;const nt=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(et=nt.exec(yt))!==null;){let[,gt,ot,mt]=et;if(gt=parseInt(gt,10),gt in bt){if(gt===0)break;continue}bt[gt]=[ot,mt]}const st=[];for(let gt=0;gt<bt.length&&gt in bt;++gt){let[ot,mt]=bt[gt];mt=ut(mt),ot&&(mt=unescape(mt),gt===0&&(mt=ht(mt))),st.push(mt)}return st.join("")}function ut(yt){if(yt.startsWith('"')){const bt=yt.slice(1).split('\\"');for(let et=0;et<bt.length;++et){const nt=bt[et].indexOf('"');nt!==-1&&(bt[et]=bt[et].slice(0,nt),bt.length=et+1),bt[et]=bt[et].replaceAll(/\\(.)/g,"$1")}yt=bt.join('"')}return yt}function ht(yt){const bt=yt.indexOf("'");if(bt===-1)return yt;const et=yt.slice(0,bt),st=yt.slice(bt+1).replace(/^[^']*'/,"");return $(et,st)}function pt(yt){return!yt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(yt)?yt:yt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(bt,et,nt,st){if(nt==="q"||nt==="Q")return st=st.replaceAll("_"," "),st=st.replaceAll(/=([0-9a-fA-F]{2})/g,function(gt,ot){return String.fromCharCode(parseInt(ot,16))}),$(et,st);try{st=atob(st)}catch{}return $(et,st)})}return""}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var a=i(1),o=i(20);const c=200,h=206;function j(ut){const ht=ut.response;return typeof ht!="string"?ht:(0,a.stringToBytes)(ht).buffer}class b{constructor(ht,pt={}){this.url=ht,this.isHttp=/^https?:/i.test(ht),this.httpHeaders=this.isHttp&&pt.httpHeaders||Object.create(null),this.withCredentials=pt.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ht,pt,yt){const bt={begin:ht,end:pt};for(const et in yt)bt[et]=yt[et];return this.request(bt)}requestFull(ht){return this.request(ht)}request(ht){const pt=new XMLHttpRequest,yt=this.currXhrId++,bt=this.pendingRequests[yt]={xhr:pt};pt.open("GET",this.url),pt.withCredentials=this.withCredentials;for(const et in this.httpHeaders){const nt=this.httpHeaders[et];nt!==void 0&&pt.setRequestHeader(et,nt)}return this.isHttp&&"begin"in ht&&"end"in ht?(pt.setRequestHeader("Range",`bytes=${ht.begin}-${ht.end-1}`),bt.expectedStatus=h):bt.expectedStatus=c,pt.responseType="arraybuffer",ht.onError&&(pt.onerror=function(et){ht.onError(pt.status)}),pt.onreadystatechange=this.onStateChange.bind(this,yt),pt.onprogress=this.onProgress.bind(this,yt),bt.onHeadersReceived=ht.onHeadersReceived,bt.onDone=ht.onDone,bt.onError=ht.onError,bt.onProgress=ht.onProgress,pt.send(null),yt}onProgress(ht,pt){var bt;const yt=this.pendingRequests[ht];yt&&((bt=yt.onProgress)==null||bt.call(yt,pt))}onStateChange(ht,pt){var gt,ot,mt;const yt=this.pendingRequests[ht];if(!yt)return;const bt=yt.xhr;if(bt.readyState>=2&&yt.onHeadersReceived&&(yt.onHeadersReceived(),delete yt.onHeadersReceived),bt.readyState!==4||!(ht in this.pendingRequests))return;if(delete this.pendingRequests[ht],bt.status===0&&this.isHttp){(gt=yt.onError)==null||gt.call(yt,bt.status);return}const et=bt.status||c;if(!(et===c&&yt.expectedStatus===h)&&et!==yt.expectedStatus){(ot=yt.onError)==null||ot.call(yt,bt.status);return}const st=j(bt);if(et===h){const it=bt.getResponseHeader("Content-Range"),dt=/bytes (\d+)-(\d+)\/(\d+)/.exec(it);yt.onDone({begin:parseInt(dt[1],10),chunk:st})}else st?yt.onDone({begin:0,chunk:st}):(mt=yt.onError)==null||mt.call(yt,bt.status)}getRequestXhr(ht){return this.pendingRequests[ht].xhr}isPendingRequest(ht){return ht in this.pendingRequests}abortRequest(ht){const pt=this.pendingRequests[ht].xhr;delete this.pendingRequests[ht],pt.abort()}}class ${constructor(ht){this._source=ht,this._manager=new b(ht.url,{httpHeaders:ht.httpHeaders,withCredentials:ht.withCredentials}),this._rangeChunkSize=ht.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ht){const pt=this._rangeRequestReaders.indexOf(ht);pt>=0&&this._rangeRequestReaders.splice(pt,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _e(this._manager,this._source),this._fullRequestReader}getRangeReader(ht,pt){const yt=new ct(this._manager,ht,pt);return yt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(yt),yt}cancelAllRequests(ht){var pt;(pt=this._fullRequestReader)==null||pt.cancel(ht);for(const yt of this._rangeRequestReaders.slice(0))yt.cancel(ht)}}s.PDFNetworkStream=$;class _e{constructor(ht,pt){this._manager=ht;const yt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=pt.url,this._fullRequestId=ht.requestFull(yt),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=pt.disableRange||!1,this._contentLength=pt.length,this._rangeChunkSize=pt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ht=this._fullRequestId,pt=this._manager.getRequestXhr(ht),yt=nt=>pt.getResponseHeader(nt),{allowRangeRequests:bt,suggestedLength:et}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:yt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});bt&&(this._isRangeSupported=!0),this._contentLength=et||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(yt),this._isRangeSupported&&this._manager.abortRequest(ht),this._headersReceivedCapability.resolve()}_onDone(ht){if(ht&&(this._requests.length>0?this._requests.shift().resolve({value:ht.chunk,done:!1}):this._cachedChunks.push(ht.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const pt of this._requests)pt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ht){this._storedError=(0,o.createResponseStatusError)(ht,this._url),this._headersReceivedCapability.reject(this._storedError);for(const pt of this._requests)pt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ht){var pt;(pt=this.onProgress)==null||pt.call(this,{loaded:ht.loaded,total:ht.lengthComputable?ht.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ht=new a.PromiseCapability;return this._requests.push(ht),ht.promise}cancel(ht){this._done=!0,this._headersReceivedCapability.reject(ht);for(const pt of this._requests)pt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ct{constructor(ht,pt,yt){this._manager=ht;const bt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ht.url,this._requestId=ht.requestRange(pt,yt,bt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ht;(ht=this.onClosed)==null||ht.call(this,this)}_onDone(ht){const pt=ht.chunk;this._requests.length>0?this._requests.shift().resolve({value:pt,done:!1}):this._queuedChunk=pt,this._done=!0;for(const yt of this._requests)yt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ht){this._storedError=(0,o.createResponseStatusError)(ht,this._url);for(const pt of this._requests)pt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ht){var pt;this.isStreamingSupported||(pt=this.onProgress)==null||pt.call(this,{loaded:ht.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const pt=this._queuedChunk;return this._queuedChunk=null,{value:pt,done:!1}}if(this._done)return{value:void 0,done:!0};const ht=new a.PromiseCapability;return this._requests.push(ht),ht.promise}cancel(ht){this._done=!0;for(const pt of this._requests)pt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var a=i(1),o=i(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function h(yt){const bt=require$$5,et=bt.parse(yt);return et.protocol==="file:"||et.host?et:/^[a-z]:[/\\]/i.test(yt)?bt.parse(`file:///${yt}`):(et.host||(et.protocol="file:"),et)}class j{constructor(bt){this.source=bt,this.url=h(bt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&bt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var bt;return((bt=this._fullRequestReader)==null?void 0:bt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ht(this):new ct(this),this._fullRequestReader}getRangeReader(bt,et){if(et<=this._progressiveDataLength)return null;const nt=this.isFsUrl?new pt(this,bt,et):new ut(this,bt,et);return this._rangeRequestReaders.push(nt),nt}cancelAllRequests(bt){var et;(et=this._fullRequestReader)==null||et.cancel(bt);for(const nt of this._rangeRequestReaders.slice(0))nt.cancel(bt)}}s.PDFNodeStream=j;class b{constructor(bt){this._url=bt.url,this._done=!1,this._storedError=null,this.onProgress=null;const et=bt.source;this._contentLength=et.length,this._loaded=0,this._filename=null,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const bt=this._readableStream.read();return bt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=bt.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(bt).buffer,done:!1})}cancel(bt){if(!this._readableStream){this._error(bt);return}this._readableStream.destroy(bt)}_error(bt){this._storedError=bt,this._readCapability.resolve()}_setReadableStream(bt){this._readableStream=bt,bt.on("readable",()=>{this._readCapability.resolve()}),bt.on("end",()=>{bt.destroy(),this._done=!0,this._readCapability.resolve()}),bt.on("error",et=>{this._error(et)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ${constructor(bt){this._url=bt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const et=bt.source;this._isStreamingSupported=!et.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const bt=this._readableStream.read();return bt===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=bt.length,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded}),{value:new Uint8Array(bt).buffer,done:!1})}cancel(bt){if(!this._readableStream){this._error(bt);return}this._readableStream.destroy(bt)}_error(bt){this._storedError=bt,this._readCapability.resolve()}_setReadableStream(bt){this._readableStream=bt,bt.on("readable",()=>{this._readCapability.resolve()}),bt.on("end",()=>{bt.destroy(),this._done=!0,this._readCapability.resolve()}),bt.on("error",et=>{this._error(et)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _e(yt,bt){return{protocol:yt.protocol,auth:yt.auth,host:yt.hostname,port:yt.port,path:yt.path,method:"GET",headers:bt}}class ct extends b{constructor(bt){super(bt);const et=nt=>{if(nt.statusCode===404){const mt=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=mt,this._headersCapability.reject(mt);return}this._headersCapability.resolve(),this._setReadableStream(nt);const st=mt=>this._readableStream.headers[mt.toLowerCase()],{allowRangeRequests:gt,suggestedLength:ot}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:st,isHttp:bt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=gt,this._contentLength=ot||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(st)};if(this._request=null,this._url.protocol==="http:"){const nt=require$$5;this._request=nt.request(_e(this._url,bt.httpHeaders),et)}else{const nt=require$$5;this._request=nt.request(_e(this._url,bt.httpHeaders),et)}this._request.on("error",nt=>{this._storedError=nt,this._headersCapability.reject(nt)}),this._request.end()}}class ut extends ${constructor(bt,et,nt){super(bt),this._httpHeaders={};for(const gt in bt.httpHeaders){const ot=bt.httpHeaders[gt];ot!==void 0&&(this._httpHeaders[gt]=ot)}this._httpHeaders.Range=`bytes=${et}-${nt-1}`;const st=gt=>{if(gt.statusCode===404){const ot=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ot;return}this._setReadableStream(gt)};if(this._request=null,this._url.protocol==="http:"){const gt=require$$5;this._request=gt.request(_e(this._url,this._httpHeaders),st)}else{const gt=require$$5;this._request=gt.request(_e(this._url,this._httpHeaders),st)}this._request.on("error",gt=>{this._storedError=gt}),this._request.end()}}class ht extends b{constructor(bt){super(bt);let et=decodeURIComponent(this._url.path);c.test(this._url.href)&&(et=et.replace(/^\//,""));const nt=require$$5;nt.lstat(et,(st,gt)=>{if(st){st.code==="ENOENT"&&(st=new a.MissingPDFException(`Missing PDF "${et}".`)),this._storedError=st,this._headersCapability.reject(st);return}this._contentLength=gt.size,this._setReadableStream(nt.createReadStream(et)),this._headersCapability.resolve()})}}class pt extends ${constructor(bt,et,nt){super(bt);let st=decodeURIComponent(this._url.path);c.test(this._url.href)&&(st=st.replace(/^\//,""));const gt=require$$5;this._setReadableStream(gt.createReadStream(st,{start:et,end:nt-1}))}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var a=i(6),o=i(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},h="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/1999/xlink",b=["butt","round","square"],$=["miter","round","bevel"],_e=function(gt,ot="",mt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!mt)return URL.createObjectURL(new Blob([gt],{type:ot}));const it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let dt=`data:${ot};base64,`;for(let ft=0,Rt=gt.length;ft<Rt;ft+=3){const xt=gt[ft]&255,wt=gt[ft+1]&255,jt=gt[ft+2]&255,sn=xt>>2,Kt=(xt&3)<<4|wt>>4,Yt=ft+1<Rt?(wt&15)<<2|jt>>6:64,Ht=ft+2<Rt?jt&63:64;dt+=it[sn]+it[Kt]+it[Yt]+it[Ht]}return dt},ct=function(){const gt=new Uint8Array([137,80,78,71,13,10,26,10]),ot=12,mt=new Int32Array(256);for(let jt=0;jt<256;jt++){let sn=jt;for(let Kt=0;Kt<8;Kt++)sn=sn&1?3988292384^sn>>1&2147483647:sn>>1&2147483647;mt[jt]=sn}function it(jt,sn,Kt){let Yt=-1;for(let Ht=sn;Ht<Kt;Ht++){const Ut=(Yt^jt[Ht])&255,At=mt[Ut];Yt=Yt>>>8^At}return Yt^-1}function dt(jt,sn,Kt,Yt){let Ht=Yt;const Ut=sn.length;Kt[Ht]=Ut>>24&255,Kt[Ht+1]=Ut>>16&255,Kt[Ht+2]=Ut>>8&255,Kt[Ht+3]=Ut&255,Ht+=4,Kt[Ht]=jt.charCodeAt(0)&255,Kt[Ht+1]=jt.charCodeAt(1)&255,Kt[Ht+2]=jt.charCodeAt(2)&255,Kt[Ht+3]=jt.charCodeAt(3)&255,Ht+=4,Kt.set(sn,Ht),Ht+=sn.length;const At=it(Kt,Yt+4,Ht);Kt[Ht]=At>>24&255,Kt[Ht+1]=At>>16&255,Kt[Ht+2]=At>>8&255,Kt[Ht+3]=At&255}function ft(jt,sn,Kt){let Yt=1,Ht=0;for(let Ut=sn;Ut<Kt;++Ut)Yt=(Yt+(jt[Ut]&255))%65521,Ht=(Ht+Yt)%65521;return Ht<<16|Yt}function Rt(jt){if(!o.isNodeJS)return xt(jt);try{const sn=parseInt(process.versions.node)>=8?jt:Buffer.from(jt),Kt=require$$5.deflateSync(sn,{level:9});return Kt instanceof Uint8Array?Kt:new Uint8Array(Kt)}catch(sn){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+sn)}return xt(jt)}function xt(jt){let sn=jt.length;const Kt=65535,Yt=Math.ceil(sn/Kt),Ht=new Uint8Array(2+sn+Yt*5+4);let Ut=0;Ht[Ut++]=120,Ht[Ut++]=156;let At=0;for(;sn>Kt;)Ht[Ut++]=0,Ht[Ut++]=255,Ht[Ut++]=255,Ht[Ut++]=0,Ht[Ut++]=0,Ht.set(jt.subarray(At,At+Kt),Ut),Ut+=Kt,At+=Kt,sn-=Kt;Ht[Ut++]=1,Ht[Ut++]=sn&255,Ht[Ut++]=sn>>8&255,Ht[Ut++]=~sn&65535&255,Ht[Ut++]=(~sn&65535)>>8&255,Ht.set(jt.subarray(At),Ut),Ut+=jt.length-At;const Ft=ft(jt,0,jt.length);return Ht[Ut++]=Ft>>24&255,Ht[Ut++]=Ft>>16&255,Ht[Ut++]=Ft>>8&255,Ht[Ut++]=Ft&255,Ht}function wt(jt,sn,Kt,Yt){const Ht=jt.width,Ut=jt.height;let At,Ft,Xt;const kt=jt.data;switch(sn){case o.ImageKind.GRAYSCALE_1BPP:Ft=0,At=1,Xt=Ht+7>>3;break;case o.ImageKind.RGB_24BPP:Ft=2,At=8,Xt=Ht*3;break;case o.ImageKind.RGBA_32BPP:Ft=6,At=8,Xt=Ht*4;break;default:throw new Error("invalid format")}const rt=new Uint8Array((1+Xt)*Ut);let at=0,Et=0;for(let an=0;an<Ut;++an)rt[at++]=0,rt.set(kt.subarray(Et,Et+Xt),at),Et+=Xt,at+=Xt;if(sn===o.ImageKind.GRAYSCALE_1BPP&&Yt){at=0;for(let an=0;an<Ut;an++){at++;for(let rn=0;rn<Xt;rn++)rt[at++]^=255}}const Ct=new Uint8Array([Ht>>24&255,Ht>>16&255,Ht>>8&255,Ht&255,Ut>>24&255,Ut>>16&255,Ut>>8&255,Ut&255,At,Ft,0,0,0]),Pt=Rt(rt),It=gt.length+ot*3+Ct.length+Pt.length,Bt=new Uint8Array(It);let Lt=0;return Bt.set(gt,Lt),Lt+=gt.length,dt("IHDR",Ct,Bt,Lt),Lt+=ot+Ct.length,dt("IDATA",Pt,Bt,Lt),Lt+=ot+Pt.length,dt("IEND",new Uint8Array(0),Bt,Lt),_e(Bt,"image/png",Kt)}return function(sn,Kt,Yt){const Ht=sn.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:sn.kind;return wt(sn,Ht,Kt,Yt)}}();class ut{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(ot,mt){this.x=ot,this.y=mt}}function ht(gt){let ot=[];const mt=[];for(const it of gt){if(it.fn==="save"){ot.push({fnId:92,fn:"group",items:[]}),mt.push(ot),ot=ot.at(-1).items;continue}it.fn==="restore"?ot=mt.pop():ot.push(it)}return ot}function pt(gt){if(Number.isInteger(gt))return gt.toString();const ot=gt.toFixed(10);let mt=ot.length-1;if(ot[mt]!=="0")return ot;do mt--;while(ot[mt]==="0");return ot.substring(0,ot[mt]==="."?mt:mt+1)}function yt(gt){if(gt[4]===0&&gt[5]===0){if(gt[1]===0&&gt[2]===0)return gt[0]===1&&gt[3]===1?"":`scale(${pt(gt[0])} ${pt(gt[3])})`;if(gt[0]===gt[3]&&gt[1]===-gt[2]){const ot=Math.acos(gt[0])*180/Math.PI;return`rotate(${pt(ot)})`}}else if(gt[0]===1&&gt[1]===0&&gt[2]===0&&gt[3]===1)return`translate(${pt(gt[4])} ${pt(gt[5])})`;return`matrix(${pt(gt[0])} ${pt(gt[1])} ${pt(gt[2])} ${pt(gt[3])} ${pt(gt[4])} ${pt(gt[5])})`}let bt=0,et=0,nt=0;class st{constructor(ot,mt,it=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new ut,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=ot,this.objs=mt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!it,this._operatorIdMapping=[];for(const dt in o.OPS)this._operatorIdMapping[o.OPS[dt]]=dt}getObject(ot,mt=null){return typeof ot=="string"?ot.startsWith("g_")?this.commonObjs.get(ot):this.objs.get(ot):mt}save(){this.transformStack.push(this.transformMatrix);const ot=this.current;this.extraStack.push(ot),this.current=ot.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(ot){this.save(),this.executeOpTree(ot),this.restore()}loadDependencies(ot){const mt=ot.fnArray,it=ot.argsArray;for(let dt=0,ft=mt.length;dt<ft;dt++)if(mt[dt]===o.OPS.dependency)for(const Rt of it[dt]){const xt=Rt.startsWith("g_")?this.commonObjs:this.objs,wt=new Promise(jt=>{xt.get(Rt,jt)});this.current.dependencies.push(wt)}return Promise.all(this.current.dependencies)}transform(ot,mt,it,dt,ft,Rt){const xt=[ot,mt,it,dt,ft,Rt];this.transformMatrix=o.Util.transform(this.transformMatrix,xt),this.tgrp=null}getSVG(ot,mt){this.viewport=mt;const it=this._initialize(mt);return this.loadDependencies(ot).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(ot)),it))}convertOpList(ot){const mt=this._operatorIdMapping,it=ot.argsArray,dt=ot.fnArray,ft=[];for(let Rt=0,xt=dt.length;Rt<xt;Rt++){const wt=dt[Rt];ft.push({fnId:wt,fn:mt[wt],args:it[Rt]})}return ht(ft)}executeOpTree(ot){for(const mt of ot){const it=mt.fn,dt=mt.fnId,ft=mt.args;switch(dt|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(ft);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(ft[0],ft[1]);break;case o.OPS.setFont:this.setFont(ft);break;case o.OPS.showText:this.showText(ft[0]);break;case o.OPS.showSpacedText:this.showText(ft[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(ft[0],ft[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(ft[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(ft[0]);break;case o.OPS.setHScale:this.setHScale(ft[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);break;case o.OPS.setTextRise:this.setTextRise(ft[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(ft[0]);break;case o.OPS.setLineWidth:this.setLineWidth(ft[0]);break;case o.OPS.setLineJoin:this.setLineJoin(ft[0]);break;case o.OPS.setLineCap:this.setLineCap(ft[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(ft[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(ft[0],ft[1],ft[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ft[0],ft[1],ft[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(ft);break;case o.OPS.setFillColorN:this.setFillColorN(ft);break;case o.OPS.shadingFill:this.shadingFill(ft[0]);break;case o.OPS.setDash:this.setDash(ft[0],ft[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(ft[0]);break;case o.OPS.setFlatness:this.setFlatness(ft[0]);break;case o.OPS.setGState:this.setGState(ft[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(ft[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ft[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ft[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ft[0],ft[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);break;case o.OPS.constructPath:this.constructPath(ft[0],ft[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(mt.items);break;default:(0,o.warn)(`Unimplemented operator ${it}`);break}}}setWordSpacing(ot){this.current.wordSpacing=ot}setCharSpacing(ot){this.current.charSpacing=ot}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(ot,mt,it,dt,ft,Rt){const xt=this.current;xt.textMatrix=xt.lineMatrix=[ot,mt,it,dt,ft,Rt],xt.textMatrixScale=Math.hypot(ot,mt),xt.x=xt.lineX=0,xt.y=xt.lineY=0,xt.xcoords=[],xt.ycoords=[],xt.tspan=this.svgFactory.createElement("svg:tspan"),xt.tspan.setAttributeNS(null,"font-family",xt.fontFamily),xt.tspan.setAttributeNS(null,"font-size",`${pt(xt.fontSize)}px`),xt.tspan.setAttributeNS(null,"y",pt(-xt.y)),xt.txtElement=this.svgFactory.createElement("svg:text"),xt.txtElement.append(xt.tspan)}beginText(){const ot=this.current;ot.x=ot.lineX=0,ot.y=ot.lineY=0,ot.textMatrix=o.IDENTITY_MATRIX,ot.lineMatrix=o.IDENTITY_MATRIX,ot.textMatrixScale=1,ot.tspan=this.svgFactory.createElement("svg:tspan"),ot.txtElement=this.svgFactory.createElement("svg:text"),ot.txtgrp=this.svgFactory.createElement("svg:g"),ot.xcoords=[],ot.ycoords=[]}moveText(ot,mt){const it=this.current;it.x=it.lineX+=ot,it.y=it.lineY+=mt,it.xcoords=[],it.ycoords=[],it.tspan=this.svgFactory.createElement("svg:tspan"),it.tspan.setAttributeNS(null,"font-family",it.fontFamily),it.tspan.setAttributeNS(null,"font-size",`${pt(it.fontSize)}px`),it.tspan.setAttributeNS(null,"y",pt(-it.y))}showText(ot){const mt=this.current,it=mt.font,dt=mt.fontSize;if(dt===0)return;const ft=mt.fontSizeScale,Rt=mt.charSpacing,xt=mt.wordSpacing,wt=mt.fontDirection,jt=mt.textHScale*wt,sn=it.vertical,Kt=sn?1:-1,Yt=it.defaultVMetrics,Ht=dt*mt.fontMatrix[0];let Ut=0;for(const Xt of ot){if(Xt===null){Ut+=wt*xt;continue}else if(typeof Xt=="number"){Ut+=Kt*Xt*dt/1e3;continue}const kt=(Xt.isSpace?xt:0)+Rt,rt=Xt.fontChar;let at,Et,Ct=Xt.width;if(sn){let It;const Bt=Xt.vmetric||Yt;It=Xt.vmetric?Bt[1]:Ct*.5,It=-It*Ht;const Lt=Bt[2]*Ht;Ct=Bt?-Bt[0]:Ct,at=It/ft,Et=(Ut+Lt)/ft}else at=Ut/ft,Et=0;(Xt.isInFont||it.missingFile)&&(mt.xcoords.push(mt.x+at),sn&&mt.ycoords.push(-mt.y+Et),mt.tspan.textContent+=rt);const Pt=sn?Ct*Ht-kt*wt:Ct*Ht+kt*wt;Ut+=Pt}mt.tspan.setAttributeNS(null,"x",mt.xcoords.map(pt).join(" ")),sn?mt.tspan.setAttributeNS(null,"y",mt.ycoords.map(pt).join(" ")):mt.tspan.setAttributeNS(null,"y",pt(-mt.y)),sn?mt.y-=Ut:mt.x+=Ut*jt,mt.tspan.setAttributeNS(null,"font-family",mt.fontFamily),mt.tspan.setAttributeNS(null,"font-size",`${pt(mt.fontSize)}px`),mt.fontStyle!==c.fontStyle&&mt.tspan.setAttributeNS(null,"font-style",mt.fontStyle),mt.fontWeight!==c.fontWeight&&mt.tspan.setAttributeNS(null,"font-weight",mt.fontWeight);const At=mt.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(At===o.TextRenderingMode.FILL||At===o.TextRenderingMode.FILL_STROKE?(mt.fillColor!==c.fillColor&&mt.tspan.setAttributeNS(null,"fill",mt.fillColor),mt.fillAlpha<1&&mt.tspan.setAttributeNS(null,"fill-opacity",mt.fillAlpha)):mt.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?mt.tspan.setAttributeNS(null,"fill","transparent"):mt.tspan.setAttributeNS(null,"fill","none"),At===o.TextRenderingMode.STROKE||At===o.TextRenderingMode.FILL_STROKE){const Xt=1/(mt.textMatrixScale||1);this._setStrokeAttributes(mt.tspan,Xt)}let Ft=mt.textMatrix;mt.textRise!==0&&(Ft=Ft.slice(),Ft[5]+=mt.textRise),mt.txtElement.setAttributeNS(null,"transform",`${yt(Ft)} scale(${pt(jt)}, -1)`),mt.txtElement.setAttributeNS(h,"xml:space","preserve"),mt.txtElement.append(mt.tspan),mt.txtgrp.append(mt.txtElement),this._ensureTransformGroup().append(mt.txtElement)}setLeadingMoveText(ot,mt){this.setLeading(-mt),this.moveText(ot,mt)}addFontStyle(ot){if(!ot.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const mt=_e(ot.data,ot.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${ot.loadedName}"; src: url(${mt}); }
`}setFont(ot){const mt=this.current,it=this.commonObjs.get(ot[0]);let dt=ot[1];mt.font=it,this.embedFonts&&!it.missingFile&&!this.embeddedFonts[it.loadedName]&&(this.addFontStyle(it),this.embeddedFonts[it.loadedName]=it),mt.fontMatrix=it.fontMatrix||o.FONT_IDENTITY_MATRIX;let ft="normal";it.black?ft="900":it.bold&&(ft="bold");const Rt=it.italic?"italic":"normal";dt<0?(dt=-dt,mt.fontDirection=-1):mt.fontDirection=1,mt.fontSize=dt,mt.fontFamily=it.loadedName,mt.fontWeight=ft,mt.fontStyle=Rt,mt.tspan=this.svgFactory.createElement("svg:tspan"),mt.tspan.setAttributeNS(null,"y",pt(-mt.y)),mt.xcoords=[],mt.ycoords=[]}endText(){var mt;const ot=this.current;ot.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((mt=ot.txtElement)!=null&&mt.hasChildNodes())&&(ot.element=ot.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(ot){ot>0&&(this.current.lineWidth=ot)}setLineCap(ot){this.current.lineCap=b[ot]}setLineJoin(ot){this.current.lineJoin=$[ot]}setMiterLimit(ot){this.current.miterLimit=ot}setStrokeAlpha(ot){this.current.strokeAlpha=ot}setStrokeRGBColor(ot,mt,it){this.current.strokeColor=o.Util.makeHexColor(ot,mt,it)}setFillAlpha(ot){this.current.fillAlpha=ot}setFillRGBColor(ot,mt,it){this.current.fillColor=o.Util.makeHexColor(ot,mt,it),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(ot){this.current.strokeColor=this._makeColorN_Pattern(ot)}setFillColorN(ot){this.current.fillColor=this._makeColorN_Pattern(ot)}shadingFill(ot){const{width:mt,height:it}=this.viewport,dt=o.Util.inverseTransform(this.transformMatrix),[ft,Rt,xt,wt]=o.Util.getAxialAlignedBoundingBox([0,0,mt,it],dt),jt=this.svgFactory.createElement("svg:rect");jt.setAttributeNS(null,"x",ft),jt.setAttributeNS(null,"y",Rt),jt.setAttributeNS(null,"width",xt-ft),jt.setAttributeNS(null,"height",wt-Rt),jt.setAttributeNS(null,"fill",this._makeShadingPattern(ot)),this.current.fillAlpha<1&&jt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(jt)}_makeColorN_Pattern(ot){return ot[0]==="TilingPattern"?this._makeTilingPattern(ot):this._makeShadingPattern(ot)}_makeTilingPattern(ot){const mt=ot[1],it=ot[2],dt=ot[3]||o.IDENTITY_MATRIX,[ft,Rt,xt,wt]=ot[4],jt=ot[5],sn=ot[6],Kt=ot[7],Yt=`shading${nt++}`,[Ht,Ut,At,Ft]=o.Util.normalizeRect([...o.Util.applyTransform([ft,Rt],dt),...o.Util.applyTransform([xt,wt],dt)]),[Xt,kt]=o.Util.singularValueDecompose2dScale(dt),rt=jt*Xt,at=sn*kt,Et=this.svgFactory.createElement("svg:pattern");Et.setAttributeNS(null,"id",Yt),Et.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Et.setAttributeNS(null,"width",rt),Et.setAttributeNS(null,"height",at),Et.setAttributeNS(null,"x",`${Ht}`),Et.setAttributeNS(null,"y",`${Ut}`);const Ct=this.svg,Pt=this.transformMatrix,It=this.current.fillColor,Bt=this.current.strokeColor,Lt=this.svgFactory.create(At-Ht,Ft-Ut);if(this.svg=Lt,this.transformMatrix=dt,Kt===2){const an=o.Util.makeHexColor(...mt);this.current.fillColor=an,this.current.strokeColor=an}return this.executeOpTree(this.convertOpList(it)),this.svg=Ct,this.transformMatrix=Pt,this.current.fillColor=It,this.current.strokeColor=Bt,Et.append(Lt.childNodes[0]),this.defs.append(Et),`url(#${Yt})`}_makeShadingPattern(ot){switch(typeof ot=="string"&&(ot=this.objs.get(ot)),ot[0]){case"RadialAxial":const mt=`shading${nt++}`,it=ot[3];let dt;switch(ot[1]){case"axial":const ft=ot[4],Rt=ot[5];dt=this.svgFactory.createElement("svg:linearGradient"),dt.setAttributeNS(null,"id",mt),dt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),dt.setAttributeNS(null,"x1",ft[0]),dt.setAttributeNS(null,"y1",ft[1]),dt.setAttributeNS(null,"x2",Rt[0]),dt.setAttributeNS(null,"y2",Rt[1]);break;case"radial":const xt=ot[4],wt=ot[5],jt=ot[6],sn=ot[7];dt=this.svgFactory.createElement("svg:radialGradient"),dt.setAttributeNS(null,"id",mt),dt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),dt.setAttributeNS(null,"cx",wt[0]),dt.setAttributeNS(null,"cy",wt[1]),dt.setAttributeNS(null,"r",sn),dt.setAttributeNS(null,"fx",xt[0]),dt.setAttributeNS(null,"fy",xt[1]),dt.setAttributeNS(null,"fr",jt);break;default:throw new Error(`Unknown RadialAxial type: ${ot[1]}`)}for(const ft of it){const Rt=this.svgFactory.createElement("svg:stop");Rt.setAttributeNS(null,"offset",ft[0]),Rt.setAttributeNS(null,"stop-color",ft[1]),dt.append(Rt)}return this.defs.append(dt),`url(#${mt})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${ot[0]}`)}}setDash(ot,mt){this.current.dashArray=ot,this.current.dashPhase=mt}constructPath(ot,mt){const it=this.current;let dt=it.x,ft=it.y,Rt=[],xt=0;for(const wt of ot)switch(wt|0){case o.OPS.rectangle:dt=mt[xt++],ft=mt[xt++];const jt=mt[xt++],sn=mt[xt++],Kt=dt+jt,Yt=ft+sn;Rt.push("M",pt(dt),pt(ft),"L",pt(Kt),pt(ft),"L",pt(Kt),pt(Yt),"L",pt(dt),pt(Yt),"Z");break;case o.OPS.moveTo:dt=mt[xt++],ft=mt[xt++],Rt.push("M",pt(dt),pt(ft));break;case o.OPS.lineTo:dt=mt[xt++],ft=mt[xt++],Rt.push("L",pt(dt),pt(ft));break;case o.OPS.curveTo:dt=mt[xt+4],ft=mt[xt+5],Rt.push("C",pt(mt[xt]),pt(mt[xt+1]),pt(mt[xt+2]),pt(mt[xt+3]),pt(dt),pt(ft)),xt+=6;break;case o.OPS.curveTo2:Rt.push("C",pt(dt),pt(ft),pt(mt[xt]),pt(mt[xt+1]),pt(mt[xt+2]),pt(mt[xt+3])),dt=mt[xt+2],ft=mt[xt+3],xt+=4;break;case o.OPS.curveTo3:dt=mt[xt+2],ft=mt[xt+3],Rt.push("C",pt(mt[xt]),pt(mt[xt+1]),pt(dt),pt(ft),pt(dt),pt(ft)),xt+=4;break;case o.OPS.closePath:Rt.push("Z");break}Rt=Rt.join(" "),it.path&&ot.length>0&&ot[0]!==o.OPS.rectangle&&ot[0]!==o.OPS.moveTo?Rt=it.path.getAttributeNS(null,"d")+Rt:(it.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(it.path)),it.path.setAttributeNS(null,"d",Rt),it.path.setAttributeNS(null,"fill","none"),it.element=it.path,it.setCurrentPoint(dt,ft)}endPath(){const ot=this.current;if(ot.path=null,!this.pendingClip)return;if(!ot.element){this.pendingClip=null;return}const mt=`clippath${bt++}`,it=this.svgFactory.createElement("svg:clipPath");it.setAttributeNS(null,"id",mt),it.setAttributeNS(null,"transform",yt(this.transformMatrix));const dt=ot.element.cloneNode(!0);if(this.pendingClip==="evenodd"?dt.setAttributeNS(null,"clip-rule","evenodd"):dt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,it.append(dt),this.defs.append(it),ot.activeClipUrl){ot.clipGroup=null;for(const ft of this.extraStack)ft.clipGroup=null;it.setAttributeNS(null,"clip-path",ot.activeClipUrl)}ot.activeClipUrl=`url(#${mt})`,this.tgrp=null}clip(ot){this.pendingClip=ot}closePath(){const ot=this.current;if(ot.path){const mt=`${ot.path.getAttributeNS(null,"d")}Z`;ot.path.setAttributeNS(null,"d",mt)}}setLeading(ot){this.current.leading=-ot}setTextRise(ot){this.current.textRise=ot}setTextRenderingMode(ot){this.current.textRenderingMode=ot}setHScale(ot){this.current.textHScale=ot/100}setRenderingIntent(ot){}setFlatness(ot){}setGState(ot){for(const[mt,it]of ot)switch(mt){case"LW":this.setLineWidth(it);break;case"LC":this.setLineCap(it);break;case"LJ":this.setLineJoin(it);break;case"ML":this.setMiterLimit(it);break;case"D":this.setDash(it[0],it[1]);break;case"RI":this.setRenderingIntent(it);break;case"FL":this.setFlatness(it);break;case"Font":this.setFont(it);break;case"CA":this.setStrokeAlpha(it);break;case"ca":this.setFillAlpha(it);break;default:(0,o.warn)(`Unimplemented graphic state operator ${mt}`);break}}fill(){const ot=this.current;ot.element&&(ot.element.setAttributeNS(null,"fill",ot.fillColor),ot.element.setAttributeNS(null,"fill-opacity",ot.fillAlpha),this.endPath())}stroke(){const ot=this.current;ot.element&&(this._setStrokeAttributes(ot.element),ot.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(ot,mt=1){const it=this.current;let dt=it.dashArray;mt!==1&&dt.length>0&&(dt=dt.map(function(ft){return mt*ft})),ot.setAttributeNS(null,"stroke",it.strokeColor),ot.setAttributeNS(null,"stroke-opacity",it.strokeAlpha),ot.setAttributeNS(null,"stroke-miterlimit",pt(it.miterLimit)),ot.setAttributeNS(null,"stroke-linecap",it.lineCap),ot.setAttributeNS(null,"stroke-linejoin",it.lineJoin),ot.setAttributeNS(null,"stroke-width",pt(mt*it.lineWidth)+"px"),ot.setAttributeNS(null,"stroke-dasharray",dt.map(pt).join(" ")),ot.setAttributeNS(null,"stroke-dashoffset",pt(mt*it.dashPhase)+"px")}eoFill(){var ot;(ot=this.current.element)==null||ot.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var ot;(ot=this.current.element)==null||ot.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const ot=this.svgFactory.createElement("svg:rect");ot.setAttributeNS(null,"x","0"),ot.setAttributeNS(null,"y","0"),ot.setAttributeNS(null,"width","1px"),ot.setAttributeNS(null,"height","1px"),ot.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(ot)}paintImageXObject(ot){const mt=this.getObject(ot);if(!mt){(0,o.warn)(`Dependent image with object ID ${ot} is not ready yet`);return}this.paintInlineImageXObject(mt)}paintInlineImageXObject(ot,mt){const it=ot.width,dt=ot.height,ft=ct(ot,this.forceDataSchema,!!mt),Rt=this.svgFactory.createElement("svg:rect");Rt.setAttributeNS(null,"x","0"),Rt.setAttributeNS(null,"y","0"),Rt.setAttributeNS(null,"width",pt(it)),Rt.setAttributeNS(null,"height",pt(dt)),this.current.element=Rt,this.clip("nonzero");const xt=this.svgFactory.createElement("svg:image");xt.setAttributeNS(j,"xlink:href",ft),xt.setAttributeNS(null,"x","0"),xt.setAttributeNS(null,"y",pt(-dt)),xt.setAttributeNS(null,"width",pt(it)+"px"),xt.setAttributeNS(null,"height",pt(dt)+"px"),xt.setAttributeNS(null,"transform",`scale(${pt(1/it)} ${pt(-1/dt)})`),mt?mt.append(xt):this._ensureTransformGroup().append(xt)}paintImageMaskXObject(ot){const mt=this.getObject(ot.data,ot);if(mt.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const it=this.current,dt=mt.width,ft=mt.height,Rt=it.fillColor;it.maskId=`mask${et++}`;const xt=this.svgFactory.createElement("svg:mask");xt.setAttributeNS(null,"id",it.maskId);const wt=this.svgFactory.createElement("svg:rect");wt.setAttributeNS(null,"x","0"),wt.setAttributeNS(null,"y","0"),wt.setAttributeNS(null,"width",pt(dt)),wt.setAttributeNS(null,"height",pt(ft)),wt.setAttributeNS(null,"fill",Rt),wt.setAttributeNS(null,"mask",`url(#${it.maskId})`),this.defs.append(xt),this._ensureTransformGroup().append(wt),this.paintInlineImageXObject(mt,xt)}paintFormXObjectBegin(ot,mt){if(Array.isArray(ot)&&ot.length===6&&this.transform(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]),mt){const it=mt[2]-mt[0],dt=mt[3]-mt[1],ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x",mt[0]),ft.setAttributeNS(null,"y",mt[1]),ft.setAttributeNS(null,"width",pt(it)),ft.setAttributeNS(null,"height",pt(dt)),this.current.element=ft,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(ot){const mt=this.svgFactory.create(ot.width,ot.height),it=this.svgFactory.createElement("svg:defs");mt.append(it),this.defs=it;const dt=this.svgFactory.createElement("svg:g");return dt.setAttributeNS(null,"transform",yt(ot.transform)),mt.append(dt),this.svg=dt,mt}_ensureClipGroup(){if(!this.current.clipGroup){const ot=this.svgFactory.createElement("svg:g");ot.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(ot),this.current.clipGroup=ot}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",yt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=st},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class i{static textContent(o){const c=[],h={items:c,styles:Object.create(null)};function j(b){var ct;if(!b)return;let $=null;const _e=b.name;if(_e==="#text")$=b.value;else if(i.shouldBuildText(_e))(ct=b==null?void 0:b.attributes)!=null&&ct.textContent?$=b.attributes.textContent:b.value&&($=b.value);else return;if($!==null&&c.push({str:$}),!!b.children)for(const ut of b.children)j(ut)}return j(o),h}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}s.XfaText=i},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=yt,s.updateTextLayer=bt;var a=i(1),o=i(6);const c=1e5,h=30,j=.8,b=new Map;function $(et,nt){let st;if(nt&&a.FeatureTest.isOffscreenCanvasSupported)st=new OffscreenCanvas(et,et).getContext("2d",{alpha:!1});else{const gt=document.createElement("canvas");gt.width=gt.height=et,st=gt.getContext("2d",{alpha:!1})}return st}function _e(et,nt){const st=b.get(et);if(st)return st;const gt=$(h,nt);gt.font=`${h}px ${et}`;const ot=gt.measureText("");let mt=ot.fontBoundingBoxAscent,it=Math.abs(ot.fontBoundingBoxDescent);if(mt){const ft=mt/(mt+it);return b.set(et,ft),gt.canvas.width=gt.canvas.height=0,ft}gt.strokeStyle="red",gt.clearRect(0,0,h,h),gt.strokeText("g",0,0);let dt=gt.getImageData(0,0,h,h).data;it=0;for(let ft=dt.length-1-3;ft>=0;ft-=4)if(dt[ft]>0){it=Math.ceil(ft/4/h);break}gt.clearRect(0,0,h,h),gt.strokeText("A",0,h),dt=gt.getImageData(0,0,h,h).data,mt=0;for(let ft=0,Rt=dt.length;ft<Rt;ft+=4)if(dt[ft]>0){mt=h-Math.floor(ft/4/h);break}if(gt.canvas.width=gt.canvas.height=0,mt){const ft=mt/(mt+it);return b.set(et,ft),ft}return b.set(et,j),j}function ct(et,nt,st){const gt=document.createElement("span"),ot={angle:0,canvasWidth:0,hasText:nt.str!=="",hasEOL:nt.hasEOL,fontSize:0};et._textDivs.push(gt);const mt=a.Util.transform(et._transform,nt.transform);let it=Math.atan2(mt[1],mt[0]);const dt=st[nt.fontName];dt.vertical&&(it+=Math.PI/2);const ft=Math.hypot(mt[2],mt[3]),Rt=ft*_e(dt.fontFamily,et._isOffscreenCanvasSupported);let xt,wt;it===0?(xt=mt[4],wt=mt[5]-Rt):(xt=mt[4]+Rt*Math.sin(it),wt=mt[5]-Rt*Math.cos(it));const jt="calc(var(--scale-factor)*",sn=gt.style;et._container===et._rootContainer?(sn.left=`${(100*xt/et._pageWidth).toFixed(2)}%`,sn.top=`${(100*wt/et._pageHeight).toFixed(2)}%`):(sn.left=`${jt}${xt.toFixed(2)}px)`,sn.top=`${jt}${wt.toFixed(2)}px)`),sn.fontSize=`${jt}${ft.toFixed(2)}px)`,sn.fontFamily=dt.fontFamily,ot.fontSize=ft,gt.setAttribute("role","presentation"),gt.textContent=nt.str,gt.dir=nt.dir,et._fontInspectorEnabled&&(gt.dataset.fontName=nt.fontName),it!==0&&(ot.angle=it*(180/Math.PI));let Kt=!1;if(nt.str.length>1)Kt=!0;else if(nt.str!==" "&&nt.transform[0]!==nt.transform[3]){const Yt=Math.abs(nt.transform[0]),Ht=Math.abs(nt.transform[3]);Yt!==Ht&&Math.max(Yt,Ht)/Math.min(Yt,Ht)>1.5&&(Kt=!0)}Kt&&(ot.canvasWidth=dt.vertical?nt.height:nt.width),et._textDivProperties.set(gt,ot),et._isReadableStream&&et._layoutText(gt)}function ut(et){const{div:nt,scale:st,properties:gt,ctx:ot,prevFontSize:mt,prevFontFamily:it}=et,{style:dt}=nt;let ft="";if(gt.canvasWidth!==0&&gt.hasText){const{fontFamily:Rt}=dt,{canvasWidth:xt,fontSize:wt}=gt;(mt!==wt||it!==Rt)&&(ot.font=`${wt*st}px ${Rt}`,et.prevFontSize=wt,et.prevFontFamily=Rt);const{width:jt}=ot.measureText(nt.textContent);jt>0&&(ft=`scaleX(${xt*st/jt})`)}gt.angle!==0&&(ft=`rotate(${gt.angle}deg) ${ft}`),ft.length>0&&(dt.transform=ft)}function ht(et){if(et._canceled)return;const nt=et._textDivs,st=et._capability;if(nt.length>c){st.resolve();return}if(!et._isReadableStream)for(const ot of nt)et._layoutText(ot);st.resolve()}class pt{constructor({textContentSource:nt,container:st,viewport:gt,textDivs:ot,textDivProperties:mt,textContentItemsStr:it,isOffscreenCanvasSupported:dt}){var jt;this._textContentSource=nt,this._isReadableStream=nt instanceof ReadableStream,this._container=this._rootContainer=st,this._textDivs=ot||[],this._textContentItemsStr=it||[],this._isOffscreenCanvasSupported=dt,this._fontInspectorEnabled=!!((jt=globalThis.FontInspector)!=null&&jt.enabled),this._reader=null,this._textDivProperties=mt||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:gt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:$(0,dt)};const{pageWidth:ft,pageHeight:Rt,pageX:xt,pageY:wt}=gt.rawDims;this._transform=[1,0,0,-1,-xt,wt+Rt],this._pageWidth=ft,this._pageHeight=Rt,(0,o.setLayerDimensions)(st,gt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(nt,st){for(const gt of nt){if(gt.str===void 0){if(gt.type==="beginMarkedContentProps"||gt.type==="beginMarkedContent"){const ot=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),gt.id!==null&&this._container.setAttribute("id",`${gt.id}`),ot.append(this._container)}else gt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(gt.str),ct(this,gt,st)}}_layoutText(nt){const st=this._layoutTextParams.properties=this._textDivProperties.get(nt);if(this._layoutTextParams.div=nt,ut(this._layoutTextParams),st.hasText&&this._container.append(nt),st.hasEOL){const gt=document.createElement("br");gt.setAttribute("role","presentation"),this._container.append(gt)}}_render(){const nt=new a.PromiseCapability;let st=Object.create(null);if(this._isReadableStream){const gt=()=>{this._reader.read().then(({value:ot,done:mt})=>{if(mt){nt.resolve();return}Object.assign(st,ot.styles),this._processItems(ot.items,st),gt()},nt.reject)};this._reader=this._textContentSource.getReader(),gt()}else if(this._textContentSource){const{items:gt,styles:ot}=this._textContentSource;this._processItems(gt,ot),nt.resolve()}else throw new Error('No "textContentSource" parameter specified.');nt.promise.then(()=>{st=null,ht(this)},this._capability.reject)}}s.TextLayerRenderTask=pt;function yt(et){!et.textContentSource&&(et.textContent||et.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),et.textContentSource=et.textContent||et.textContentStream);const{container:nt,viewport:st}=et,gt=getComputedStyle(nt),ot=gt.getPropertyValue("visibility"),mt=parseFloat(gt.getPropertyValue("--scale-factor"));ot==="visible"&&(!mt||Math.abs(mt-st.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const it=new pt(et);return it._render(),it}function bt({container:et,viewport:nt,textDivs:st,textDivProperties:gt,isOffscreenCanvasSupported:ot,mustRotate:mt=!0,mustRescale:it=!0}){if(mt&&(0,o.setLayerDimensions)(et,{rotation:nt.rotation}),it){const dt=$(0,ot),Rt={prevFontSize:null,prevFontFamily:null,div:null,scale:nt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:dt};for(const xt of st)Rt.properties=gt.get(xt),Rt.div=xt,ut(Rt)}}},(e,s,i)=>{var _e,ct,ut,ht,pt,yt,bt,et,nt,st,gt,Oo,$s,Bo,Uo;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var a=i(1),o=i(4),c=i(28),h=i(33),j=i(6),b=i(34);const ft=class ft{constructor({uiManager:xt,pageIndex:wt,div:jt,accessibilityManager:sn,annotationLayer:Kt,viewport:Yt,l10n:Ht}){dn(this,gt);dn(this,_e);dn(this,ct,!1);dn(this,ut,null);dn(this,ht,this.pointerup.bind(this));dn(this,pt,this.pointerdown.bind(this));dn(this,yt,new Map);dn(this,bt,!1);dn(this,et,!1);dn(this,nt,!1);dn(this,st);const Ut=[c.FreeTextEditor,h.InkEditor,b.StampEditor];if(!ft._initialized){ft._initialized=!0;for(const At of Ut)At.initialize(Ht)}xt.registerEditorTypes(Ut),hn(this,st,xt),this.pageIndex=wt,this.div=jt,hn(this,_e,sn),hn(this,ut,Kt),this.viewport=Yt,tt(this,st).addLayer(this)}get isEmpty(){return tt(this,yt).size===0}updateToolbar(xt){tt(this,st).updateToolbar(xt)}updateMode(xt=tt(this,st).getMode()){Qt(this,gt,Uo).call(this),xt===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),xt!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",xt===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",xt===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",xt===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(xt){if(!xt&&tt(this,st).getMode()!==a.AnnotationEditorType.INK)return;if(!xt){for(const jt of tt(this,yt).values())if(jt.isEmpty()){jt.setInBackground();return}}Qt(this,gt,$s).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(xt){tt(this,st).setEditingState(xt)}addCommands(xt){tt(this,st).addCommands(xt)}enable(){this.div.style.pointerEvents="auto";const xt=new Set;for(const jt of tt(this,yt).values())jt.enableEditing(),jt.annotationElementId&&xt.add(jt.annotationElementId);if(!tt(this,ut))return;const wt=tt(this,ut).getEditableAnnotations();for(const jt of wt){if(jt.hide(),tt(this,st).isDeletedAnnotationElement(jt.data.id)||xt.has(jt.data.id))continue;const sn=this.deserialize(jt);sn&&(this.addOrRebuild(sn),sn.enableEditing())}}disable(){var wt;hn(this,nt,!0),this.div.style.pointerEvents="none";const xt=new Set;for(const jt of tt(this,yt).values()){if(jt.disableEditing(),!jt.annotationElementId||jt.serialize()!==null){xt.add(jt.annotationElementId);continue}(wt=this.getEditableAnnotation(jt.annotationElementId))==null||wt.show(),jt.remove()}if(tt(this,ut)){const jt=tt(this,ut).getEditableAnnotations();for(const sn of jt){const{id:Kt}=sn.data;xt.has(Kt)||tt(this,st).isDeletedAnnotationElement(Kt)||sn.show()}}Qt(this,gt,Uo).call(this),this.isEmpty&&(this.div.hidden=!0),hn(this,nt,!1)}getEditableAnnotation(xt){var wt;return((wt=tt(this,ut))==null?void 0:wt.getEditableAnnotation(xt))||null}setActiveEditor(xt){tt(this,st).getActive()!==xt&&tt(this,st).setActiveEditor(xt)}enableClick(){this.div.addEventListener("pointerdown",tt(this,pt)),this.div.addEventListener("pointerup",tt(this,ht))}disableClick(){this.div.removeEventListener("pointerdown",tt(this,pt)),this.div.removeEventListener("pointerup",tt(this,ht))}attach(xt){tt(this,yt).set(xt.id,xt);const{annotationElementId:wt}=xt;wt&&tt(this,st).isDeletedAnnotationElement(wt)&&tt(this,st).removeDeletedAnnotationElement(xt)}detach(xt){var wt;tt(this,yt).delete(xt.id),(wt=tt(this,_e))==null||wt.removePointerInTextLayer(xt.contentDiv),!tt(this,nt)&&xt.annotationElementId&&tt(this,st).addDeletedAnnotationElement(xt)}remove(xt){this.detach(xt),tt(this,st).removeEditor(xt),xt.div.contains(document.activeElement)&&setTimeout(()=>{tt(this,st).focusMainContainer()},0),xt.div.remove(),xt.isAttachedToDOM=!1,tt(this,et)||this.addInkEditorIfNeeded(!1)}changeParent(xt){var wt;xt.parent!==this&&(xt.annotationElementId&&(tt(this,st).addDeletedAnnotationElement(xt.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(xt),xt.annotationElementId=null),this.attach(xt),(wt=xt.parent)==null||wt.detach(xt),xt.setParent(this),xt.div&&xt.isAttachedToDOM&&(xt.div.remove(),this.div.append(xt.div)))}add(xt){if(this.changeParent(xt),tt(this,st).addEditor(xt),this.attach(xt),!xt.isAttachedToDOM){const wt=xt.render();this.div.append(wt),xt.isAttachedToDOM=!0}xt.fixAndSetPosition(),xt.onceAdded(),tt(this,st).addToAnnotationStorage(xt)}moveEditorInDOM(xt){var jt;if(!xt.isAttachedToDOM)return;const{activeElement:wt}=document;xt.div.contains(wt)&&(xt._focusEventsAllowed=!1,setTimeout(()=>{xt.div.contains(document.activeElement)?xt._focusEventsAllowed=!0:(xt.div.addEventListener("focusin",()=>{xt._focusEventsAllowed=!0},{once:!0}),wt.focus())},0)),xt._structTreeParentId=(jt=tt(this,_e))==null?void 0:jt.moveElementInDOM(this.div,xt.div,xt.contentDiv,!0)}addOrRebuild(xt){xt.needsToBeRebuilt()?xt.rebuild():this.add(xt)}addUndoableEditor(xt){const wt=()=>xt._uiManager.rebuild(xt),jt=()=>{xt.remove()};this.addCommands({cmd:wt,undo:jt,mustExec:!1})}getNextId(){return tt(this,st).getId()}pasteEditor(xt,wt){tt(this,st).updateToolbar(xt),tt(this,st).updateMode(xt);const{offsetX:jt,offsetY:sn}=Qt(this,gt,Bo).call(this),Kt=this.getNextId(),Yt=Qt(this,gt,Oo).call(this,{parent:this,id:Kt,x:jt,y:sn,uiManager:tt(this,st),isCentered:!0,...wt});Yt&&this.add(Yt)}deserialize(xt){switch(xt.annotationType??xt.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(xt,this,tt(this,st));case a.AnnotationEditorType.INK:return h.InkEditor.deserialize(xt,this,tt(this,st));case a.AnnotationEditorType.STAMP:return b.StampEditor.deserialize(xt,this,tt(this,st))}return null}addNewEditor(){Qt(this,gt,$s).call(this,Qt(this,gt,Bo).call(this),!0)}setSelected(xt){tt(this,st).setSelected(xt)}toggleSelected(xt){tt(this,st).toggleSelected(xt)}isSelected(xt){return tt(this,st).isSelected(xt)}unselect(xt){tt(this,st).unselect(xt)}pointerup(xt){const{isMac:wt}=a.FeatureTest.platform;if(!(xt.button!==0||xt.ctrlKey&&wt)&&xt.target===this.div&&tt(this,bt)){if(hn(this,bt,!1),!tt(this,ct)){hn(this,ct,!0);return}if(tt(this,st).getMode()===a.AnnotationEditorType.STAMP){tt(this,st).unselectAll();return}Qt(this,gt,$s).call(this,xt,!1)}}pointerdown(xt){if(tt(this,bt)){hn(this,bt,!1);return}const{isMac:wt}=a.FeatureTest.platform;if(xt.button!==0||xt.ctrlKey&&wt||xt.target!==this.div)return;hn(this,bt,!0);const jt=tt(this,st).getActive();hn(this,ct,!jt||jt.isEmpty())}findNewParent(xt,wt,jt){const sn=tt(this,st).findParent(wt,jt);return sn===null||sn===this?!1:(sn.changeParent(xt),!0)}destroy(){var xt,wt;((xt=tt(this,st).getActive())==null?void 0:xt.parent)===this&&(tt(this,st).commitOrRemove(),tt(this,st).setActiveEditor(null));for(const jt of tt(this,yt).values())(wt=tt(this,_e))==null||wt.removePointerInTextLayer(jt.contentDiv),jt.setParent(null),jt.isAttachedToDOM=!1,jt.div.remove();this.div=null,tt(this,yt).clear(),tt(this,st).removeLayer(this)}render({viewport:xt}){this.viewport=xt,(0,j.setLayerDimensions)(this.div,xt);for(const wt of tt(this,st).getEditors(this.pageIndex))this.add(wt);this.updateMode()}update({viewport:xt}){tt(this,st).commitOrRemove(),this.viewport=xt,(0,j.setLayerDimensions)(this.div,{rotation:xt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:xt,pageHeight:wt}=this.viewport.rawDims;return[xt,wt]}};_e=new WeakMap,ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,pt=new WeakMap,yt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,gt=new WeakSet,Oo=function(xt){switch(tt(this,st).getMode()){case a.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(xt);case a.AnnotationEditorType.INK:return new h.InkEditor(xt);case a.AnnotationEditorType.STAMP:return new b.StampEditor(xt)}return null},$s=function(xt,wt){const jt=this.getNextId(),sn=Qt(this,gt,Oo).call(this,{parent:this,id:jt,x:xt.offsetX,y:xt.offsetY,uiManager:tt(this,st),isCentered:wt});return sn&&this.add(sn),sn},Bo=function(){const{x:xt,y:wt,width:jt,height:sn}=this.div.getBoundingClientRect(),Kt=Math.max(0,xt),Yt=Math.max(0,wt),Ht=Math.min(window.innerWidth,xt+jt),Ut=Math.min(window.innerHeight,wt+sn),At=(Kt+Ht)/2-xt,Ft=(Yt+Ut)/2-wt,[Xt,kt]=this.viewport.rotation%180===0?[At,Ft]:[Ft,At];return{offsetX:Xt,offsetY:kt}},Uo=function(){hn(this,et,!0);for(const xt of tt(this,yt).values())xt.isEmpty()&&xt.remove();hn(this,et,!1)},xr(ft,"_initialized",!1);let $=ft;s.AnnotationEditorLayer=$},(e,s,i)=>{var b,$,_e,ct,ut,ht,pt,yt,bt,et,cu,du,hu,vs,zo,fu,Wo;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var a=i(1),o=i(5),c=i(4),h=i(29);const ft=class ft extends c.AnnotationEditor{constructor(wt){super({...wt,name:"freeTextEditor"});dn(this,et);dn(this,b,this.editorDivBlur.bind(this));dn(this,$,this.editorDivFocus.bind(this));dn(this,_e,this.editorDivInput.bind(this));dn(this,ct,this.editorDivKeydown.bind(this));dn(this,ut);dn(this,ht,"");dn(this,pt,`${this.id}-editor`);dn(this,yt);dn(this,bt,null);hn(this,ut,wt.color||ft._defaultColor||c.AnnotationEditor._defaultLineColor),hn(this,yt,wt.fontSize||ft._defaultFontSize)}static get _keyboardManager(){const wt=ft.prototype,jt=Yt=>Yt.isEmpty(),sn=o.AnnotationEditorUIManager.TRANSLATE_SMALL,Kt=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],wt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],wt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],wt._translateEmpty,{args:[-sn,0],checker:jt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],wt._translateEmpty,{args:[-Kt,0],checker:jt}],[["ArrowRight","mac+ArrowRight"],wt._translateEmpty,{args:[sn,0],checker:jt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],wt._translateEmpty,{args:[Kt,0],checker:jt}],[["ArrowUp","mac+ArrowUp"],wt._translateEmpty,{args:[0,-sn],checker:jt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],wt._translateEmpty,{args:[0,-Kt],checker:jt}],[["ArrowDown","mac+ArrowDown"],wt._translateEmpty,{args:[0,sn],checker:jt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],wt._translateEmpty,{args:[0,Kt],checker:jt}]]))}static initialize(wt){c.AnnotationEditor.initialize(wt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const jt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(jt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(wt,jt){switch(wt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:ft._defaultFontSize=jt;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:ft._defaultColor=jt;break}}updateParams(wt,jt){switch(wt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Qt(this,et,cu).call(this,jt);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Qt(this,et,du).call(this,jt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,ft._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,ft._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,tt(this,yt)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,tt(this,ut)]]}_translateEmpty(wt,jt){this._uiManager.translateSelectedEditors(wt,jt,!0)}getInitialTranslation(){const wt=this.parentScale;return[-ft._internalPadding*wt,-(ft._internalPadding+tt(this,yt))*wt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",tt(this,ct)),this.editorDiv.addEventListener("focus",tt(this,$)),this.editorDiv.addEventListener("blur",tt(this,b)),this.editorDiv.addEventListener("input",tt(this,_e)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",tt(this,pt)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",tt(this,ct)),this.editorDiv.removeEventListener("focus",tt(this,$)),this.editorDiv.removeEventListener("blur",tt(this,b)),this.editorDiv.removeEventListener("input",tt(this,_e)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(wt){this._focusEventsAllowed&&(super.focusin(wt),wt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var wt;if(this.width){Qt(this,et,Wo).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(wt=this._initialOptions)!=null&&wt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const wt=tt(this,ht),jt=hn(this,ht,Qt(this,et,hu).call(this).trimEnd());if(wt===jt)return;const sn=Kt=>{if(hn(this,ht,Kt),!Kt){this.remove();return}Qt(this,et,zo).call(this),this._uiManager.rebuild(this),Qt(this,et,vs).call(this)};this.addCommands({cmd:()=>{sn(jt)},undo:()=>{sn(wt)},mustExec:!1}),Qt(this,et,vs).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(wt){this.enterInEditMode()}keydown(wt){wt.target===this.div&&wt.key==="Enter"&&(this.enterInEditMode(),wt.preventDefault())}editorDivKeydown(wt){ft._keyboardManager.exec(this,wt)}editorDivFocus(wt){this.isEditing=!0}editorDivBlur(wt){this.isEditing=!1}editorDivInput(wt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let wt,jt;this.width&&(wt=this.x,jt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",tt(this,pt)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Kt=>{var Yt;return(Yt=this.editorDiv)==null?void 0:Yt.setAttribute("aria-label",Kt)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Kt=>{var Yt;return(Yt=this.editorDiv)==null?void 0:Yt.setAttribute("default-content",Kt)}),this.editorDiv.contentEditable=!0;const{style:sn}=this.editorDiv;if(sn.fontSize=`calc(${tt(this,yt)}px * var(--scale-factor))`,sn.color=tt(this,ut),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Kt,Yt]=this.parentDimensions;if(this.annotationElementId){const{position:Ht}=tt(this,bt);let[Ut,At]=this.getInitialTranslation();[Ut,At]=this.pageTranslationToScreen(Ut,At);const[Ft,Xt]=this.pageDimensions,[kt,rt]=this.pageTranslation;let at,Et;switch(this.rotation){case 0:at=wt+(Ht[0]-kt)/Ft,Et=jt+this.height-(Ht[1]-rt)/Xt;break;case 90:at=wt+(Ht[0]-kt)/Ft,Et=jt-(Ht[1]-rt)/Xt,[Ut,At]=[At,-Ut];break;case 180:at=wt-this.width+(Ht[0]-kt)/Ft,Et=jt-(Ht[1]-rt)/Xt,[Ut,At]=[-Ut,-At];break;case 270:at=wt+(Ht[0]-kt-this.height*Xt)/Ft,Et=jt+(Ht[1]-rt-this.width*Ft)/Xt,[Ut,At]=[-At,Ut];break}this.setAt(at*Kt,Et*Yt,Ut,At)}else this.setAt(wt*Kt,jt*Yt,this.width*Kt,this.height*Yt);Qt(this,et,zo).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(wt,jt,sn){let Kt=null;if(wt instanceof h.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ht,fontColor:Ut},rect:At,rotation:Ft,id:Xt},textContent:kt,textPosition:rt,parent:{page:{pageNumber:at}}}=wt;if(!kt||kt.length===0)return null;Kt=wt={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(Ut),fontSize:Ht,value:kt.join(`
`),position:rt,pageIndex:at-1,rect:At,rotation:Ft,id:Xt,deleted:!1}}const Yt=super.deserialize(wt,jt,sn);return hn(Yt,yt,wt.fontSize),hn(Yt,ut,a.Util.makeHexColor(...wt.color)),hn(Yt,ht,wt.value),Yt.annotationElementId=wt.id||null,hn(Yt,bt,Kt),Yt}serialize(wt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const jt=ft._internalPadding*this.parentScale,sn=this.getRect(jt,jt),Kt=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:tt(this,ut)),Yt={annotationType:a.AnnotationEditorType.FREETEXT,color:Kt,fontSize:tt(this,yt),value:tt(this,ht),pageIndex:this.pageIndex,rect:sn,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return wt?Yt:this.annotationElementId&&!Qt(this,et,fu).call(this,Yt)?null:(Yt.id=this.annotationElementId,Yt)}};b=new WeakMap,$=new WeakMap,_e=new WeakMap,ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,pt=new WeakMap,yt=new WeakMap,bt=new WeakMap,et=new WeakSet,cu=function(wt){const jt=Kt=>{this.editorDiv.style.fontSize=`calc(${Kt}px * var(--scale-factor))`,this.translate(0,-(Kt-tt(this,yt))*this.parentScale),hn(this,yt,Kt),Qt(this,et,vs).call(this)},sn=tt(this,yt);this.addCommands({cmd:()=>{jt(wt)},undo:()=>{jt(sn)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},du=function(wt){const jt=tt(this,ut);this.addCommands({cmd:()=>{hn(this,ut,this.editorDiv.style.color=wt)},undo:()=>{hn(this,ut,this.editorDiv.style.color=jt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},hu=function(){const wt=this.editorDiv.getElementsByTagName("div");if(wt.length===0)return this.editorDiv.innerText;const jt=[];for(const sn of wt)jt.push(sn.innerText.replace(/\r\n?|\n/,""));return jt.join(`
`)},vs=function(){const[wt,jt]=this.parentDimensions;let sn;if(this.isAttachedToDOM)sn=this.div.getBoundingClientRect();else{const{currentLayer:Kt,div:Yt}=this,Ht=Yt.style.display;Yt.style.display="hidden",Kt.div.append(this.div),sn=Yt.getBoundingClientRect(),Yt.remove(),Yt.style.display=Ht}this.rotation%180===this.parentRotation%180?(this.width=sn.width/wt,this.height=sn.height/jt):(this.width=sn.height/wt,this.height=sn.width/jt),this.fixAndSetPosition()},zo=function(){if(this.editorDiv.replaceChildren(),!!tt(this,ht))for(const wt of tt(this,ht).split(`
`)){const jt=document.createElement("div");jt.append(wt?document.createTextNode(wt):document.createElement("br")),this.editorDiv.append(jt)}},fu=function(wt){const{value:jt,fontSize:sn,color:Kt,rect:Yt,pageIndex:Ht}=tt(this,bt);return wt.value!==jt||wt.fontSize!==sn||wt.rect.some((Ut,At)=>Math.abs(Ut-Yt[At])>=1)||wt.color.some((Ut,At)=>Ut!==Kt[At])||wt.pageIndex!==Ht},Wo=function(wt=!1){if(!this.annotationElementId)return;if(Qt(this,et,vs).call(this),!wt&&(this.width===0||this.height===0)){setTimeout(()=>Qt(this,et,Wo).call(this,!0),0);return}const jt=ft._internalPadding*this.parentScale;tt(this,bt).rect=this.getRect(jt,jt)},xr(ft,"_freeTextDefaultContent",""),xr(ft,"_internalPadding",0),xr(ft,"_defaultColor",null),xr(ft,"_defaultFontSize",10),xr(ft,"_type","freetext");let j=ft;s.FreeTextEditor=j},(e,s,i)=>{var Et,Pt,qr,pu,Lt,an,rn,En,kn,An,on,Vt,St,Nt,Gt,Jt,vn,Sn,Tn,Zt,In,Dn,mu,Gs,Ho,Vo,Qn,ar,dr,Rn,zt,cn,On,Ko,jn,Ot,_n,Mn,gu,$o;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var a=i(1),o=i(6),c=i(3),h=i(30),j=i(31),b=i(32);const $=1e3,_e=9,ct=new WeakSet;function ut(Un){return{width:Un[2]-Un[0],height:Un[3]-Un[1]}}class ht{static create(Dt){switch(Dt.data.annotationType){case a.AnnotationType.LINK:return new yt(Dt);case a.AnnotationType.TEXT:return new bt(Dt);case a.AnnotationType.WIDGET:switch(Dt.data.fieldType){case"Tx":return new nt(Dt);case"Btn":return Dt.data.radioButton?new ot(Dt):Dt.data.checkBox?new gt(Dt):new mt(Dt);case"Ch":return new it(Dt);case"Sig":return new st(Dt)}return new et(Dt);case a.AnnotationType.POPUP:return new dt(Dt);case a.AnnotationType.FREETEXT:return new Rt(Dt);case a.AnnotationType.LINE:return new xt(Dt);case a.AnnotationType.SQUARE:return new wt(Dt);case a.AnnotationType.CIRCLE:return new jt(Dt);case a.AnnotationType.POLYLINE:return new sn(Dt);case a.AnnotationType.CARET:return new Yt(Dt);case a.AnnotationType.INK:return new Ht(Dt);case a.AnnotationType.POLYGON:return new Kt(Dt);case a.AnnotationType.HIGHLIGHT:return new Ut(Dt);case a.AnnotationType.UNDERLINE:return new At(Dt);case a.AnnotationType.SQUIGGLY:return new Ft(Dt);case a.AnnotationType.STRIKEOUT:return new Xt(Dt);case a.AnnotationType.STAMP:return new kt(Dt);case a.AnnotationType.FILEATTACHMENT:return new rt(Dt);default:return new pt(Dt)}}}const Ct=class Ct{constructor(Dt,{isRenderable:Tt=!1,ignoreBorder:$t=!1,createQuadrilaterals:gn=!1}={}){dn(this,Et,!1);this.isRenderable=Tt,this.data=Dt.data,this.layer=Dt.layer,this.linkService=Dt.linkService,this.downloadManager=Dt.downloadManager,this.imageResourcesPath=Dt.imageResourcesPath,this.renderForms=Dt.renderForms,this.svgFactory=Dt.svgFactory,this.annotationStorage=Dt.annotationStorage,this.enableScripting=Dt.enableScripting,this.hasJSActions=Dt.hasJSActions,this._fieldObjects=Dt.fieldObjects,this.parent=Dt.parent,Tt&&(this.container=this._createContainer($t)),gn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Dt,contentsObj:Tt,richText:$t}){return!!(Dt!=null&&Dt.str||Tt!=null&&Tt.str||$t!=null&&$t.str)}get hasPopupData(){return Ct._hasPopupData(this.data)}_createContainer(Dt){const{data:Tt,parent:{page:$t,viewport:gn}}=this,xn=document.createElement("section");xn.setAttribute("data-annotation-id",Tt.id),this instanceof et||(xn.tabIndex=$),xn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&xn.setAttribute("aria-haspopup","dialog"),Tt.noRotate&&xn.classList.add("norotate");const{pageWidth:bn,pageHeight:Cn,pageX:Xn,pageY:Hn}=gn.rawDims;if(!Tt.rect||this instanceof dt){const{rotation:tr}=Tt;return!Tt.hasOwnCanvas&&tr!==0&&this.setRotation(tr,xn),xn}const{width:Fn,height:nr}=ut(Tt.rect),Gn=a.Util.normalizeRect([Tt.rect[0],$t.view[3]-Tt.rect[1]+$t.view[1],Tt.rect[2],$t.view[3]-Tt.rect[3]+$t.view[1]]);if(!Dt&&Tt.borderStyle.width>0){xn.style.borderWidth=`${Tt.borderStyle.width}px`;const tr=Tt.borderStyle.horizontalCornerRadius,sr=Tt.borderStyle.verticalCornerRadius;if(tr>0||sr>0){const mr=`calc(${tr}px * var(--scale-factor)) / calc(${sr}px * var(--scale-factor))`;xn.style.borderRadius=mr}else if(this instanceof ot){const mr=`calc(${Fn}px * var(--scale-factor)) / calc(${nr}px * var(--scale-factor))`;xn.style.borderRadius=mr}switch(Tt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:xn.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:xn.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:xn.style.borderBottomStyle="solid";break}const lr=Tt.borderColor||null;lr?(hn(this,Et,!0),xn.style.borderColor=a.Util.makeHexColor(lr[0]|0,lr[1]|0,lr[2]|0)):xn.style.borderWidth=0}xn.style.left=`${100*(Gn[0]-Xn)/bn}%`,xn.style.top=`${100*(Gn[1]-Hn)/Cn}%`;const{rotation:Vn}=Tt;return Tt.hasOwnCanvas||Vn===0?(xn.style.width=`${100*Fn/bn}%`,xn.style.height=`${100*nr/Cn}%`):this.setRotation(Vn,xn),xn}setRotation(Dt,Tt=this.container){if(!this.data.rect)return;const{pageWidth:$t,pageHeight:gn}=this.parent.viewport.rawDims,{width:xn,height:bn}=ut(this.data.rect);let Cn,Xn;Dt%180===0?(Cn=100*xn/$t,Xn=100*bn/gn):(Cn=100*bn/$t,Xn=100*xn/gn),Tt.style.width=`${Cn}%`,Tt.style.height=`${Xn}%`,Tt.setAttribute("data-main-rotation",(360-Dt)%360)}get _commonActions(){const Dt=(Tt,$t,gn)=>{const xn=gn.detail[Tt],bn=xn[0],Cn=xn.slice(1);gn.target.style[$t]=h.ColorConverters[`${bn}_HTML`](Cn),this.annotationStorage.setValue(this.data.id,{[$t]:h.ColorConverters[`${bn}_rgb`](Cn)})};return(0,a.shadow)(this,"_commonActions",{display:Tt=>{const{display:$t}=Tt.detail,gn=$t%2===1;this.container.style.visibility=gn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:gn,noPrint:$t===1||$t===2})},print:Tt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Tt.detail.print})},hidden:Tt=>{const{hidden:$t}=Tt.detail;this.container.style.visibility=$t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:$t,noView:$t})},focus:Tt=>{setTimeout(()=>Tt.target.focus({preventScroll:!1}),0)},userName:Tt=>{Tt.target.title=Tt.detail.userName},readonly:Tt=>{Tt.target.disabled=Tt.detail.readonly},required:Tt=>{this._setRequired(Tt.target,Tt.detail.required)},bgColor:Tt=>{Dt("bgColor","backgroundColor",Tt)},fillColor:Tt=>{Dt("fillColor","backgroundColor",Tt)},fgColor:Tt=>{Dt("fgColor","color",Tt)},textColor:Tt=>{Dt("textColor","color",Tt)},borderColor:Tt=>{Dt("borderColor","borderColor",Tt)},strokeColor:Tt=>{Dt("strokeColor","borderColor",Tt)},rotation:Tt=>{const $t=Tt.detail.rotation;this.setRotation($t),this.annotationStorage.setValue(this.data.id,{rotation:$t})}})}_dispatchEventFromSandbox(Dt,Tt){const $t=this._commonActions;for(const gn of Object.keys(Tt.detail)){const xn=Dt[gn]||$t[gn];xn==null||xn(Tt)}}_setDefaultPropertiesFromJS(Dt){if(!this.enableScripting)return;const Tt=this.annotationStorage.getRawValue(this.data.id);if(!Tt)return;const $t=this._commonActions;for(const[gn,xn]of Object.entries(Tt)){const bn=$t[gn];if(bn){const Cn={detail:{[gn]:xn},target:Dt};bn(Cn),delete Tt[gn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Dt}=this.data;if(!Dt)return;const[Tt,$t,gn,xn]=this.data.rect;if(Dt.length===1){const[,{x:sr,y:lr},{x:mr,y:yr}]=Dt[0];if(gn===sr&&xn===lr&&Tt===mr&&$t===yr)return}const{style:bn}=this.container;let Cn;if(tt(this,Et)){const{borderColor:sr,borderWidth:lr}=bn;bn.borderWidth=0,Cn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${sr}" stroke-width="${lr}">`],this.container.classList.add("hasBorder")}const Xn=gn-Tt,Hn=xn-$t,{svgFactory:Fn}=this,nr=Fn.createElement("svg");nr.classList.add("quadrilateralsContainer"),nr.setAttribute("width",0),nr.setAttribute("height",0);const Gn=Fn.createElement("defs");nr.append(Gn);const Vn=Fn.createElement("clipPath"),tr=`clippath_${this.data.id}`;Vn.setAttribute("id",tr),Vn.setAttribute("clipPathUnits","objectBoundingBox"),Gn.append(Vn);for(const[,{x:sr,y:lr},{x:mr,y:yr}]of Dt){const vr=Fn.createElement("rect"),Sr=(mr-Tt)/Xn,Ir=(xn-lr)/Hn,jr=(sr-mr)/Xn,Er=(lr-yr)/Hn;vr.setAttribute("x",Sr),vr.setAttribute("y",Ir),vr.setAttribute("width",jr),vr.setAttribute("height",Er),Vn.append(vr),Cn==null||Cn.push(`<rect vector-effect="non-scaling-stroke" x="${Sr}" y="${Ir}" width="${jr}" height="${Er}"/>`)}tt(this,Et)&&(Cn.push("</g></svg>')"),bn.backgroundImage=Cn.join("")),this.container.append(nr),this.container.style.clipPath=`url(#${tr})`}_createPopup(){const{container:Dt,data:Tt}=this;Dt.setAttribute("aria-haspopup","dialog");const $t=new dt({data:{color:Tt.color,titleObj:Tt.titleObj,modificationDate:Tt.modificationDate,contentsObj:Tt.contentsObj,richText:Tt.richText,parentRect:Tt.rect,borderStyle:0,id:`popup_${Tt.id}`,rotation:Tt.rotation},parent:this.parent,elements:[this]});this.parent.div.append($t.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Dt,Tt=null){const $t=[];if(this._fieldObjects){const gn=this._fieldObjects[Dt];if(gn)for(const{page:xn,id:bn,exportValues:Cn}of gn){if(xn===-1||bn===Tt)continue;const Xn=typeof Cn=="string"?Cn:null,Hn=document.querySelector(`[data-element-id="${bn}"]`);if(Hn&&!ct.has(Hn)){(0,a.warn)(`_getElementsByName - element not allowed: ${bn}`);continue}$t.push({id:bn,exportValue:Xn,domElement:Hn})}return $t}for(const gn of document.getElementsByName(Dt)){const{exportValue:xn}=gn,bn=gn.getAttribute("data-element-id");bn!==Tt&&ct.has(gn)&&$t.push({id:bn,exportValue:xn,domElement:gn})}return $t}show(){var Dt;this.container&&(this.container.hidden=!1),(Dt=this.popup)==null||Dt.maybeShow()}hide(){var Dt;this.container&&(this.container.hidden=!0),(Dt=this.popup)==null||Dt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Dt=this.getElementsToTriggerPopup();if(Array.isArray(Dt))for(const Tt of Dt)Tt.classList.add("highlightArea");else Dt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Dt,data:{id:Tt}}=this;this.container.addEventListener("dblclick",()=>{var $t;($t=this.linkService.eventBus)==null||$t.dispatch("switchannotationeditormode",{source:this,mode:Dt,editId:Tt})})}};Et=new WeakMap;let pt=Ct;class yt extends pt{constructor(Tt,$t=null){super(Tt,{isRenderable:!0,ignoreBorder:!!($t!=null&&$t.ignoreBorder),createQuadrilaterals:!0});dn(this,Pt);this.isTooltipOnly=Tt.data.isTooltipOnly}render(){const{data:Tt,linkService:$t}=this,gn=document.createElement("a");gn.setAttribute("data-element-id",Tt.id);let xn=!1;return Tt.url?($t.addLinkAttributes(gn,Tt.url,Tt.newWindow),xn=!0):Tt.action?(this._bindNamedAction(gn,Tt.action),xn=!0):Tt.attachment?(this._bindAttachment(gn,Tt.attachment),xn=!0):Tt.setOCGState?(Qt(this,Pt,pu).call(this,gn,Tt.setOCGState),xn=!0):Tt.dest?(this._bindLink(gn,Tt.dest),xn=!0):(Tt.actions&&(Tt.actions.Action||Tt.actions["Mouse Up"]||Tt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(gn,Tt),xn=!0),Tt.resetForm?(this._bindResetFormAction(gn,Tt.resetForm),xn=!0):this.isTooltipOnly&&!xn&&(this._bindLink(gn,""),xn=!0)),this.container.classList.add("linkAnnotation"),xn&&this.container.append(gn),this.container}_bindLink(Tt,$t){Tt.href=this.linkService.getDestinationHash($t),Tt.onclick=()=>($t&&this.linkService.goToDestination($t),!1),($t||$t==="")&&Qt(this,Pt,qr).call(this)}_bindNamedAction(Tt,$t){Tt.href=this.linkService.getAnchorUrl(""),Tt.onclick=()=>(this.linkService.executeNamedAction($t),!1),Qt(this,Pt,qr).call(this)}_bindAttachment(Tt,$t){Tt.href=this.linkService.getAnchorUrl(""),Tt.onclick=()=>{var gn;return(gn=this.downloadManager)==null||gn.openOrDownloadData(this.container,$t.content,$t.filename),!1},Qt(this,Pt,qr).call(this)}_bindJSAction(Tt,$t){Tt.href=this.linkService.getAnchorUrl("");const gn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const xn of Object.keys($t.actions)){const bn=gn.get(xn);bn&&(Tt[bn]=()=>{var Cn;return(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$t.id,name:xn}}),!1})}Tt.onclick||(Tt.onclick=()=>!1),Qt(this,Pt,qr).call(this)}_bindResetFormAction(Tt,$t){const gn=Tt.onclick;if(gn||(Tt.href=this.linkService.getAnchorUrl("")),Qt(this,Pt,qr).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),gn||(Tt.onclick=()=>!1);return}Tt.onclick=()=>{var nr;gn==null||gn();const{fields:xn,refs:bn,include:Cn}=$t,Xn=[];if(xn.length!==0||bn.length!==0){const Gn=new Set(bn);for(const Vn of xn){const tr=this._fieldObjects[Vn]||[];for(const{id:sr}of tr)Gn.add(sr)}for(const Vn of Object.values(this._fieldObjects))for(const tr of Vn)Gn.has(tr.id)===Cn&&Xn.push(tr)}else for(const Gn of Object.values(this._fieldObjects))Xn.push(...Gn);const Hn=this.annotationStorage,Fn=[];for(const Gn of Xn){const{id:Vn}=Gn;switch(Fn.push(Vn),Gn.type){case"text":{const sr=Gn.defaultValue||"";Hn.setValue(Vn,{value:sr});break}case"checkbox":case"radiobutton":{const sr=Gn.defaultValue===Gn.exportValues;Hn.setValue(Vn,{value:sr});break}case"combobox":case"listbox":{const sr=Gn.defaultValue||"";Hn.setValue(Vn,{value:sr});break}default:continue}const tr=document.querySelector(`[data-element-id="${Vn}"]`);if(tr){if(!ct.has(tr)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Vn}`);continue}}else continue;tr.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((nr=this.linkService.eventBus)==null||nr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Fn,name:"ResetForm"}})),!1}}}Pt=new WeakSet,qr=function(){this.container.setAttribute("data-internal-link","")},pu=function(Tt,$t){Tt.href=this.linkService.getAnchorUrl(""),Tt.onclick=()=>(this.linkService.executeSetOCGState($t),!1),Qt(this,Pt,qr).call(this)};class bt extends pt{constructor(Dt){super(Dt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Dt=document.createElement("img");return Dt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Dt.alt="[{{type}} Annotation]",Dt.dataset.l10nId="text_annotation_type",Dt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Dt),this.container}}class et extends pt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Dt){var Tt;this.data.hasOwnCanvas&&(((Tt=Dt.previousSibling)==null?void 0:Tt.nodeName)==="CANVAS"&&(Dt.previousSibling.hidden=!0),Dt.hidden=!1)}_getKeyModifier(Dt){const{isWin:Tt,isMac:$t}=a.FeatureTest.platform;return Tt&&Dt.ctrlKey||$t&&Dt.metaKey}_setEventListener(Dt,Tt,$t,gn,xn){$t.includes("mouse")?Dt.addEventListener($t,bn=>{var Cn;(Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:gn,value:xn(bn),shift:bn.shiftKey,modifier:this._getKeyModifier(bn)}})}):Dt.addEventListener($t,bn=>{var Cn;if($t==="blur"){if(!Tt.focused||!bn.relatedTarget)return;Tt.focused=!1}else if($t==="focus"){if(Tt.focused)return;Tt.focused=!0}xn&&((Cn=this.linkService.eventBus)==null||Cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:gn,value:xn(bn)}}))})}_setEventListeners(Dt,Tt,$t,gn){var xn,bn,Cn;for(const[Xn,Hn]of $t)(Hn==="Action"||(xn=this.data.actions)!=null&&xn[Hn])&&((Hn==="Focus"||Hn==="Blur")&&(Tt||(Tt={focused:!1})),this._setEventListener(Dt,Tt,Xn,Hn,gn),Hn==="Focus"&&!((bn=this.data.actions)!=null&&bn.Blur)?this._setEventListener(Dt,Tt,"blur","Blur",null):Hn==="Blur"&&!((Cn=this.data.actions)!=null&&Cn.Focus)&&this._setEventListener(Dt,Tt,"focus","Focus",null))}_setBackgroundColor(Dt){const Tt=this.data.backgroundColor||null;Dt.style.backgroundColor=Tt===null?"transparent":a.Util.makeHexColor(Tt[0],Tt[1],Tt[2])}_setTextStyle(Dt){const Tt=["left","center","right"],{fontColor:$t}=this.data.defaultAppearanceData,gn=this.data.defaultAppearanceData.fontSize||_e,xn=Dt.style;let bn;const Cn=2,Xn=Hn=>Math.round(10*Hn)/10;if(this.data.multiLine){const Hn=Math.abs(this.data.rect[3]-this.data.rect[1]-Cn),Fn=Math.round(Hn/(a.LINE_FACTOR*gn))||1,nr=Hn/Fn;bn=Math.min(gn,Xn(nr/a.LINE_FACTOR))}else{const Hn=Math.abs(this.data.rect[3]-this.data.rect[1]-Cn);bn=Math.min(gn,Xn(Hn/a.LINE_FACTOR))}xn.fontSize=`calc(${bn}px * var(--scale-factor))`,xn.color=a.Util.makeHexColor($t[0],$t[1],$t[2]),this.data.textAlignment!==null&&(xn.textAlign=Tt[this.data.textAlignment])}_setRequired(Dt,Tt){Tt?Dt.setAttribute("required",!0):Dt.removeAttribute("required"),Dt.setAttribute("aria-required",Tt)}}class nt extends et{constructor(Dt){const Tt=Dt.renderForms||!Dt.data.hasAppearance&&!!Dt.data.fieldValue;super(Dt,{isRenderable:Tt})}setPropertyOnSiblings(Dt,Tt,$t,gn){const xn=this.annotationStorage;for(const bn of this._getElementsByName(Dt.name,Dt.id))bn.domElement&&(bn.domElement[Tt]=$t),xn.setValue(bn.id,{[gn]:$t})}render(){var gn,xn;const Dt=this.annotationStorage,Tt=this.data.id;this.container.classList.add("textWidgetAnnotation");let $t=null;if(this.renderForms){const bn=Dt.getValue(Tt,{value:this.data.fieldValue});let Cn=bn.value||"";const Xn=Dt.getValue(Tt,{charLimit:this.data.maxLen}).charLimit;Xn&&Cn.length>Xn&&(Cn=Cn.slice(0,Xn));let Hn=bn.formattedValue||((gn=this.data.textContent)==null?void 0:gn.join(`
`))||null;Hn&&this.data.comb&&(Hn=Hn.replaceAll(/\s+/g,""));const Fn={userValue:Cn,formattedValue:Hn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?($t=document.createElement("textarea"),$t.textContent=Hn??Cn,this.data.doNotScroll&&($t.style.overflowY="hidden")):($t=document.createElement("input"),$t.type="text",$t.setAttribute("value",Hn??Cn),this.data.doNotScroll&&($t.style.overflowX="hidden")),this.data.hasOwnCanvas&&($t.hidden=!0),ct.add($t),$t.setAttribute("data-element-id",Tt),$t.disabled=this.data.readOnly,$t.name=this.data.fieldName,$t.tabIndex=$,this._setRequired($t,this.data.required),Xn&&($t.maxLength=Xn),$t.addEventListener("input",Gn=>{Dt.setValue(Tt,{value:Gn.target.value}),this.setPropertyOnSiblings($t,"value",Gn.target.value,"value"),Fn.formattedValue=null}),$t.addEventListener("resetform",Gn=>{const Vn=this.data.defaultFieldValue??"";$t.value=Fn.userValue=Vn,Fn.formattedValue=null});let nr=Gn=>{const{formattedValue:Vn}=Fn;Vn!=null&&(Gn.target.value=Vn),Gn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){$t.addEventListener("focus",Vn=>{if(Fn.focused)return;const{target:tr}=Vn;Fn.userValue&&(tr.value=Fn.userValue),Fn.lastCommittedValue=tr.value,Fn.commitKey=1,Fn.focused=!0}),$t.addEventListener("updatefromsandbox",Vn=>{this.showElementAndHideCanvas(Vn.target);const tr={value(sr){Fn.userValue=sr.detail.value??"",Dt.setValue(Tt,{value:Fn.userValue.toString()}),sr.target.value=Fn.userValue},formattedValue(sr){const{formattedValue:lr}=sr.detail;Fn.formattedValue=lr,lr!=null&&sr.target!==document.activeElement&&(sr.target.value=lr),Dt.setValue(Tt,{formattedValue:lr})},selRange(sr){sr.target.setSelectionRange(...sr.detail.selRange)},charLimit:sr=>{var vr;const{charLimit:lr}=sr.detail,{target:mr}=sr;if(lr===0){mr.removeAttribute("maxLength");return}mr.setAttribute("maxLength",lr);let yr=Fn.userValue;!yr||yr.length<=lr||(yr=yr.slice(0,lr),mr.value=Fn.userValue=yr,Dt.setValue(Tt,{value:yr}),(vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Tt,name:"Keystroke",value:yr,willCommit:!0,commitKey:1,selStart:mr.selectionStart,selEnd:mr.selectionEnd}}))}};this._dispatchEventFromSandbox(tr,Vn)}),$t.addEventListener("keydown",Vn=>{var lr;Fn.commitKey=1;let tr=-1;if(Vn.key==="Escape"?tr=0:Vn.key==="Enter"&&!this.data.multiLine?tr=2:Vn.key==="Tab"&&(Fn.commitKey=3),tr===-1)return;const{value:sr}=Vn.target;Fn.lastCommittedValue!==sr&&(Fn.lastCommittedValue=sr,Fn.userValue=sr,(lr=this.linkService.eventBus)==null||lr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Tt,name:"Keystroke",value:sr,willCommit:!0,commitKey:tr,selStart:Vn.target.selectionStart,selEnd:Vn.target.selectionEnd}}))});const Gn=nr;nr=null,$t.addEventListener("blur",Vn=>{var sr;if(!Fn.focused||!Vn.relatedTarget)return;Fn.focused=!1;const{value:tr}=Vn.target;Fn.userValue=tr,Fn.lastCommittedValue!==tr&&((sr=this.linkService.eventBus)==null||sr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Tt,name:"Keystroke",value:tr,willCommit:!0,commitKey:Fn.commitKey,selStart:Vn.target.selectionStart,selEnd:Vn.target.selectionEnd}})),Gn(Vn)}),(xn=this.data.actions)!=null&&xn.Keystroke&&$t.addEventListener("beforeinput",Vn=>{var Ir;Fn.lastCommittedValue=null;const{data:tr,target:sr}=Vn,{value:lr,selectionStart:mr,selectionEnd:yr}=sr;let vr=mr,Sr=yr;switch(Vn.inputType){case"deleteWordBackward":{const jr=lr.substring(0,mr).match(/\w*[^\w]*$/);jr&&(vr-=jr[0].length);break}case"deleteWordForward":{const jr=lr.substring(mr).match(/^[^\w]*\w*/);jr&&(Sr+=jr[0].length);break}case"deleteContentBackward":mr===yr&&(vr-=1);break;case"deleteContentForward":mr===yr&&(Sr+=1);break}Vn.preventDefault(),(Ir=this.linkService.eventBus)==null||Ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Tt,name:"Keystroke",value:lr,change:tr||"",willCommit:!1,selStart:vr,selEnd:Sr}})}),this._setEventListeners($t,Fn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Vn=>Vn.target.value)}if(nr&&$t.addEventListener("blur",nr),this.data.comb){const Vn=(this.data.rect[2]-this.data.rect[0])/Xn;$t.classList.add("comb"),$t.style.letterSpacing=`calc(${Vn}px * var(--scale-factor) - 1ch)`}}else $t=document.createElement("div"),$t.textContent=this.data.fieldValue,$t.style.verticalAlign="middle",$t.style.display="table-cell";return this._setTextStyle($t),this._setBackgroundColor($t),this._setDefaultPropertiesFromJS($t),this.container.append($t),this.container}}class st extends et{constructor(Dt){super(Dt,{isRenderable:!!Dt.data.hasOwnCanvas})}}class gt extends et{constructor(Dt){super(Dt,{isRenderable:Dt.renderForms})}render(){const Dt=this.annotationStorage,Tt=this.data,$t=Tt.id;let gn=Dt.getValue($t,{value:Tt.exportValue===Tt.fieldValue}).value;typeof gn=="string"&&(gn=gn!=="Off",Dt.setValue($t,{value:gn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const xn=document.createElement("input");return ct.add(xn),xn.setAttribute("data-element-id",$t),xn.disabled=Tt.readOnly,this._setRequired(xn,this.data.required),xn.type="checkbox",xn.name=Tt.fieldName,gn&&xn.setAttribute("checked",!0),xn.setAttribute("exportValue",Tt.exportValue),xn.tabIndex=$,xn.addEventListener("change",bn=>{const{name:Cn,checked:Xn}=bn.target;for(const Hn of this._getElementsByName(Cn,$t)){const Fn=Xn&&Hn.exportValue===Tt.exportValue;Hn.domElement&&(Hn.domElement.checked=Fn),Dt.setValue(Hn.id,{value:Fn})}Dt.setValue($t,{value:Xn})}),xn.addEventListener("resetform",bn=>{const Cn=Tt.defaultFieldValue||"Off";bn.target.checked=Cn===Tt.exportValue}),this.enableScripting&&this.hasJSActions&&(xn.addEventListener("updatefromsandbox",bn=>{const Cn={value(Xn){Xn.target.checked=Xn.detail.value!=="Off",Dt.setValue($t,{value:Xn.target.checked})}};this._dispatchEventFromSandbox(Cn,bn)}),this._setEventListeners(xn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],bn=>bn.target.checked)),this._setBackgroundColor(xn),this._setDefaultPropertiesFromJS(xn),this.container.append(xn),this.container}}class ot extends et{constructor(Dt){super(Dt,{isRenderable:Dt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Dt=this.annotationStorage,Tt=this.data,$t=Tt.id;let gn=Dt.getValue($t,{value:Tt.fieldValue===Tt.buttonValue}).value;typeof gn=="string"&&(gn=gn!==Tt.buttonValue,Dt.setValue($t,{value:gn}));const xn=document.createElement("input");if(ct.add(xn),xn.setAttribute("data-element-id",$t),xn.disabled=Tt.readOnly,this._setRequired(xn,this.data.required),xn.type="radio",xn.name=Tt.fieldName,gn&&xn.setAttribute("checked",!0),xn.tabIndex=$,xn.addEventListener("change",bn=>{const{name:Cn,checked:Xn}=bn.target;for(const Hn of this._getElementsByName(Cn,$t))Dt.setValue(Hn.id,{value:!1});Dt.setValue($t,{value:Xn})}),xn.addEventListener("resetform",bn=>{const Cn=Tt.defaultFieldValue;bn.target.checked=Cn!=null&&Cn===Tt.buttonValue}),this.enableScripting&&this.hasJSActions){const bn=Tt.buttonValue;xn.addEventListener("updatefromsandbox",Cn=>{const Xn={value:Hn=>{const Fn=bn===Hn.detail.value;for(const nr of this._getElementsByName(Hn.target.name)){const Gn=Fn&&nr.id===$t;nr.domElement&&(nr.domElement.checked=Gn),Dt.setValue(nr.id,{value:Gn})}}};this._dispatchEventFromSandbox(Xn,Cn)}),this._setEventListeners(xn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Cn=>Cn.target.checked)}return this._setBackgroundColor(xn),this._setDefaultPropertiesFromJS(xn),this.container.append(xn),this.container}}class mt extends yt{constructor(Dt){super(Dt,{ignoreBorder:Dt.data.hasAppearance})}render(){const Dt=super.render();Dt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Dt.title=this.data.alternativeText);const Tt=Dt.lastChild;return this.enableScripting&&this.hasJSActions&&Tt&&(this._setDefaultPropertiesFromJS(Tt),Tt.addEventListener("updatefromsandbox",$t=>{this._dispatchEventFromSandbox({},$t)})),Dt}}class it extends et{constructor(Dt){super(Dt,{isRenderable:Dt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Dt=this.annotationStorage,Tt=this.data.id,$t=Dt.getValue(Tt,{value:this.data.fieldValue}),gn=document.createElement("select");ct.add(gn),gn.setAttribute("data-element-id",Tt),gn.disabled=this.data.readOnly,this._setRequired(gn,this.data.required),gn.name=this.data.fieldName,gn.tabIndex=$;let xn=this.data.combo&&this.data.options.length>0;this.data.combo||(gn.size=this.data.options.length,this.data.multiSelect&&(gn.multiple=!0)),gn.addEventListener("resetform",Fn=>{const nr=this.data.defaultFieldValue;for(const Gn of gn.options)Gn.selected=Gn.value===nr});for(const Fn of this.data.options){const nr=document.createElement("option");nr.textContent=Fn.displayValue,nr.value=Fn.exportValue,$t.value.includes(Fn.exportValue)&&(nr.setAttribute("selected",!0),xn=!1),gn.append(nr)}let bn=null;if(xn){const Fn=document.createElement("option");Fn.value=" ",Fn.setAttribute("hidden",!0),Fn.setAttribute("selected",!0),gn.prepend(Fn),bn=()=>{Fn.remove(),gn.removeEventListener("input",bn),bn=null},gn.addEventListener("input",bn)}const Cn=Fn=>{const nr=Fn?"value":"textContent",{options:Gn,multiple:Vn}=gn;return Vn?Array.prototype.filter.call(Gn,tr=>tr.selected).map(tr=>tr[nr]):Gn.selectedIndex===-1?null:Gn[Gn.selectedIndex][nr]};let Xn=Cn(!1);const Hn=Fn=>{const nr=Fn.target.options;return Array.prototype.map.call(nr,Gn=>({displayValue:Gn.textContent,exportValue:Gn.value}))};return this.enableScripting&&this.hasJSActions?(gn.addEventListener("updatefromsandbox",Fn=>{const nr={value(Gn){bn==null||bn();const Vn=Gn.detail.value,tr=new Set(Array.isArray(Vn)?Vn:[Vn]);for(const sr of gn.options)sr.selected=tr.has(sr.value);Dt.setValue(Tt,{value:Cn(!0)}),Xn=Cn(!1)},multipleSelection(Gn){gn.multiple=!0},remove(Gn){const Vn=gn.options,tr=Gn.detail.remove;Vn[tr].selected=!1,gn.remove(tr),Vn.length>0&&Array.prototype.findIndex.call(Vn,lr=>lr.selected)===-1&&(Vn[0].selected=!0),Dt.setValue(Tt,{value:Cn(!0),items:Hn(Gn)}),Xn=Cn(!1)},clear(Gn){for(;gn.length!==0;)gn.remove(0);Dt.setValue(Tt,{value:null,items:[]}),Xn=Cn(!1)},insert(Gn){const{index:Vn,displayValue:tr,exportValue:sr}=Gn.detail.insert,lr=gn.children[Vn],mr=document.createElement("option");mr.textContent=tr,mr.value=sr,lr?lr.before(mr):gn.append(mr),Dt.setValue(Tt,{value:Cn(!0),items:Hn(Gn)}),Xn=Cn(!1)},items(Gn){const{items:Vn}=Gn.detail;for(;gn.length!==0;)gn.remove(0);for(const tr of Vn){const{displayValue:sr,exportValue:lr}=tr,mr=document.createElement("option");mr.textContent=sr,mr.value=lr,gn.append(mr)}gn.options.length>0&&(gn.options[0].selected=!0),Dt.setValue(Tt,{value:Cn(!0),items:Hn(Gn)}),Xn=Cn(!1)},indices(Gn){const Vn=new Set(Gn.detail.indices);for(const tr of Gn.target.options)tr.selected=Vn.has(tr.index);Dt.setValue(Tt,{value:Cn(!0)}),Xn=Cn(!1)},editable(Gn){Gn.target.disabled=!Gn.detail.editable}};this._dispatchEventFromSandbox(nr,Fn)}),gn.addEventListener("input",Fn=>{var Gn;const nr=Cn(!0);Dt.setValue(Tt,{value:nr}),Fn.preventDefault(),(Gn=this.linkService.eventBus)==null||Gn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Tt,name:"Keystroke",value:Xn,changeEx:nr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(gn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Fn=>Fn.target.value)):gn.addEventListener("input",function(Fn){Dt.setValue(Tt,{value:Cn(!0)})}),this.data.combo&&this._setTextStyle(gn),this._setBackgroundColor(gn),this._setDefaultPropertiesFromJS(gn),this.container.append(gn),this.container}}class dt extends pt{constructor(Dt){const{data:Tt,elements:$t}=Dt;super(Dt,{isRenderable:pt._hasPopupData(Tt)}),this.elements=$t}render(){this.container.classList.add("popupAnnotation");const Dt=new ft({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Tt=[];for(const $t of this.elements)$t.popup=Dt,Tt.push($t.data.id),$t.addHighlightArea();return this.container.setAttribute("aria-controls",Tt.map($t=>`${a.AnnotationPrefix}${$t}`).join(",")),this.container}}class ft{constructor({container:Dt,color:Tt,elements:$t,titleObj:gn,modificationDate:xn,contentsObj:bn,richText:Cn,parent:Xn,rect:Hn,parentRect:Fn,open:nr}){dn(this,Dn);dn(this,Lt,null);dn(this,an,Qt(this,Dn,mu).bind(this));dn(this,rn,Qt(this,Dn,Vo).bind(this));dn(this,En,Qt(this,Dn,Ho).bind(this));dn(this,kn,Qt(this,Dn,Gs).bind(this));dn(this,An,null);dn(this,on,null);dn(this,Vt,null);dn(this,St,null);dn(this,Nt,null);dn(this,Gt,null);dn(this,Jt,!1);dn(this,vn,null);dn(this,Sn,null);dn(this,Tn,null);dn(this,Zt,null);dn(this,In,!1);var Vn;hn(this,on,Dt),hn(this,Zt,gn),hn(this,Vt,bn),hn(this,Tn,Cn),hn(this,Nt,Xn),hn(this,An,Tt),hn(this,Sn,Hn),hn(this,Gt,Fn),hn(this,St,$t);const Gn=o.PDFDateString.toDateObject(xn);Gn&&hn(this,Lt,Xn.l10n.get("annotation_date_string",{date:Gn.toLocaleDateString(),time:Gn.toLocaleTimeString()})),this.trigger=$t.flatMap(tr=>tr.getElementsToTriggerPopup());for(const tr of this.trigger)tr.addEventListener("click",tt(this,kn)),tr.addEventListener("mouseenter",tt(this,En)),tr.addEventListener("mouseleave",tt(this,rn)),tr.classList.add("popupTriggerArea");for(const tr of $t)(Vn=tr.container)==null||Vn.addEventListener("keydown",tt(this,an));tt(this,on).hidden=!0,nr&&Qt(this,Dn,Gs).call(this)}render(){if(tt(this,vn))return;const{page:{view:Dt},viewport:{rawDims:{pageWidth:Tt,pageHeight:$t,pageX:gn,pageY:xn}}}=tt(this,Nt),bn=hn(this,vn,document.createElement("div"));if(bn.className="popup",tt(this,An)){const vr=bn.style.outlineColor=a.Util.makeHexColor(...tt(this,An));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?bn.style.backgroundColor=`color-mix(in srgb, ${vr} 30%, white)`:bn.style.backgroundColor=a.Util.makeHexColor(...tt(this,An).map(Ir=>Math.floor(.7*(255-Ir)+Ir)))}const Cn=document.createElement("span");Cn.className="header";const Xn=document.createElement("h1");if(Cn.append(Xn),{dir:Xn.dir,str:Xn.textContent}=tt(this,Zt),bn.append(Cn),tt(this,Lt)){const vr=document.createElement("span");vr.classList.add("popupDate"),tt(this,Lt).then(Sr=>{vr.textContent=Sr}),Cn.append(vr)}const Hn=tt(this,Vt),Fn=tt(this,Tn);if(Fn!=null&&Fn.str&&(!(Hn!=null&&Hn.str)||Hn.str===Fn.str))b.XfaLayer.render({xfaHtml:Fn.html,intent:"richText",div:bn}),bn.lastChild.classList.add("richText","popupContent");else{const vr=this._formatContents(Hn);bn.append(vr)}let nr=!!tt(this,Gt),Gn=nr?tt(this,Gt):tt(this,Sn);for(const vr of tt(this,St))if(!Gn||a.Util.intersect(vr.data.rect,Gn)!==null){Gn=vr.data.rect,nr=!0;break}const Vn=a.Util.normalizeRect([Gn[0],Dt[3]-Gn[1]+Dt[1],Gn[2],Dt[3]-Gn[3]+Dt[1]]),sr=nr?Gn[2]-Gn[0]+5:0,lr=Vn[0]+sr,mr=Vn[1],{style:yr}=tt(this,on);yr.left=`${100*(lr-gn)/Tt}%`,yr.top=`${100*(mr-xn)/$t}%`,tt(this,on).append(bn)}_formatContents({str:Dt,dir:Tt}){const $t=document.createElement("p");$t.classList.add("popupContent"),$t.dir=Tt;const gn=Dt.split(/(?:\r\n?|\n)/);for(let xn=0,bn=gn.length;xn<bn;++xn){const Cn=gn[xn];$t.append(document.createTextNode(Cn)),xn<bn-1&&$t.append(document.createElement("br"))}return $t}forceHide(){hn(this,In,this.isVisible),tt(this,In)&&(tt(this,on).hidden=!0)}maybeShow(){tt(this,In)&&(hn(this,In,!1),tt(this,on).hidden=!1)}get isVisible(){return tt(this,on).hidden===!1}}Lt=new WeakMap,an=new WeakMap,rn=new WeakMap,En=new WeakMap,kn=new WeakMap,An=new WeakMap,on=new WeakMap,Vt=new WeakMap,St=new WeakMap,Nt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,vn=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,Zt=new WeakMap,In=new WeakMap,Dn=new WeakSet,mu=function(Dt){Dt.altKey||Dt.shiftKey||Dt.ctrlKey||Dt.metaKey||(Dt.key==="Enter"||Dt.key==="Escape"&&tt(this,Jt))&&Qt(this,Dn,Gs).call(this)},Gs=function(){hn(this,Jt,!tt(this,Jt)),tt(this,Jt)?(Qt(this,Dn,Ho).call(this),tt(this,on).addEventListener("click",tt(this,kn)),tt(this,on).addEventListener("keydown",tt(this,an))):(Qt(this,Dn,Vo).call(this),tt(this,on).removeEventListener("click",tt(this,kn)),tt(this,on).removeEventListener("keydown",tt(this,an)))},Ho=function(){tt(this,vn)||this.render(),this.isVisible?tt(this,Jt)&&tt(this,on).classList.add("focused"):(tt(this,on).hidden=!1,tt(this,on).style.zIndex=parseInt(tt(this,on).style.zIndex)+1e3)},Vo=function(){tt(this,on).classList.remove("focused"),!(tt(this,Jt)||!this.isVisible)&&(tt(this,on).hidden=!0,tt(this,on).style.zIndex=parseInt(tt(this,on).style.zIndex)-1e3)};class Rt extends pt{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Dt.data.textContent,this.textPosition=Dt.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Dt=document.createElement("div");Dt.classList.add("annotationTextContent"),Dt.setAttribute("role","comment");for(const Tt of this.textContent){const $t=document.createElement("span");$t.textContent=Tt,Dt.append($t)}this.container.append(Dt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=Rt;class xt extends pt{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0});dn(this,Qn,null)}render(){this.container.classList.add("lineAnnotation");const Tt=this.data,{width:$t,height:gn}=ut(Tt.rect),xn=this.svgFactory.create($t,gn,!0),bn=hn(this,Qn,this.svgFactory.createElement("svg:line"));return bn.setAttribute("x1",Tt.rect[2]-Tt.lineCoordinates[0]),bn.setAttribute("y1",Tt.rect[3]-Tt.lineCoordinates[1]),bn.setAttribute("x2",Tt.rect[2]-Tt.lineCoordinates[2]),bn.setAttribute("y2",Tt.rect[3]-Tt.lineCoordinates[3]),bn.setAttribute("stroke-width",Tt.borderStyle.width||1),bn.setAttribute("stroke","transparent"),bn.setAttribute("fill","transparent"),xn.append(bn),this.container.append(xn),!Tt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,Qn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qn=new WeakMap;class wt extends pt{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0});dn(this,ar,null)}render(){this.container.classList.add("squareAnnotation");const Tt=this.data,{width:$t,height:gn}=ut(Tt.rect),xn=this.svgFactory.create($t,gn,!0),bn=Tt.borderStyle.width,Cn=hn(this,ar,this.svgFactory.createElement("svg:rect"));return Cn.setAttribute("x",bn/2),Cn.setAttribute("y",bn/2),Cn.setAttribute("width",$t-bn),Cn.setAttribute("height",gn-bn),Cn.setAttribute("stroke-width",bn||1),Cn.setAttribute("stroke","transparent"),Cn.setAttribute("fill","transparent"),xn.append(Cn),this.container.append(xn),!Tt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,ar)}addHighlightArea(){this.container.classList.add("highlightArea")}}ar=new WeakMap;class jt extends pt{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0});dn(this,dr,null)}render(){this.container.classList.add("circleAnnotation");const Tt=this.data,{width:$t,height:gn}=ut(Tt.rect),xn=this.svgFactory.create($t,gn,!0),bn=Tt.borderStyle.width,Cn=hn(this,dr,this.svgFactory.createElement("svg:ellipse"));return Cn.setAttribute("cx",$t/2),Cn.setAttribute("cy",gn/2),Cn.setAttribute("rx",$t/2-bn/2),Cn.setAttribute("ry",gn/2-bn/2),Cn.setAttribute("stroke-width",bn||1),Cn.setAttribute("stroke","transparent"),Cn.setAttribute("fill","transparent"),xn.append(Cn),this.container.append(xn),!Tt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,dr)}addHighlightArea(){this.container.classList.add("highlightArea")}}dr=new WeakMap;class sn extends pt{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0});dn(this,Rn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Tt=this.data,{width:$t,height:gn}=ut(Tt.rect),xn=this.svgFactory.create($t,gn,!0);let bn=[];for(const Xn of Tt.vertices){const Hn=Xn.x-Tt.rect[0],Fn=Tt.rect[3]-Xn.y;bn.push(Hn+","+Fn)}bn=bn.join(" ");const Cn=hn(this,Rn,this.svgFactory.createElement(this.svgElementName));return Cn.setAttribute("points",bn),Cn.setAttribute("stroke-width",Tt.borderStyle.width||1),Cn.setAttribute("stroke","transparent"),Cn.setAttribute("fill","transparent"),xn.append(Cn),this.container.append(xn),!Tt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,Rn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rn=new WeakMap;class Kt extends sn{constructor(Dt){super(Dt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Yt extends pt{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ht extends pt{constructor(Tt){super(Tt,{isRenderable:!0,ignoreBorder:!0});dn(this,zt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Tt=this.data,{width:$t,height:gn}=ut(Tt.rect),xn=this.svgFactory.create($t,gn,!0);for(const bn of Tt.inkLists){let Cn=[];for(const Hn of bn){const Fn=Hn.x-Tt.rect[0],nr=Tt.rect[3]-Hn.y;Cn.push(`${Fn},${nr}`)}Cn=Cn.join(" ");const Xn=this.svgFactory.createElement(this.svgElementName);tt(this,zt).push(Xn),Xn.setAttribute("points",Cn),Xn.setAttribute("stroke-width",Tt.borderStyle.width||1),Xn.setAttribute("stroke","transparent"),Xn.setAttribute("fill","transparent"),!Tt.popupRef&&this.hasPopupData&&this._createPopup(),xn.append(Xn)}return this.container.append(xn),this.container}getElementsToTriggerPopup(){return tt(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap,s.InkAnnotationElement=Ht;class Ut extends pt{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class At extends pt{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ft extends pt{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Xt extends pt{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class kt extends pt{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=kt;class rt extends pt{constructor(Tt){var xn;super(Tt,{isRenderable:!0});dn(this,On);dn(this,cn,null);const{filename:$t,content:gn}=this.data.file;this.filename=(0,o.getFilenameFromUrl)($t,!0),this.content=gn,(xn=this.linkService.eventBus)==null||xn.dispatch("fileattachmentannotation",{source:this,filename:$t,content:gn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Tt,data:$t}=this;let gn;$t.hasAppearance||$t.fillAlpha===0?gn=document.createElement("div"):(gn=document.createElement("img"),gn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test($t.name)?"paperclip":"pushpin"}.svg`,$t.fillAlpha&&$t.fillAlpha<1&&(gn.style=`filter: opacity(${Math.round($t.fillAlpha*100)}%);`)),gn.addEventListener("dblclick",Qt(this,On,Ko).bind(this)),hn(this,cn,gn);const{isMac:xn}=a.FeatureTest.platform;return Tt.addEventListener("keydown",bn=>{bn.key==="Enter"&&(xn?bn.metaKey:bn.ctrlKey)&&Qt(this,On,Ko).call(this)}),!$t.popupRef&&this.hasPopupData?this._createPopup():gn.classList.add("popupTriggerArea"),Tt.append(gn),Tt}getElementsToTriggerPopup(){return tt(this,cn)}addHighlightArea(){this.container.classList.add("highlightArea")}}cn=new WeakMap,On=new WeakSet,Ko=function(){var Tt;(Tt=this.downloadManager)==null||Tt.openOrDownloadData(this.container,this.content,this.filename)};class at{constructor({div:Dt,accessibilityManager:Tt,annotationCanvasMap:$t,l10n:gn,page:xn,viewport:bn}){dn(this,Mn);dn(this,jn,null);dn(this,Ot,null);dn(this,_n,new Map);this.div=Dt,hn(this,jn,Tt),hn(this,Ot,$t),this.l10n=gn,this.page=xn,this.viewport=bn,this.zIndex=0,this.l10n||(this.l10n=j.NullL10n)}async render(Dt){const{annotations:Tt}=Dt,$t=this.div;(0,o.setLayerDimensions)($t,this.viewport);const gn=new Map,xn={data:null,layer:$t,linkService:Dt.linkService,downloadManager:Dt.downloadManager,imageResourcesPath:Dt.imageResourcesPath||"",renderForms:Dt.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:Dt.annotationStorage||new c.AnnotationStorage,enableScripting:Dt.enableScripting===!0,hasJSActions:Dt.hasJSActions,fieldObjects:Dt.fieldObjects,parent:this,elements:null};for(const bn of Tt){if(bn.noHTML)continue;const Cn=bn.annotationType===a.AnnotationType.POPUP;if(Cn){const Fn=gn.get(bn.id);if(!Fn)continue;xn.elements=Fn}else{const{width:Fn,height:nr}=ut(bn.rect);if(Fn<=0||nr<=0)continue}xn.data=bn;const Xn=ht.create(xn);if(!Xn.isRenderable)continue;if(!Cn&&bn.popupRef){const Fn=gn.get(bn.popupRef);Fn?Fn.push(Xn):gn.set(bn.popupRef,[Xn])}Xn.annotationEditorType>0&&tt(this,_n).set(Xn.data.id,Xn);const Hn=Xn.render();bn.hidden&&(Hn.style.visibility="hidden"),Qt(this,Mn,gu).call(this,Hn,bn.id)}Qt(this,Mn,$o).call(this),await this.l10n.translate($t)}update({viewport:Dt}){const Tt=this.div;this.viewport=Dt,(0,o.setLayerDimensions)(Tt,{rotation:Dt.rotation}),Qt(this,Mn,$o).call(this),Tt.hidden=!1}getEditableAnnotations(){return Array.from(tt(this,_n).values())}getEditableAnnotation(Dt){return tt(this,_n).get(Dt)}}jn=new WeakMap,Ot=new WeakMap,_n=new WeakMap,Mn=new WeakSet,gu=function(Dt,Tt){var gn;const $t=Dt.firstChild||Dt;$t.id=`${a.AnnotationPrefix}${Tt}`,this.div.append(Dt),(gn=tt(this,jn))==null||gn.moveElementInDOM(this.div,Dt,$t,!1)},$o=function(){if(!tt(this,Ot))return;const Dt=this.div;for(const[Tt,$t]of tt(this,Ot)){const gn=Dt.querySelector(`[data-annotation-id="${Tt}"]`);if(!gn)continue;const{firstChild:xn}=gn;xn?xn.nodeName==="CANVAS"?xn.replaceWith($t):xn.before($t):gn.append($t)}tt(this,Ot).clear()},s.AnnotationLayer=at},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function i(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function a(c){return Math.max(0,Math.min(255,255*c))}class o{static CMYK_G([h,j,b,$]){return["G",1-Math.min(1,.3*h+.59*b+.11*j+$)]}static G_CMYK([h]){return["CMYK",0,0,0,1-h]}static G_RGB([h]){return["RGB",h,h,h]}static G_rgb([h]){return h=a(h),[h,h,h]}static G_HTML([h]){const j=i(h);return`#${j}${j}${j}`}static RGB_G([h,j,b]){return["G",.3*h+.59*j+.11*b]}static RGB_rgb(h){return h.map(a)}static RGB_HTML(h){return`#${h.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([h,j,b,$]){return["RGB",1-Math.min(1,h+$),1-Math.min(1,b+$),1-Math.min(1,j+$)]}static CMYK_rgb([h,j,b,$]){return[a(1-Math.min(1,h+$)),a(1-Math.min(1,b+$)),a(1-Math.min(1,j+$))]}static CMYK_HTML(h){const j=this.CMYK_RGB(h).slice(1);return this.RGB_HTML(j)}static RGB_CMYK([h,j,b]){const $=1-h,_e=1-j,ct=1-b,ut=Math.min($,_e,ct);return["CMYK",$,_e,ct,ut]}}s.ColorConverters=o},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=a;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function a(h,j){switch(h){case"find_match_count":h=`find_match_count[${j.total===1?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${j.limit===1?"one":"other"}]`;break}return i[h]||""}function o(h,j){return j?h.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(b,$)=>$ in j?j[$]:"{{"+$+"}}"):h}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(h,j=null,b=a(h,j)){return o(b,j)},async translate(h){}};s.NullL10n=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var a=i(25);class o{static setupStorage(h,j,b,$,_e){const ct=$.getValue(j,{value:null});switch(b.name){case"textarea":if(ct.value!==null&&(h.textContent=ct.value),_e==="print")break;h.addEventListener("input",ut=>{$.setValue(j,{value:ut.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(ct.value===b.attributes.xfaOn?h.setAttribute("checked",!0):ct.value===b.attributes.xfaOff&&h.removeAttribute("checked"),_e==="print")break;h.addEventListener("change",ut=>{$.setValue(j,{value:ut.target.checked?ut.target.getAttribute("xfaOn"):ut.target.getAttribute("xfaOff")})})}else{if(ct.value!==null&&h.setAttribute("value",ct.value),_e==="print")break;h.addEventListener("input",ut=>{$.setValue(j,{value:ut.target.value})})}break;case"select":if(ct.value!==null){h.setAttribute("value",ct.value);for(const ut of b.children)ut.attributes.value===ct.value?ut.attributes.selected=!0:ut.attributes.hasOwnProperty("selected")&&delete ut.attributes.selected}h.addEventListener("input",ut=>{const ht=ut.target.options,pt=ht.selectedIndex===-1?"":ht[ht.selectedIndex].value;$.setValue(j,{value:pt})});break}}static setAttributes({html:h,element:j,storage:b=null,intent:$,linkService:_e}){const{attributes:ct}=j,ut=h instanceof HTMLAnchorElement;ct.type==="radio"&&(ct.name=`${ct.name}-${$}`);for(const[ht,pt]of Object.entries(ct))if(pt!=null)switch(ht){case"class":pt.length&&h.setAttribute(ht,pt.join(" "));break;case"dataId":break;case"id":h.setAttribute("data-element-id",pt);break;case"style":Object.assign(h.style,pt);break;case"textContent":h.textContent=pt;break;default:(!ut||ht!=="href"&&ht!=="newWindow")&&h.setAttribute(ht,pt)}ut&&_e.addLinkAttributes(h,ct.href,ct.newWindow),b&&ct.dataId&&this.setupStorage(h,ct.dataId,j,b)}static render(h){var yt;const j=h.annotationStorage,b=h.linkService,$=h.xfaHtml,_e=h.intent||"display",ct=document.createElement($.name);$.attributes&&this.setAttributes({html:ct,element:$,intent:_e,linkService:b});const ut=[[$,-1,ct]],ht=h.div;if(ht.append(ct),h.viewport){const bt=`matrix(${h.viewport.transform.join(",")})`;ht.style.transform=bt}_e!=="richText"&&ht.setAttribute("class","xfaLayer xfaFont");const pt=[];for(;ut.length>0;){const[bt,et,nt]=ut.at(-1);if(et+1===bt.children.length){ut.pop();continue}const st=bt.children[++ut.at(-1)[1]];if(st===null)continue;const{name:gt}=st;if(gt==="#text"){const mt=document.createTextNode(st.value);pt.push(mt),nt.append(mt);continue}const ot=(yt=st==null?void 0:st.attributes)!=null&&yt.xmlns?document.createElementNS(st.attributes.xmlns,gt):document.createElement(gt);if(nt.append(ot),st.attributes&&this.setAttributes({html:ot,element:st,storage:j,intent:_e,linkService:b}),st.children&&st.children.length>0)ut.push([st,-1,ot]);else if(st.value){const mt=document.createTextNode(st.value);a.XfaText.shouldBuildText(gt)&&pt.push(mt),ot.append(mt)}}for(const bt of ht.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))bt.setAttribute("readOnly",!0);return{textDivs:pt}}static update(h){const j=`matrix(${h.viewport.transform.join(",")})`;h.div.style.transform=j,h.div.hidden=!1}}s.XfaLayer=o},(e,s,i)=>{var $,_e,ct,ut,ht,pt,yt,bt,et,nt,st,gt,ot,mt,it,xu,yu,vu,bu,Go,Eu,qo,_u,wu,Su,Au,ku,Br,Xo,qs,Xs,rs,Yo,Ys,Pt,Ru,Qo,Cu,Tu,Jo,Qs,ss;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var a=i(1),o=i(4),c=i(29),h=i(6),j=i(5);const An=class An extends o.AnnotationEditor{constructor(St){super({...St,name:"inkEditor"});dn(this,it);dn(this,$,0);dn(this,_e,0);dn(this,ct,this.canvasPointermove.bind(this));dn(this,ut,this.canvasPointerleave.bind(this));dn(this,ht,this.canvasPointerup.bind(this));dn(this,pt,this.canvasPointerdown.bind(this));dn(this,yt,new Path2D);dn(this,bt,!1);dn(this,et,!1);dn(this,nt,!1);dn(this,st,null);dn(this,gt,0);dn(this,ot,0);dn(this,mt,null);this.color=St.color||null,this.thickness=St.thickness||null,this.opacity=St.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(St){o.AnnotationEditor.initialize(St,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(St,Nt){switch(St){case a.AnnotationEditorParamsType.INK_THICKNESS:An._defaultThickness=Nt;break;case a.AnnotationEditorParamsType.INK_COLOR:An._defaultColor=Nt;break;case a.AnnotationEditorParamsType.INK_OPACITY:An._defaultOpacity=Nt/100;break}}updateParams(St,Nt){switch(St){case a.AnnotationEditorParamsType.INK_THICKNESS:Qt(this,it,xu).call(this,Nt);break;case a.AnnotationEditorParamsType.INK_COLOR:Qt(this,it,yu).call(this,Nt);break;case a.AnnotationEditorParamsType.INK_OPACITY:Qt(this,it,vu).call(this,Nt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,An._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,An._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(An._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||An._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||An._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??An._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Qt(this,it,qs).call(this),Qt(this,it,Xs).call(this)),this.isAttachedToDOM||(this.parent.add(this),Qt(this,it,rs).call(this)),Qt(this,it,ss).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,tt(this,st).disconnect(),hn(this,st,null),super.remove())}setParent(St){!this.parent&&St?this._uiManager.removeShouldRescale(this):this.parent&&St===null&&this._uiManager.addShouldRescale(this),super.setParent(St)}onScaleChanging(){const[St,Nt]=this.parentDimensions,Gt=this.width*St,Jt=this.height*Nt;this.setDimensions(Gt,Jt)}enableEditMode(){tt(this,bt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",tt(this,pt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",tt(this,pt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){tt(this,bt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),hn(this,bt,!0),this.div.classList.add("disabled"),Qt(this,it,ss).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(St){this._focusEventsAllowed&&(super.focusin(St),this.enableEditMode())}canvasPointerdown(St){St.button!==0||!this.isInEditMode()||tt(this,bt)||(this.setInForeground(),St.preventDefault(),St.type!=="mouse"&&this.div.focus(),Qt(this,it,Eu).call(this,St.offsetX,St.offsetY))}canvasPointermove(St){St.preventDefault(),Qt(this,it,qo).call(this,St.offsetX,St.offsetY)}canvasPointerup(St){St.preventDefault(),Qt(this,it,Xo).call(this,St)}canvasPointerleave(St){Qt(this,it,Xo).call(this,St)}get isResizable(){return!this.isEmpty()&&tt(this,bt)}render(){if(this.div)return this.div;let St,Nt;this.width&&(St=this.x,Nt=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Tn=>{var Zt;return(Zt=this.div)==null?void 0:Zt.setAttribute("aria-label",Tn)});const[Gt,Jt,vn,Sn]=Qt(this,it,bu).call(this);if(this.setAt(Gt,Jt,0,0),this.setDims(vn,Sn),Qt(this,it,qs).call(this),this.width){const[Tn,Zt]=this.parentDimensions;this.setAspectRatio(this.width*Tn,this.height*Zt),this.setAt(St*Tn,Nt*Zt,this.width*Tn,this.height*Zt),hn(this,nt,!0),Qt(this,it,rs).call(this),this.setDims(this.width*Tn,this.height*Zt),Qt(this,it,Br).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Qt(this,it,Xs).call(this),this.div}setDimensions(St,Nt){const Gt=Math.round(St),Jt=Math.round(Nt);if(tt(this,gt)===Gt&&tt(this,ot)===Jt)return;hn(this,gt,Gt),hn(this,ot,Jt),this.canvas.style.visibility="hidden";const[vn,Sn]=this.parentDimensions;this.width=St/vn,this.height=Nt/Sn,this.fixAndSetPosition(),tt(this,bt)&&Qt(this,it,Yo).call(this,St,Nt),Qt(this,it,rs).call(this),Qt(this,it,Br).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(St,Nt,Gt){var Qn,ar,dr;if(St instanceof c.InkAnnotationElement)return null;const Jt=super.deserialize(St,Nt,Gt);Jt.thickness=St.thickness,Jt.color=a.Util.makeHexColor(...St.color),Jt.opacity=St.opacity;const[vn,Sn]=Jt.pageDimensions,Tn=Jt.width*vn,Zt=Jt.height*Sn,In=Jt.parentScale,Dn=St.thickness/2;hn(Jt,bt,!0),hn(Jt,gt,Math.round(Tn)),hn(Jt,ot,Math.round(Zt));const{paths:rr,rect:Zn,rotation:or}=St;for(let{bezier:Rn}of rr){Rn=Qt(Qn=An,Pt,Cu).call(Qn,Rn,Zn,or);const zt=[];Jt.paths.push(zt);let cn=In*(Rn[0]-Dn),On=In*(Rn[1]-Dn);for(let jn=2,Ot=Rn.length;jn<Ot;jn+=6){const _n=In*(Rn[jn]-Dn),Mn=In*(Rn[jn+1]-Dn),$n=In*(Rn[jn+2]-Dn),Jn=In*(Rn[jn+3]-Dn),Un=In*(Rn[jn+4]-Dn),Dt=In*(Rn[jn+5]-Dn);zt.push([[cn,On],[_n,Mn],[$n,Jn],[Un,Dt]]),cn=Un,On=Dt}const ir=Qt(this,Pt,Ru).call(this,zt);Jt.bezierPath2D.push(ir)}const Wn=Qt(ar=Jt,it,Jo).call(ar);return hn(Jt,_e,Math.max(o.AnnotationEditor.MIN_SIZE,Wn[2]-Wn[0])),hn(Jt,$,Math.max(o.AnnotationEditor.MIN_SIZE,Wn[3]-Wn[1])),Qt(dr=Jt,it,Yo).call(dr,Tn,Zt),Jt}serialize(){if(this.isEmpty())return null;const St=this.getRect(0,0),Nt=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:Nt,thickness:this.thickness,opacity:this.opacity,paths:Qt(this,it,Tu).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,St),pageIndex:this.pageIndex,rect:St,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};$=new WeakMap,_e=new WeakMap,ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,pt=new WeakMap,yt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakMap,st=new WeakMap,gt=new WeakMap,ot=new WeakMap,mt=new WeakMap,it=new WeakSet,xu=function(St){const Nt=this.thickness;this.addCommands({cmd:()=>{this.thickness=St,Qt(this,it,ss).call(this)},undo:()=>{this.thickness=Nt,Qt(this,it,ss).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},yu=function(St){const Nt=this.color;this.addCommands({cmd:()=>{this.color=St,Qt(this,it,Br).call(this)},undo:()=>{this.color=Nt,Qt(this,it,Br).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},vu=function(St){St/=100;const Nt=this.opacity;this.addCommands({cmd:()=>{this.opacity=St,Qt(this,it,Br).call(this)},undo:()=>{this.opacity=Nt,Qt(this,it,Br).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},bu=function(){const{parentRotation:St,parentDimensions:[Nt,Gt]}=this;switch(St){case 90:return[0,Gt,Gt,Nt];case 180:return[Nt,Gt,Nt,Gt];case 270:return[Nt,0,Gt,Nt];default:return[0,0,Nt,Gt]}},Go=function(){const{ctx:St,color:Nt,opacity:Gt,thickness:Jt,parentScale:vn,scaleFactor:Sn}=this;St.lineWidth=Jt*vn/Sn,St.lineCap="round",St.lineJoin="round",St.miterLimit=10,St.strokeStyle=`${Nt}${(0,j.opacityToHex)(Gt)}`},Eu=function(St,Nt){this.canvas.addEventListener("contextmenu",h.noContextMenu),this.canvas.addEventListener("pointerleave",tt(this,ut)),this.canvas.addEventListener("pointermove",tt(this,ct)),this.canvas.addEventListener("pointerup",tt(this,ht)),this.canvas.removeEventListener("pointerdown",tt(this,pt)),this.isEditing=!0,tt(this,nt)||(hn(this,nt,!0),Qt(this,it,rs).call(this),this.thickness||(this.thickness=An._defaultThickness),this.color||(this.color=An._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=An._defaultOpacity)),this.currentPath.push([St,Nt]),hn(this,et,!1),Qt(this,it,Go).call(this),hn(this,mt,()=>{Qt(this,it,Su).call(this),tt(this,mt)&&window.requestAnimationFrame(tt(this,mt))}),window.requestAnimationFrame(tt(this,mt))},qo=function(St,Nt){const[Gt,Jt]=this.currentPath.at(-1);if(this.currentPath.length>1&&St===Gt&&Nt===Jt)return;const vn=this.currentPath;let Sn=tt(this,yt);if(vn.push([St,Nt]),hn(this,et,!0),vn.length<=2){Sn.moveTo(...vn[0]),Sn.lineTo(St,Nt);return}vn.length===3&&(hn(this,yt,Sn=new Path2D),Sn.moveTo(...vn[0])),Qt(this,it,Au).call(this,Sn,...vn.at(-3),...vn.at(-2),St,Nt)},_u=function(){if(this.currentPath.length===0)return;const St=this.currentPath.at(-1);tt(this,yt).lineTo(...St)},wu=function(St,Nt){hn(this,mt,null),St=Math.min(Math.max(St,0),this.canvas.width),Nt=Math.min(Math.max(Nt,0),this.canvas.height),Qt(this,it,qo).call(this,St,Nt),Qt(this,it,_u).call(this);let Gt;if(this.currentPath.length!==1)Gt=Qt(this,it,ku).call(this);else{const Zt=[St,Nt];Gt=[[Zt,Zt.slice(),Zt.slice(),Zt]]}const Jt=tt(this,yt),vn=this.currentPath;this.currentPath=[],hn(this,yt,new Path2D);const Sn=()=>{this.allRawPaths.push(vn),this.paths.push(Gt),this.bezierPath2D.push(Jt),this.rebuild()},Tn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Qt(this,it,qs).call(this),Qt(this,it,Xs).call(this)),Qt(this,it,ss).call(this))};this.addCommands({cmd:Sn,undo:Tn,mustExec:!0})},Su=function(){if(!tt(this,et))return;hn(this,et,!1);const St=Math.ceil(this.thickness*this.parentScale),Nt=this.currentPath.slice(-3),Gt=Nt.map(Sn=>Sn[0]),Jt=Nt.map(Sn=>Sn[1]);Math.min(...Gt)-St,Math.max(...Gt)+St,Math.min(...Jt)-St,Math.max(...Jt)+St;const{ctx:vn}=this;vn.save(),vn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Sn of this.bezierPath2D)vn.stroke(Sn);vn.stroke(tt(this,yt)),vn.restore()},Au=function(St,Nt,Gt,Jt,vn,Sn,Tn){const Zt=(Nt+Jt)/2,In=(Gt+vn)/2,Dn=(Jt+Sn)/2,rr=(vn+Tn)/2;St.bezierCurveTo(Zt+2*(Jt-Zt)/3,In+2*(vn-In)/3,Dn+2*(Jt-Dn)/3,rr+2*(vn-rr)/3,Dn,rr)},ku=function(){const St=this.currentPath;if(St.length<=2)return[[St[0],St[0],St.at(-1),St.at(-1)]];const Nt=[];let Gt,[Jt,vn]=St[0];for(Gt=1;Gt<St.length-2;Gt++){const[Zn,or]=St[Gt],[Wn,Qn]=St[Gt+1],ar=(Zn+Wn)/2,dr=(or+Qn)/2,Rn=[Jt+2*(Zn-Jt)/3,vn+2*(or-vn)/3],zt=[ar+2*(Zn-ar)/3,dr+2*(or-dr)/3];Nt.push([[Jt,vn],Rn,zt,[ar,dr]]),[Jt,vn]=[ar,dr]}const[Sn,Tn]=St[Gt],[Zt,In]=St[Gt+1],Dn=[Jt+2*(Sn-Jt)/3,vn+2*(Tn-vn)/3],rr=[Zt+2*(Sn-Zt)/3,In+2*(Tn-In)/3];return Nt.push([[Jt,vn],Dn,rr,[Zt,In]]),Nt},Br=function(){if(this.isEmpty()){Qt(this,it,Ys).call(this);return}Qt(this,it,Go).call(this);const{canvas:St,ctx:Nt}=this;Nt.setTransform(1,0,0,1,0,0),Nt.clearRect(0,0,St.width,St.height),Qt(this,it,Ys).call(this);for(const Gt of this.bezierPath2D)Nt.stroke(Gt)},Xo=function(St){this.canvas.removeEventListener("pointerleave",tt(this,ut)),this.canvas.removeEventListener("pointermove",tt(this,ct)),this.canvas.removeEventListener("pointerup",tt(this,ht)),this.canvas.addEventListener("pointerdown",tt(this,pt)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",h.noContextMenu)},10),Qt(this,it,wu).call(this,St.offsetX,St.offsetY),this.addToAnnotationStorage(),this.setInBackground()},qs=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(St=>{var Nt;return(Nt=this.canvas)==null?void 0:Nt.setAttribute("aria-label",St)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Xs=function(){hn(this,st,new ResizeObserver(St=>{const Nt=St[0].contentRect;Nt.width&&Nt.height&&this.setDimensions(Nt.width,Nt.height)})),tt(this,st).observe(this.div)},rs=function(){if(!tt(this,nt))return;const[St,Nt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*St),this.canvas.height=Math.ceil(this.height*Nt),Qt(this,it,Ys).call(this)},Yo=function(St,Nt){const Gt=Qt(this,it,Qs).call(this),Jt=(St-Gt)/tt(this,_e),vn=(Nt-Gt)/tt(this,$);this.scaleFactor=Math.min(Jt,vn)},Ys=function(){const St=Qt(this,it,Qs).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+St,this.translationY*this.scaleFactor+St)},Pt=new WeakSet,Ru=function(St){const Nt=new Path2D;for(let Gt=0,Jt=St.length;Gt<Jt;Gt++){const[vn,Sn,Tn,Zt]=St[Gt];Gt===0&&Nt.moveTo(...vn),Nt.bezierCurveTo(Sn[0],Sn[1],Tn[0],Tn[1],Zt[0],Zt[1])}return Nt},Qo=function(St,Nt,Gt){const[Jt,vn,Sn,Tn]=Nt;switch(Gt){case 0:for(let Zt=0,In=St.length;Zt<In;Zt+=2)St[Zt]+=Jt,St[Zt+1]=Tn-St[Zt+1];break;case 90:for(let Zt=0,In=St.length;Zt<In;Zt+=2){const Dn=St[Zt];St[Zt]=St[Zt+1]+Jt,St[Zt+1]=Dn+vn}break;case 180:for(let Zt=0,In=St.length;Zt<In;Zt+=2)St[Zt]=Sn-St[Zt],St[Zt+1]+=vn;break;case 270:for(let Zt=0,In=St.length;Zt<In;Zt+=2){const Dn=St[Zt];St[Zt]=Sn-St[Zt+1],St[Zt+1]=Tn-Dn}break;default:throw new Error("Invalid rotation")}return St},Cu=function(St,Nt,Gt){const[Jt,vn,Sn,Tn]=Nt;switch(Gt){case 0:for(let Zt=0,In=St.length;Zt<In;Zt+=2)St[Zt]-=Jt,St[Zt+1]=Tn-St[Zt+1];break;case 90:for(let Zt=0,In=St.length;Zt<In;Zt+=2){const Dn=St[Zt];St[Zt]=St[Zt+1]-vn,St[Zt+1]=Dn-Jt}break;case 180:for(let Zt=0,In=St.length;Zt<In;Zt+=2)St[Zt]=Sn-St[Zt],St[Zt+1]-=vn;break;case 270:for(let Zt=0,In=St.length;Zt<In;Zt+=2){const Dn=St[Zt];St[Zt]=Tn-St[Zt+1],St[Zt+1]=Sn-Dn}break;default:throw new Error("Invalid rotation")}return St},Tu=function(St,Nt,Gt,Jt){var In,Dn;const vn=[],Sn=this.thickness/2,Tn=St*Nt+Sn,Zt=St*Gt+Sn;for(const rr of this.paths){const Zn=[],or=[];for(let Wn=0,Qn=rr.length;Wn<Qn;Wn++){const[ar,dr,Rn,zt]=rr[Wn],cn=St*ar[0]+Tn,On=St*ar[1]+Zt,ir=St*dr[0]+Tn,jn=St*dr[1]+Zt,Ot=St*Rn[0]+Tn,_n=St*Rn[1]+Zt,Mn=St*zt[0]+Tn,$n=St*zt[1]+Zt;Wn===0&&(Zn.push(cn,On),or.push(cn,On)),Zn.push(ir,jn,Ot,_n,Mn,$n),or.push(ir,jn),Wn===Qn-1&&or.push(Mn,$n)}vn.push({bezier:Qt(In=An,Pt,Qo).call(In,Zn,Jt,this.rotation),points:Qt(Dn=An,Pt,Qo).call(Dn,or,Jt,this.rotation)})}return vn},Jo=function(){let St=1/0,Nt=-1/0,Gt=1/0,Jt=-1/0;for(const vn of this.paths)for(const[Sn,Tn,Zt,In]of vn){const Dn=a.Util.bezierBoundingBox(...Sn,...Tn,...Zt,...In);St=Math.min(St,Dn[0]),Gt=Math.min(Gt,Dn[1]),Nt=Math.max(Nt,Dn[2]),Jt=Math.max(Jt,Dn[3])}return[St,Gt,Nt,Jt]},Qs=function(){return tt(this,bt)?Math.ceil(this.thickness*this.parentScale):0},ss=function(St=!1){if(this.isEmpty())return;if(!tt(this,bt)){Qt(this,it,Br).call(this);return}const Nt=Qt(this,it,Jo).call(this),Gt=Qt(this,it,Qs).call(this);hn(this,_e,Math.max(o.AnnotationEditor.MIN_SIZE,Nt[2]-Nt[0])),hn(this,$,Math.max(o.AnnotationEditor.MIN_SIZE,Nt[3]-Nt[1]));const Jt=Math.ceil(Gt+tt(this,_e)*this.scaleFactor),vn=Math.ceil(Gt+tt(this,$)*this.scaleFactor),[Sn,Tn]=this.parentDimensions;this.width=Jt/Sn,this.height=vn/Tn,this.setAspectRatio(Jt,vn);const Zt=this.translationX,In=this.translationY;this.translationX=-Nt[0],this.translationY=-Nt[1],Qt(this,it,rs).call(this),Qt(this,it,Br).call(this),hn(this,gt,Jt),hn(this,ot,vn),this.setDims(Jt,vn);const Dn=St?Gt/this.scaleFactor/2:0;this.translate(Zt-this.translationX-Dn,In-this.translationY-Dn)},dn(An,Pt),xr(An,"_defaultColor",null),xr(An,"_defaultOpacity",1),xr(An,"_defaultThickness",1),xr(An,"_type","ink");let b=An;s.InkEditor=b},(e,s,i)=>{var b,$,_e,ct,ut,ht,pt,yt,bt,et,nt,bs,Es,Js,Zo,Pu,ju,xl,Zs,Du;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var a=i(1),o=i(4),c=i(6),h=i(29);const wt=class wt extends o.AnnotationEditor{constructor(Kt){super({...Kt,name:"stampEditor"});dn(this,nt);dn(this,b,null);dn(this,$,null);dn(this,_e,null);dn(this,ct,null);dn(this,ut,null);dn(this,ht,null);dn(this,pt,null);dn(this,yt,null);dn(this,bt,!1);dn(this,et,!1);hn(this,ct,Kt.bitmapUrl),hn(this,ut,Kt.bitmapFile)}static initialize(Kt){o.AnnotationEditor.initialize(Kt)}static get supportedTypes(){const Kt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",Kt.map(Yt=>`image/${Yt}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Kt){return this.supportedTypes.includes(Kt)}static paste(Kt,Yt){Yt.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:Kt.getAsFile()})}remove(){var Kt,Yt;tt(this,$)&&(hn(this,b,null),this._uiManager.imageManager.deleteId(tt(this,$)),(Kt=tt(this,ht))==null||Kt.remove(),hn(this,ht,null),(Yt=tt(this,pt))==null||Yt.disconnect(),hn(this,pt,null)),super.remove()}rebuild(){if(!this.parent){tt(this,$)&&Qt(this,nt,Js).call(this);return}super.rebuild(),this.div!==null&&(tt(this,$)&&Qt(this,nt,Js).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(tt(this,_e)||tt(this,b)||tt(this,ct)||tt(this,ut))}get isResizable(){return!0}render(){if(this.div)return this.div;let Kt,Yt;if(this.width&&(Kt=this.x,Yt=this.y),super.render(),this.div.hidden=!0,tt(this,b)?Qt(this,nt,Zo).call(this):Qt(this,nt,Js).call(this),this.width){const[Ht,Ut]=this.parentDimensions;this.setAt(Kt*Ht,Yt*Ut,this.width*Ht,this.height*Ut)}return this.div}static deserialize(Kt,Yt,Ht){if(Kt instanceof h.StampAnnotationElement)return null;const Ut=super.deserialize(Kt,Yt,Ht),{rect:At,bitmapUrl:Ft,bitmapId:Xt,isSvg:kt,accessibilityData:rt}=Kt;Xt&&Ht.imageManager.isValidId(Xt)?hn(Ut,$,Xt):hn(Ut,ct,Ft),hn(Ut,bt,kt);const[at,Et]=Ut.pageDimensions;return Ut.width=(At[2]-At[0])/at,Ut.height=(At[3]-At[1])/Et,rt&&(Ut.altTextData=rt),Ut}serialize(Kt=!1,Yt=null){if(this.isEmpty())return null;const Ht={annotationType:a.AnnotationEditorType.STAMP,bitmapId:tt(this,$),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:tt(this,bt),structTreeParentId:this._structTreeParentId};if(Kt)return Ht.bitmapUrl=Qt(this,nt,Zs).call(this,!0),Ht.accessibilityData=this.altTextData,Ht;const{decorative:Ut,altText:At}=this.altTextData;if(!Ut&&At&&(Ht.accessibilityData={type:"Figure",alt:At}),Yt===null)return Ht;Yt.stamps||(Yt.stamps=new Map);const Ft=tt(this,bt)?(Ht.rect[2]-Ht.rect[0])*(Ht.rect[3]-Ht.rect[1]):null;if(!Yt.stamps.has(tt(this,$)))Yt.stamps.set(tt(this,$),{area:Ft,serialized:Ht}),Ht.bitmap=Qt(this,nt,Zs).call(this,!1);else if(tt(this,bt)){const Xt=Yt.stamps.get(tt(this,$));Ft>Xt.area&&(Xt.area=Ft,Xt.serialized.bitmap.close(),Xt.serialized.bitmap=Qt(this,nt,Zs).call(this,!1))}return Ht}};b=new WeakMap,$=new WeakMap,_e=new WeakMap,ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,pt=new WeakMap,yt=new WeakMap,bt=new WeakMap,et=new WeakMap,nt=new WeakSet,bs=function(Kt,Yt=!1){if(!Kt){this.remove();return}hn(this,b,Kt.bitmap),Yt||(hn(this,$,Kt.id),hn(this,bt,Kt.isSvg)),Qt(this,nt,Zo).call(this)},Es=function(){hn(this,_e,null),this._uiManager.enableWaiting(!1),tt(this,ht)&&this.div.focus()},Js=function(){if(tt(this,$)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(tt(this,$)).then(Yt=>Qt(this,nt,bs).call(this,Yt,!0)).finally(()=>Qt(this,nt,Es).call(this));return}if(tt(this,ct)){const Yt=tt(this,ct);hn(this,ct,null),this._uiManager.enableWaiting(!0),hn(this,_e,this._uiManager.imageManager.getFromUrl(Yt).then(Ht=>Qt(this,nt,bs).call(this,Ht)).finally(()=>Qt(this,nt,Es).call(this)));return}if(tt(this,ut)){const Yt=tt(this,ut);hn(this,ut,null),this._uiManager.enableWaiting(!0),hn(this,_e,this._uiManager.imageManager.getFromFile(Yt).then(Ht=>Qt(this,nt,bs).call(this,Ht)).finally(()=>Qt(this,nt,Es).call(this)));return}const Kt=document.createElement("input");Kt.type="file",Kt.accept=wt.supportedTypesStr,hn(this,_e,new Promise(Yt=>{Kt.addEventListener("change",async()=>{if(!Kt.files||Kt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Ht=await this._uiManager.imageManager.getFromFile(Kt.files[0]);Qt(this,nt,bs).call(this,Ht)}Yt()}),Kt.addEventListener("cancel",()=>{this.remove(),Yt()})}).finally(()=>Qt(this,nt,Es).call(this))),Kt.click()},Zo=function(){const{div:Kt}=this;let{width:Yt,height:Ht}=tt(this,b);const[Ut,At]=this.pageDimensions,Ft=.75;if(this.width)Yt=this.width*Ut,Ht=this.height*At;else if(Yt>Ft*Ut||Ht>Ft*At){const at=Math.min(Ft*Ut/Yt,Ft*At/Ht);Yt*=at,Ht*=at}const[Xt,kt]=this.parentDimensions;this.setDims(Yt*Xt/Ut,Ht*kt/At),this._uiManager.enableWaiting(!1);const rt=hn(this,ht,document.createElement("canvas"));Kt.append(rt),Kt.hidden=!1,Qt(this,nt,xl).call(this,Yt,Ht),Qt(this,nt,Du).call(this),tt(this,et)||(this.parent.addUndoableEditor(this),hn(this,et,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Pu=function(Kt,Yt){var Ft;const[Ht,Ut]=this.parentDimensions;this.width=Kt/Ht,this.height=Yt/Ut,this.setDims(Kt,Yt),(Ft=this._initialOptions)!=null&&Ft.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,tt(this,yt)!==null&&clearTimeout(tt(this,yt)),hn(this,yt,setTimeout(()=>{hn(this,yt,null),Qt(this,nt,xl).call(this,Kt,Yt)},200))},ju=function(Kt,Yt){const{width:Ht,height:Ut}=tt(this,b);let At=Ht,Ft=Ut,Xt=tt(this,b);for(;At>2*Kt||Ft>2*Yt;){const kt=At,rt=Ft;At>2*Kt&&(At=At>=16384?Math.floor(At/2)-1:Math.ceil(At/2)),Ft>2*Yt&&(Ft=Ft>=16384?Math.floor(Ft/2)-1:Math.ceil(Ft/2));const at=new OffscreenCanvas(At,Ft);at.getContext("2d").drawImage(Xt,0,0,kt,rt,0,0,At,Ft),Xt=at.transferToImageBitmap()}return Xt},xl=function(Kt,Yt){Kt=Math.ceil(Kt),Yt=Math.ceil(Yt);const Ht=tt(this,ht);if(!Ht||Ht.width===Kt&&Ht.height===Yt)return;Ht.width=Kt,Ht.height=Yt;const Ut=tt(this,bt)?tt(this,b):Qt(this,nt,ju).call(this,Kt,Yt),At=Ht.getContext("2d");At.filter=this._uiManager.hcmFilter,At.drawImage(Ut,0,0,Ut.width,Ut.height,0,0,Kt,Yt)},Zs=function(Kt){if(Kt){if(tt(this,bt)){const Ut=this._uiManager.imageManager.getSvgUrl(tt(this,$));if(Ut)return Ut}const Yt=document.createElement("canvas");return{width:Yt.width,height:Yt.height}=tt(this,b),Yt.getContext("2d").drawImage(tt(this,b),0,0),Yt.toDataURL()}if(tt(this,bt)){const[Yt,Ht]=this.pageDimensions,Ut=Math.round(this.width*Yt*c.PixelsPerInch.PDF_TO_CSS_UNITS),At=Math.round(this.height*Ht*c.PixelsPerInch.PDF_TO_CSS_UNITS),Ft=new OffscreenCanvas(Ut,At);return Ft.getContext("2d").drawImage(tt(this,b),0,0,tt(this,b).width,tt(this,b).height,0,0,Ut,At),Ft.transferToImageBitmap()}return structuredClone(tt(this,b))},Du=function(){hn(this,pt,new ResizeObserver(Kt=>{const Yt=Kt[0].contentRect;Yt.width&&Yt.height&&Qt(this,nt,Pu).call(this,Yt.width,Yt.height)})),tt(this,pt).observe(this.div)},xr(wt,"_type","stamp");let j=wt;s.StampEditor=j}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var s=__webpack_module_cache__[e];if(s!==void 0)return s.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return h.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return j.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return b.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return $.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var s=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),h=__w_pdfjs_require__(5),j=__w_pdfjs_require__(29),b=__w_pdfjs_require__(14),$=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker="/estate/assets/pdf.worker-CQRGPEDQ.js";pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const MAX_FILE_SIZE=10*1024*1024,formatBytes$1=e=>{if(!e)return"0 B";const s=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1),a=e/1024**i;return`${i===0?a.toFixed(0):a.toFixed(1)} ${s[i]}`},formatDateTime=e=>e?new Date(e).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"Unknown date",parseTags=e=>e.split(",").map(s=>s.trim()).filter(Boolean),iconForDocument=e=>e.contentType.includes("pdf")?"":e.contentType.startsWith("image/")?"":e.contentType.includes("text")?"":"",DocumentPreviewModal=({doc:e,onClose:s,onDownload:i})=>{const a=reactExports.useRef(null),[o,c]=reactExports.useState(null),[h,j]=reactExports.useState(null),[b,$]=reactExports.useState(!1),[_e,ct]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!e)return;c(null),j(null),ct(null),$(!1);let ut=null,ht=!1,pt=null;return e.contentType.startsWith("image/")?(ut=URL.createObjectURL(e.file),c(ut)):e.contentType.includes("pdf")?(async()=>{$(!0);try{const bt=await e.file.arrayBuffer();if(ht)return;pt=pdfExports.getDocument({data:bt});const et=await pt.promise;if(ht)return;const nt=await et.getPage(1);if(ht)return;const st=nt.getViewport({scale:1}),ot=Math.min(2,600/st.width),mt=nt.getViewport({scale:ot}),it=a.current;if(!it)return;const dt=it.getContext("2d");if(!dt)return;it.height=mt.height,it.width=mt.width,await nt.render({canvasContext:dt,viewport:mt}).promise}catch(bt){console.error(bt),ht||ct("Unable to render PDF preview")}finally{ht||$(!1)}})():e.contentType.includes("text")||e.contentType==="text/plain"?(async()=>{try{const bt=await e.file.text();ht||j(bt.slice(0,4e3))}catch(bt){console.error(bt),ht||ct("Unable to load text preview")}})():ct("Preview not available for this file type."),()=>{ht=!0,ut&&URL.revokeObjectURL(ut),pt&&pt.destroy()}},[e]),e?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-30 flex items-center justify-center bg-slate-900/60 px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-white p-6 shadow-xl",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4 flex flex-wrap items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:e.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:[e.contentType||"Unknown type","  ",formatBytes$1(e.size)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>i(e),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Download"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:s,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Close"})]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-[70vh] overflow-auto",children:e.contentType.startsWith("image/")&&o?jsxRuntimeExports.jsx("img",{src:o,alt:e.title||"Document preview",className:"mx-auto max-h-[60vh] rounded-lg object-contain"}):e.contentType.includes("pdf")?_e?jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:_e}):jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("canvas",{ref:a,className:"mx-auto w-full max-w-full rounded-lg border border-slate-200 bg-slate-50"}),b&&jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-slate-500",children:"Loading preview"})]}):e.contentType.includes("text")||e.contentType==="text/plain"?_e?jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:_e}):h!==null?jsxRuntimeExports.jsx("pre",{className:"whitespace-pre-wrap rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:h}):jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Loading preview"}):jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:_e??"Preview not available for this file type."})})]})}):null},Documents=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState([]),[o,c]=reactExports.useState(null),[h,j]=reactExports.useState(""),[b,$]=reactExports.useState(""),[_e,ct]=reactExports.useState(""),[ut,ht]=reactExports.useState(null),[pt,yt]=reactExports.useState(null),[bt,et]=reactExports.useState(!1),[nt,st]=reactExports.useState(""),[gt,ot]=reactExports.useState("all"),[mt,it]=reactExports.useState(null),[dt,ft]=reactExports.useState(null),[Rt,xt]=reactExports.useState(null),wt=reactExports.useRef(null),[jt]=useSearchParams(),sn=useLocation(),Kt=useNavigate(),{activeEstateId:Yt}=useEstate();reactExports.useEffect(()=>{let rt=!0,at;return at=liveQuery(()=>db.documents.where("estateId").equals(Yt).toArray()).subscribe({next:Et=>{if(!rt)return;const Ct=[...Et].sort((Pt,It)=>new Date(It.created_at).getTime()-new Date(Pt.created_at).getTime());s(Ct)},error:Et=>{console.error(Et),rt&&yt("Unable to load documents")}}),()=>{rt=!1,at==null||at.unsubscribe()}},[Yt]),reactExports.useEffect(()=>{let rt=!0,at;return at=liveQuery(()=>db.tasks.where("estateId").equals(Yt).toArray()).subscribe({next:Et=>{if(!rt)return;const Ct=[...Et].sort((Pt,It)=>new Date(Pt.due_date).getTime()-new Date(It.due_date).getTime());a(Ct)},error:Et=>{console.error(Et)}}),()=>{rt=!1,at==null||at.unsubscribe()}},[Yt]),reactExports.useEffect(()=>{const rt=jt.get("highlight");rt&&ft(rt)},[jt]),reactExports.useEffect(()=>{const rt=sn.state;if(!(rt!=null&&rt.startUpload))return;ht(null);const at=wt.current;if(at){if(typeof at.showPicker=="function")try{at.showPicker()}catch(Et){console.error(Et),at.click()}else at.click();at.focus()}Kt(sn.pathname+sn.search,{replace:!0})},[sn,Kt]),reactExports.useEffect(()=>{if(!dt||typeof window>"u")return;if(!e.some(at=>at.id===dt)){ft(null);return}const rt=document.getElementById(`doc-${dt}`);if(rt){rt.scrollIntoView({behavior:"smooth",block:"center"});const at=window.setTimeout(()=>ft(null),4e3);return()=>window.clearTimeout(at)}},[dt,e]);const Ht=reactExports.useMemo(()=>{const rt=new Set;return e.forEach(at=>at.tags.forEach(Et=>rt.add(Et))),Array.from(rt).sort((at,Et)=>at.localeCompare(Et))},[e]),Ut=reactExports.useMemo(()=>{const rt=nt.toLowerCase().trim();return e.filter(at=>{var Pt;if(gt!=="all"&&!at.tags.includes(gt))return!1;if(!rt)return!0;const Et=[at.title,at.contentType,...at.tags].filter(Boolean).join(" ").toLowerCase(),Ct=(Pt=i.find(It=>It.id===at.taskId))==null?void 0:Pt.title.toLowerCase();return Et.includes(rt)||!!Ct&&Ct.includes(rt)})},[e,gt,nt,i]),At=rt=>{var Et;const at=((Et=rt.target.files)==null?void 0:Et[0])??null;if(c(at),ht(null),at){const Ct=at.name.replace(/\.[^.]+$/,"");j(Ct)}},Ft=async rt=>{if(rt.preventDefault(),!o){ht("Select a file to upload");return}if(o.size>MAX_FILE_SIZE){ht("File must be 10 MB or smaller");return}ht(null),yt(null),et(!0);try{await createDocument({file:o,title:h.trim()||o.name,tags:parseTags(b),estateId:Yt,taskId:_e||null}),c(null),j(""),$(""),ct(""),wt.current&&(wt.current.value="")}catch(at){console.error(at),ht("Unable to upload document")}finally{et(!1)}},Xt=rt=>{const at=URL.createObjectURL(rt.file),Et=document.createElement("a");Et.href=at,Et.download=rt.title||"document",document.body.appendChild(Et),Et.click(),Et.remove(),URL.revokeObjectURL(at)},kt=async(rt,at)=>{yt(null),xt(rt.id);try{at?await linkDocumentToTask(rt.id,at):await unlinkDocumentFromTask(rt.id)}catch(Et){console.error(Et),yt("Unable to update document link")}finally{xt(null)}};return jsxRuntimeExports.jsxs("section",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Documents"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Upload, organize, and preview estate planning documents. Files are stored locally in your browser for privacy."})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upload a document"}),jsxRuntimeExports.jsxs("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:Ft,children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-file",className:"text-sm font-medium text-slate-700",children:"File (PDF, JPG, PNG, TXT  max 10 MB)"}),jsxRuntimeExports.jsx("input",{id:"document-file",name:"document-file",type:"file",accept:".pdf,.png,.jpg,.jpeg,.txt",ref:wt,onChange:At,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-title",className:"text-sm font-medium text-slate-700",children:"Title"}),jsxRuntimeExports.jsx("input",{id:"document-title",name:"document-title",value:h,onChange:rt=>j(rt.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-tags",className:"text-sm font-medium text-slate-700",children:"Tags (comma separated)"}),jsxRuntimeExports.jsx("input",{id:"document-tags",name:"document-tags",value:b,onChange:rt=>$(rt.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"document-task",className:"text-sm font-medium text-slate-700",children:"Link to task (optional)"}),jsxRuntimeExports.jsxs("select",{id:"document-task",name:"document-task",value:_e,onChange:rt=>ct(rt.target.value),className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"",children:"No linked task"}),i.map(rt=>jsxRuntimeExports.jsx("option",{value:rt.id,children:rt.title},rt.id))]})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:bt,className:"rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:bt?"Uploading":"Upload document"}),ut&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:ut})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-[200px]",children:jsxRuntimeExports.jsx("input",{type:"search",value:nt,onChange:rt=>st(rt.target.value),placeholder:"Search by title, tags, or task",className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})}),jsxRuntimeExports.jsxs("select",{value:gt,onChange:rt=>ot(rt.target.value),className:"rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All tags"}),Ht.map(rt=>jsxRuntimeExports.jsxs("option",{value:rt,children:["#",rt]},rt))]})]}),pt&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:pt}),Ut.length===0?jsxRuntimeExports.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white p-10 text-center text-sm text-slate-500",children:jsxRuntimeExports.jsx("p",{children:"No documents found. Upload a file or adjust your filters."})}):jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:Ut.map(rt=>{const at=i.find(Ct=>Ct.id===rt.taskId),Et=dt===rt.id;return jsxRuntimeExports.jsxs("article",{id:`doc-${rt.id}`,className:`flex h-full flex-col justify-between rounded-2xl border bg-white p-5 shadow-sm transition ${Et?"border-primary-300 ring-2 ring-primary-200":"border-slate-200 hover:border-primary-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:iconForDocument(rt)}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"truncate text-base font-semibold text-slate-900",children:rt.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",formatDateTime(rt.created_at)]})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:[rt.contentType||"Unknown type","  ",formatBytes$1(rt.size)]}),rt.tags.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 text-xs font-medium",children:rt.tags.map(Ct=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>ot(Ct),className:"rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:["#",Ct]},`${rt.id}-${Ct}`))}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Linked task"}),jsxRuntimeExports.jsxs("select",{value:rt.taskId??"",onChange:Ct=>kt(rt,Ct.target.value),disabled:Rt===rt.id,className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"",children:"No linked task"}),i.map(Ct=>jsxRuntimeExports.jsx("option",{value:Ct.id,children:Ct.title},Ct.id))]}),at&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Linked to ",at.title]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>it(rt),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Preview"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Xt(rt),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Download"})]})]},rt.id)})}),jsxRuntimeExports.jsx(DocumentPreviewModal,{doc:mt,onClose:()=>it(null),onDownload:Xt})]})},MAX_ENTRY_LENGTH=1e4,formatDate=e=>{const s=new Date(e);return Number.isNaN(s.valueOf())?"Unknown date":s.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},Journal=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(!0),[o,c]=reactExports.useState(""),[h,j]=reactExports.useState(""),[b,$]=reactExports.useState(null),[_e,ct]=reactExports.useState(null),[ut,ht]=reactExports.useState({}),pt=reactExports.useRef(null),yt=useLocation(),bt=useNavigate(),{activeEstateId:et}=useEstate(),nt=reactExports.useMemo(()=>MAX_ENTRY_LENGTH-h.length,[h.length]),st=reactExports.useCallback(async()=>{try{const ft=await getJournalEntries(et);s(ft)}catch(ft){console.error(ft)}finally{a(!1)}},[et]);reactExports.useEffect(()=>{a(!0),st()},[st]),reactExports.useEffect(()=>{var Rt;const ft=yt.state;ft!=null&&ft.focusNewEntry&&(ct(null),c(""),j(""),$(null),(Rt=pt.current)==null||Rt.focus(),bt(yt.pathname+yt.search,{replace:!0}))},[yt,bt]);const gt=()=>{c(""),j(""),ct(null),$(null)},ot=async ft=>{ft.preventDefault();const Rt=o.trim(),xt=h.trim();if(!Rt){$("Title is required.");return}if(!xt){$("Write something in the journal entry before saving.");return}if(xt.length>MAX_ENTRY_LENGTH){$(`Journal entries are limited to ${MAX_ENTRY_LENGTH.toLocaleString()} characters.`);return}_e?await updateJournalEntry(_e,{title:Rt,body:xt}):await createJournalEntry({title:Rt,body:xt,estateId:et}),gt(),await st()},mt=ft=>{ct(ft.id),c(ft.title),j(ft.body),$(null)},it=async ft=>{window.confirm("Remove this journal entry? This cannot be undone.")&&(await deleteJournalEntry(ft),ht(xt=>{const wt={...xt};return delete wt[ft],wt}),await st())},dt=ft=>{ht(Rt=>({...Rt,[ft]:!Rt[ft]}))};return jsxRuntimeExports.jsxs("section",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Journal"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Chronicle milestones, conversations, and insights to keep the family aligned."})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ot,className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"journal-title",className:"text-sm font-medium text-slate-700",children:"Title"}),jsxRuntimeExports.jsx("input",{id:"journal-title",type:"text",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:"Entry title",value:o,onChange:ft=>{c(ft.target.value),b&&$(null)},maxLength:160,required:!0,ref:pt})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"journal-body",className:"text-sm font-medium text-slate-700",children:"Entry"}),jsxRuntimeExports.jsx("textarea",{id:"journal-body",className:"min-h-[160px] w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:"Capture milestones, reflections, or next steps...",value:h,onChange:ft=>{j(ft.target.value.slice(0,MAX_ENTRY_LENGTH)),b&&$(null)},maxLength:MAX_ENTRY_LENGTH}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[jsxRuntimeExports.jsxs("span",{children:[nt.toLocaleString()," characters remaining"]}),_e?jsxRuntimeExports.jsx("span",{children:"Editing existing entry"}):jsxRuntimeExports.jsx("span",{children:"New entry"})]})]}),b?jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600",children:b}):null,jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-lg bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700",children:_e?"Update entry":"Save entry"}),_e?jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm font-medium text-slate-600 hover:text-slate-900",onClick:gt,children:"Cancel"}):null]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:i?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Loading journal entries"}):e.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Start documenting the journeynew entries will appear here in newest-first order."}):e.map(ft=>{const Rt=ut[ft.id],xt=Rt?ft.body:ft.body.length>280?`${ft.body.slice(0,280)}`:ft.body;return jsxRuntimeExports.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-primary-200 hover:shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:formatDate(ft.created_at)}),jsxRuntimeExports.jsx("h2",{className:"mt-1 text-lg font-semibold text-slate-900",children:ft.title})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>mt(ft),className:"font-medium text-primary-600 hover:text-primary-700",children:"Edit"}),jsxRuntimeExports.jsx("span",{className:"text-slate-300","aria-hidden":"true",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>it(ft.id),className:"font-medium text-red-600 hover:text-red-700",children:"Delete"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed text-slate-600 whitespace-pre-wrap",children:xt}),ft.body.length>280?jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm font-medium text-primary-600 hover:text-primary-700",onClick:()=>dt(ft.id),children:Rt?"Show less":"Read more"}):null]},ft.id)})})]})};function randomBytes(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return nodeCrypto.randomBytes(e)}catch{}throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative")}function genSaltSync(e,s){if(e=e||GENSALT_DEFAULT_LOG2_ROUNDS,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof s);e<4?e=4:e>31&&(e=31);var i=[];return i.push("$2b$"),e<10&&i.push("0"),i.push(e.toString()),i.push("$"),i.push(base64_encode(randomBytes(BCRYPT_SALT_LEN),BCRYPT_SALT_LEN)),i.join("")}function hashSync(e,s){if(typeof s>"u"&&(s=GENSALT_DEFAULT_LOG2_ROUNDS),typeof s=="number"&&(s=genSaltSync(s)),typeof e!="string"||typeof s!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof s);return _hash(e,s)}function safeStringCompare(e,s){for(var i=e.length^s.length,a=0;a<e.length;++a)i|=e.charCodeAt(a)^s.charCodeAt(a);return i===0}function compareSync(e,s){if(typeof e!="string"||typeof s!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof s);return s.length!==60?!1:safeStringCompare(hashSync(e,s.substring(0,s.length-31)),s)}typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"&&scheduler.postTask.bind(scheduler);function utf8Length(e){for(var s=0,i=0,a=0;a<e.length;++a)i=e.charCodeAt(a),i<128?s+=1:i<2048?s+=2:(i&64512)===55296&&(e.charCodeAt(a+1)&64512)===56320?(++a,s+=4):s+=3;return s}function utf8Array(e){for(var s=0,i,a,o=new Array(utf8Length(e)),c=0,h=e.length;c<h;++c)i=e.charCodeAt(c),i<128?o[s++]=i:i<2048?(o[s++]=i>>6|192,o[s++]=i&63|128):(i&64512)===55296&&((a=e.charCodeAt(c+1))&64512)===56320?(i=65536+((i&1023)<<10)+(a&1023),++c,o[s++]=i>>18|240,o[s++]=i>>12&63|128,o[s++]=i>>6&63|128,o[s++]=i&63|128):(o[s++]=i>>12|224,o[s++]=i>>6&63|128,o[s++]=i&63|128);return o}var BASE64_CODE="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),BASE64_INDEX=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function base64_encode(e,s){var i=0,a=[],o,c;if(s<=0||s>e.length)throw Error("Illegal len: "+s);for(;i<s;){if(o=e[i++]&255,a.push(BASE64_CODE[o>>2&63]),o=(o&3)<<4,i>=s){a.push(BASE64_CODE[o&63]);break}if(c=e[i++]&255,o|=c>>4&15,a.push(BASE64_CODE[o&63]),o=(c&15)<<2,i>=s){a.push(BASE64_CODE[o&63]);break}c=e[i++]&255,o|=c>>6&3,a.push(BASE64_CODE[o&63]),a.push(BASE64_CODE[c&63])}return a.join("")}function base64_decode(e,s){for(var i=0,a=e.length,o=0,c=[],h,j,b,$,_e,ct;i<a-1&&o<s&&(ct=e.charCodeAt(i++),h=ct<BASE64_INDEX.length?BASE64_INDEX[ct]:-1,ct=e.charCodeAt(i++),j=ct<BASE64_INDEX.length?BASE64_INDEX[ct]:-1,!(h==-1||j==-1||(_e=h<<2>>>0,_e|=(j&48)>>4,c.push(String.fromCharCode(_e)),++o>=s||i>=a)||(ct=e.charCodeAt(i++),b=ct<BASE64_INDEX.length?BASE64_INDEX[ct]:-1,b==-1)||(_e=(j&15)<<4>>>0,_e|=(b&60)>>2,c.push(String.fromCharCode(_e)),++o>=s||i>=a)));)ct=e.charCodeAt(i++),$=ct<BASE64_INDEX.length?BASE64_INDEX[ct]:-1,_e=(b&3)<<6>>>0,_e|=$,c.push(String.fromCharCode(_e)),++o;var ut=[];for(i=0;i<o;i++)ut.push(c[i].charCodeAt(0));return ut}var BCRYPT_SALT_LEN=16,GENSALT_DEFAULT_LOG2_ROUNDS=10,BLOWFISH_NUM_ROUNDS=16,MAX_EXECUTION_TIME=100,P_ORIG=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],S_ORIG=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],C_ORIG=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function _encipher(e,s,i,a){var o,c=e[s],h=e[s+1];return c^=i[0],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[1],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[2],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[3],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[4],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[5],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[6],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[7],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[8],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[9],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[10],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[11],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[12],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[13],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[14],o=a[c>>>24],o+=a[256|c>>16&255],o^=a[512|c>>8&255],o+=a[768|c&255],h^=o^i[15],o=a[h>>>24],o+=a[256|h>>16&255],o^=a[512|h>>8&255],o+=a[768|h&255],c^=o^i[16],e[s]=h^i[BLOWFISH_NUM_ROUNDS+1],e[s+1]=c,e}function _streamtoword(e,s){for(var i=0,a=0;i<4;++i)a=a<<8|e[s]&255,s=(s+1)%e.length;return{key:a,offp:s}}function _key(e,s,i){for(var a=0,o=[0,0],c=s.length,h=i.length,j,b=0;b<c;b++)j=_streamtoword(e,a),a=j.offp,s[b]=s[b]^j.key;for(b=0;b<c;b+=2)o=_encipher(o,0,s,i),s[b]=o[0],s[b+1]=o[1];for(b=0;b<h;b+=2)o=_encipher(o,0,s,i),i[b]=o[0],i[b+1]=o[1]}function _ekskey(e,s,i,a){for(var o=0,c=[0,0],h=i.length,j=a.length,b,$=0;$<h;$++)b=_streamtoword(s,o),o=b.offp,i[$]=i[$]^b.key;for(o=0,$=0;$<h;$+=2)b=_streamtoword(e,o),o=b.offp,c[0]^=b.key,b=_streamtoword(e,o),o=b.offp,c[1]^=b.key,c=_encipher(c,0,i,a),i[$]=c[0],i[$+1]=c[1];for($=0;$<j;$+=2)b=_streamtoword(e,o),o=b.offp,c[0]^=b.key,b=_streamtoword(e,o),o=b.offp,c[1]^=b.key,c=_encipher(c,0,i,a),a[$]=c[0],a[$+1]=c[1]}function _crypt(e,s,i,a,o){var c=C_ORIG.slice(),h=c.length,j;if(i<4||i>31)throw j=Error("Illegal number of rounds (4-31): "+i),j;if(s.length!==BCRYPT_SALT_LEN)throw j=Error("Illegal salt length: "+s.length+" != "+BCRYPT_SALT_LEN),j;i=1<<i>>>0;var b,$,_e=0,ct;typeof Int32Array=="function"?(b=new Int32Array(P_ORIG),$=new Int32Array(S_ORIG)):(b=P_ORIG.slice(),$=S_ORIG.slice()),_ekskey(s,e,b,$);function ut(){if(_e<i)for(var pt=Date.now();_e<i&&(_e=_e+1,_key(e,b,$),_key(s,b,$),!(Date.now()-pt>MAX_EXECUTION_TIME)););else{for(_e=0;_e<64;_e++)for(ct=0;ct<h>>1;ct++)_encipher(c,ct<<1,b,$);var yt=[];for(_e=0;_e<h;_e++)yt.push((c[_e]>>24&255)>>>0),yt.push((c[_e]>>16&255)>>>0),yt.push((c[_e]>>8&255)>>>0),yt.push((c[_e]&255)>>>0);return yt}}for(var ht;;)if(typeof(ht=ut())<"u")return ht||[]}function _hash(e,s,i,a){var o;if(typeof e!="string"||typeof s!="string")throw o=Error("Invalid string / salt: Not a string"),o;var c,h;if(s.charAt(0)!=="$"||s.charAt(1)!=="2")throw o=Error("Invalid salt version: "+s.substring(0,2)),o;if(s.charAt(2)==="$")c="\0",h=3;else{if(c=s.charAt(2),c!=="a"&&c!=="b"&&c!=="y"||s.charAt(3)!=="$")throw o=Error("Invalid salt revision: "+s.substring(2,4)),o;h=4}if(s.charAt(h+2)>"$")throw o=Error("Missing salt rounds"),o;var j=parseInt(s.substring(h,h+1),10)*10,b=parseInt(s.substring(h+1,h+2),10),$=j+b,_e=s.substring(h+3,h+25);e+=c>="a"?"\0":"";var ct=utf8Array(e),ut=base64_decode(_e,BCRYPT_SALT_LEN);function ht(pt){var yt=[];return yt.push("$2"),c>="a"&&yt.push(c),yt.push("$"),$<10&&yt.push("0"),yt.push($.toString()),yt.push("$"),yt.push(base64_encode(ut,ut.length)),yt.push(base64_encode(pt,C_ORIG.length*4-1)),yt.join("")}return ht(_crypt(ct,ut,$))}const VALID_USERNAME="matt",PASSWORD_HASH="$2b$12$k06H0pTAlXNVyy3DMhdPU.8tb6ZBiIPIi4iX9/9.Vdg7yQZm2cDce",SESSION_STORAGE_KEY="estate_session_token",AuthContext=reactExports.createContext(void 0),generateSessionToken=()=>{var e;return typeof window<"u"&&((e=window.crypto)!=null&&e.randomUUID)?window.crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,10)}`},AuthProvider=({children:e})=>{const[s,i]=reactExports.useState(()=>{try{return localStorage.getItem(SESSION_STORAGE_KEY)}catch(h){return console.warn("Unable to read session from storage",h),null}}),a=reactExports.useCallback((h,j)=>{if(h.trim().toLowerCase()!==VALID_USERNAME)throw new Error("Invalid credentials");if(!compareSync(j,PASSWORD_HASH))throw new Error("Invalid credentials");const _e=generateSessionToken();try{localStorage.setItem(SESSION_STORAGE_KEY,_e)}catch(ct){console.warn("Unable to persist session token",ct)}i(_e)},[]),o=reactExports.useCallback(()=>{try{localStorage.removeItem(SESSION_STORAGE_KEY)}catch(h){console.warn("Unable to clear session token",h)}i(null)},[]),c=reactExports.useMemo(()=>({isAuthenticated:!!s,login:a,logout:o}),[a,o,s]);return jsxRuntimeExports.jsx(AuthContext.Provider,{value:c,children:e})},useAuth=()=>{const e=reactExports.useContext(AuthContext);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Login=()=>{const e=useNavigate(),{isAuthenticated:s,login:i}=useAuth(),[a,o]=reactExports.useState(""),[c,h]=reactExports.useState(""),[j,b]=reactExports.useState(null);reactExports.useEffect(()=>{s&&e("/dashboard",{replace:!0})},[s,e]);const $=_e=>{_e.preventDefault();try{i(a,c),e("/dashboard",{replace:!0})}catch(ct){console.error(ct),b("Invalid username or password. Please try again.")}};return jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-xl space-y-6 rounded-2xl bg-white p-8 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Sign in"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Access your estate planning tools and stay on top of upcoming tasks."})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:$,children:[j?jsxRuntimeExports.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:j}):null,jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-left",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-700",htmlFor:"username",children:"Username"}),jsxRuntimeExports.jsx("input",{id:"username",name:"username",type:"text",required:!0,autoComplete:"username",value:a,onChange:_e=>{o(_e.target.value),j&&b(null)},className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:"Enter your username"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-left",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-700",htmlFor:"password",children:"Password"}),jsxRuntimeExports.jsx("input",{id:"password",type:"password",required:!0,autoComplete:"current-password",value:c,onChange:_e=>{h(_e.target.value),j&&b(null)},className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-base text-slate-900 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:""})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full rounded-lg bg-primary-500 px-4 py-2 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-200 focus:ring-offset-2",children:"Continue"})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-slate-500",children:"Demo access only. Use the provided credentials to explore the app."})]})},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-xl space-y-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-primary-600",children:"404"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Page not found"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"The page you are looking for doesn't exist or has been moved."})]}),jsxRuntimeExports.jsx(Link,{to:"/dashboard",className:"inline-flex items-center justify-center rounded-lg bg-primary-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-600",children:"Go to dashboard"})]}),STORAGE_KEY="estate_setup_v1",loadEstateSetup=()=>{if(typeof window>"u")return null;try{const e=window.localStorage.getItem(STORAGE_KEY);if(!e)return null;const s=JSON.parse(e);return{dateOfDeath:s.dateOfDeath,lettersGranted:s.lettersGranted,firstPublication:s.firstPublication||null,estate1041Required:typeof s.estate1041Required=="boolean"?s.estate1041Required:!0}}catch(e){return console.warn("Unable to parse estate setup from storage",e),null}},saveEstateSetup=e=>{if(!(typeof window>"u"))try{window.localStorage.setItem(STORAGE_KEY,JSON.stringify(e))}catch(s){console.warn("Unable to persist estate setup",s)}},clearEstateSetup=()=>{if(!(typeof window>"u"))try{window.localStorage.removeItem(STORAGE_KEY)}catch(e){console.warn("Unable to clear estate setup",e)}},parseDateInput=e=>{const[s,i,a]=e.split("-").map(Number);return new Date(Date.UTC(s,i-1,a,12))},addMonths=(e,s)=>{const i=new Date(e.getTime()),a=i.getUTCDate();i.setUTCDate(1),i.setUTCMonth(i.getUTCMonth()+s);const o=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth()+1,0)).getUTCDate();return i.setUTCDate(Math.min(a,o)),i},isSetupComplete=e=>!!(e!=null&&e.dateOfDeath&&(e!=null&&e.lettersGranted)),prepareSetupDates=e=>({dateOfDeath:parseDateInput(e.dateOfDeath),lettersGranted:parseDateInput(e.lettersGranted),firstPublication:e.firstPublication?parseDateInput(e.firstPublication):null}),nextApril15=e=>{const s=e.getUTCFullYear()+1;return new Date(Date.UTC(s,3,15,12))},computeDeadlines=e=>{const{dateOfDeath:s,lettersGranted:i,firstPublication:a}=prepareSetupDates(e),o=addMonths(s,9),c=addMonths(s,3),h=[{key:"noticeToHeirs",title:"Notice to heirs",dueDate:addMonths(i,3),tag:"Legal",description:"Serve statutory notice to heirs; file certification within 10 days after notices are sent."},{key:"inventory",title:"File estate inventory",dueDate:addMonths(s,9),tag:"Inventory"},{key:"inheritanceTax",title:"PA inheritance tax return (REV-1500)",dueDate:o,tag:"Tax",description:`Standard payment deadline. Early payment discount window ends ${c.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}.`},{key:"final1040",title:"Final Form 1040",dueDate:nextApril15(s),tag:"Tax"},{key:"estate1041",title:"Estate Form 1041",dueDate:e.estate1041Required?nextApril15(s):null,tag:"Tax",optional:!0,description:"Confirm whether an estate income tax return is required. Mark as N/A if the estate has no filing obligation."},{key:"creditorCheck",title:"Creditor claims check",dueDate:a?addMonths(a,12):null,tag:"Administrative",description:a?void 0:"Enter the first publication date to calculate the creditor claim deadline."},{key:"statusReport",title:"Status report to court",dueDate:addMonths(s,24),tag:"Administrative"}];return h.push({key:"inheritanceTaxEarlyWindow",title:"REV-1500 early payment window ends",dueDate:c,tag:"Tax",description:"Last day to submit payment for the 5% Pennsylvania discount."}),h},formatDeadlineDate=e=>e?e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"N/A",EXPORT_VERSION=2,blobToDataUrl=e=>new Promise((s,i)=>{const a=new FileReader;a.onload=()=>{typeof a.result=="string"?s(a.result):i(new Error("Unable to read file data"))},a.onerror=()=>i(a.error??new Error("Unable to read file data")),a.readAsDataURL(e)}),dataUrlToBlob=e=>{const[s,i]=e.split(",");if(!s||!i)throw new Error("Invalid file data");const a=s.indexOf(":"),o=s.indexOf(";"),c=a!==-1&&o!==-1?s.slice(a+1,o):"application/octet-stream";if(s.includes(";base64")){const h=atob(i),j=new Uint8Array(h.length);for(let b=0;b<h.length;b+=1)j[b]=h.charCodeAt(b);return new Blob([j],{type:c})}return new Blob([decodeURIComponent(i)],{type:c})},exportWorkspaceData=async()=>{const[e,s,i]=await Promise.all([db.tasks.toArray(),db.documents.toArray(),db.journalEntries.toArray()]),a=await Promise.all(s.map(async o=>({id:o.id,estateId:o.estateId,title:o.title,tags:o.tags,taskId:o.taskId,contentType:o.contentType,size:o.size,created_at:o.created_at,fileData:await blobToDataUrl(o.file)})));return{version:EXPORT_VERSION,generatedAt:new Date().toISOString(),tasks:e.map(o=>({...o})),documents:a,journalEntries:i.map(o=>({...o})),estateSetup:loadEstateSetup()}},importWorkspaceData=async e=>{if(!e||typeof e!="object")throw new Error("Invalid workspace data");if(e.version>EXPORT_VERSION)throw new Error("Unsupported export version");const s=e.documents.map(o=>{const c=dataUrlToBlob(o.fileData);return{id:o.id,estateId:o.estateId??"mother",title:o.title,tags:o.tags,taskId:o.taskId,contentType:o.contentType,size:c.size,file:c,created_at:o.created_at}}),i=e.tasks.map(o=>({...o,estateId:o.estateId??"mother"})),a=e.journalEntries.map(o=>({...o,estateId:o.estateId??"mother"}));await db.transaction("rw",db.tasks,db.documents,db.journalEntries,async()=>{await Promise.all([db.tasks.clear(),db.documents.clear(),db.journalEntries.clear()]),await db.tasks.bulkAdd(i),s.length>0&&await db.documents.bulkAdd(s),a.length>0&&await db.journalEntries.bulkAdd(a)}),e.estateSetup?saveEstateSetup(e.estateSetup):clearEstateSetup()},addDays$1=(e,s)=>{const i=new Date(e);return i.setDate(i.getDate()+s),i},createDemoDataset=()=>{const e=new Date,s=b=>b.toISOString(),i={dateOfDeath:s(addDays$1(e,-180)).slice(0,10),lettersGranted:s(addDays$1(e,-150)).slice(0,10),firstPublication:s(addDays$1(e,-140)).slice(0,10),estate1041Required:!0},a=[{id:"task-demo-letters",estateId:"mother",title:"Share letters testamentary with advisors",description:"Send certified copies of the letters testamentary to the investment advisor and accountant so they can speak with custodians on behalf of the estate.",due_date:s(addDays$1(e,3)),status:"in-progress",priority:"med",tags:["Legal","Administrative"],docIds:["doc-demo-letters"],created_at:s(addDays$1(e,-20)),updated_at:s(addDays$1(e,-2))},{id:"task-demo-inventory",estateId:"mother",title:"Compile preliminary inventory of assets",description:"Collect latest statements and valuations for cash accounts, securities, real estate, and personal property to inform the court inventory.",due_date:s(addDays$1(e,-4)),status:"not-started",priority:"high",tags:["Inventory"],docIds:["doc-demo-inventory"],created_at:s(addDays$1(e,-28)),updated_at:s(addDays$1(e,-10))},{id:"task-demo-tax",estateId:"mother",title:"Schedule estimated tax payments",description:"Coordinate with the accountant to project fiduciary income tax and ensure estimated payments are calendared ahead of Form 1041 deadlines.",due_date:s(addDays$1(e,18)),status:"not-started",priority:"med",tags:["Tax"],docIds:[],created_at:s(addDays$1(e,-16)),updated_at:s(addDays$1(e,-16))},{id:"task-demo-distributions",estateId:"mother",title:"Document interim family meeting",description:"Summarize distribution priorities, questions, and follow-ups after the latest family status meeting.",due_date:s(addDays$1(e,32)),status:"done",priority:"low",tags:["Administrative"],docIds:[],created_at:s(addDays$1(e,-8)),updated_at:s(addDays$1(e,-1))}],o=new Blob(["Accountant and investment advisor copied on letters testamentary. Include authority to transact with custodians for all brokerage accounts. Ensure copies remain on file with date stamps."],{type:"text/plain"}),c=new Blob(["Preliminary asset inventory drafted. Outstanding: December bank statements, updated valuation for lake house, personal property photo catalog."],{type:"text/plain"}),h=[{id:"doc-demo-letters",estateId:"mother",title:"Letters testamentary summary",tags:["Legal"],taskId:"task-demo-letters",contentType:"text/plain",size:o.size,file:o,created_at:s(addDays$1(e,-19))},{id:"doc-demo-inventory",estateId:"mother",title:"Inventory working notes",tags:["Inventory"],taskId:"task-demo-inventory",contentType:"text/plain",size:c.size,file:c,created_at:s(addDays$1(e,-15))}],j=[{id:"journal-demo-weekly",estateId:"mother",title:"Weekly status recap",body:"Met with the family to review creditor notices and shared the updated cash flow summary. Need to confirm outstanding medical reimbursements and finalize inventory draft next week.",created_at:s(addDays$1(e,-6))},{id:"journal-demo-notes",estateId:"mother",title:"Questions for counsel",body:"Clarify whether ancillary probate is required for the Colorado property and confirm plan for distributing specific bequests listed in the memorandum.",created_at:s(addDays$1(e,-2))}];return{estateSetup:i,tasks:a,documents:h,journalEntries:j}},resetDemoData=async()=>{const{estateSetup:e,tasks:s,documents:i,journalEntries:a}=createDemoDataset();await db.transaction("rw",db.tasks,db.documents,db.journalEntries,async()=>{await Promise.all([db.tasks.clear(),db.documents.clear(),db.journalEntries.clear()]),await db.tasks.bulkAdd(s),await db.documents.bulkAdd(i),await db.journalEntries.bulkAdd(a)}),saveEstateSetup(e),setActiveEstateId("mother")},toEstateSetup=e=>({dateOfDeath:e.dateOfDeath,lettersGranted:e.lettersGranted,firstPublication:e.firstPublication?e.firstPublication:null,estate1041Required:e.estate1041Required}),defaultFormState={dateOfDeath:"",lettersGranted:"",firstPublication:"",estate1041Required:!0},formatPlanDate=e=>{if(!e)return"Not set";const s=new Date(e);return Number.isNaN(s.valueOf())?e:s.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},Profile=()=>{const[e,s]=reactExports.useState(defaultFormState),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(null),[h,j]=reactExports.useState(!1),[b,$]=reactExports.useState(!1),[_e,ct]=reactExports.useState(null),[ut,ht]=reactExports.useState(null),[pt,yt]=reactExports.useState(null),[bt,et]=reactExports.useState(!1),[nt,st]=reactExports.useState(!1),[gt,ot]=reactExports.useState(!1),mt=reactExports.useRef(null),{activeEstateId:it,estateProfiles:dt,setActiveEstateId:ft,refreshEstateProfiles:Rt}=useEstate(),[xt,wt]=reactExports.useState(!1),[jt,sn]=reactExports.useState(""),[Kt,Yt]=reactExports.useState(null),[Ht,Ut]=reactExports.useState(!1),[At,Ft]=reactExports.useState(null),[Xt,kt]=reactExports.useState(()=>loadSeedVersion()),rt=reactExports.useCallback(()=>{const Vt=loadEstateSetup();s(Vt?{dateOfDeath:Vt.dateOfDeath,lettersGranted:Vt.lettersGranted,firstPublication:Vt.firstPublication||"",estate1041Required:Vt.estate1041Required}:defaultFormState)},[]);reactExports.useEffect(()=>{rt()},[rt]),reactExports.useEffect(()=>{if(!At||typeof window>"u")return;const Vt=window.setTimeout(()=>Ft(null),3500);return()=>window.clearTimeout(Vt)},[At]);const at=reactExports.useMemo(()=>{const Vt=toEstateSetup(e);return isSetupComplete(Vt)?Vt:null},[e]),Et=reactExports.useMemo(()=>at?computeDeadlines(at):[],[at]),Ct=Vt=>{const{name:St,type:Nt}=Vt.target,Gt=Nt==="checkbox"?Vt.target.checked:Vt.target.value;s(Jt=>({...Jt,[St]:Gt})),a(null),c(null),ct(null),ht(null),yt(null)},Pt=Vt=>{saveEstateSetup(Vt),a("Saved estate profile settings."),c(null)},It=Vt=>{if(Vt.preventDefault(),!e.dateOfDeath||!e.lettersGranted){c("Date of death and letters granted date are required.");return}j(!0);try{Pt(toEstateSetup(e))}finally{j(!1)}},Bt=async()=>{if(ct(null),!e.dateOfDeath||!e.lettersGranted){c("Provide required dates before generating the checklist.");return}const Vt=toEstateSetup(e);Pt(Vt);const St=computeDeadlines(Vt).filter(Nt=>Nt.dueDate);if(St.length===0){ct("Nothing to create yetadd more dates above.");return}$(!0);try{const Nt=await db.tasks.where("estateId").equals(it).toArray(),Gt=new Set(Nt.map(Sn=>Sn.title.toLowerCase()));let Jt=0,vn=0;for(const Sn of St){if(Gt.has(Sn.title.toLowerCase())){vn+=1;continue}if(!Sn.dueDate){vn+=1;continue}await createTask({estateId:it,title:Sn.title,description:Sn.description??"",due_date:Sn.dueDate.toISOString(),status:"not-started",priority:"med",tags:[Sn.tag],docIds:[]}),Jt+=1,Gt.add(Sn.title.toLowerCase())}ct(Jt>0?`Generated ${Jt} task${Jt===1?"":"s"}${vn>0?` (skipped ${vn} existing reminder${vn===1?"":"s"})`:""}.`:"All default tasks already exist."),c(null)}catch(Nt){console.error(Nt),c("Unable to generate checklist tasks.")}finally{$(!1)}},Lt=async()=>{ht(null),yt(null),et(!0);try{const Vt=await exportWorkspaceData(),St=new Blob([JSON.stringify(Vt,null,2)],{type:"application/json"}),Nt=URL.createObjectURL(St),Gt=document.createElement("a"),Jt=new Date().toISOString().replace(/[:]/g,"-").split(".")[0];Gt.href=Nt,Gt.download=`estate-workspace-${Jt}.json`,document.body.appendChild(Gt),Gt.click(),Gt.remove(),URL.revokeObjectURL(Nt),ht("Exported workspace data. Check your downloads folder for the JSON file.")}catch(Vt){console.error(Vt),yt("Unable to export workspace data.")}finally{et(!1)}},an=()=>{var Vt;ht(null),yt(null),(Vt=mt.current)==null||Vt.click()},rn=async Vt=>{var Nt;const St=((Nt=Vt.target.files)==null?void 0:Nt[0])??null;if(Vt.target.value="",!!St){st(!0),ht(null),yt(null);try{const Gt=await St.text(),Jt=JSON.parse(Gt);await importWorkspaceData(Jt),rt(),a("Loaded estate profile from imported data."),ct(null),c(null),ht("Imported workspace data successfully.")}catch(Gt){console.error(Gt),yt("Unable to import data. Confirm the file was exported from Estate.")}finally{st(!1)}}},En=async()=>{ot(!0),ht(null),yt(null);try{await resetDemoData(),rt(),a("Loaded demo estate profile."),ct(null),c(null),ht("Demo data restored. Sample tasks, documents, and journal entries are ready to explore.")}catch(Vt){console.error(Vt),yt("Unable to reset demo data.")}finally{ot(!1)}},kn=()=>{Yt(null),sn(""),wt(!0)},An=()=>{Ht||(wt(!1),sn(""),Yt(null))},on=async()=>{if(!jt.trim()){Yt("Paste the plan JSON before importing.");return}Ut(!0),Yt(null);try{const Vt=JSON.parse(jt),St=persistEstatePlan(Vt);await reseedFromPlan(St,{replaceExistingWithSameSeedVersion:!0}),Rt(),kt(St.seedVersion),a(null),ct(null),c(null),ht(null),yt(null),Ft("Plan imported"),wt(!1),sn("")}catch(Vt){console.error(Vt),Yt("Unable to import plan. Confirm the JSON matches the expected structure.")}finally{Ut(!1)}};return jsxRuntimeExports.jsxs("section",{className:"space-y-10",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-widest text-primary-600",children:"Workspace"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Profile & settings"}),jsxRuntimeExports.jsx("p",{className:"max-w-2xl text-sm text-slate-500",children:"Capture key docket dates to personalize reminders and manage local data for the Estate demo workspace."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.05fr_1fr]",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-5",children:[jsxRuntimeExports.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Estate plans"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Switch between estates to view tailored tasks, documents, and guidance."})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:kn,className:"rounded-full border border-primary-200 bg-white px-4 py-2 text-sm font-semibold text-primary-700 transition hover:border-primary-300 hover:bg-primary-50",children:"Import plan"})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:ESTATE_IDS.map(Vt=>{const St=dt[Vt],Nt=Vt===it;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>ft(Vt),"aria-pressed":Nt,className:`rounded-2xl border px-4 py-4 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-400 ${Nt?"border-primary-400 bg-primary-50 shadow-sm shadow-primary-100":"border-slate-200 bg-white hover:border-primary-200 hover:bg-primary-50/70"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-slate-700",children:St.label}),Nt?jsxRuntimeExports.jsx("span",{className:"rounded-full bg-primary-500 px-2 py-0.5 text-xs font-semibold text-white",children:"Active"}):null]}),jsxRuntimeExports.jsxs("dl",{className:"mt-3 space-y-1 text-xs text-slate-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"Decedent"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:St.decedentName||"Not set"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"County"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:St.county?`${St.county} County`:"Not set"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"Date of death"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:formatPlanDate(St.dodISO)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2",children:[jsxRuntimeExports.jsx("dt",{className:"font-medium text-slate-500",children:"Letters"}),jsxRuntimeExports.jsx("dd",{className:"text-right text-slate-700",children:formatPlanDate(St.lettersISO)})]})]})]},Vt)})}),Xt?jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:["Last imported seed version"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-slate-700",children:Xt})]}):null]}),jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Estate timeline"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Enter milestone dates to unlock recommended reminders and populate the checklist with suggested tasks."})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-6",onSubmit:It,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"dateOfDeath",className:"text-sm font-semibold text-slate-700",children:"Date of death"}),jsxRuntimeExports.jsx("input",{id:"dateOfDeath",name:"dateOfDeath",type:"date",required:!0,value:e.dateOfDeath,onChange:Ct,className:"w-full rounded-2xl border border-slate-200 px-4 py-2.5 text-sm shadow-sm transition focus:border-primary-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"lettersGranted",className:"text-sm font-semibold text-slate-700",children:"Letters granted"}),jsxRuntimeExports.jsx("input",{id:"lettersGranted",name:"lettersGranted",type:"date",required:!0,value:e.lettersGranted,onChange:Ct,className:"w-full rounded-2xl border border-slate-200 px-4 py-2.5 text-sm shadow-sm transition focus:border-primary-400"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"firstPublication",className:"text-sm font-semibold text-slate-700",children:"First publication (optional)"}),jsxRuntimeExports.jsx("input",{id:"firstPublication",name:"firstPublication",type:"date",value:e.firstPublication,onChange:Ct,className:"w-full rounded-2xl border border-slate-200 px-4 py-2.5 text-sm shadow-sm transition focus:border-primary-400"})]}),jsxRuntimeExports.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/70 p-4",children:jsxRuntimeExports.jsxs("label",{htmlFor:"estate1041Required",className:"flex items-start gap-3 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{id:"estate1041Required",name:"estate1041Required",type:"checkbox",checked:e.estate1041Required,onChange:Ct,className:"mt-1 h-4 w-4 rounded border-slate-300 text-primary-600"}),jsxRuntimeExports.jsxs("span",{children:["Estate expects to file Form 1041",jsxRuntimeExports.jsx("span",{className:"mt-1 block text-xs text-slate-500",children:"Uncheck if the estate has no fiduciary income tax filing obligation."})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:h,className:"rounded-full bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:h?"Saving":"Save setup"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Bt,disabled:b,className:"rounded-full border border-primary-200 bg-primary-50 px-5 py-2.5 text-sm font-semibold text-primary-700 transition hover:border-primary-300 hover:text-primary-800 disabled:cursor-not-allowed disabled:opacity-70",children:b?"Creating":"Generate default checklist"})]}),i&&jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-600",children:i}),_e&&jsxRuntimeExports.jsx("p",{className:"text-sm text-primary-700",children:_e}),o&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:o})]})]}),jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Workspace data"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Export your tasks, document metadata and files, journal entries, and estate profileor restore the built-in demo content."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"rounded-2xl bg-slate-50/80 p-4 text-sm text-slate-600",children:"Exports are saved as a JSON file that you can re-import later. Imports replace the data currently stored on this device."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Lt,disabled:bt,className:"rounded-full bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:bt?"Preparing export":"Export workspace"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:an,disabled:nt,className:"rounded-full border border-primary-200 bg-white px-5 py-2.5 text-sm font-semibold text-primary-700 transition hover:border-primary-300 hover:bg-primary-50 disabled:cursor-not-allowed disabled:opacity-70",children:nt?"Importing":"Import from file"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:En,disabled:gt,className:"rounded-full border border-slate-300 bg-slate-50 px-5 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-70",children:gt?"Restoring":"Reset demo data"})]}),ut&&jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-600",children:ut}),pt&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:pt})]}),jsxRuntimeExports.jsx("input",{ref:mt,type:"file",accept:"application/json",className:"hidden",onChange:rn})]})]}),jsxRuntimeExports.jsxs("article",{className:"card-surface space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Suggested due dates"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Deadlines adjust automatically based on the dates provided. Generate the checklist to add them as tasks with workstream tags."})]}),Et.length===0?jsxRuntimeExports.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50/80 p-5 text-sm text-slate-500",children:"Add the date of death and letters granted to preview recommended deadlines."}):jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:Et.map(Vt=>jsxRuntimeExports.jsxs("li",{className:"rounded-2xl border border-slate-200 p-4 text-sm shadow-sm transition hover:border-primary-200/70",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-slate-900",children:Vt.title}),jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-primary-600",children:Vt.tag})]}),jsxRuntimeExports.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${Vt.dueDate?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-500"}`,children:formatDeadlineDate(Vt.dueDate)})]}),Vt.description&&jsxRuntimeExports.jsx("p",{className:"mt-3 text-xs leading-relaxed text-slate-500",children:Vt.description}),Vt.optional&&!Vt.dueDate&&jsxRuntimeExports.jsx("p",{className:"mt-3 text-xs font-medium text-amber-600",children:"Marked as not applicable."})]},Vt.key))})]})]}),xt?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-slate-900/60 px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-6 shadow-xl",children:[jsxRuntimeExports.jsxs("header",{className:"mb-4 space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Import estate plan"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Paste the JSON configuration to load profiles, seeded tasks, documents, and guidance into this device."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("textarea",{value:jt,onChange:Vt=>{sn(Vt.target.value),Yt(null)},rows:10,className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 shadow-inner focus:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-200",placeholder:'{"seedVersion":"v2","estateProfiles":{...}}'}),Kt?jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:Kt}):null,jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:An,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-slate-100",disabled:Ht,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:on,disabled:Ht,className:"rounded-full bg-primary-600 px-5 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:Ht?"Importing":"Import"})]})]})]})}):null,At?jsxRuntimeExports.jsx("div",{className:"fixed bottom-24 left-1/2 z-30 -translate-x-1/2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg",children:At}):null]})},priorityStyles={low:"bg-emerald-100 text-emerald-700",med:"bg-amber-100 text-amber-700",high:"bg-rose-100 text-rose-700"},statusLabels={"not-started":"Not started","in-progress":"In progress",done:"Completed"},startOfToday=()=>{const e=new Date;return e.setHours(0,0,0,0),e},addDays=(e,s)=>{const i=new Date(e);return i.setDate(i.getDate()+s),i},toLocalDateInput=e=>{if(!e)return"";const s=new Date(e),i=s.getFullYear(),a=`${s.getMonth()+1}`.padStart(2,"0"),o=`${s.getDate()}`.padStart(2,"0");return`${i}-${a}-${o}`},parseList=e=>e.split(",").map(s=>s.trim()).filter(Boolean),formatDueDate=e=>e?new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"No due date",formatBytes=e=>{if(!e)return"0 B";const s=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1),a=e/1024**i;return`${i===0?a.toFixed(0):a.toFixed(1)} ${s[i]}`},emptyFormState={title:"",description:"",due_date:"",status:"not-started",priority:"med",tags:""},createFormState=e=>e?{title:e.title,description:e.description,due_date:toLocalDateInput(e.due_date),status:e.status,priority:e.priority,tags:e.tags.join(", ")}:{...emptyFormState},Tasks=()=>{const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(!0),[o,c]=reactExports.useState(null),[h,j]=reactExports.useState(!1),[b,$]=reactExports.useState("all"),[_e,ct]=reactExports.useState(!1),[ut,ht]=reactExports.useState({...emptyFormState}),[pt,yt]=reactExports.useState(!1),[bt,et]=reactExports.useState([]),[nt,st]=reactExports.useState(""),[gt,ot]=reactExports.useState(!1),[mt,it]=reactExports.useState(null),dt=useNavigate(),ft=useLocation(),{taskId:Rt}=useParams(),{activeEstateId:xt}=useEstate(),wt=e.find(Lt=>Lt.id===Rt)||null;reactExports.useEffect(()=>{let Lt=!0,an;return(async()=>{try{await seedTasksIfEmpty(),an=liveQuery(()=>db.tasks.where("estateId").equals(xt).toArray()).subscribe({next:En=>{if(!Lt)return;const kn=[...En].sort((An,on)=>new Date(An.due_date).getTime()-new Date(on.due_date).getTime());s(kn),a(!1)},error:En=>{console.error(En),Lt&&(c("Unable to load tasks"),a(!1))}})}catch(En){if(console.error(En),!Lt)return;c("Unable to load tasks"),a(!1)}})(),()=>{Lt=!1,an==null||an.unsubscribe()}},[xt]),reactExports.useEffect(()=>{let Lt=!0,an;return an=liveQuery(()=>db.documents.where("estateId").equals(xt).toArray()).subscribe({next:rn=>{if(!Lt)return;const En=[...rn].sort((kn,An)=>new Date(An.created_at).getTime()-new Date(kn.created_at).getTime());et(En)},error:rn=>{console.error(rn),Lt&&c("Unable to load documents")}}),()=>{Lt=!1,an==null||an.unsubscribe()}},[xt]),reactExports.useEffect(()=>{!Rt||e.some(Lt=>Lt.id===Rt)||dt("/tasks",{replace:!0})},[Rt,e,dt]),reactExports.useEffect(()=>{const Lt=ft.state;Lt!=null&&Lt.startCreate&&(c(null),ht({...emptyFormState}),ct(!0),dt(ft.pathname+ft.search,{replace:!0}))},[ft,dt]);const jt=reactExports.useMemo(()=>{const Lt=new Set;return e.forEach(an=>an.tags.forEach(rn=>Lt.add(rn))),Array.from(Lt).sort((an,rn)=>an.localeCompare(rn))},[e]),sn=reactExports.useMemo(()=>e.filter(Lt=>!(!h&&Lt.status==="done"||b!=="all"&&!Lt.tags.includes(b))),[e,h,b]),Kt=reactExports.useMemo(()=>{if(!wt)return[];const Lt=new Set(wt.docIds);return bt.filter(an=>an.taskId===wt.id||Lt.has(an.id))},[bt,wt]),Yt=reactExports.useMemo(()=>bt.filter(Lt=>!Lt.taskId),[bt]),Ht=Lt=>{dt(`/tasks/${Lt}`)},Ut=Lt=>{const{name:an,value:rn}=Lt.target;ht(En=>({...En,[an]:rn}))},At=()=>{ht({...emptyFormState}),yt(!1)},Ft=async Lt=>{if(Lt.preventDefault(),!ut.title||!ut.due_date){c("Title and due date are required");return}c(null),yt(!0);try{const an=await createTask({estateId:xt,title:ut.title,description:ut.description,due_date:ut.due_date,status:ut.status,priority:ut.priority,tags:parseList(ut.tags)});At(),ct(!1),dt(`/tasks/${an}`)}catch(an){console.error(an),c("Unable to save task"),yt(!1)}},Xt=async Lt=>{if(Lt.preventDefault(),!!wt){if(!ut.title||!ut.due_date){c("Title and due date are required");return}c(null),yt(!0);try{await updateTask(wt.id,{title:ut.title,description:ut.description,due_date:ut.due_date,status:ut.status,priority:ut.priority,tags:parseList(ut.tags)}),yt(!1)}catch(an){console.error(an),c("Unable to update task"),yt(!1)}}},kt=async Lt=>{c(null);try{await deleteTask(Lt),Rt===Lt&&dt("/tasks")}catch(an){console.error(an),c("Unable to delete task")}},rt=async Lt=>{c(null);try{await updateTask(Lt.id,{status:"done"})}catch(an){console.error(an),c("Unable to update task status")}},at=async Lt=>{if(Lt.preventDefault(),!(!wt||!nt)){c(null),ot(!0);try{await linkDocumentToTask(nt,wt.id),st("")}catch(an){console.error(an),c("Unable to link document")}finally{ot(!1)}}},Et=async Lt=>{c(null),it(Lt);try{await unlinkDocumentFromTask(Lt)}catch(an){console.error(an),c("Unable to unlink document")}finally{it(null)}},Ct=()=>{At(),ct(!0),dt("/tasks")},Pt=()=>{wt&&(ht(createFormState(wt)),ct(!1))};reactExports.useEffect(()=>{ht(wt?createFormState(wt):{...emptyFormState}),st("")},[wt]);const It=reactExports.useMemo(()=>startOfToday(),[]),Bt=reactExports.useMemo(()=>addDays(It,7),[It]);return jsxRuntimeExports.jsxs("section",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Tasks"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Track outstanding deliverables, collaborate with your team, and keep estate planning work moving."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"lg:w-1/2",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Ct,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-500",children:"New Task"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>j(Lt=>!Lt),className:`rounded-full border px-4 py-2 text-sm font-medium transition ${h?"border-primary-200 bg-primary-50 text-primary-700":"border-slate-200 text-slate-600 hover:border-primary-200 hover:text-primary-600"}`,children:h?"Hide Completed":"Show Completed"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[jsxRuntimeExports.jsx("label",{htmlFor:"tag-filter",className:"font-medium",children:"Tag"}),jsxRuntimeExports.jsxs("select",{id:"tag-filter",value:b,onChange:Lt=>$(Lt.target.value),className:"rounded-full border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All"}),jt.map(Lt=>jsxRuntimeExports.jsx("option",{value:Lt,children:Lt},Lt))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[i&&jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Loading tasks"}),o&&!i&&jsxRuntimeExports.jsx("p",{className:"text-sm text-rose-600",children:o}),!i&&sn.length===0&&jsxRuntimeExports.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 p-6 text-sm text-slate-500",children:"No tasks match the selected filters yet."}),sn.map(Lt=>{const an=new Date(Lt.due_date),rn=Lt.status!=="done"&&an<It,En=!rn&&Lt.status!=="done"&&an<=Bt;return jsxRuntimeExports.jsx("article",{className:`rounded-2xl border p-5 shadow-sm transition hover:border-primary-200 hover:shadow-md ${Rt===Lt.id?"border-primary-300 bg-primary-50/40":"border-slate-200 bg-white"}`,children:jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Ht(Lt.id),className:"flex w-full flex-col gap-3 text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:Lt.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:statusLabels[Lt.status]})]}),jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${priorityStyles[Lt.priority]}`,children:[Lt.priority==="med"?"Medium":Lt.priority==="low"?"Low":"High"," priority"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium",children:[jsxRuntimeExports.jsxs("span",{className:`rounded-full px-3 py-1 ${rn?"bg-rose-100 text-rose-700":En?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:["Due ",formatDueDate(Lt.due_date)]}),Lt.tags.map(kn=>jsxRuntimeExports.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-slate-600",children:["#",kn]},kn))]})]})},Lt.id)})]})]}),jsxRuntimeExports.jsx("div",{className:"lg:w-1/2",children:jsxRuntimeExports.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:_e?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Create task"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Add a new deliverable to your estate planning pipeline."})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:Ft,children:[jsxRuntimeExports.jsx(TaskFormFields,{formState:ut,submitting:pt,onChange:Ut}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:pt,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:pt?"Saving":"Save task"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{At(),ct(!1)},className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Cancel"})]})]})]}):wt?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("header",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:wt.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-500",children:["Due ",formatDueDate(wt.due_date)]})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(wt.id),className:"text-sm font-medium text-rose-600 transition hover:text-rose-500",children:"Delete"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-medium",children:[jsxRuntimeExports.jsxs("span",{className:`rounded-full px-3 py-1 ${priorityStyles[wt.priority]}`,children:[wt.priority==="med"?"Medium":wt.priority==="low"?"Low":"High"," ","priority"]}),jsxRuntimeExports.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-slate-600",children:statusLabels[wt.status]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-600",children:wt.description||"No description provided yet."}),wt.tags.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 text-xs font-medium text-slate-500",children:wt.tags.map(Lt=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{$(Lt),dt("/tasks")},className:`rounded-full border px-3 py-1 transition hover:border-primary-200 hover:text-primary-600 ${b===Lt?"border-primary-300 bg-primary-50 text-primary-700":"border-slate-200"}`,children:["#",Lt]},Lt))}),Kt.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Linked documents"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:Kt.map(Lt=>jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-200 px-3 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx(Link,{to:`/documents?highlight=${encodeURIComponent(Lt.id)}`,className:"block truncate text-sm font-medium text-primary-600 hover:underline",children:Lt.title||"Untitled document"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500",children:[Lt.contentType.includes("pdf")?"PDF":Lt.contentType.startsWith("image/")?"Image":Lt.contentType.includes("text")?"Text":"Document"," "," ",formatBytes(Lt.size)]})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Et(Lt.id),disabled:mt===Lt.id,className:"text-xs font-medium text-rose-600 transition hover:text-rose-500 disabled:cursor-not-allowed disabled:opacity-60",children:mt===Lt.id?"Unlinking":"Unlink"})]},Lt.id))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Link a document"}),Yt.length>0?jsxRuntimeExports.jsxs("form",{className:"flex flex-wrap items-center gap-2",onSubmit:at,children:[jsxRuntimeExports.jsxs("select",{value:nt,onChange:Lt=>st(Lt.target.value),disabled:gt,className:"min-w-[200px] flex-1 rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select document"}),Yt.map(Lt=>jsxRuntimeExports.jsxs("option",{value:Lt.id,children:[Lt.title||"Untitled document"," (",formatBytes(Lt.size),")"]},Lt.id))]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:!nt||gt,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:gt?"Linking":"Link"})]}):jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"All documents are currently linked. Manage files from the Documents page."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[wt.status!=="done"&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>rt(wt),className:"rounded-full bg-emerald-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-emerald-500",children:"Mark Done"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Pt,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Edit"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dt("/tasks"),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Close"})]}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:Xt,children:[jsxRuntimeExports.jsx(TaskFormFields,{formState:ut,submitting:pt,onChange:Ut}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:pt,className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-500 disabled:cursor-not-allowed disabled:opacity-70",children:pt?"Saving":"Save changes"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ht(createFormState(wt)),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-primary-200 hover:text-primary-600",children:"Reset"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-sm text-slate-500",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Select a task"}),jsxRuntimeExports.jsx("p",{children:"Choose a task from the list to view its details, update progress, or link related documents. Create a new task to capture upcoming work for your estate plan."})]})})})]})]})},TaskFormFields=({formState:e,submitting:s,onChange:i})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"title",className:"text-sm font-medium text-slate-700",children:"Title"}),jsxRuntimeExports.jsx("input",{id:"title",name:"title",required:!0,value:e.title,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"description",className:"text-sm font-medium text-slate-700",children:"Description"}),jsxRuntimeExports.jsx("textarea",{id:"description",name:"description",rows:4,value:e.description,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"due_date",className:"text-sm font-medium text-slate-700",children:"Due date"}),jsxRuntimeExports.jsx("input",{id:"due_date",name:"due_date",type:"date",required:!0,value:e.due_date,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"status",className:"text-sm font-medium text-slate-700",children:"Status"}),jsxRuntimeExports.jsxs("select",{id:"status",name:"status",value:e.status,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"not-started",children:"Not started"}),jsxRuntimeExports.jsx("option",{value:"in-progress",children:"In progress"}),jsxRuntimeExports.jsx("option",{value:"done",children:"Done"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"priority",className:"text-sm font-medium text-slate-700",children:"Priority"}),jsxRuntimeExports.jsxs("select",{id:"priority",name:"priority",value:e.priority,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none",children:[jsxRuntimeExports.jsx("option",{value:"low",children:"Low"}),jsxRuntimeExports.jsx("option",{value:"med",children:"Medium"}),jsxRuntimeExports.jsx("option",{value:"high",children:"High"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{htmlFor:"tags",className:"text-sm font-medium text-slate-700",children:"Tags (comma separated)"}),jsxRuntimeExports.jsx("input",{id:"tags",name:"tags",value:e.tags,disabled:s,onChange:i,className:"w-full rounded-xl border border-slate-200 px-4 py-2 text-sm shadow-sm focus:border-primary-400 focus:outline-none"})]})]})]}),navItems=[{to:"/dashboard",label:"Dashboard"},{to:"/tasks",label:"Tasks"},{to:"/documents",label:"Documents"},{to:"/calendar",label:"Calendar"},{to:"/journal",label:"Journal"},{to:"/profile",label:"Profile"}],Layout=()=>{const e=useNavigate(),s=useLocation(),{logout:i}=useAuth(),{activeEstateId:a}=useEstate(),[o,c]=reactExports.useState(0);reactExports.useEffect(()=>{let j=!0,b;return b=liveQuery(()=>db.tasks.where("estateId").equals(a).toArray()).subscribe({next:$=>{if(!j)return;const _e=new Date;_e.setHours(0,0,0,0);const ct=$.filter(ut=>{if(ut.status==="done")return!1;const ht=new Date(ut.due_date);return Number.isNaN(ht.valueOf())?!1:ht<_e}).length;c(ct)},error:$=>{console.error($)}}),()=>{j=!1,b==null||b.unsubscribe()}},[a]);const h=()=>{i(),e("/login",{replace:!0})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-20 border-b border-slate-200/70 bg-white/80 backdrop-blur",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-4 py-3 md:px-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"rounded-full bg-primary-500/10 p-2 text-lg text-primary-600",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-primary-500",children:"Estate"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Administration Workspace"})]})]}),jsxRuntimeExports.jsxs("nav",{className:"hidden items-center gap-2 md:flex",children:[navItems.map(j=>jsxRuntimeExports.jsx(NavLink,{to:j.to,className:({isActive:b})=>`rounded-full px-4 py-2 text-sm font-medium transition-colors focus-visible:ring-offset-0 ${b?"bg-primary-50 text-primary-700 shadow-inner shadow-primary-200/40":"text-slate-600 hover:bg-primary-50/60 hover:text-primary-600"}`,children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[j.label,j.to==="/tasks"&&o>0?jsxRuntimeExports.jsx("span",{className:"inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full bg-rose-500 px-1.5 text-xs font-semibold text-white",children:o}):null]})},j.to)),jsxRuntimeExports.jsx("button",{type:"button",onClick:h,className:"rounded-full px-4 py-2 text-sm font-semibold text-slate-600 transition-colors hover:bg-rose-50 hover:text-rose-600 focus-visible:ring-offset-0",children:"Logout"})]})]})}),jsxRuntimeExports.jsx("main",{className:"main-shell",children:jsxRuntimeExports.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8 md:px-6 lg:py-12",children:jsxRuntimeExports.jsx("div",{className:"animate-fade-in",children:jsxRuntimeExports.jsx(Outlet,{})},s.pathname)})}),jsxRuntimeExports.jsxs("nav",{className:"bottom-toolbar md:hidden text-xs font-medium text-slate-500",children:[navItems.map(j=>jsxRuntimeExports.jsxs(NavLink,{to:j.to,"aria-label":j.label,className:({isActive:b})=>`flex flex-col items-center gap-1 rounded-2xl px-3 py-2 transition-colors focus-visible:ring-offset-0 ${b?"bg-primary-50 text-primary-600":"text-slate-500 hover:bg-primary-50/70 hover:text-primary-600"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-base",children:""}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[j.label,j.to==="/tasks"&&o>0?jsxRuntimeExports.jsx("span",{className:"inline-flex h-4 min-w-[1rem] items-center justify-center rounded-full bg-rose-500 px-1 text-[0.625rem] font-semibold text-white",children:o}):null]})]},j.to)),jsxRuntimeExports.jsxs("button",{type:"button",onClick:h,"aria-label":"Logout",className:"flex flex-col items-center gap-1 rounded-2xl px-3 py-2 text-slate-500 transition-colors hover:bg-rose-50 hover:text-rose-600 focus-visible:ring-offset-0",children:[jsxRuntimeExports.jsx("span",{className:"text-base",children:""}),"Logout"]})]})]})},RequireAuth=()=>{const{isAuthenticated:e}=useAuth();return e?jsxRuntimeExports.jsx(Outlet,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})},App=()=>jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(RequireAuth,{}),children:jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Navigate,{to:"/dashboard",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsxs(Route,{path:"/tasks",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Tasks,{})}),jsxRuntimeExports.jsx(Route,{path:":taskId",element:jsxRuntimeExports.jsx(Tasks,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/documents",element:jsxRuntimeExports.jsx(Documents,{})}),jsxRuntimeExports.jsx(Route,{path:"/calendar",element:jsxRuntimeExports.jsx(Calendar,{})}),jsxRuntimeExports.jsx(Route,{path:"/journal",element:jsxRuntimeExports.jsx(Journal,{})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(Profile,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})})]});client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/estate",children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(EstateProvider,{children:jsxRuntimeExports.jsx(App,{})})})})}));
